<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="DELETE">
        <active>true</active>
        <description>There are 7 part of the &#13;
kore ai sdk. This is the thrd part of the sdk.  </description>
        <global>false</global>
        <ignore_in_now_experience>false</ignore_in_now_experience>
        <name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</name>
        <script><![CDATA[var KoreGraphAdapter=function(t){function e(e,n){var i=e.data,o=e.columnsInfo,a=e.xAxis,s=e.yAxis,l=e.colorRange,u=e.mainDiv,c=u.substr(1,u.length),f=e.label,p=e.requireLegend;d3.select(u).append("svg").attr("width",n.outerWidth).attr("height",n.outerHeight);var h=d3.select(u+" svg"),d=20,g=40,m=70,v=n.innerWidth,y=n.innerHeight,_=h.append("g").attr("transform","translate("+m+","+d+")");null!=p&&void 0!=p&&0!=p&&(t("#Legend_"+c).remove(),function(e,n,r){var i=d3.scaleOrdinal().range(r),o=e.substr(1,e.length);o=o.replace(/ +/g,"").replace(/#/g,""),t(e).before("<div id='Legend_"+o+"' class='pmd-card-body' style='margin-top:0; margin-bottom:0;'></div>"),Object.keys(n).forEach(function(e){var r=i(e);t("#Legend_"+o).append("<span class='team-graph team1' style='display: inline-block; margin-right:10px;margin-left: 20px;'>        <span style='background:"+r+";width: 10px;height: 10px;display: inline-block;vertical-align: middle;'>&nbsp;</span>        <span title="+n[e].replace(/[ ]/g,"Â ")+" style='padding-top: 0;font-family:Source Sans Pro, sans-serif;font-size: 13px;display: inline;'>"+(n[e].length>10?n[e].slice(0,7)+"...":n[e])+" </span>    </span>")})}(u,o,l));var x=d3.scaleBand().rangeRound([y,0]).paddingInner(.1),w=d3.scaleBand().padding(.05),b=d3.scaleLinear().rangeRound([0,v]),A=d3.scaleOrdinal().range(l),k=Object.keys(o);x.domain(i.map(function(t){return t[s]})),w.domain(k).rangeRound([0,x.bandwidth()]),b.domain([0,d3.max(i,function(t){return d3.max(k,function(e){return t[e]})})]).nice(),maxTicks=10;_.append("g").selectAll("g").data(i).enter().append("g").attr("transform",function(t){return"translate(0,"+x(t[s])+")"}).selectAll("rect").data(function(t,e){return k.map(function(n){return{key:n,value:t[n],index:n+"_"+e+"_"+t[s],dispVal:t[n+"dispVal"]}})}).enter().append("rect").attr("y",function(t){return w(t.key)}).attr("width",function(t){return b(t.value)}).attr("data-index",function(t,e){return t.index}).attr("displayVal",function(t){return t.dispVal}).attr("height",w.bandwidth()).on("mouseover",function(){C.style("display",null)}).on("mouseout",function(){C.style("display","none")}).on("mousemove",function(e){if("block"===t("#myPreviewModal").css("display"))var n=d3.event.pageX-document.querySelector(".chartContainerDiv").getBoundingClientRect().x+10,r=d3.event.pageY-document.querySelector(".chartContainerDiv").getBoundingClientRect().y+10;else n=d3.event.pageX-document.querySelector(u).getBoundingClientRect().x+10,r=d3.event.pageY-document.querySelector(u).getBoundingClientRect().y+10;if(this.attributes.displayVal)var i=this.attributes.displayVal.value;else i=e.value;d3.mouse(this)[0],d3.mouse(this)[1];C.attr("transform","translate("+n+","+r+")"),C.select("text").text(i)}).attr("fill",function(t){return A(t.key)});var E={};E.svg=h,E.cssPrefix="horgroupBar0_",E.data=i,E.keys=k,E.height=y,E.width=v,E.label=f,E.yAxis=s,E.xAxis=a,r.addTooltips(E);var C=h.append("g").attr("class","tooltipHBC").style("display","none");C.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),C.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold"),_.append("g").attr("class","axis").attr("transform","translate(0,"+y+")").call(d3.axisBottom(b).ticks(maxTicks)).append("text").attr("x",v/2).attr("y",.7*g).attr("dx","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),_.append("g").attr("class","axis").call(d3.axisLeft(x).ticks(null,"s")).append("text").attr("x",.4*y*-1).attr("y",.8*m*-1).attr("dy","0.71em").attr("fill","#000").attr("transform","rotate(-90)").attr("font-weight","bold"),_.selectAll(".axis text").attr("class","chart-disp-val"),_.selectAll(".axis line").attr("class","chart-axis-line"),_.selectAll(".axis .domain").classed("chart-axis-line",!0)}var n=function(t){var e=document.getElementById(t),n=0,r=0;if(e){var i=e.getBBox();n=i.width,r=i.height}else console.log("error: getDimensions() "+t+" not found.");return{w:n,h:r}},r={addTooltips:function(t){var e=t.keys,i=t.svg.append("g").selectAll("g").data(t.data).enter().append("g").attr("class",function(e,n){return t.cssPrefix+"tooltips_"+n});tooltips=i.selectAll("g").data(function(n,r){return e.map(function(e){return{key:e,value:n[e],index:e+"_"+r+"_"+n[t.yAxis]}})}).enter().append("g").attr("class",t.cssPrefix+"tooltip").attr("id",function(e,n){return t.cssPrefix+"tooltip"+e.index}).style("opacity",0).append("rect").attr("rx",2).attr("ry",2).attr("x",-2).attr("opacity",.71).style("fill","#000000"),i.selectAll("g").data(function(n,r){return e.map(function(e){return{key:e,value:n[e],index:e+"_"+r+"_"+n[t.yAxis]}})}).append("text").attr("fill",function(t){return"#efefef"}).style("font-size",function(t){return 10}).style("font-family",function(t){return"arial"}).text(function(e,n){var i=t.label.xAxis+":{value}";return r.replacePlaceholders(t,i,n,{value:e.value})}),i.selectAll("g rect").attr("width",function(e,r){return n(t.cssPrefix+"tooltip"+e.index).w+8}).attr("height",function(e,r){return n(t.cssPrefix+"tooltip"+e.index).h+8}).attr("y",function(e,r){return-n(t.cssPrefix+"tooltip"+e.index).h/2+1})},showTooltip:function(t,e){var n=250;r.currentTooltip===e&&(n=1),r.currentTooltip=e,d3.select("#"+t.cssPrefix+"tooltip"+e).transition().duration(n).style("opacity",function(){return 1}),r.moveTooltip(t)},moveTooltip:function(t){d3.selectAll("#"+t.cssPrefix+"tooltip"+r.currentTooltip).attr("transform",function(t){var e=d3.mouse(this.parentNode);return"translate("+(e[0]+4+2)+","+(e[1]-8-2)+")"})},hideTooltip:function(t,e){d3.select("#"+t.cssPrefix+"tooltip"+e).style("opacity",function(){return 0}),d3.select("#"+t.cssPrefix+"tooltip"+r.currentTooltip).attr("transform",function(e,n){return"translate("+(t.width+1e3)+","+(t.height+1e3)+")"})},replacePlaceholders:function(t,e,n,r){return e.replace(/\{(\w+)\}/g,function(t){var e=arguments[1];return r.hasOwnProperty(e)?r[arguments[1]]:arguments[0]})}};return{drawD3Pie:function(e,n,r,i){var o=e,a=3;legendCenterOffset=0,e.message?o=e.message[0].component.payload:(fromWidgets=!0,a=4,legendCenterOffset=-15);for(var s=[],l=0,u=0;u<o.elements.length;u++)s[u]={},s[u].label=o.elements[u].title,s[u].count=o.elements[u].value,s[u].dispVal=o.elements[u].displayValue,o.elements[u].hasOwnProperty("subTitle")&&(s[u].subTitle=o.elements[u].subTitle),l+=Number(s[u].count);var c=0;for(u=0;u<o.elements.length;u++)s[u].percentage=Math.round(s[u].count/l*100),u===o.elements.length-1&&(s[u].percentage=100-c),c+=s[u].percentage;var f=n.width,p=n.height,h=Math.min(f,p)/2-20,d=n.legendRectSize,g=n.legendSpacing,m=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),v=d3.select(r).append("svg").attr("width",f-15).attr("height",p).append("g").attr("class","pieRegular").attr("transform","translate("+(f/a+3)+","+p/2+")"),y=d3.arc().innerRadius(0).outerRadius(h),_=d3.arc().outerRadius(1.05*h).innerRadius(.9*h),x=d3.pie().value(function(t){return t.count}).sort(null),w=d3.select(r).append("div").attr("class","legend-tooltip-pie-chart no-show").attr("transform",function(t){console.log(t)}).on("mouseleave",function(e){w.attr("class","legend-tooltip-pie-chart no-show"),t(".more-legend").removeClass("no-visible")});t(".listTemplateContainer").on("click",function(){t(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var b=(s.length-4)*(d+g+20),A=w.append("svg").attr("width","150").attr("height",b+23),k=d3.select(r).append("div").attr("class","tooltip").style("display","none");k.append("div").attr("class","label"),k.append("div").attr("class","count"),k.append("div").attr("class","percent"),s.forEach(function(t){t.count=+t.count,t.enabled=!0});var E=v.selectAll("path").data(x(s)).enter().append("g").attr("class","arcRegular").append("path").attr("d",y).attr("fill",function(t){return m(t.data.label)}).each(function(t){this._current});E.on("mouseover",function(e){d3.sum(s.map(function(t){return t.enabled?t.count:0})),"block"===t("#myPreviewModal").css("display")?e.data.dispVal?k.select("#myPreviewModal .count").html(e.data.dispVal):k.select("#myPreviewModal .count").html(e.value):e.data.dispVal?k.select(".count").html(e.data.dispVal):k.select(".count").html(e.value),k.style("display","block")}),E.on("mouseout",function(){k.style("display","none")}),E.on("mousemove",function(t){k.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),v.append("g").attr("class","labels"),v.append("g").attr("class","lines"),v.append("g").classed("labels",!0),v.append("g").classed("lines",!0),v.select(".lines").selectAll("polyline").data(x(s)).enter().append("polyline").attr("points",function(t){var e=_.centroid(t);return e[0]=.95*h*(O(t)<Math.PI?1:-1),[y.centroid(t),_.centroid(t),e]}),v.select(".labels").selectAll("text").data(x(s)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(t){return t.data.percentage+"%"}).attr("transform",function(t){var e=_.centroid(t);return e[0]=.95*h*(O(t)<Math.PI?1:-1),"translate("+e+")"}).style("text-anchor",function(t){return O(t)<Math.PI?"start":"end"});var C=d3.select(r).append("div").attr("class","tooltip-legend no-show"),T=A.selectAll(".legend"+window.PieChartCount).data(m.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=d+g+25,r=n*m.domain().length/2;return r=m.domain()<4?n*m.domain().length/2:2*n,"translate(10,"+((e+6)*n-r-135)+")"});T.append("rect").attr("width","7").attr("height","7").style("fill",m).style("stroke",m),T.append("text").attr("x",d+g+4).attr("y",d-g).attr("class","legend-title").text(function(t){return t.length>15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length>15&&(C.attr("class","only-show tooltip-legend"),C.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length>15&&C.attr("class","no-show tooltip-legend")}),T.append("text").attr("x",d+g+4).attr("y",d-g+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e<o.elements.length&&s[e].label!=t;e++);return o.elements[e].hasOwnProperty("subTitle")?o.elements[e].subTitle:s[e].count});var I=v.selectAll(".legend"+window.PieChartCount).data(m.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=-60;for(e=0;e<s.length;e++){if(t==s[e].label){var r=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(r+=15)+","+n+")"}s[e].hasOwnProperty("subTitle")&&""==s[e].subTitle?n+=18:n+=33}});function O(t){return t.startAngle+(t.endAngle-t.startAngle)/2}I.append("rect").attr("width","7").attr("height","7").style("fill",m).style("stroke",m),I.append("text").attr("x",d+g+4).attr("y",d-g).attr("class","legend-title").text(function(t){return t.length>15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length>15&&(C.attr("class","only-show tooltip-legend"),C.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length>15&&C.attr("class","no-show tooltip-legend")}),I.append("text").attr("x",d+g+4).attr("y",d-g+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e<o.elements.length&&s[e].label!=t;e++);return o.elements[e].hasOwnProperty("subTitle")?o.elements[e].subTitle:s[e].count}),m.domain().length>4&&v.data(m.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(e){var n,r=d+g+25,i=(m.domain().length,7*r-2*r-115);try{var o=t(this).parent().siblings(".legend0")[0].getAttribute("transform");n=o.slice(10,o.lastIndexOf(","))}catch(t){n=110}return"translate("+n+","+i+")"}).on("mouseover",function(e){var n=t(this).closest(".listViewTmplContentChild").offset().top,r=t(this).closest(".listViewTmplContentChild").offset().left,i=t(this).offset().top-n-87.5,o=t(this).offset().left-r-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",o).style("top",i),t(this).addClass("no-visible")})},drawD3PieDonut:function(e,n,r,i,o){var a=n.width,s=n.height,l=Math.min(a,s)/2-10,u=[],c=0,f=e,p=3;legendCenterOffset=0,e.message?f=e.message[0].component.payload:(fromWidgets=!0,p=4,legendCenterOffset=-15);for(var h=0;h<f.elements.length;h++)u[h]={},u[h].label=f.elements[h].title,u[h].count=Number(f.elements[h].value),u[h].dispVal=f.elements[h].displayValue,f.elements[h].hasOwnProperty("subTitle")&&(u[h].subTitle=f.elements[h].subTitle),c+=Number(f.elements[h].value);var d=0;for(h=0;h<f.elements.length;h++)u[h].percentage=Math.round(u[h].count/c*100),h===f.elements.length-1&&(u[h].percentage=100-d),d+=u[h].percentage;var g=n.legendRectSize,m=n.legendSpacing,v=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),y=d3.arc().outerRadius(l-10).innerRadius(l-50),_=d3.arc().outerRadius(.9*l).innerRadius(.9*l),x=d3.pie().sort(null).value(function(t){return t.count}),w=d3.select(r).append("div").attr("class","legend-tooltip-pie-chart no-show").on("mouseleave",function(e){w.attr("class","legend-tooltip-pie-chart no-show"),t(".more-legend").removeClass("no-visible")}),b=(u.length-4)*(g+m+20),A=w.append("svg").attr("width","150").attr("height",b+23);t(".listTemplateContainer").on("click",function(){t(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var k=d3.select(r).append("svg").attr("width",a+5).attr("height",s).append("g").attr("transform","translate("+(a/p+13)+","+s/2+")"),E=k.selectAll(".arc").data(x(u)).enter().append("g").attr("class","arc");E.append("path").attr("d",y).style("fill",function(t){return v(t.data.label)});var C=d3.select(r).append("div").attr("class","tooltipDonut").style("display","none");if(C.append("div").attr("class","label"),C.append("div").attr("class","countDonut"),C.append("div").attr("class","percent"),u.forEach(function(t){t.count=+t.count,t.enabled=!0}),k.append("g").attr("class","labels"),k.append("g").attr("class","lines"),k.append("g").classed("labels",!0),k.append("g").classed("lines",!0),k.select(".lines").selectAll("polyline").data(x(u)).enter().append("polyline").attr("points",function(t){var e=_.centroid(t);return e[0]=.95*l*(S(t)<Math.PI?1:-1),[y.centroid(t),_.centroid(t),e]}).style("display",function(t){return 0==t.data.percentage?"none":"block"}),k.select(".labels").selectAll("text").data(x(u)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(t){return t.data.percentage+"%"}).attr("transform",function(t){var e=_.centroid(t);return e[0]=.95*l*(S(t)<Math.PI?1:-1),e[0]=e[0]+10,"translate("+e+")"}).style("text-anchor",function(t){return S(t)<Math.PI?"start":"end"}).style("display",function(t){return 0==t.data.percentage?"none":"block"}),E.on("mouseover",function(e){d3.sum(u.map(function(t){return t.enabled?t.count:0})),"block"===t("#myPreviewModal").css("display")?e.data.dispVal?C.select("#myPreviewModal .countDonut").html(e.data.dispVal):C.select("#myPreviewModal .countDonut").html(e.value):e.data.dispVal?C.select(".countDonut").html(e.data.dispVal):C.select(".countDonut").html(e.value),C.style("display","block")}),E.on("mouseout",function(){C.style("display","none")}),E.on("mousemove",function(t){C.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),"donut_legend"===o||"donut"===o){var T=d3.select(r).append("div").attr("class","tooltip-legend no-show"),I=A.selectAll(".legend"+window.PieChartCount).data(v.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=g+m+25,r=n*v.domain().length/2;return r=v.domain()<5?n*v.domain().length/2:2*n,"translate(10,"+((e+6)*n-r-135)+")"});I.append("rect").attr("width","7").attr("height","7").style("fill",v).style("stroke",v),I.append("text").attr("x",g+m+4).attr("y",g-m).attr("class","legend-title").text(function(t){return t.length>15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length>11&&(T.attr("class","only-show tooltip-legend"),T.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length>15&&T.attr("class","no-show tooltip-legend")}),I.append("text").attr("x",g+m+4).attr("y",g-m+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e<f.elements.length&&u[e].label!=t;e++);return f.elements[e].hasOwnProperty("subTitle")?f.elements[e].subTitle:f.elements[e].value});var O=k.selectAll(".legend"+window.PieChartCount).data(v.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=-60;for(e=0;e<u.length;e++){if(t==u[e].label){var r=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(r+=15)+","+n+")"}u[e].hasOwnProperty("subTitle")&&""==u[e].subTitle?n+=18:n+=33}});O.append("rect").attr("width","7").attr("height","7").style("fill",v).style("stroke",v),O.append("text").attr("x",g+m+4).attr("y",g-m).attr("class","legend-title").text(function(t){return t.length>15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length>15&&(T.attr("class","only-show tooltip-legend"),T.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length>15&&T.attr("class","no-show tooltip-legend")}),O.append("text").attr("x",g+m+4).attr("y",g-m+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e<f.elements.length&&u[e].label!=t;e++);return f.elements[e].hasOwnProperty("subTitle")?f.elements[e].subTitle:u[e].count}),v.domain().length>4&&k.data(v.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(e){var n,r=g+m+25,i=(v.domain().length,7*r-2*r-115);try{var o=t(this).parent().siblings(".legend0")[0].getAttribute("transform");n=o.slice(10,o.lastIndexOf(","))}catch(t){n=110}return"translate("+n+","+i+")"}).on("mouseover",function(e){var n=t(this).closest(".listViewTmplContentChild").offset().top,r=t(this).closest(".listViewTmplContentChild").offset().left,i=t(this).offset().top-n-87.5,o=t(this).offset().left-r-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",o).style("top",i),t(this).addClass("no-visible")})}function S(t){return t.startAngle+(t.endAngle-t.startAngle)/2}},drawD3barChart:function(t,e,n,r){var i=d3.select(n).append("svg").attr("width",e.outerWidth).attr("height",e.outerHeight),o=20,a=35,s=e.innerWidth,l=e.innerHeight,u=i.append("g").attr("transform","translate("+a+","+o+")"),c=t,f=d3.scaleBand().rangeRound([0,s]).paddingInner(.1),p=d3.scaleBand().padding(.05),h=d3.scaleLinear().rangeRound([l,0]),d=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]);t.message?c=t.message[0].component.payload:(fromWidgets=!0,widthDivision=4,legendCenterOffset=-15);var g=[],m=[];m.push("xAxis");for(var v=0;v<c.elements.length;v++)m.push(c.elements[v].title);for(v=0;v<c.X_axis.length;v++)g[v]={},g[v][m[0]]=c.X_axis[v];for(v=0;v<c.elements.length;v++)for(var y=0;y<c.elements[v].values.length;y++)g[y][m[v+1]]=c.elements[v].values[y],c.elements[v].displayValues&&(g[y][m[v+1]+"dispVal"]=c.elements[v].displayValues[y]);var _=m.slice(1);f.domain(g.map(function(t){return t.xAxis})),p.domain(_).rangeRound([0,f.bandwidth()]),h.domain([0,d3.max(g,function(t){return d3.max(_,function(e){return t[e]})})]).nice(),u.append("g").selectAll("g").data(g).enter().append("g").attr("transform",function(t){return"translate("+f(t.xAxis)+",0)"}).selectAll("rect").data(function(t){return _.map(function(e){return{key:e,value:t[e],dispVal:t[e+"dispVal"]}})}).enter().append("rect").on("mouseover",function(){b.style("display",null)}).on("mouseout",function(){b.style("display","none")}).on("mousemove",function(t){var e=1.25*this.parentNode.transform.baseVal[0].matrix.e,n=d3.mouse(this)[1]-5;if(t.dispVal)var r=t.dispVal;else r=t.value;b.attr("transform","translate("+e+","+n+")"),b.select("text").text(r)}).attr("x",function(t){return p(t.key)}).attr("y",function(t){return h(t.value)}).attr("width",p.bandwidth()).attr("height",function(t){return l-h(t.value)}).attr("fill",function(t){return d(t.key)}),u.append("g").attr("class","axis").attr("transform","translate(0,"+l+")").call(d3.axisBottom(f)),u.selectAll("text").attr("transform","rotate(-65) translate(-30, 0)"),u.append("g").attr("class","axis").call(d3.axisLeft(h).ticks(null,"s")).append("text").attr("x",2).attr("y",h(h.ticks().pop())+.5).attr("dy","0.12em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),u.selectAll(".axis text").attr("class","chart-disp-val"),u.selectAll(".axis line").attr("class","chart-axis-line"),u.selectAll(".axis .domain").classed("chart-axis-line",!0);var x=d3.select(n).append("div").attr("class","tooltip-legend no-show"),w=u.append("g").attr("font-family","sans-serif").attr("font-size",8).attr("text-anchor","end").selectAll("g").data(_.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(60,"+20*e+")"});w.append("rect").attr("x",s-19).attr("width",19).attr("height",19).attr("fill",d),w.append("text").attr("class","chart-disp-val").attr("x",s-24).attr("y",9.5).attr("dy","0.32em").text(function(t){return t.length>10?t.slice(0,7)+"...":t}).on("mouseover",function(t){x.attr("class","only-show tooltip-legend"),x.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){x.attr("class","no-show tooltip-legend")});var b=i.append("g").attr("class","tooltipBC").style("display","none");b.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),b.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")},drawD3barStackedChart:function(t,e,n,r){var i=d3.select(n).append("svg").attr("width",e.outerWidth).attr("height",e.outerHeight),o=e.innerWidth,a=e.innerHeight,s=i.append("g").attr("transform","translate(70,20)"),l=t;legendCenterOffset=0,t.message?l=t.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);var u=d3.scaleBand().rangeRound([0,a]).paddingInner(.05).align(.1),c=d3.scaleLinear().rangeRound([0,o]),f=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),p=[],h=[];h.push("xAxis");for(var d=0;d<l.elements.length;d++)h.push(l.elements[d].title);for(d=0;d<l.X_axis.length;d++)p[d]={},p[d].dispVal=[],p[d][h[0]]=l.X_axis[d];for(d=0;d<l.elements.length;d++)for(var g=0;g<l.elements[d].values.length;g++)p[g][h[d+1]]=l.elements[d].values[g],l.elements[d].displayValues&&(p[g].dispVal[d]=l.elements[d].displayValues[g]);var m=h.slice(1);for(d=0;d<p.length;d++){var v=0;for(key in p[d])"xAxis"!==key&&"dispVal"!==key&&(v+=p[d][key]);p[d].total=v}u.domain(p.map(function(t){return t.xAxis})),c.domain([0,d3.max(p,function(t){return t.total})]).nice(),f.domain(m);var y=[];s.append("g").selectAll("g").data(d3.stack().keys(m)(p)).enter().append("g").attr("fill",function(t){return f(t.key)}).selectAll("rect").data(function(t,e){y[e]=[];for(var n=0;n<t.length;n++)y[e][n]={x:t[n][0],y:t[n][1],val:t[n].data.dispVal[e]};return t}).enter().append("rect").attr("y",function(t){return u(t.data.xAxis)}).attr("x",function(t){return c(t[0])}).attr("width",function(t){return c(t[1])-c(t[0])}).attr("height",.5*u.bandwidth()).attr("transform","translate(0,"+.25*u.bandwidth()+")").attr("dispVal",function(t){for(var e=0;e<y.length;e++)for(var n=0;n<y[e].length;n++)if(y[e][n].x===t[0]&&y[e][n].y===t[1])return y[e][n].val}).on("mouseover",function(){w.style("display",null)}).on("mouseout",function(){w.style("display","none")}).on("mousemove",function(t){var e=d3.mouse(this)[0]-5,n=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var r=this.attributes.dispVal.value;else r=t[1]-t[0];w.attr("transform","translate("+e+","+n+")"),w.select("text").text(r)}),s.append("g").attr("class","axis").attr("transform","translate(0,"+a+")").call(d3.axisBottom(c).ticks(null,"s")).append("text").attr("y",40).attr("x",c(c.ticks().pop())+.5).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start").attr("transform","translate("+-o+",-10)"),s.append("g").attr("class","axis").attr("transform","translate(0,0)").call(d3.axisLeft(u)),s.selectAll(".axis text").attr("class","chart-disp-val"),s.selectAll(".axis line").attr("class","chart-axis-line"),s.selectAll(".axis .domain").classed("chart-axis-line",!0);var _=d3.select(n).append("div").attr("class","tooltip-legend no-show"),x=s.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(m.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(80,"+(150+20*e)+")"});x.append("rect").attr("x",o-19).attr("width",19).attr("height",19).attr("fill",f),x.append("text").attr("x",o-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(t){return t.length>10?t.slice(0,7)+"...":t}).on("mouseover",function(t){_.attr("class","only-show tooltip-legend"),_.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){_.attr("class","no-show tooltip-legend")});var w=i.append("g").attr("class","tooltipHStacked").style("display","none");w.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),w.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")},drawD3barVerticalStackedChart:function(t,e,n,r){var i=d3.select(n).append("svg").attr("width",e.outerWidth).attr("height",e.outerHeight),o=e.innerWidth,a=e.innerHeight,s=i.append("g").attr("transform","translate(20,20)"),l=t;legendCenterOffset=0,t.message?l=t.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);var u=d3.scaleBand().rangeRound([0,o]).paddingInner(.05).align(.1),c=d3.scaleLinear().rangeRound([a,0]),f=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),p=[],h=[];h.push("xAxis");for(var d=0;d<l.elements.length;d++)h.push(l.elements[d].title);for(d=0;d<l.X_axis.length;d++)p[d]={},p[d].dispVal=[],p[d][h[0]]=l.X_axis[d];for(d=0;d<l.elements.length;d++)for(var g=0;g<l.elements[d].values.length;g++)p[g][h[d+1]]=l.elements[d].values[g],l.elements[d].displayValues&&(p[g].dispVal[d]=l.elements[d].displayValues[g]);var m=h.slice(1);for(d=0;d<p.length;d++){var v=0;for(key in p[d])"xAxis"!==key&&"dispVal"!==key&&(v+=p[d][key]);p[d].total=v}u.domain(p.map(function(t){return t.xAxis})),c.domain([0,d3.max(p,function(t){return t.total})]).nice(),f.domain(m),coordsVal=[],s.append("g").selectAll("g").data(d3.stack().keys(m)(p)).enter().append("g").attr("fill",function(t){return f(t.key)}).selectAll("rect").data(function(t,e){coordsVal[e]=[];for(var n=0;n<t.length;n++)coordsVal[e][n]={x:t[n][0],y:t[n][1],val:t[n].data.dispVal[e]};return t}).enter().append("rect").attr("x",function(t){return u(t.data.xAxis)}).attr("y",function(t){return c(t[1])}).attr("height",function(t){return c(t[0])-c(t[1])}).attr("width",.5*u.bandwidth()).attr("dispVal",function(t){for(var e=0;e<coordsVal.length;e++)for(var n=0;n<coordsVal[e].length;n++)if(coordsVal[e][n].x===t[0]&&coordsVal[e][n].y===t[1])return coordsVal[e][n].val}).attr("transform","translate("+.25*u.bandwidth()+",0)").on("mouseover",function(){x.style("display",null)}).on("mouseout",function(){x.style("display","none")}).on("mousemove",function(t){var e=d3.mouse(this)[0]-5,n=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var r=this.attributes.dispVal.value;else r=t[1]-t[0];x.attr("transform","translate("+e+","+n+")"),x.select("text").text(r)}),s.append("g").attr("class","axis").attr("transform","translate(0,"+a+")").call(d3.axisBottom(u)),s.selectAll("text").attr("class","chart-disp-val").attr("transform","rotate(-65) translate(-30, 0)"),s.append("g").attr("class","axis").call(d3.axisLeft(c).ticks(null,"s")).append("text").attr("x",2).attr("y",c(c.ticks().pop())-10).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),s.selectAll("text").attr("class","chart-disp-val"),s.selectAll(".axis .domain").classed("chart-axis-line",!0),s.selectAll(".axis line").classed("chart-axis-line",!0);var y=d3.select(n).append("div").attr("class","tooltip-legend no-show"),_=s.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(m.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(48,"+20*e+")"});_.append("rect").attr("x",o-19).attr("width",19).attr("height",19).attr("fill",f),_.append("text").attr("x",o-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(t){return t.length>10?t.slice(0,7)+"...":t}).on("mouseover",function(t){y.attr("class","only-show tooltip-legend"),y.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){y.attr("class","no-show tooltip-legend")});var x=i.append("g").attr("class","tooltipVSB").style("display","none");x.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),x.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")},drawD3barHorizontalbarChart:function(n,r,i,o){window.addEventListener("resize",function(e){t("#chart").width(.9*window.innerWidth),t("#chart").height(window.innerHeight)});var a=[],s=n;legendCenterOffset=0,n.message?s=n.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);for(var l=0;l<s.X_axis.length;l++){a[l]={},a[l].date=s.X_axis[l];for(var u=0;u<s.elements.length;u++)a[l][s.elements[u].title]=s.elements[u].values[l],s.elements[u].displayValues&&(a[l][s.elements[u].title+"dispVal"]=s.elements[u].displayValues[l])}var c={};for(u=0;u<s.elements.length;u++)c[s.elements[u].title]=s.elements[u].title;t(i).empty(),new function(t,n){e(t,n)}({mainDiv:i,colorRange:["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],data:a,columnsInfo:c,xAxis:"value",yAxis:"date",label:{xAxis:"Value",yAxis:"Dates"},requireLegend:!0},r)},drawD3lineChartV2:function(e,n,r,i){var o=35,a=30,s=n.innerWidth,l=n.innerHeight,u=["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],c=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),f=e;legendCenterOffset=0,e.message?f=e.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);var p,h=f.X_axis,d=f.elements,g=d3.scaleLinear().domain([0,h.length-1]).range([0,s]),m=d3.scaleLinear().domain([0,60]).range([l,0]),v=d3.line().x(function(t){return g(t.ind)}).y(function(t){return m(t.value)}),y=d3.select(r).append("svg").attr("width",n.outerWidth).attr("height",n.outerHeight),_=y.append("g").attr("transform","translate("+a+","+o+")"),x=d3.axisBottom(g).tickFormat(function(t){return h[t]}),w=d3.axisLeft(m).tickFormat(d3.format(".2s"));_.append("g").attr("class","axis").call(w),_.append("g").attr("transform","translate(0,"+l+")").call(x).attr("class","axis xAxisR"),_.selectAll(".xAxisR text").attr("transform","rotate(-65) translate(-30, 0)");var b=[],A=[],k=[],E={};b.push("xAxis");for(var C=0;C<f.elements.length;C++)b.push(f.elements[C].title);for(C=0;C<f.elements.length;C++){A[C]={},A[C].valueSet=[],A[C].name=f.elements[C].title,A[C].currentVal=f.elements[C].values[f.elements[C].values.length-1];for(var T=0;T<f.elements[C].values.length;T++)k[T]=k[T]||{},k[T].x_Axis=f.X_axis[T],k[T][b[C+1]]=f.elements[C].values[T],A[C].valueSet[T]={},A[C].valueSet[T].value=f.elements[C].values[T],f.elements[C].displayValues&&(A[C].valueSet[T].dispVal=f.elements[C].displayValues[T],E[f.elements[C].title]=f.elements[C].displayValues[T].replace(/[0-9]/g,"")),A[C].valueSet[T].x_Axis=f.X_axis[T],A[C].valueSet[T].ind=T}var I=b.slice(1),O=b.slice(1).map(function(t){return{id:t,values:k.map(function(e){return{xAxis:e.xAxis,temperature:e[t]}})}});p=A,_.selectAll().data(p).enter().append("path").attr("fill","none").attr("stroke",function(t){return c(t.name)}).attr("stroke-width",2).datum(function(t){return t.valueSet}).attr("d",v).attr("class","lineC"),_.selectAll().data(p).enter().append("text").html(function(t){}).attr("fill",function(t){return t.color}).attr("alignment-baseline","middle").attr("x",s).attr("dx",".5em").attr("y",function(t){return m(t.currentVal)});var S=y.append("g").attr("class","mouse-over-effects"),R=document.getElementsByClassName("lineC"),M=S.selectAll(".mouse-per-line").data(O).enter().append("g").attr("class","mouse-per-line");M.append("circle").attr("r",7).style("stroke",function(t,e){return u[e]}).style("fill","none").style("stroke-width","3px").style("opacity","0").attr("transform","translate(30,35)"),M.append("text").attr("transform",function(t,e){return 0==e?"translate(40,40)":1==e?"translate(20,10)":"translate(0,40)"}),S.append("svg:rect").attr("width",n.innerWidth+5).attr("height",n.innerHeight).attr("transform","translate(30,35)").attr("fill","none").attr("pointer-events","all").on("mouseout",function(){d3.selectAll(".mouse-per-line circle").style("opacity","0"),d3.selectAll(".mouse-per-line text").style("opacity","0")}).on("mouseover",function(){"block"===t("#myPreviewModal").css("display")?t(".lineChartChildDiv .mouse-per-line").hide():t(".lineChartChildDiv .mouse-per-line").show(),d3.selectAll(".mouse-per-line circle").style("opacity","0.5"),d3.selectAll(".mouse-per-line text").style("opacity","1")}).on("mousemove",function(){var t=d3.mouse(this);d3.selectAll(".mouse-per-line").attr("transform",function(e,n){var r=g.invert(t[0]),i=d3.bisector(function(t){return t.date}).right;idx=i(e.values,r);for(var o=0,a=R[n].getTotalLength()+2,s=null;s=Math.floor((o+a)/2),pos=R[n].getPointAtLength(s),s!==a&&s!==o||pos.x===t[0];)if(pos.x>t[0])a=s;else{if(!(pos.x<t[0]))break;o=s}return xtempLC=g,d3.select(this).select("text").text(function(t,e){for(var n=[],r=0;r<d.length;r++)if(d[r].title===t.id)for(var i=0;i<t.values.length;i++)n[i]=t.values[i].temperature;if(void 0!==E[this.__data__.id]){var o=m.invert(pos.y).toFixed(2);return-1!==n.indexOf(Math.round(o))&&n.indexOf(Math.round(o))===Math.round(xtempLC.invert(pos.x))?m.invert(pos.y).toFixed(2)+"\n"+h[Math.round(xtempLC.invert(pos.x))]:m.invert(pos.y).toFixed(2)+E[this.__data__.id]}return o=m.invert(pos.y).toFixed(2),-1!==n.indexOf(Math.round(o))&&n.indexOf(Math.round(o))===Math.round(xtempLC.invert(pos.x))?m.invert(pos.y).toFixed(2)+"\n"+h[Math.round(xtempLC.invert(pos.x))]:m.invert(pos.y).toFixed(2)}),"translate("+t[0]+","+pos.y+")"})}),_.selectAll(".axis text").attr("class","chart-disp-val"),_.selectAll(".axis line").attr("class","chart-axis-line"),_.selectAll(".axis .domain").classed("chart-axis-line",!0);var L=d3.select(r).append("div").attr("class","tooltip-legend no-show"),P=y.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(I.slice().reverse()).enter().append("g").attr("transform",function(t,e){return 230===n.innerWidth?"translate(100,"+(250+20*e)+")":"translate(100,"+(230+20*e)+")"});P.append("rect").attr("x",s-19).attr("width",19).attr("height",19).attr("fill",c),P.append("text").attr("x",s-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(t){return t.length>10?t.slice(0,7)+"...":t}).on("mouseover",function(t){L.attr("class","only-show tooltip-legend"),L.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){L.attr("class","no-show tooltip-legend")})}}}($),bind=_.bind;function koreAnonymousFn(t){console.info("anonymous user login");var e=localStorage.getItem("korecom")||function(){console.info("generating UUID");var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}();if(localStorage.setItem("korecom",e),t.clientId){var n={};n.issuer=t.clientId,n.subject=e,t.assertion=n,this.options=t,this.claims=t.assertion,this.WebClient=new this.clients.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.WebClient.anonymouslogin.login({assertion:t.assertion,botInfo:this.options.botInfo},bind(this.onLogIn,this))}else console.log("clientId should be there for anonymous user")}requireKr=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({"/KoreBot.js":[function(t,e,n){var r,o=t("./index.js"),a=t("events"),s=t("inherits"),l=(r=t("lodash").bind?t("lodash"):_).bind,u=r.isFunction,c=o.CLIENT_EVENTS.RTM,f=o.RTM_EVENTS,p=t("./jstz.js"),h=r.noop;"undefined"!=typeof window&&(window.kore=window.kore||{},window.kore.botsdk=window.kore.botsdk||{},window.kore.botsdk.logger=window.kore.botsdk.logger||t("debug"),window.messageHistoryLimit=10);var d=t("debug")("botsdk:KoreBot");function g(){a.call(this),this.WebClient=null,this.RtmClient=null,this.options={},this.accessToken=null,this.initialized=!1,this.clients=o,this.latestId=null,this.oldestId=null}var m={city:"",country:"",latitude:0,longitude:0,street:""},v=!1;s(g,a),g.prototype.emit=function(){arguments&&"history"===arguments[0]&&this.historySyncInProgress?(arguments[2]="historysync",this.cbBotChatHistory(arguments)):!window._chatHistoryLoaded&&arguments&&"history"===arguments[0]?(v=!0,this.cbBotChatHistory(arguments)):v&&arguments&&"history"===arguments[0]&&setTimeout(function(){$(".chatInputBox").focus(),$(".disableFooter").removeClass("disableFooter")}),g.super_.prototype.emit.apply(this,arguments)},g.prototype.fetchUserLocation=function(){if(""===m.country){console.log("Fetching user location");var t=this.options;navigator.geolocation.getCurrentPosition(function(e){if(t.googleMapsAPIKey){var n=e.coords.latitude,r=e.coords.longitude;m.latitude=n,m.longitude=r;var o=new XMLHttpRequest,a="https://maps.googleapis.com/maps/api/geocode/json?latlng="+n+","+r+"&sensor=true&key="+t.googleMapsAPIKey;o.open("GET",a,!0),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var t=JSON.parse(o.responseText);"undefined"!=typeof Storage&&(0==t.results.length?t=JSON.parse(localStorage.getItem("locationData")):localStorage.setItem("locationData",JSON.stringify(t)));var e=[];for(t.results&&t.results.length&&t.results[0].address_components&&(e=t.results[0].address_components),i=0;i<e.length;i++){var n=e[i].types;"locality,political"==n?m.city=e[i].long_name:"country,political"==n?m.country=e[i].long_name:"political,sublocality,sublocality_level_2"==n&&(m.street=e[i].long_name)}}},o.send()}else console.warn("please provide google maps API key")})}},g.prototype.sendMessage=function(t,e){d("sending message to bot"),this.initialized?(t.resourceid="/bot.message",t.botInfo=this.options.botInfo||{},t.client=this.options.client||"sdk",t.meta={timezone:p.jstz.determine().name(),locale:window.navigator.userLanguage||window.navigator.language},0!==m.latitude&&0!==m.longitude&&(t.meta.location=m),this.RtmClient.sendMessage(t,e)):e&&e(new Error("Bot is Initializing...Please try again"))},g.prototype.onMessage=function(t){d("on message from bot/self"),"bot"===t.from&&"bot_response"===t.type&&(this.latestId=t.messageId||this.latestId,this.oldestId=this.oldestId||t.messageId),this.emit(f.MESSAGE,t)},g.prototype.close=function(){d("request to close ws connection"),this.RtmClient&&this.RtmClient._close()},g.prototype.destroy=function(){this.RtmClient&&this.RtmClient._close(),v=!1,this.removeAllListeners()},g.prototype.onForwardHistory=function(t,e){d("on forward history");var n,r={};if(r.moreAvailable=e.moreAvailable,r.messages=[],r.forward=!0,r.afterMessageId=this.latestId,e.messages&&e.messages.length>0)for(n=0;n<e.messages.length;n++){var i={};i.messageId=e.messages[n]._id,this.oldestId=this.oldestId||e.messages[n]._id,this.latestId=e.messages[n]._id||this.latestId,"incoming"===e.messages[n].type?(i.from="self",i.type="user_message"):(i.from="bot",i.type="bot_response");var o=0;if(e.messages[n].components&&e.messages[n].components.length>0)for(i.message=[],o=0;o<e.messages[n].components.length;o++){var a={};a.type=e.messages[n].components[o].cT,"text"===a.type&&(a.cInfo={},a.cInfo.body=e.messages[n].components[o].data&&e.messages[n].components[o].data.text),i.message[o]=a}i.createdOn=e.messages[n].createdOn,r.messages[n]=i}this.emit("history",r)},g.prototype.onBackWardHistory=function(t,e){d("on backword history");var n,r={};if(r.moreAvailable=e.moreAvailable,r.messages=[],r.backward=!0,r.beforeMessageId=this.oldestId,e.messages&&e.messages.length>0)for(n=0;n<e.messages.length;n++){var i={};i.messageId=e.messages[n]._id,this.oldestId=e.messages[n]._id||this.oldestId,this.latestId=this.latestId||e.messages[n]._id,"incoming"===e.messages[n].type?(i.from="self",i.type="user_message"):(i.from="bot",i.type="bot_response",i.icon=e.icon);var o=0;if(e.messages[n].components&&e.messages[n].components.length>0)for(i.message=[],o=0;o<e.messages[n].components.length;o++){var a={};a.type=e.messages[n].components[o].cT,"text"===a.type&&(a.cInfo={},a.cInfo.body=e.messages[n].components[o].data&&e.messages[n].components[o].data.text),i.message[o]=a}i.createdOn=e.messages[n].createdOn,r.messages[n]=i}this.emit("history",r)},g.prototype.getHistory=function(t){d("get history"),t=t||{},"undefined"!=typeof window&&(t.limit=t.limit||window.messageHistoryLimit||10);var e={};e.forward=t.forward,e.limit=t.limit||10,e.forward?this.latestId&&(e.msgId=this.latestId):this.oldestId&&(e.msgId=this.oldestId),e.botInfo=this.options.botInfo,e.authorization="bearer "+this.WebClient.user.accessToken,t.forHistorySync&&(this.historySyncInProgress=!0,delete e.msgId),e.forward?this.WebClient.history.history(e,l(this.onForwardHistory,this)):this.WebClient.history.history(e,l(this.onBackWardHistory,this))},g.prototype.sync=function(t){},g.prototype.onOpenWSConnection=function(t){d("opened WS Connection"),this.initialized=!0,this.options.loadHistory&&!v&&this.getHistory({}),this.emit(c.RTM_CONNECTION_OPENED,{})},g.prototype.onLogIn=function(t,e){d("sign-in/anonymous user onLogin"),t?(this.cbErrorToClient&&(e&&e.errors&&e.errors[0]&&e.errors[0].msg?this.cbErrorToClient(e.errors[0].msg):this.cbErrorToClient(t.message)),console.error(t&&t.stack)):(this.options&&this.options.jwtgrantSuccessCB&&this.options.jwtgrantSuccessCB(e),this.accessToken=e.authorization.accessToken,this.options.accessToken=this.accessToken,this.WebClient.user.accessToken=this.accessToken,this.userInfo=e,this.cbBotDetails(e,this.options.botInfo),this.RtmClient=new o.KoreRtmClient({},this.options),this.emit("rtm_client_initialized"),this.RtmClient.start({botInfo:this.options.botInfo}),this.RtmClient.on(f.MESSAGE,l(this.onMessage,this)),this.RtmClient.on(c.RTM_CONNECTION_OPENED,l(this.onOpenWSConnection,this)))},g.prototype.logIn=function(t,e){t?(d("error in assertionFn %s",t),console.error("error in assertionFn",t&&t.stack)):(d("signed-in user login"),this.options=e,this.claims=e.assertion,this.WebClient=new o.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.cbErrorToClient=e.handleError||h,this.cbBotDetails=e.botDetails||h,this.cbBotChatHistory=e.chatHistory||h,this.WebClient.login.login({assertion:e.assertion,botInfo:this.options.botInfo},l(this.onLogIn,this)))},g.prototype.init=function(t,e){(e=e||10)>100&&(e=100),"undefined"!=typeof window&&(window.messageHistoryLimit=e||10),t=t||{},this.options=t,this.oldestId=null,this.RtmClient=null,t.test?(d("test is true"),u(t.koreAnonymousFn)?t.koreAnonymousFn.call(this,t):(d("koreAnonymousFn is not a function"),console.error("koreAnonymousFn is not a function"))):(d("test is false"),u(t.assertionFn)?t.assertionFn(t,l(this.logIn,this)):(d("assertion is not a function"),console.error("assertion is not a function")))},e.exports.instance=function(){return v=!1,new g}},{"./index.js":1,"./jstz.js":2,debug:21,events:30,inherits:23,lodash:24}],1:[function(t,e,n){var r=t("./lib/clients/events");e.exports={KoreWebClient:t("./lib/clients/web/client"),KoreRtmClient:t("./lib/clients/rtm/client"),CLIENT_EVENTS:{WEB:r.CLIENT_EVENTS.WEB,RTM:r.CLIENT_EVENTS.RTM},RTM_EVENTS:r.RTM_EVENTS,RTM_MESSAGE_SUBTYPES:r.RTM_MESSAGE_SUBTYPES}},{"./lib/clients/events":5,"./lib/clients/rtm/client":9,"./lib/clients/web/client":18}],2:[function(t,e,n){var r,i;r=this,(i=function(){"use strict";var t=function(t){var e=-t.getTimezoneOffset();return null!==e?e:0},e=function(t,e,n){var r=new Date;return void 0!==t&&r.setFullYear(t),r.setDate(n),r.setMonth(e),r},n=function(n){return t(e(n,0,2))},r=function(n){return t(e(n,5,2))};return{determine:function(){var t,e,o,a=(t=n(),e=r(),(o=n()-r())<0?t+",1":o>0?e+",1,s":t+",0");return new i.TimeZone(i.olson.timezones[a])},date_is_dst:function(e){return(e.getMonth()>7?r(e.getFullYear()):n(e.getFullYear()))-t(e)!=0},dst_start_for:function(t){var e=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":e,"Asia/Yekaterinburg":e,"Asia/Omsk":e,"Asia/Krasnoyarsk":e,"Asia/Irkutsk":e,"Asia/Yakutsk":e,"Asia/Vladivostok":e,"Asia/Kamchatka":e,"Europe/Minsk":e,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}[t]}}}()).TimeZone=function(t){"use strict";var e={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},n=t;return void 0!==e[n]&&function(){for(var t=e[n],r=t.length,o=0,a=t[0];o<r;o+=1)if(a=t[o],i.date_is_dst(i.dst_start_for(a)))return void(n=a)}(),{name:function(){return n}}},i.olson={},i.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},void 0!==n?n.jstz=i:r.jstz=i},{}],3:[function(t,e,n){var r=t("events"),i=t("async"),o=(t("lodash").bind?t("lodash"):_).bind,a=t("inherits"),s=t("retry"),l=t("url-join"),u=t("./events/client").WEB,c=t("./helpers"),f=t("./transports/request").requestTransport;function p(t,e){r.call(this),this._token=t,this.koreAPIUrl=e.koreAPIUrl||"https://app.kore.com/api/",this.reWriteSocketURL=e.reWriteSocketURL,this.transport=e.transport||f,this.userAgent,this._requestQueue=i.priorityQueue(o(this._callTransport,this),e.maxRequestConcurrency),this._createFacets()}a(p,r),p.prototype.emit=function(){p.super_.prototype.emit.apply(this,arguments)},p.prototype._createFacets=function(){},p.prototype._callTransport=function(t,e){var n=t.args,r=t.cb,i=this,o=s.operation(this.retryConfig),a=function t(a,s,l,c){var f,p;if(a){if(o.retry(a))return;r(o.mainError(),null)}200!==l?429===l?(i._requestQueue.pause(),f=parseInt(s["Retry-After"],10),setTimeout(function(){i.transport(n,t),i._requestQueue.resume()},1e3*f),i.emit(u.RATE_LIMITED,f)):(p=new Error("Unable to process request, received bad "+l+" error"),r(p,c)):(c&&c.userInfo&&(window.jwtDetails=c),r(null,c)),e()};o.attempt(function(){i.transport(n,a)})},p.prototype.makeAPICall=function(t,e,n){var r=c.getAPICallArgs(this._token,e,n),i={url:l(this.koreAPIUrl,t),data:r.data,headers:{"User-Agent":this.userAgent,"content-type":"application/json"}};e&&e.opts&&e.opts.authorization&&(i.headers.Authorization=e.opts.authorization,delete i.data.authorization),this._requestQueue.push({args:i,cb:r.cb})},e.exports=p},{"./events/client":4,"./helpers":8,"./transports/request":10,async:19,events:30,inherits:23,lodash:24,retry:26,"url-join":29}],4:[function(t,e,n){e.exports.WEB={RATE_LIMITED:"rate_limited"},e.exports.RTM={CONNECTING:"connecting",AUTHENTICATED:"authenticated",WS_OPENING:"ws_opening",WS_OPENED:"ws_opened",RTM_CONNECTION_OPENED:"open",DISCONNECT:"disconnect",UNABLE_TO_RTM_START:"unable_to_rtm_start",WS_CLOSE:"ws_close",WS_ERROR:"ws_error",ATTEMPTING_RECONNECT:"attempting_reconnect",RAW_MESSAGE:"raw_message"}},{}],5:[function(t,e,n){e.exports={CLIENT_EVENTS:{WEB:t("./client").WEB,RTM:t("./client").RTM},RTM_EVENTS:t("./rtm").EVENTS,RTM_MESSAGE_SUBTYPES:t("./rtm").MESSAGE_SUBTYPES}},{"./client":4,"./rtm":6}],6:[function(t,e,n){e.exports.EVENTS={HELLO:"hello",MESSAGE:"message"},e.exports.MESSAGE_SUBTYPES={BOT_MESSAGE:"bot_message",ME_MESSAGE:"me_message"}},{}],7:[function(t,e,n){var r=t("./rtm").EVENTS;e.exports.makeMessageEventWithSubtype=function(t,e){return[r.MESSAGE,t].join(e||"::")}},{"./rtm":6}],8:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).assign,o=r.isFunction,a=r.isUndefined,s=r.isString,l=r.forEach,u=function(t,e){var n=i({},t&&t.opts||{});return l(t||{},function(t,e){a(t)||null===t||"opts"===e||("attachments"===e?s(t)?n[e]=t:n[e]=JSON.stringify(t):n[e]=t)}),e&&(n.token=e),n};e.exports.getData=u,e.exports.getAPICallArgs=function(t,e,n){var r,i;return 1===arguments.length?(i=noop,r=u({},t)):2===arguments.length?o(arguments[1])?(i=arguments[1],r=u({},t)):(i=noop,r=u(e,t)):3===arguments.length&&(i=n||noop,r=u(e,t)),{cb:i,data:r}}},{lodash:24}],9:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).bind,o=r.cloneDeep,a=r.contains,s=t("inherits"),l=r.isUndefined,u=t("debug")("botsdk:KoreRTMClient"),c=t("../events/rtm").EVENTS,f=["pong",c.HELLO],p=["not_authed","invalid_auth","account_inactive","token_expired"],h=t("../events/client").RTM,d=t("../client"),g=t("../web/apis").RtmApi,m=t("../events/utils").makeMessageEventWithSubtype,v=t("../transports/ws");function y(t,e){var n=e||{};n.maxRequestConcurrency=1,d.call(this,t,n),this._socketFn=n.socketFn||v,this.ws=void 0,this.MAX_RECONNECTION_ATTEMPTS=n.maxReconnectionAttempts||10,this.RECONNECTION_BACKOFF=n.reconnectionBackoff||3e3,this.MAX_PONG_INTERVAL=n.maxPongInterval||1e4,this.WS_PING_INTERVAL=n.wsPingInterval||5e3,this.autoReconnect=!1!==n.autoReconnect,this.connected=!1,this.authenticated=!1,this.activeUserId=void 0,this._pendingMessages={},this._connAttempts=0,this._connecting=!1,this._reconnecting=!1,n.hasOwnProperty("_reconnecting")&&n._reconnecting&&(this._reconnecting=n._reconnecting,n._reconnecting=!1),this.user={},this.user.accessToken=n.accessToken,this.botInfo=n.botInfo||{}}s(y,d),y.prototype._createFacets=function(){y.super_.prototype._createFacets.call(this),this._rtm=new g(this)},y.prototype.start=function(t){this._connecting||(this.emit(h.CONNECTING),this._connecting=!0,(t=t||{botInfo:this.botInfo}).authorization="bearer "+this.user.accessToken,this._rtm.start(t,i(this._onStart,this)))},y.prototype.nextMessageId=function(){return this._messageId=this._messageId||1,this._messageId++},y.prototype._onStart=function(t,e){var n,r=!!this._reconnecting;this._connecting=!1,this._reconnecting=!1;try{e=e}catch(t){console.log(t&&t.stack)}e&&e.errors&&("TOKEN_EXPIRED"===e.errors[0].code||401===e.errors[0].code||"token expired"===e.errors[0].msg)&&($(".reload-btn").trigger("click",{isReconnect:!0}),e.error="token_expired"),t||!e.url?(u("error or no url in response %s",t||"no url"),this.emit(h.UNABLE_TO_RTM_START,t||e.error),e&&a(p,e.error)?(n="unrecoverable failure connecting to the RTM API",this.disconnect(n,e.error)):(this.authenticated=!1,this.autoReconnect&&this.reconnect())):(r&&(e.url=e.url+"&isReconnect=true"),this.authenticated=!0,this.emit(h.AUTHENTICATED,e),this.connect(e.url))},y.prototype._close=function(){this.autoReconnect=!1,this._safeDisconnect()},y.prototype._safeDisconnect=function(){this.ws&&this.ws.close(),this.authenticated=!1,this.connected=!1},y.prototype.reWriteURL=function(t){if(this.reWriteSocketURL){var e=document.createElement("a");e.href=t,this.reWriteSocketURL.protocol&&(e.protocol=this.reWriteSocketURL.protocol),this.reWriteSocketURL.hostname&&(e.hostname=this.reWriteSocketURL.hostname),this.reWriteSocketURL.port&&(e.port=this.reWriteSocketURL.port),t=e.href}return t},y.prototype.connect=function(t){u("connecting"),this.emit(h.WS_OPENING,{}),t=this.reWriteURL(t),this.ws=this._socketFn(t),this.ws.onopen=i(this.handleWsOpen,this),this.ws.onmessage=i(this.handleWsMessage,this),this.ws.onerror=i(this.handleWsError,this),this.ws.onclose=i(this.handleWsClose,this),this.ws.onping=i(this.handleWsPing,this)},y.prototype.disconnect=function(t,e){u("disconnecting"),this.emit(h.DISCONNECT,t,e),this.autoReconnect=!1,this._safeDisconnect()},y.prototype.reconnect=function(){if(u("reconnecting"),console.log("in reconnect"),!this._reconnecting){if(this._reconnecting=!0,this.emit(h.ATTEMPTING_RECONNECT),this._safeDisconnect(),this._connAttempts++,this._connAttempts>this.MAX_RECONNECTION_ATTEMPTS)throw new Error("unable to connect to kore.ai RTM API, failed after max reconnection attempts");setTimeout(i(this.start,this),this._connAttempts*this.RECONNECTION_BACKOFF)}},y.prototype.handleWsOpen=function(){u("connected"),this.connected=!0,this.emit("open",{data:{}}),this._connAttempts=0},y.prototype.handleWsMessage=function(t){var e;this.emit("message",t);try{e=JSON.parse(t)}catch(t){return}a(f,e.type)?this._handleWsMessageInternal(e.type,e):this._handleWsMessageViaEventHandler(e.type,e)},y.prototype._handleWsMessageInternal=function(t,e){t===c.HELLO&&this._handleHello()},y.prototype._handleWsMessageViaEventHandler=function(t,e){var n;if(t===c.MESSAGE&&(n=e.reply_to)){if(!this._pendingMessages[n])return;delete this._pendingMessages[n]}this.emit(t,e),t!==c.MESSAGE||l(e.subtype)||this.emit(m(e.subtype),e)},y.prototype.handleWsError=function(t){u("web socket error::%s",t),this.emit(h.WS_ERROR,t)},y.prototype.handleWsClose=function(t,e){this.connected=!1,this.emit(h.WS_CLOSE,t,e),this.autoReconnect?this._connecting||this.reconnect():(u("websocket closed with auto-reconnect false on the RTM client"),this.disconnect("websocket closed with auto-reconnect false on the RTM client"))},y.prototype.handleWsPing=function(){this.ws.pong&&this.ws.pong()},y.prototype._handleHello=function(){this.connected=!0,this.emit(h.RTM_CONNECTION_OPENED)},y.prototype.sendMessage=function(t,e){this.send(t,e)},y.prototype.send=function(t,e){var n,r,i=o(t);this.connected&&!this._reconnecting?(i.id=i.clientMessageId||this.nextMessageId(),n=JSON.stringify(i),this._pendingMessages[i.id]=i,this.ws.send(n,void 0,function(t){l(t),l(e)||e(t)})):(u(r="ws not connected or reconnecting, unable to send message"),l(e)||e(new Error(r)))},e.exports=y},{"../client":3,"../events/client":4,"../events/rtm":6,"../events/utils":7,"../transports/ws":11,"../web/apis":15,debug:21,inherits:23,lodash:24}],10:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).has,o=r.partial,a=t("browser-request"),s=function(t,e,n,r){e?t(e,n&&n.headers||{},n&&n.statusCode||null,r):t(e,n.headers,n.statusCode,r)};e.exports.requestTransport=function(t,e){var n=function(t){var e={url:t.url,headers:t.headers};return i(t.data,"file")?e.formData=t.data:e.json=t.data,e}(t);t.data&&t.data.type&&"GET"===t.data.type?a.get(n,o(s,e)):a.post(n,o(s,e))}},{"browser-request":20,lodash:24}],11:[function(t,e,n){e.exports=function(t,e){return new WebSocket(t)}},{}],12:[function(t,e,n){e.exports=function(){}},{}],13:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="anonymouslogin",this.client=t}t("inherits")(i,r),i.prototype.login=function(t,e){var n={opts:t=t||{}};return this.client.makeAPICall("/oAuth/token/jwtgrant/anonymous",n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],14:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="history",this.client=t}t("inherits")(i,r),i.prototype.history=function(t,e){var n={opts:t=t||{},type:"GET"},r="/botmessages/rtm",i=!1,o="?";return t.botInfo&&t.botInfo.taskBotId&&(!1===i?(r+=o+"botId="+t.botInfo.taskBotId,o="&",i=!0):r+=o+"botId="+t.botInfo.taskBotId,delete t.botInfo),t.offset&&(!1===i?(r+=o+"offset="+t.offset,o="&",i=!0):r+=o+"offset="+t.offset,delete t.offset),t.limit&&(!1===i?(r+=o+"limit="+t.limit,o="&",i=!0):r+=o+"limit="+t.limit,delete t.limit),t.forward&&(!1===i?(r+=o+"forward="+t.forward,o="&",i=!0):r+=o+"forward="+t.forward,delete t.forward),t.msgId&&(!1===i?(r+=o+"msgId="+t.msgId,o="&",i=!0):r+=o+"msgId="+t.msgId,delete t.msgId),this.client.makeAPICall(r,n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],15:[function(t,e,n){e.exports={RtmApi:t("./rtm.js"),LogInApi:t("./login.js"),AnonymousLogin:t("./anonymouslogin.js"),HistoryApi:t("./history.js")}},{"./anonymouslogin.js":13,"./history.js":14,"./login.js":16,"./rtm.js":17}],16:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="login",this.client=t}t("inherits")(i,r),i.prototype.login=function(t,e){var n={opts:t=t||{}};return this.client.makeAPICall("/oAuth/token/jwtgrant",n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],17:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="rtm",this.client=t}t("inherits")(i,r),i.prototype.start=function(t,e){var n={opts:t};return this.client.makeAPICall("/rtm/start",n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],18:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).bind,o=r.forEach,a=t("inherits"),s=t("../client"),l=t("./apis/index");function u(t,e){var n=e||{};s.call(this,t,n),this.claims=e.claims,this.retryConfig=n.retryConfig||{retries:5,factor:3.9},this.user={}}a(u,s),u.prototype._createFacets=function(){var t;u.super_.prototype._createFacets.call(this),i(this.makeAPICall,this),o(l,function(e){this[(t=new e(this)).name]=t},this)},e.exports=u},{"../client":3,"./apis/index":15,inherits:23,lodash:24}],19:[function(t,e,n){(function(t,n){!function(){var r,i={};function o(){}function a(t){return t}function s(t){return!!t}function l(t){return!t}var u="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;function c(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function f(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=u&&(r=u.async),i.noConflict=function(){return u.async=r,i};var p=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===p.call(t)};function d(t){return h(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function g(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function m(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function v(t){return m(Array(t),function(t,e){return e})}function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};function x(t){var e,n,r=-1;return d(t)?(e=t.length,function(){return++r<e?r:null}):(n=_(t),e=n.length,function(){return++r<e?n[r]:null})}function w(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function b(t){return function(e,n,r){return t(e,r)}}var A="function"==typeof setImmediate&&setImmediate,k=A?function(t){A(t)}:function(t){setTimeout(t,0)};function E(t){return function(e,n,r){r=f(r||o);var i=x(e=e||[]);if(t<=0)return r(null);var a=!1,s=0,l=!1;!function o(){if(a&&s<=0)return r(null);for(;s<t&&!l;){var u=i();if(null===u)return a=!0,void(s<=0&&r(null));s+=1,n(e[u],u,c(function(t){s-=1,t?(r(t),l=!0):o()}))}}()}}function C(t){return function(e,n,r){return t(i.eachOf,e,n,r)}}function T(t){return function(e,n,r,i){return t(E(n),e,r,i)}}function I(t){return function(e,n,r){return t(i.eachOfSeries,e,n,r)}}function O(t,e,n,r){r=f(r||o);var i=d(e=e||[])?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function S(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(m(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function R(t,e,n,r){S(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function M(t,e,n){return function(r,i,o,a){function s(){a&&a(n(!1,void 0))}function l(t,r,i){if(!a)return i();o(t,function(r){a&&e(r)&&(a(n(!0,t)),a=o=!1),i()})}arguments.length>3?t(r,i,l,s):(a=o,o=i,t(r,l,s))}}function L(t,e){return e}function P(t,e,n){n=n||o;var r=d(e)?[]:{};t(e,function(t,e,n){t(w(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function N(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function j(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(t.started=!0,h(e)||(e=[e]),0===e.length&&t.idle())return i.setImmediate(function(){t.drain()});g(e,function(e){var i={data:e,callback:r||o};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),i.setImmediate(t.process)}function a(t,e){return function(){s-=1;var n=!1,r=arguments;g(e,function(t){g(l,function(e,r){e!==t||n||(l.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+s===0&&t.drain(),t.process()}}var s=0,l=[],u={tasks:[],concurrency:e,payload:n,saturated:o,empty:o,drain:o,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=o,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){for(;!u.paused&&s<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=m(e,function(t){return t.data});0===u.tasks.length&&u.empty(),s+=1,l.push(e[0]);var r=c(a(u,e));t(n,r)}},length:function(){return u.tasks.length},running:function(){return s},workersList:function(){return l},idle:function(){return u.tasks.length+s===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;e<=t;e++)i.setImmediate(u.process)}}};return u}function D(t){return w(function(e,n){e.apply(null,n.concat([w(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&g(n,function(e){console[t](e)}))})]))})}function W(t){return function(e,n,r){t(v(e),n,r)}}function B(t){return w(function(e,n){var r=w(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function V(t){return w(function(e){var n=e.pop();e.push(function(){var t=arguments;r?i.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}"object"==typeof t&&"function"==typeof t.nextTick?i.nextTick=t.nextTick:i.nextTick=k,i.setImmediate=A?k:i.nextTick,i.forEach=i.each=function(t,e,n){return i.eachOf(t,b(e),n)},i.forEachSeries=i.eachSeries=function(t,e,n){return i.eachOfSeries(t,b(e),n)},i.forEachLimit=i.eachLimit=function(t,e,n,r){return E(e)(t,b(n),r)},i.forEachOf=i.eachOf=function(t,e,n){n=f(n||o);for(var r,i=x(t=t||[]),a=0;null!=(r=i());)a+=1,e(t[r],r,c(s));function s(t){a--,t?n(t):null===r&&a<=0&&n(null)}0===a&&n(null)},i.forEachOfSeries=i.eachOfSeries=function(t,e,n){n=f(n||o);var r=x(t=t||[]),a=r();!function o(){var s=!0;if(null===a)return n(null);e(t[a],a,c(function(t){if(t)n(t);else{if(null===(a=r()))return n(null);s?i.setImmediate(o):o()}})),s=!1}()},i.forEachOfLimit=i.eachOfLimit=function(t,e,n,r){E(e)(t,n,r)},i.map=C(O),i.mapSeries=I(O),i.mapLimit=T(O),i.inject=i.foldl=i.reduce=function(t,e,n,r){i.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},i.foldr=i.reduceRight=function(t,e,n,r){var o=m(t,a).reverse();i.reduce(o,e,n,r)},i.transform=function(t,e,n,r){3===arguments.length&&(r=n,n=e,e=h(t)?[]:{}),i.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},i.select=i.filter=C(S),i.selectLimit=i.filterLimit=T(S),i.selectSeries=i.filterSeries=I(S),i.reject=C(R),i.rejectLimit=T(R),i.rejectSeries=I(R),i.any=i.some=M(i.eachOf,s,a),i.someLimit=M(i.eachOfLimit,s,a),i.all=i.every=M(i.eachOf,l,l),i.everyLimit=M(i.eachOfLimit,l,l),i.detect=M(i.eachOf,a,L),i.detectSeries=M(i.eachOfSeries,a,L),i.detectLimit=M(i.eachOfLimit,a,L),i.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}i.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,m(e.sort(r),function(t){return t.value}))})},i.auto=function(t,e,n){"function"==typeof arguments[1]&&(n=e,e=null),n=f(n||o);var r=_(t),a=r.length;if(!a)return n(null);e||(e=a);var s={},l=0,u=!1,c=[];function p(t){c.unshift(t)}function d(){a--,g(c.slice(0),function(t){t()})}p(function(){a||n(null,s)}),g(r,function(r){if(!u){for(var o,a=h(t[r])?t[r]:[t[r]],f=w(function(t,e){if(l--,e.length<=1&&(e=e[0]),t){var o={};c=function(t,e){o[e]=t},g(_(a=s),function(t){c(a[t],t)}),o[r]=e,u=!0,n(t,o)}else s[r]=e,i.setImmediate(d);var a,c}),m=a.slice(0,a.length-1),v=m.length;v--;){if(!(o=t[m[v]]))throw new Error("Has nonexistent dependency in "+m.join(", "));if(h(o)&&y(o,r)>=0)throw new Error("Has cyclic dependencies")}x()?(l++,a[a.length-1](f,s)):p(function t(){x()&&(l++,(e=y(c,t))>=0&&c.splice(e,1),a[a.length-1](f,s));var e})}function x(){return l<e&&(t=function(t,e){return t&&s.hasOwnProperty(e)},n=!0,g(m,function(e,r,i){n=t(n,e,r,i)}),n)&&!s.hasOwnProperty(r);var t,n}})},i.retry=function(t,e,n){var r=5,o=0,a=[],s={times:r,interval:o};var l=arguments.length;if(l<1||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function u(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;s.times;){var o=!(s.times-=1);a.push(n(s.task,o)),!o&&s.interval>0&&a.push(r(s.interval))}i.series(a,function(e,n){n=n[n.length-1],(t||s.callback)(n.err,n.result)})}return l<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||r;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||r,t.interval=parseInt(e.interval,10)||o}}(s,t),s.callback=n,s.task=e,s.callback?u():u},i.waterfall=function(t,e){if(e=f(e||o),!h(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();!function t(n){return w(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=n.next();o?i.push(t(o)):i.push(e),V(n).apply(null,i)}})}(i.iterator(t))()},i.parallel=function(t,e){P(i.eachOf,t,e)},i.parallelLimit=function(t,e,n){P(E(e),t,n)},i.series=function(t,e){P(i.eachOfSeries,t,e)},i.iterator=function(t){return function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}(0)},i.apply=w(function(t,e){return w(function(n){return t.apply(null,e.concat(n))})}),i.concat=C(N),i.concatSeries=I(N),i.whilst=function(t,e,n){if(n=n||o,t()){var r=w(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},i.doWhilst=function(t,e,n){var r=0;return i.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},i.until=function(t,e,n){return i.whilst(function(){return!t.apply(this,arguments)},e,n)},i.doUntil=function(t,e,n){return i.doWhilst(t,function(){return!e.apply(this,arguments)},n)},i.during=function(t,e,n){n=n||o;var r=w(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},i.doDuring=function(t,e,n){var r=0;i.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},i.queue=function(t,e){return j(function(e,n){t(e[0],n)},e,1)},i.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}var r=i.queue(t,e);return r.push=function(t,e,a){!function(t,e,r,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");if(t.started=!0,h(e)||(e=[e]),0===e.length)return i.setImmediate(function(){t.drain()});g(e,function(e){var s={data:e,priority:r,callback:"function"==typeof a?a:o};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,s,n)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),i.setImmediate(t.process)})}(r,t,e,a)},delete r.unshift,r},i.cargo=function(t,e){return j(t,1,e)},i.log=D("log"),i.dir=D("dir"),i.memoize=function(t,e){var n={},r={},o=Object.prototype.hasOwnProperty;e=e||a;var s=w(function(a){var s=a.pop(),l=e.apply(null,a);o.call(n,l)?i.setImmediate(function(){s.apply(null,n[l])}):o.call(r,l)?r[l].push(s):(r[l]=[s],t.apply(null,a.concat([w(function(t){n[l]=t;var e=r[l];delete r[l];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return s.memo=n,s.unmemoized=t,s},i.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},i.times=W(i.map),i.timesSeries=W(i.mapSeries),i.timesLimit=function(t,e,n,r){return i.mapLimit(v(t),e,n,r)},i.seq=function(){var t=arguments;return w(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=o,i.reduce(t,e,function(t,e,r){e.apply(n,t.concat([w(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},i.compose=function(){return i.seq.apply(null,Array.prototype.reverse.call(arguments))},i.applyEach=B(i.eachOf),i.applyEachSeries=B(i.eachOfSeries),i.forever=function(t,e){var n=c(e||o),r=V(t);!function t(e){if(e)return n(e);r(t)}()},i.ensureAsync=V,i.constant=w(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),i.wrapSync=i.asyncify=function(t){return w(function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&&r)&&"function"==typeof n.then?n.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,n)})},"object"==typeof e&&e.exports?e.exports=i:"function"==typeof define&&define.amd?define([],function(){return i}):u.async=i}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:31}],20:[function(t,e,n){var r,i;r=this,i=function(){var t=XMLHttpRequest;if(!t)throw new Error("missing XMLHttpRequest");e.log={trace:r,debug:r,info:r,warn:r,error:r};function e(o,a){if("function"!=typeof a)throw new Error("Bad callback given: "+a);if(!o)throw new Error("No options given");var s=o.onResponse;if((o="string"==typeof o?{uri:o}:JSON.parse(JSON.stringify(o))).onResponse=s,o.verbose&&(e.log=function(){var t,e,n={},o=["trace","debug","info","warn","error"];for(e=0;e<o.length;e++)n[t=o[e]]=r,"undefined"!=typeof console&&console&&console[t]&&(n[t]=i(console,t));return n}()),o.url&&(o.uri=o.url,delete o.url),!o.uri&&""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var l=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],u=0;u<l.length;u++)if(o[l[u]])throw new Error("options."+l[u]+" is not supported");if(o.callback=a,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||e.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&&(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&&(o.headers["content-type"]="application/json"),"boolean"!=typeof o.json?o.body=JSON.stringify(o.json):"string"!=typeof o.body&&(o.body=JSON.stringify(o.body)));var c=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")};if(o.qs){var f="string"==typeof o.qs?o.qs:c(o.qs);-1!==o.uri.indexOf("?")?o.uri=o.uri+"&"+f:o.uri=o.uri+"?"+f}if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var p=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=p,p){case"application/x-www-form-urlencoded":o.body=c(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var h=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+t[r]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e}(o.form);o.body=h.body,o.headers["content-type"]=h.type;break;default:throw new Error("unsupported encoding:"+p)}}}return o.onResponse=o.onResponse||r,!0===o.onResponse&&(o.onResponse=a,o.callback=r),!o.headers.authorization&&o.auth&&(o.headers.authorization="Basic "+function(t){var e,n,r,i,o,a,s,l,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,f=0,p="",h=[];if(!t)return t;do{e=t.charCodeAt(c++),n=t.charCodeAt(c++),r=t.charCodeAt(c++),i=(l=e<<16|n<<8|r)>>18&63,o=l>>12&63,a=l>>6&63,s=63&l,h[f++]=u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(s)}while(c<t.length);switch(p=h.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}(o.auth.username+":"+o.auth.password)),function(r){var i=new t,o=!1,a=function(t){var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(t){(e=document.createElement("a")).href="",e=e.href}var r=n.exec(e.toLowerCase())||[],i=n.exec(t.toLowerCase());return!(!i||i[1]==r[1]&&i[2]==r[2]&&(i[3]||("http:"===i[1]?80:443))==(r[3]||("http:"===r[1]?80:443)))}(r.uri),s="withCredentials"in i;if(n+=1,i.seq_id=n,i.id=n+": "+r.method+" "+r.uri,i._id=i.id,a&&!s){var l=new Error("Browser does not support cross-origin request: "+r.uri);return l.cors="unsupported",r.callback(l,i)}i.timeoutTimer=setTimeout(function(){o=!0;var t=new Error("ETIMEDOUT");return t.code="ETIMEDOUT",t.duration=r.timeout,e.log.error("Timeout",{id:i._id,milliseconds:r.timeout}),r.callback(t,i)},r.timeout);var u={response:!1,loading:!1,end:!1};for(var c in i.onreadystatechange=function(n){if(o)return e.log.debug("Ignoring timed out state change",{state:i.readyState,id:i.id});e.log.debug("State change",{state:i.readyState,id:i.id,timed_out:o}),i.readyState===t.OPENED?e.log.debug("Request started",{id:i.id}):i.readyState===t.HEADERS_RECEIVED?f():i.readyState===t.LOADING?(f(),p()):i.readyState===t.DONE&&(f(),p(),function(){if(!u.end){if(u.end=!0,e.log.debug("Request done",{id:i.id}),i.body=i.responseText,r.json)try{i.body=JSON.parse(i.responseText)}catch(t){return r.callback(t,i)}r.callback(null,i,i.body)}}())},i.open(r.method,r.uri,!0),r.headers)i.setRequestHeader(c,r.headers[c]);a&&(i.withCredentials=!!r.withCredentials);return i.send(r.body),i;function f(){if(!u.response){if(u.response=!0,e.log.debug("Got response",{id:i.id,status:i.status}),clearTimeout(i.timeoutTimer),i.statusCode=i.status,a&&0==i.statusCode){var t=new Error("CORS request rejected: "+r.uri);return t.cors="rejected",u.loading=!0,u.end=!0,r.callback(t,i)}r.onResponse(null,i)}}function p(){u.loading||(u.loading=!0,e.log.debug("Response body loading",{id:i.id}))}}(o)}var n=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=12e4,e.defaults=function(t,n){var r=function(e){return function(n,r){for(var i in n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),t)void 0===n[i]&&(n[i]=t[i]);return e(n,r)}},i=r(e);return i.get=r(e.get),i.post=r(e.post),i.put=r(e.put),i.head=r(e.head),i};function r(){}function i(t,e){return function(n,r){"object"==typeof r&&(n+=" "+JSON.stringify(r));return t[e].call(t,n)}}return["get","put","post","head"].forEach(function(t){var n=t.toUpperCase();e[t.toLowerCase()]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t))).method=n;var r=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,r)}}),e.couch=function(t,n){return"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,n=n||r,e(t,function(t,e,r){if(t)return n(t,e,r);if((e.statusCode<200||e.statusCode>299)&&r.error){for(var i in t=new Error("CouchDB error: "+(r.error.reason||r.error.error)),r)t[i]=r[i];return n(t,e,r)}return n(t,e,r)})},e},"function"==typeof define&&define.amd?e.exports=i():"object"==typeof n?e.exports=i():r.returnExports=i()},{}],21:[function(t,e,n){function r(){var t;try{t=n.storage.debug}catch(t){}return t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r),t},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(r())},{"./debug":22}],22:[function(t,e,n){(n=e.exports=function(t){function e(){}function o(){var t=o,e=+new Date,a=e-(r||e);t.diff=a,t.prev=r,t.curr=e,r=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=n.colors[i++%n.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var l=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;l++;var i=n.formatters[r];if("function"==typeof i){var o=s[l];e=i.call(t,o),s.splice(l,1),l--}return e}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(t,s));var u=o.log||n.log||console.log.bind(console);u.apply(t,s)}e.enabled=!1,o.enabled=!0;var a=n.enabled(t)?o:e;return a.namespace=t,a}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&("-"===(t=e[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var r,i=0},{ms:25}],23:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],24:[function(t,e,n){(function(t){(function(){var r,i,o,a="3.10.1",s=1,l=2,u=4,c=8,f=16,p=32,h=64,d=128,g=256,m=30,v="...",y=150,_=16,x=200,w=1,b=2,A="Expected a function",k="__lodash_placeholder__",E="[object Arguments]",C="[object Array]",T="[object Boolean]",I="[object Date]",O="[object Error]",S="[object Function]",R="[object Number]",M="[object Object]",L="[object RegExp]",P="[object String]",N="[object ArrayBuffer]",j="[object Float32Array]",D="[object Float64Array]",W="[object Int8Array]",B="[object Int16Array]",V="[object Int32Array]",U="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",q=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39|#96);/g,X=/[&<>"'`]/g,$=RegExp(K.source),J=RegExp(X.source),Q=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,it=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,ot=RegExp(it.source),at=/[\u0300-\u036f\ufe20-\ufe23]/g,st=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ut=/\w*$/,ct=/^0[xX]/,ft=/^\[object .+?Constructor\]$/,pt=/^\d+$/,ht=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,dt=/($^)/,gt=/['\n\r\u2028\u2029\\]/g,mt=(i="[A-Z\\xc0-\\xd6\\xd8-\\xde]",o="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(i+"+(?="+i+o+")|"+i+"?"+o+"|"+i+"+|[0-9]+","g")),vt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],yt=-1,_t={};_t[j]=_t[D]=_t[W]=_t[B]=_t[V]=_t[U]=_t[F]=_t[z]=_t[H]=!0,_t[E]=_t[C]=_t[N]=_t[T]=_t[I]=_t[O]=_t[S]=_t["[object Map]"]=_t[R]=_t[M]=_t[L]=_t["[object Set]"]=_t[P]=_t["[object WeakMap]"]=!1;var xt={};xt[E]=xt[C]=xt[N]=xt[T]=xt[I]=xt[j]=xt[D]=xt[W]=xt[B]=xt[V]=xt[R]=xt[M]=xt[L]=xt[P]=xt[U]=xt[F]=xt[z]=xt[H]=!0,xt[O]=xt[S]=xt["[object Map]"]=xt["[object Set]"]=xt["[object WeakMap]"]=!1;var wt={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss"},bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},At={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},kt={function:!0,object:!0},Et={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tt=kt[typeof n]&&n&&!n.nodeType&&n,It=kt[typeof e]&&e&&!e.nodeType&&e,Ot=Tt&&It&&"object"==typeof t&&t&&t.Object&&t,St=kt[typeof self]&&self&&self.Object&&self,Rt=kt[typeof window]&&window&&window.Object&&window,Mt=It&&It.exports===Tt&&Tt,Lt=Ot||Rt!==(this&&this.window)&&Rt||St||this;function Pt(t,e){if(t!==e){var n=null===t,i=t===r,o=t==t,a=null===e,s=e===r,l=e==e;if(t>e&&!a||!o||n&&!s&&l||i&&l)return 1;if(t<e&&!n||!l||a&&!i&&o||s&&o)return-1}return 0}function Nt(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function jt(t,e,n){if(e!=e)return Gt(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Dt(t){return"function"==typeof t||!1}function Wt(t){return null==t?"":t+""}function Bt(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function Vt(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function Ut(t,e){return Pt(t.criteria,e.criteria)||t.index-e.index}function Ft(t){return wt[t]}function zt(t){return bt[t]}function Ht(t,e,n){return e?t=Et[t]:n&&(t=Ct[t]),"\\"+t}function qt(t){return"\\"+Ct[t]}function Gt(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!=o)return i}return-1}function Yt(t){return!!t&&"object"==typeof t}function Kt(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function Xt(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=k,o[++i]=n);return o}function $t(t){for(var e=-1,n=t.length;++e<n&&Kt(t.charCodeAt(e)););return e}function Jt(t){for(var e=t.length;e--&&Kt(t.charCodeAt(e)););return e}function Qt(t){return At[t]}var Zt=function t(e){var n=(e=e?Zt.defaults(Lt.Object(),e,Zt.pick(Lt,vt)):Lt).Array,i=e.Date,o=e.Error,wt=e.Function,bt=e.Math,At=e.Number,kt=e.Object,Et=e.RegExp,Ct=e.String,Tt=e.TypeError,It=n.prototype,Ot=kt.prototype,St=Ct.prototype,Rt=wt.prototype.toString,Mt=Ot.hasOwnProperty,Kt=0,te=Ot.toString,ee=Lt._,ne=Et("^"+Rt.call(Mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=e.ArrayBuffer,ie=e.clearTimeout,oe=e.parseFloat,ae=bt.pow,se=Ot.propertyIsEnumerable,le=yr(e,"Set"),ue=e.setTimeout,ce=It.splice,fe=e.Uint8Array,pe=yr(e,"WeakMap"),he=bt.ceil,de=yr(kt,"create"),ge=bt.floor,me=yr(n,"isArray"),ve=e.isFinite,ye=yr(kt,"keys"),_e=bt.max,xe=bt.min,we=yr(i,"now"),be=e.parseInt,Ae=bt.random,ke=At.NEGATIVE_INFINITY,Ee=At.POSITIVE_INFINITY,Ce=4294967295,Te=Ce-1,Ie=Ce>>>1,Oe=9007199254740991,Se=pe&&new pe,Re={};function Me(t){if(Yt(t)&&!Gi(t)&&!(t instanceof Ne)){if(t instanceof Pe)return t;if(Mt.call(t,"__chain__")&&Mt.call(t,"__wrapped__"))return jr(t)}return new Pe(t)}function Le(){}function Pe(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}Me.support={};function Ne(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function je(){this.__data__={}}function De(t){var e=t?t.length:0;for(this.data={hash:de(null),set:new le};e--;)this.push(t[e])}function We(t,e){var n=t.data;return("string"==typeof e||$i(e)?n.set.has(e):n.hash[e])?0:-1}function Be(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function Ve(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ue(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Fe(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ze(t,e){for(var r=-1,i=t.length,o=n(i);++r<i;)o[r]=e(t[r],r,t);return o}function He(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function qe(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ge(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Ye(t,e,n,i){return t!==r&&Mt.call(i,n)?t:e}function Ke(t,e,n){for(var i=-1,o=yo(e),a=o.length;++i<a;){var s=o[i],l=t[s],u=n(l,e[s],s,t,e);(u==u?u===l:l!=l)&&(l!==r||s in t)||(t[s]=u)}return t}function Xe(t,e){return null==e?t:Je(e,yo(e),t)}function $e(t,e){for(var i=-1,o=null==t,a=!o&&xr(t),s=a?t.length:0,l=e.length,u=n(l);++i<l;){var c=e[i];u[i]=a?wr(c,s)?t[c]:r:o?r:t[c]}return u}function Je(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function Qe(t,e,n){var i=typeof t;return"function"==i?e===r?t:jn(t,e,n):null==t?Wo:"object"==i?xn(t):e===r?Ho(t):wn(t,e)}function Ze(t,e,n,i,o,a,s){var l;if(n&&(l=o?n(t,i,o):n(t)),l!==r)return l;if(!$i(t))return t;var u=Gi(t);if(u){if(l=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return Be(t,l)}else{var c=te.call(t),f=c==S;if(c!=M&&c!=E&&(!f||o))return xt[c]?function(t,e,n){var r=t.constructor;switch(e){case N:return Dn(t);case T:case I:return new r(+t);case j:case D:case W:case B:case V:case U:case F:case z:case H:var i=t.buffer;return new r(n?Dn(i):i,t.byteOffset,t.length);case R:case P:return new r(t);case L:var o=new r(t.source,ut.exec(t));o.lastIndex=t.lastIndex}return o}(t,c,e):o?t:{};if(l=function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=kt),new e}(f?{}:t),!e)return Xe(l,t)}a||(a=[]),s||(s=[]);for(var p=a.length;p--;)if(a[p]==t)return s[p];return a.push(t),s.push(l),(u?Ve:hn)(t,function(r,i){l[i]=Ze(r,e,n,i,t,a,s)}),l}Me.templateSettings={escape:Q,evaluate:Z,interpolate:tt,variable:"",imports:{_:Me}};var tn=function(){function t(){}return function(e){if($i(e)){t.prototype=e;var n=new t;t.prototype=r}return n||{}}}();function en(t,e,n){if("function"!=typeof t)throw new Tt(A);return ue(function(){t.apply(r,n)},e)}function nn(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=gr(),a=o==jt,s=a&&e.length>=x?Hn(e):null,l=e.length;s&&(o=We,a=!1,e=s);t:for(;++i<n;){var u=t[i];if(a&&u==u){for(var c=l;c--;)if(e[c]===u)continue t;r.push(u)}else o(e,u,0)<0&&r.push(u)}return r}var rn=Fn(hn),on=Fn(dn,!0);function an(t,e){var n=!0;return rn(t,function(t,r,i){return n=!!e(t,r,i)}),n}function sn(t,e){var n=[];return rn(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function ln(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function un(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];Yt(a)&&xr(a)&&(n||Gi(a)||qi(a))?e?un(a,e,n,r):He(r,a):n||(r[r.length]=a)}return r}var cn=zn(),fn=zn(!0);function pn(t,e){return cn(t,e,_o)}function hn(t,e){return cn(t,e,yo)}function dn(t,e){return fn(t,e,yo)}function gn(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];Xi(t[a])&&(o[++i]=a)}return o}function mn(t,e,n){if(null!=t){n!==r&&n in Pr(t)&&(e=[n]);for(var i=0,o=e.length;null!=t&&i<o;)t=t[e[i++]];return i&&i==o?t:r}}function vn(t,e,n,i,o,a){return t===e||(null==t||null==e||!$i(t)&&!Yt(e)?t!=t&&e!=e:function(t,e,n,i,o,a,s){var l=Gi(t),u=Gi(e),c=C,f=C;l||((c=te.call(t))==E?c=M:c!=M&&(l=no(t))),u||((f=te.call(e))==E?f=M:f!=M&&(u=no(e)));var p=c==M,h=f==M,d=c==f;if(d&&!l&&!p)return function(t,e,n){switch(n){case T:case I:return+t==+e;case O:return t.name==e.name&&t.message==e.message;case R:return t!=+t?e!=+e:t==+e;case L:case P:return t==e+""}return!1}(t,e,c);if(!o){var g=p&&Mt.call(t,"__wrapped__"),m=h&&Mt.call(e,"__wrapped__");if(g||m)return n(g?t.value():t,m?e.value():e,i,o,a,s)}if(!d)return!1;a||(a=[]),s||(s=[]);for(var v=a.length;v--;)if(a[v]==t)return s[v]==e;a.push(t),s.push(e);var y=(l?function(t,e,n,i,o,a,s){var l=-1,u=t.length,c=e.length;if(u!=c&&!(o&&c>u))return!1;for(;++l<u;){var f=t[l],p=e[l],h=i?i(o?p:f,o?f:p,l):r;if(h!==r){if(h)continue;return!1}if(o){if(!Ge(e,function(t){return f===t||n(f,t,i,o,a,s)}))return!1}else if(f!==p&&!n(f,p,i,o,a,s))return!1}return!0}:function(t,e,n,i,o,a,s){var l=yo(t),u=l.length,c=yo(e).length;if(u!=c&&!o)return!1;for(var f=u;f--;){var p=l[f];if(!(o?p in e:Mt.call(e,p)))return!1}for(var h=o;++f<u;){p=l[f];var d=t[p],g=e[p],m=i?i(o?g:d,o?d:g,p):r;if(!(m===r?n(d,g,i,o,a,s):m))return!1;h||(h="constructor"==p)}if(!h){var v=t.constructor,y=e.constructor;if(v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0})(t,e,n,i,o,a,s);return a.pop(),s.pop(),y}(t,e,vn,n,i,o,a))}function yn(t,e,n){var i=e.length,o=i,a=!n;if(null==t)return!o;for(t=Pr(t);i--;){var s=e[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=e[i])[0],u=t[l],c=s[1];if(a&&s[2]){if(u===r&&!(l in t))return!1}else{var f=n?n(u,c,l):r;if(!(f===r?vn(c,u,n,!0):f))return!1}}return!0}function _n(t,e){var r=-1,i=xr(t)?n(t.length):[];return rn(t,function(t,n,o){i[++r]=e(t,n,o)}),i}function xn(t){var e=vr(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null!=t&&t[n]===i&&(i!==r||n in Pr(t))}}return function(t){return yn(t,e)}}function wn(t,e){var n=Gi(t),i=Ar(t)&&Cr(e),o=t+"";return t=Nr(t),function(a){if(null==a)return!1;var s=o;if(a=Pr(a),(n||!i)&&!(s in a)){if(null==(a=1==t.length?a:mn(a,Cn(t,0,-1))))return!1;s=qr(t),a=Pr(a)}return a[s]===e?e!==r||s in a:vn(e,a[s],r,!0)}}function bn(t){return function(e){return null==e?r:e[t]}}function An(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&wr(r)){var i=r;ce.call(t,r,1)}}return t}function kn(t,e){return t+ge(Ae()*(e-t+1))}var En=Se?function(t,e){return Se.set(t,e),t}:Wo;function Cn(t,e,i){var o=-1,a=t.length;(e=null==e?0:+e||0)<0&&(e=-e>a?0:a+e),(i=i===r||i>a?a:+i||0)<0&&(i+=a),a=e>i?0:i-e>>>0,e>>>=0;for(var s=n(a);++o<a;)s[o]=t[o+e];return s}function Tn(t,e){var n;return rn(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function In(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function On(t,e,n){var r=pr(),i=-1;return e=ze(e,function(t){return r(t)}),In(_n(t,function(t){return{criteria:ze(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Pt(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*("asc"===u||!0===u?1:-1)}}return t.index-e.index}(t,e,n)})}function Sn(t,e){var n=-1,r=gr(),i=t.length,o=r==jt,a=o&&i>=x,s=a?Hn():null,l=[];s?(r=We,o=!1):(a=!1,s=e?[]:l);t:for(;++n<i;){var u=t[n],c=e?e(u,n,t):u;if(o&&u==u){for(var f=s.length;f--;)if(s[f]===c)continue t;e&&s.push(c),l.push(u)}else r(s,c,0)<0&&((e||a)&&s.push(c),l.push(u))}return l}function Rn(t,e){for(var r=-1,i=e.length,o=n(i);++r<i;)o[r]=t[e[r]];return o}function Mn(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Cn(t,r?0:o,r?o+1:i):Cn(t,r?o+1:0,r?i:o)}function Ln(t,e){var n=t;n instanceof Ne&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,He([n],o.args))}return n}function Pn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e==e&&i<=Ie){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return Nn(t,e,Wo,n)}function Nn(t,e,n,i){e=n(e);for(var o=0,a=t?t.length:0,s=e!=e,l=null===e,u=e===r;o<a;){var c=ge((o+a)/2),f=n(t[c]),p=f!==r,h=f==f;if(s)var d=h||i;else d=l?h&&p&&(i||null!=f):u?h&&(i||p):null!=f&&(i?f<=e:f<e);d?o=c+1:a=c}return xe(a,Te)}function jn(t,e,n){if("function"!=typeof t)return Wo;if(e===r)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function Dn(t){var e=new re(t.byteLength);return new fe(e).set(new fe(t)),e}function Wn(t,e,r){for(var i=r.length,o=-1,a=_e(t.length-i,0),s=-1,l=e.length,u=n(l+a);++s<l;)u[s]=e[s];for(;++o<i;)u[r[o]]=t[o];for(;a--;)u[s++]=t[o++];return u}function Bn(t,e,r){for(var i=-1,o=r.length,a=-1,s=_e(t.length-o,0),l=-1,u=e.length,c=n(s+u);++a<s;)c[a]=t[a];for(var f=a;++l<u;)c[f+l]=e[l];for(;++i<o;)c[f+r[i]]=t[a++];return c}function Vn(t,e){return function(n,r,i){var o=e?e():{};if(r=pr(r,i,3),Gi(n))for(var a=-1,s=n.length;++a<s;){var l=n[a];t(o,l,r(l,a,n),n)}else rn(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function Un(t){return zi(function(e,n){var i=-1,o=null==e?0:n.length,a=o>2?n[o-2]:r,s=o>2?n[2]:r,l=o>1?n[o-1]:r;for("function"==typeof a?(a=jn(a,l,5),o-=2):o-=(a="function"==typeof l?l:r)?1:0,s&&br(n[0],n[1],s)&&(a=o<3?r:a,o=1);++i<o;){var u=n[i];u&&t(e,u,a)}return e})}function Fn(t,e){return function(n,r){var i=n?mr(n):0;if(!Er(i))return t(n,r);for(var o=e?i:-1,a=Pr(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function zn(t){return function(e,n,r){for(var i=Pr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var l=o[s];if(!1===n(i[l],l,i))break}return e}}function Hn(t){return de&&le?new De(t):null}function qn(t){return function(e){for(var n=-1,r=No(To(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function Gn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=tn(t.prototype),r=t.apply(n,e);return $i(r)?r:n}}function Yn(t){return function e(n,i,o){o&&br(n,i,o)&&(i=r);var a=fr(n,t,r,r,r,r,r,i);return a.placeholder=e.placeholder,a}}function Kn(t,e){return zi(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(r,n))})}function Xn(t,e){return function(n,i,o){if(o&&br(n,i,o)&&(i=r),1==(i=pr(i,o,3)).length){var a=function(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var l=t[i],u=+e(l);n(u,a)&&(a=u,s=l)}return s}(n=Gi(n)?n:Lr(n),i,t,e);if(!n.length||a!==e)return a}return function(t,e,n,r){var i=r,o=i;return rn(t,function(t,a,s){var l=+e(t,a,s);(n(l,i)||l===r&&l===o)&&(i=l,o=t)}),o}(n,i,t,e)}}function $n(t,e){return function(n,i,o){if(i=pr(i,o,3),Gi(n)){var a=Nt(n,i,e);return a>-1?n[a]:r}return ln(n,i,t)}}function Jn(t){return function(e,n,r){return e&&e.length?Nt(e,n=pr(n,r,3),t):-1}}function Qn(t){return function(e,n,r){return ln(e,n=pr(n,r,3),t,!0)}}function Zn(t){return function(){for(var e,i=arguments.length,o=t?i:-1,a=0,s=n(i);t?o--:++o<i;){var l=s[a++]=arguments[o];if("function"!=typeof l)throw new Tt(A);!e&&Pe.prototype.thru&&"wrapper"==dr(l)&&(e=new Pe([],!0))}for(o=e?-1:i;++o<i;){var u=dr(l=s[o]),f="wrapper"==u?hr(l):r;e=f&&kr(f[0])&&f[1]==(d|c|p|g)&&!f[4].length&&1==f[9]?e[dr(f[0])].apply(e,f[3]):1==l.length&&kr(l)?e[u]():e.thru(l)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&Gi(n)&&n.length>=x)return e.plant(n).value();for(var r=0,o=i?s[r].apply(this,t):n;++r<i;)o=s[r].call(this,o);return o}}}function tr(t,e){return function(n,i,o){return"function"==typeof i&&o===r&&Gi(n)?t(n,i):e(n,jn(i,o,3))}}function er(t){return function(e,n,i){return"function"==typeof n&&i===r||(n=jn(n,i,3)),t(e,n,_o)}}function nr(t){return function(e,n,i){return"function"==typeof n&&i===r||(n=jn(n,i,3)),t(e,n)}}function rr(t){return function(e,n,r){var i={};return n=pr(n,r,3),hn(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function ir(t){return function(e,n,r){return e=Wt(e),(t?e:"")+lr(e,n,r)+(t?"":e)}}function or(t){var e=zi(function(n,i){var o=Xt(i,e.placeholder);return fr(n,t,r,i,o)});return e}function ar(t,e){return function(n,i,o,a){var s=arguments.length<3;return"function"==typeof i&&a===r&&Gi(n)?t(n,i,o,s):function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}(n,pr(i,a,4),o,s,e)}}function sr(t,e,i,o,a,g,m,v,y,_){var x=e&d,w=e&s,b=e&l,A=e&c,k=e&u,E=e&f,C=b?r:Gn(t);return function u(){for(var c=arguments.length,f=c,d=n(c);f--;)d[f]=arguments[f];if(o&&(d=Wn(d,o,a)),g&&(d=Bn(d,g,m)),A||E){var T=u.placeholder,I=Xt(d,T);if((c-=I.length)<_){var O=v?Be(v):r,S=_e(_-c,0);e|=A?p:h,e&=~(A?h:p),k||(e&=~(s|l));var R=[t,e,i,A?d:r,A?I:r,A?r:d,A?r:I,O,y,S],M=sr.apply(r,R);return kr(t)&&Rr(M,R),M.placeholder=T,M}}var L=w?i:this,P=b?L[t]:t;return v&&(d=function(t,e){for(var n=t.length,i=xe(e.length,n),o=Be(t);i--;){var a=e[i];t[i]=wr(a,n)?o[a]:r}return t}(d,v)),x&&y<d.length&&(d.length=y),this&&this!==Lt&&this instanceof u&&(P=C||Gn(t)),P.apply(L,d)}}function lr(t,e,n){var r=t.length;if(r>=(e=+e)||!ve(e))return"";var i=e-r;return Ro(n=null==n?" ":n+"",he(i/n.length)).slice(0,i)}function ur(t){var e=bt[t];return function(t,n){return(n=n===r?0:+n||0)?(n=ae(10,n),e(t*n)/n):e(t)}}function cr(t){return function(e,n,r,i){var o=pr(r);return null==r&&o===Qe?Pn(e,n,t):Nn(e,n,o(r,i,1),t)}}function fr(t,e,i,o,a,f,m,v){var y=e&l;if(!y&&"function"!=typeof t)throw new Tt(A);var _=o?o.length:0;if(_||(e&=~(p|h),o=a=r),_-=a?a.length:0,e&h){var x=o,w=a;o=a=r}var b=y?r:hr(t),E=[t,e,i,o,a,x,w,f,m,v];if(b&&(function(t,e){var n=t[1],r=e[1],i=n|r,o=i<d,a=r==d&&n==c||r==d&&n==g&&t[7].length<=e[8]||r==(d|g)&&n==c;if(!o&&!a)return t;r&s&&(t[2]=e[2],i|=n&s?0:u);var l=e[3];if(l){var f=t[3];t[3]=f?Wn(f,l,e[4]):Be(l),t[4]=f?Xt(t[3],k):Be(e[4])}(l=e[5])&&(f=t[5],t[5]=f?Bn(f,l,e[6]):Be(l),t[6]=f?Xt(t[5],k):Be(e[6])),(l=e[7])&&(t[7]=Be(l)),r&d&&(t[8]=null==t[8]?e[8]:xe(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(E,b),e=E[1],v=E[9]),E[9]=null==v?y?0:t.length:_e(v-_,0)||0,e==s)var C=function(t,e){var n=Gn(t);return function r(){return(this&&this!==Lt&&this instanceof r?n:t).apply(e,arguments)}}(E[0],E[2]);else C=e!=p&&e!=(s|p)||E[4].length?sr.apply(r,E):function(t,e,r,i){var o=e&s,a=Gn(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=i.length,f=n(c+l);++u<c;)f[u]=i[u];for(;l--;)f[u++]=arguments[++s];return(this&&this!==Lt&&this instanceof e?a:t).apply(o?r:this,f)}}.apply(r,E);return(b?En:Rr)(C,E)}function pr(t,e,n){var r=Me.callback||Do;return r=r===Do?Qe:r,n?r(t,e,n):r}var hr=Se?function(t){return Se.get(t)}:zo;function dr(t){for(var e=t.name,n=Re[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function gr(t,e,n){var r=Me.indexOf||zr;return r=r===zr?jt:r,t?r(t,e,n):r}var mr=bn("length");function vr(t){for(var e=Ao(t),n=e.length;n--;)e[n][2]=Cr(e[n][1]);return e}function yr(t,e){var n=null==t?r:t[e];return Ji(n)?n:r}function _r(t,e,n){null==t||Ar(e,t)||(t=1==(e=Nr(e)).length?t:mn(t,Cn(e,0,-1)),e=qr(e));var i=null==t?t:t[e];return null==i?r:i.apply(t,n)}function xr(t){return null!=t&&Er(mr(t))}function wr(t,e){return t="number"==typeof t||pt.test(t)?+t:-1,e=null==e?Oe:e,t>-1&&t%1==0&&t<e}function br(t,e,n){if(!$i(n))return!1;var r=typeof e;if("number"==r?xr(n)&&wr(e,n.length):"string"==r&&e in n){var i=n[e];return t==t?t===i:i!=i}return!1}function Ar(t,e){var n=typeof t;return!!("string"==n&&nt.test(t)||"number"==n)||!Gi(t)&&(!et.test(t)||null!=e&&t in Pr(e))}function kr(t){var e=dr(t);if(!(e in Ne.prototype))return!1;var n=Me[e];if(t===n)return!0;var r=hr(n);return!!r&&t===r[0]}function Er(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Oe}function Cr(t){return t==t&&!$i(t)}function Tr(t,e){t=Pr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function Ir(t,e){var n={};return pn(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}var Or,Sr,Rr=(Or=0,Sr=0,function(t,e){var n=Ci(),r=_-(n-Sr);if(Sr=n,r>0){if(++Or>=y)return t}else Or=0;return En(t,e)});function Mr(t){for(var e=_o(t),n=e.length,r=n&&t.length,i=!!r&&Er(r)&&(Gi(t)||qi(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&wr(s,r)||Mt.call(t,s))&&a.push(s)}return a}function Lr(t){return null==t?[]:xr(t)?$i(t)?t:kt(t):Eo(t)}function Pr(t){return $i(t)?t:kt(t)}function Nr(t){if(Gi(t))return t;var e=[];return Wt(t).replace(rt,function(t,n,r,i){e.push(r?i.replace(st,"$1"):n||t)}),e}function jr(t){return t instanceof Ne?t.clone():new Pe(t.__wrapped__,t.__chain__,Be(t.__actions__))}var Dr=zi(function(t,e){return Yt(t)&&xr(t)?nn(t,un(e,!1,!0)):[]});function Wr(t,e,n){return t&&t.length?((n?br(t,e,n):null==e)&&(e=1),Cn(t,e<0?0:e)):[]}function Br(t,e,n){var r=t?t.length:0;return r?((n?br(t,e,n):null==e)&&(e=1),Cn(t,0,(e=r-(+e||0))<0?0:e)):[]}var Vr=Jn(),Ur=Jn(!0);function Fr(t){return t?t[0]:r}function zr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?_e(r+n,0):n;else if(n){var i=Pn(t,e);return i<r&&(e==e?e===t[i]:t[i]!=t[i])?i:-1}return jt(t,e,n||0)}var Hr=zi(function(t){for(var e=t.length,r=e,i=n(f),o=gr(),a=o==jt,s=[];r--;){var l=t[r]=xr(l=t[r])?l:[];i[r]=a&&l.length>=120?Hn(r&&l):null}var u=t[0],c=-1,f=u?u.length:0,p=i[0];t:for(;++c<f;)if(l=u[c],(p?We(p,l):o(s,l,0))<0){for(r=e;--r;){var h=i[r];if((h?We(h,l):o(t[r],l,0))<0)continue t}p&&p.push(l),s.push(l)}return s});function qr(t){var e=t?t.length:0;return e?t[e-1]:r}var Gr=zi(function(t,e){var n=$e(t,e=un(e));return An(t,e.sort(Pt)),n});function Yr(t){return Wr(t,1)}var Kr=cr(),Xr=cr(!0);var $r=zi(function(t){return Sn(un(t,!1,!0))});function Jr(t,e,n,i){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=br(t,e,i=n)?r:e,e=!1);var o=pr();return null==n&&o===Qe||(n=o(n,i,3)),e&&gr()==jt?function(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],l=e?e(s,r,t):s;r&&n===l||(n=l,a[++o]=s)}return a}(t,n):Sn(t,n)}function Qr(t){if(!t||!t.length)return[];var e=-1,r=0;t=Fe(t,function(t){if(xr(t))return r=_e(t.length,r),!0});for(var i=n(r);++e<r;)i[e]=ze(t,bn(e));return i}function Zr(t,e,n){if(!t||!t.length)return[];var i=Qr(t);return null==e?i:(e=jn(e,n,4),ze(i,function(t){return qe(t,e,r,!0)}))}var ti=zi(function(t,e){return xr(t)?nn(t,e):[]});var ei=zi(Qr);function ni(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Gi(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}var ri=zi(function(t){var e=t.length,n=e>2?t[e-2]:r,i=e>1?t[e-1]:r;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):r,i=r),t.length=e,Zr(t,n,i)});function ii(t){var e=Me(t);return e.__chain__=!0,e}function oi(t,e,n){return e.call(n,t)}var ai=zi(function(t){return t=un(t),this.thru(function(e){return function(t,e){for(var r=-1,i=t.length,o=-1,a=e.length,s=n(i+a);++r<i;)s[r]=t[r];for(;++o<a;)s[r++]=e[o];return s}(Gi(e)?e:[Pr(e)],t)})});var si=zi(function(t,e){return $e(t,un(e))}),li=Vn(function(t,e,n){Mt.call(t,n)?++t[n]:t[n]=1});function ui(t,e,n){var i=Gi(t)?Ue:an;return n&&br(t,e,n)&&(e=r),"function"==typeof e&&n===r||(e=pr(e,n,3)),i(t,e)}function ci(t,e,n){return(Gi(t)?Fe:sn)(t,e=pr(e,n,3))}var fi=$n(rn),pi=$n(on,!0);var hi=tr(Ve,rn),di=tr(function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t},on),gi=Vn(function(t,e,n){Mt.call(t,n)?t[n].push(e):t[n]=[e]});function mi(t,e,n,r){var i=t?mr(t):0;return Er(i)||(i=(t=Eo(t)).length),n="number"!=typeof n||r&&br(e,n,r)?0:n<0?_e(i+n,0):n||0,"string"==typeof t||!Gi(t)&&eo(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&gr(t,e,n)>-1}var vi=Vn(function(t,e,n){t[n]=e}),yi=zi(function(t,e,i){var o=-1,a="function"==typeof e,s=Ar(e),l=xr(t)?n(t.length):[];return rn(t,function(t){var n=a?e:s&&null!=t?t[e]:r;l[++o]=n?n.apply(t,i):_r(t,e,i)}),l});function _i(t,e,n){return(Gi(t)?ze:_n)(t,e=pr(e,n,3))}var xi=Vn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var wi=ar(qe,rn),bi=ar(function(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},on);function Ai(t,e,n){if(n?br(t,e,n):null==e)return(i=(t=Lr(t)).length)>0?t[kn(0,i-1)]:r;var i,o=-1,a=io(t),s=(i=a.length)-1;for(e=xe(e<0?0:+e||0,i);++o<e;){var l=kn(o,s),u=a[l];a[l]=a[o],a[o]=u}return a.length=e,a}function ki(t,e,n){var i=Gi(t)?Ge:Tn;return n&&br(t,e,n)&&(e=r),"function"==typeof e&&n===r||(e=pr(e,n,3)),i(t,e)}var Ei=zi(function(t,e){if(null==t)return[];var n=e[2];return n&&br(e[0],e[1],n)&&(e.length=1),On(t,un(e),[])});var Ci=we||function(){return(new i).getTime()};function Ti(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Tt(A);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Ii=zi(function(t,e,n){var r=s;if(n.length){var i=Xt(n,Ii.placeholder);r|=p}return fr(t,r,e,n,i)}),Oi=zi(function(t,e){for(var n=-1,r=(e=e.length?un(e):vo(t)).length;++n<r;){var i=e[n];t[i]=fr(t[i],s,t)}return t}),Si=zi(function(t,e,n){var r=s|l;if(n.length){var i=Xt(n,Si.placeholder);r|=p}return fr(e,r,t,n,i)}),Ri=Yn(c),Mi=Yn(f);function Li(t,e,n){var i,o,a,s,l,u,c,f=0,p=!1,h=!0;if("function"!=typeof t)throw new Tt(A);if(e=e<0?0:+e||0,!0===n){var d=!0;h=!1}else $i(n)&&(d=!!n.leading,p="maxWait"in n&&_e(+n.maxWait||0,e),h="trailing"in n?!!n.trailing:h);function g(e,n){n&&ie(n),o=u=c=r,e&&(f=Ci(),a=t.apply(l,i),u||o||(i=l=r))}function m(){var t=e-(Ci()-s);t<=0||t>e?g(c,o):u=ue(m,t)}function v(){g(h,u)}function y(){if(i=arguments,s=Ci(),l=this,c=h&&(u||!d),!1===p)var n=d&&!u;else{o||d||(f=s);var g=p-(s-f),y=g<=0||g>p;y?(o&&(o=ie(o)),f=s,a=t.apply(l,i)):o||(o=ue(v,g))}return y&&u?u=ie(u):u||e===p||(u=ue(m,e)),n&&(y=!0,a=t.apply(l,i)),!y||u||o||(i=l=r),a}return y.cancel=function(){u&&ie(u),o&&ie(o),f=0,o=u=c=r},y}var Pi=zi(function(t,e){return en(t,1,e)}),Ni=zi(function(t,e,n){return en(t,e,n)}),ji=Zn(),Di=Zn(!0);function Wi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Tt(A);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new Wi.Cache,n}var Bi=zi(function(t,e){if(e=un(e),"function"!=typeof t||!Ue(e,Dt))throw new Tt(A);var n=e.length;return zi(function(r){for(var i=xe(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})});var Vi=or(p),Ui=or(h),Fi=zi(function(t,e){return fr(t,g,r,r,r,un(e))});function zi(t,e){if("function"!=typeof t)throw new Tt(A);return e=_e(e===r?t.length-1:+e||0,0),function(){for(var r=arguments,i=-1,o=_e(r.length-e,0),a=n(o);++i<o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=n(e+1);for(i=-1;++i<e;)s[i]=r[i];return s[e]=a,t.apply(this,s)}}function Hi(t,e){return t>e}function qi(t){return Yt(t)&&xr(t)&&Mt.call(t,"callee")&&!se.call(t,"callee")}var Gi=me||function(t){return Yt(t)&&Er(t.length)&&te.call(t)==C};function Yi(t,e,n,i){var o=(n="function"==typeof n?jn(n,i,3):r)?n(t,e):r;return o===r?vn(t,e,n):!!o}function Ki(t){return Yt(t)&&"string"==typeof t.message&&te.call(t)==O}function Xi(t){return $i(t)&&te.call(t)==S}function $i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ji(t){return null!=t&&(Xi(t)?ne.test(Rt.call(t)):Yt(t)&&ft.test(t))}function Qi(t){return"number"==typeof t||Yt(t)&&te.call(t)==R}function Zi(t){var e,n;return!(!Yt(t)||te.call(t)!=M||qi(t)||!(Mt.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(pn(t,function(t,e){n=e}),n===r||Mt.call(t,n))}function to(t){return $i(t)&&te.call(t)==L}function eo(t){return"string"==typeof t||Yt(t)&&te.call(t)==P}function no(t){return Yt(t)&&Er(t.length)&&!!_t[te.call(t)]}function ro(t,e){return t<e}function io(t){var e=t?mr(t):0;return Er(e)?e?Be(t):[]:Eo(t)}function oo(t){return Je(t,_o(t))}var ao=Un(function t(e,n,i,o,a){if(!$i(e))return e;var s=xr(n)&&(Gi(n)||no(n)),l=s?r:yo(n);return Ve(l||n,function(u,c){if(l&&(u=n[c=u]),Yt(u))o||(o=[]),a||(a=[]),function(t,e,n,i,o,a,s){for(var l=a.length,u=e[n];l--;)if(a[l]==u)return void(t[n]=s[l]);var c=t[n],f=o?o(c,u,n,t,e):r,p=f===r;p&&(f=u,xr(u)&&(Gi(u)||no(u))?f=Gi(c)?c:xr(c)?Be(c):[]:Zi(u)||qi(u)?f=qi(c)?oo(c):Zi(c)?c:{}:p=!1),a.push(u),s.push(f),p?t[n]=i(f,u,o,a,s):(f==f?f!==c:c==c)&&(t[n]=f)}(e,n,c,t,i,o,a);else{var f=e[c],p=i?i(f,u,c,e,n):r,h=p===r;h&&(p=u),p===r&&(!s||c in e)||!h&&(p==p?p===f:f!=f)||(e[c]=p)}}),e}),so=Un(function(t,e,n){return n?Ke(t,e,n):Xe(t,e)});var lo=Kn(so,function(t,e){return t===r?e:t}),uo=Kn(ao,function t(e,n){return e===r?n:ao(e,n,t)}),co=Qn(hn),fo=Qn(dn),po=er(cn),ho=er(fn),go=nr(hn),mo=nr(dn);function vo(t){return gn(t,_o(t))}var yo=ye?function(t){var e=null==t?r:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&xr(t)?Mr(t):$i(t)?ye(t):[]}:Mr;function _o(t){if(null==t)return[];$i(t)||(t=kt(t));var e=t.length;e=e&&Er(e)&&(Gi(t)||qi(t))&&e||0;for(var r=t.constructor,i=-1,o="function"==typeof r&&r.prototype===t,a=n(e),s=e>0;++i<e;)a[i]=i+"";for(var l in t)s&&wr(l,e)||"constructor"==l&&(o||!Mt.call(t,l))||a.push(l);return a}var xo=rr(!0),wo=rr(),bo=zi(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=ze(un(e),Ct),Tr(t,nn(_o(t),e));var n=jn(e[0],e[1],3);return Ir(t,function(t,e,r){return!n(t,e,r)})});function Ao(t){t=Pr(t);for(var e=-1,r=yo(t),i=r.length,o=n(i);++e<i;){var a=r[e];o[e]=[a,t[a]]}return o}var ko=zi(function(t,e){return null==t?{}:"function"==typeof e[0]?Ir(t,jn(e[0],e[1],3)):Tr(t,un(e))});function Eo(t){return Rn(t,yo(t))}var Co=qn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function To(t){return(t=Wt(t))&&t.replace(ht,Ft).replace(at,"")}var Io=qn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var Oo=ir(),So=ir(!0);function Ro(t,e){var n="";if(t=Wt(t),(e=+e)<1||!t||!ve(e))return n;do{e%2&&(n+=t),e=ge(e/2),t+=t}while(e);return n}var Mo=qn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Lo=qn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function Po(t,e,n){var r=t;return(t=Wt(t))?(n?br(r,e,n):null==e)?t.slice($t(t),Jt(t)+1):(e+="",t.slice(Bt(t,e),Vt(t,e)+1)):t}function No(t,e,n){return n&&br(t,e,n)&&(e=r),(t=Wt(t)).match(e||mt)||[]}var jo=zi(function(t,e){try{return t.apply(r,e)}catch(t){return Ki(t)?t:new o(t)}});function Do(t,e,n){return n&&br(t,e,n)&&(e=r),Yt(t)?Bo(t):Qe(t,e)}function Wo(t){return t}function Bo(t){return xn(Ze(t,!0))}var Vo=zi(function(t,e){return function(n){return _r(n,t,e)}}),Uo=zi(function(t,e){return function(n){return _r(t,n,e)}});function Fo(t,e,n){if(null==n){var i=$i(e),o=i?yo(e):r,a=o&&o.length?gn(e,o):r;(a?a.length:i)||(a=!1,n=e,e=t,t=this)}a||(a=gn(e,yo(e)));var s=!0,l=-1,u=Xi(t),c=a.length;!1===n?s=!1:$i(n)&&"chain"in n&&(s=n.chain);for(;++l<c;){var f=a[l],p=e[f];t[f]=p,u&&(t.prototype[f]=function(e){return function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__);return(r.__actions__=Be(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,He([this.value()],arguments))}}(p))}return t}function zo(){}function Ho(t){return Ar(t)?bn(t):function(t){var e=t+"";return t=Nr(t),function(n){return mn(n,t,e)}}(t)}var qo,Go=ur("ceil"),Yo=ur("floor"),Ko=Xn(Hi,ke),Xo=Xn(ro,Ee),$o=ur("round");return Me.prototype=Le.prototype,Pe.prototype=tn(Le.prototype),Pe.prototype.constructor=Pe,Ne.prototype=tn(Le.prototype),Ne.prototype.constructor=Ne,je.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},je.prototype.get=function(t){return"__proto__"==t?r:this.__data__[t]},je.prototype.has=function(t){return"__proto__"!=t&&Mt.call(this.__data__,t)},je.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},De.prototype.push=function(t){var e=this.data;"string"==typeof t||$i(t)?e.set.add(t):e.hash[t]=!0},Wi.Cache=je,Me.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Tt(A);var n=t;t=e,e=n}return t=ve(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}},Me.ary=function(t,e,n){return n&&br(t,e,n)&&(e=r),e=t&&null==e?t.length:_e(+e||0,0),fr(t,d,r,r,r,r,e)},Me.assign=so,Me.at=si,Me.before=Ti,Me.bind=Ii,Me.bindAll=Oi,Me.bindKey=Si,Me.callback=Do,Me.chain=ii,Me.chunk=function(t,e,r){e=(r?br(t,e,r):null==e)?1:_e(ge(e)||1,1);for(var i=0,o=t?t.length:0,a=-1,s=n(he(o/e));i<o;)s[++a]=Cn(t,i,i+=e);return s},Me.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i},Me.constant=function(t){return function(){return t}},Me.countBy=li,Me.create=function(t,e,n){var i=tn(t);return n&&br(t,e,n)&&(e=r),e?Xe(i,e):i},Me.curry=Ri,Me.curryRight=Mi,Me.debounce=Li,Me.defaults=lo,Me.defaultsDeep=uo,Me.defer=Pi,Me.delay=Ni,Me.difference=Dr,Me.drop=Wr,Me.dropRight=Br,Me.dropRightWhile=function(t,e,n){return t&&t.length?Mn(t,pr(e,n,3),!0,!0):[]},Me.dropWhile=function(t,e,n){return t&&t.length?Mn(t,pr(e,n,3),!0):[]},Me.fill=function(t,e,n,i){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&br(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=null==n?0:+n||0)<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:+i||0)<0&&(i+=o),o=n>i?0:i>>>0,n>>>=0;n<o;)t[n++]=e;return t}(t,e,n,i)):[]},Me.filter=ci,Me.flatten=function(t,e,n){var r=t?t.length:0;return n&&br(t,e,n)&&(e=!1),r?un(t,e):[]},Me.flattenDeep=function(t){return t&&t.length?un(t,!0):[]},Me.flow=ji,Me.flowRight=Di,Me.forEach=hi,Me.forEachRight=di,Me.forIn=po,Me.forInRight=ho,Me.forOwn=go,Me.forOwnRight=mo,Me.functions=vo,Me.groupBy=gi,Me.indexBy=vi,Me.initial=function(t){return Br(t,1)},Me.intersection=Hr,Me.invert=function(t,e,n){n&&br(t,e,n)&&(e=r);for(var i=-1,o=yo(t),a=o.length,s={};++i<a;){var l=o[i],u=t[l];e?Mt.call(s,u)?s[u].push(l):s[u]=[l]:s[u]=l}return s},Me.invoke=yi,Me.keys=yo,Me.keysIn=_o,Me.map=_i,Me.mapKeys=xo,Me.mapValues=wo,Me.matches=Bo,Me.matchesProperty=function(t,e){return wn(t,Ze(e,!0))},Me.memoize=Wi,Me.merge=ao,Me.method=Vo,Me.methodOf=Uo,Me.mixin=Fo,Me.modArgs=Bi,Me.negate=function(t){if("function"!=typeof t)throw new Tt(A);return function(){return!t.apply(this,arguments)}},Me.omit=bo,Me.once=function(t){return Ti(2,t)},Me.pairs=Ao,Me.partial=Vi,Me.partialRight=Ui,Me.partition=xi,Me.pick=ko,Me.pluck=function(t,e){return _i(t,Ho(e))},Me.property=Ho,Me.propertyOf=function(t){return function(e){return mn(t,Nr(e),e+"")}},Me.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=gr(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)ce.call(e,o,1);return e},Me.pullAt=Gr,Me.range=function(t,e,i){i&&br(t,e,i)&&(e=i=r),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var o=-1,a=_e(he((e-t)/(i||1)),0),s=n(a);++o<a;)s[o]=t,t+=i;return s},Me.rearg=Fi,Me.reject=function(t,e,n){var r=Gi(t)?Fe:sn;return e=pr(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})},Me.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=pr(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return An(t,o),r},Me.rest=Yr,Me.restParam=zi,Me.set=function(t,e,n){if(null==t)return t;for(var r=e+"",i=-1,o=(e=null!=t[r]||Ar(e,t)?[r]:Nr(e)).length,a=o-1,s=t;null!=s&&++i<o;){var l=e[i];$i(s)&&(i==a?s[l]=n:null==s[l]&&(s[l]=wr(e[i+1])?[]:{})),s=s[l]}return t},Me.shuffle=function(t){return Ai(t,Ee)},Me.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&br(t,e,n)&&(e=0,n=r),Cn(t,e,n)):[]},Me.sortBy=function(t,e,n){if(null==t)return[];n&&br(t,e,n)&&(e=r);var i=-1;return e=pr(e,n,3),In(_n(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}}),Ut)},Me.sortByAll=Ei,Me.sortByOrder=function(t,e,n,i){return null==t?[]:(i&&br(e,n,i)&&(n=r),Gi(e)||(e=null==e?[]:[e]),Gi(n)||(n=null==n?[]:[n]),On(t,e,n))},Me.spread=function(t){if("function"!=typeof t)throw new Tt(A);return function(e){return t.apply(this,e)}},Me.take=function(t,e,n){return t&&t.length?((n?br(t,e,n):null==e)&&(e=1),Cn(t,0,e<0?0:e)):[]},Me.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?br(t,e,n):null==e)&&(e=1),Cn(t,(e=r-(+e||0))<0?0:e)):[]},Me.takeRightWhile=function(t,e,n){return t&&t.length?Mn(t,pr(e,n,3),!1,!0):[]},Me.takeWhile=function(t,e,n){return t&&t.length?Mn(t,pr(e,n,3)):[]},Me.tap=function(t,e,n){return e.call(n,t),t},Me.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Tt(A);return!1===n?r=!1:$i(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Li(t,e,{leading:r,maxWait:+e,trailing:i})},Me.thru=oi,Me.times=function(t,e,r){if((t=ge(t))<1||!ve(t))return[];var i=-1,o=n(xe(t,Ce));for(e=jn(e,r,1);++i<t;)i<Ce?o[i]=e(i):e(i);return o},Me.toArray=io,Me.toPlainObject=oo,Me.transform=function(t,e,n,i){var o=Gi(t)||no(t);if(e=pr(e,i,4),null==n)if(o||$i(t)){var a=t.constructor;n=o?Gi(t)?new a:[]:tn(Xi(a)?a.prototype:r)}else n={};return(o?Ve:hn)(t,function(t,r,i){return e(n,t,r,i)}),n},Me.union=$r,Me.uniq=Jr,Me.unzip=Qr,Me.unzipWith=Zr,Me.values=Eo,Me.valuesIn=function(t){return Rn(t,_o(t))},Me.where=function(t,e){return ci(t,xn(e))},Me.without=ti,Me.wrap=function(t,e){return fr(e=null==e?Wo:e,p,r,[t],[])},Me.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(xr(n))var r=r?He(nn(r,n),nn(n,r)):n}return r?Sn(r):[]},Me.zip=ei,Me.zipObject=ni,Me.zipWith=ri,Me.backflow=Di,Me.collect=_i,Me.compose=Di,Me.each=hi,Me.eachRight=di,Me.extend=so,Me.iteratee=Do,Me.methods=vo,Me.object=ni,Me.select=ci,Me.tail=Yr,Me.unique=Jr,Fo(Me,Me),Me.add=function(t,e){return(+t||0)+(+e||0)},Me.attempt=jo,Me.camelCase=Co,Me.capitalize=function(t){return(t=Wt(t))&&t.charAt(0).toUpperCase()+t.slice(1)},Me.ceil=Go,Me.clone=function(t,e,n,r){return e&&"boolean"!=typeof e&&br(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?Ze(t,e,jn(n,r,1)):Ze(t,e)},Me.cloneDeep=function(t,e,n){return"function"==typeof e?Ze(t,!0,jn(e,n,1)):Ze(t,!0)},Me.deburr=To,Me.endsWith=function(t,e,n){e+="";var i=(t=Wt(t)).length;return n=n===r?i:xe(n<0?0:+n||0,i),(n-=e.length)>=0&&t.indexOf(e,n)==n},Me.escape=function(t){return(t=Wt(t))&&J.test(t)?t.replace(X,zt):t},Me.escapeRegExp=function(t){return(t=Wt(t))&&ot.test(t)?t.replace(it,Ht):t||"(?:)"},Me.every=ui,Me.find=fi,Me.findIndex=Vr,Me.findKey=co,Me.findLast=pi,Me.findLastIndex=Ur,Me.findLastKey=fo,Me.findWhere=function(t,e){return fi(t,xn(e))},Me.first=Fr,Me.floor=Yo,Me.get=function(t,e,n){var i=null==t?r:mn(t,Nr(e),e+"");return i===r?n:i},Me.gt=Hi,Me.gte=function(t,e){return t>=e},Me.has=function(t,e){if(null==t)return!1;var n=Mt.call(t,e);if(!n&&!Ar(e)){if(null==(t=1==(e=Nr(e)).length?t:mn(t,Cn(e,0,-1))))return!1;e=qr(e),n=Mt.call(t,e)}return n||Er(t.length)&&wr(e,t.length)&&(Gi(t)||qi(t))},Me.identity=Wo,Me.includes=mi,Me.indexOf=zr,Me.inRange=function(t,e,n){return e=+e||0,n===r?(n=e,e=0):n=+n||0,t>=xe(e,n)&&t<_e(e,n)},Me.isArguments=qi,Me.isArray=Gi,Me.isBoolean=function(t){return!0===t||!1===t||Yt(t)&&te.call(t)==T},Me.isDate=function(t){return Yt(t)&&te.call(t)==I},Me.isElement=function(t){return!!t&&1===t.nodeType&&Yt(t)&&!Zi(t)},Me.isEmpty=function(t){return null==t||(xr(t)&&(Gi(t)||eo(t)||qi(t)||Yt(t)&&Xi(t.splice))?!t.length:!yo(t).length)},Me.isEqual=Yi,Me.isError=Ki,Me.isFinite=function(t){return"number"==typeof t&&ve(t)},Me.isFunction=Xi,Me.isMatch=function(t,e,n,i){return n="function"==typeof n?jn(n,i,3):r,yn(t,vr(e),n)},Me.isNaN=function(t){return Qi(t)&&t!=+t},Me.isNative=Ji,Me.isNull=function(t){return null===t},Me.isNumber=Qi,Me.isObject=$i,Me.isPlainObject=Zi,Me.isRegExp=to,Me.isString=eo,Me.isTypedArray=no,Me.isUndefined=function(t){return t===r},Me.kebabCase=Io,Me.last=qr,Me.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?_e(r+n,0):xe(n||0,r-1))+1;else if(n){var o=t[i=Pn(t,e,!0)-1];return(e==e?e===o:o!=o)?i:-1}if(e!=e)return Gt(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},Me.lt=ro,Me.lte=function(t,e){return t<=e},Me.max=Ko,Me.min=Xo,Me.noConflict=function(){return Lt._=ee,this},Me.noop=zo,Me.now=Ci,Me.pad=function(t,e,n){e=+e;var r=(t=Wt(t)).length;if(r>=e||!ve(e))return t;var i=(e-r)/2,o=ge(i);return(n=lr("",he(i),n)).slice(0,o)+t+n},Me.padLeft=Oo,Me.padRight=So,Me.parseInt=function(t,e,n){return(n?br(t,e,n):null==e)?e=0:e&&(e=+e),t=Po(t),be(t,e||(ct.test(t)?16:10))},Me.random=function(t,e,n){n&&br(t,e,n)&&(e=n=r);var i=null==t,o=null==e;if(null==n&&(o&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,o=!0)),i&&o&&(e=1,o=!1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Ae();return xe(t+a*(e-t+oe("1e-"+((a+"").length-1))),e)}return kn(t,e)},Me.reduce=wi,Me.reduceRight=bi,Me.repeat=Ro,Me.result=function(t,e,n){var i=null==t?r:t[e];return i===r&&(null==t||Ar(e,t)||(i=null==(t=1==(e=Nr(e)).length?t:mn(t,Cn(e,0,-1)))?r:t[qr(e)]),i=i===r?n:i),Xi(i)?i.call(t):i},Me.round=$o,Me.runInContext=t,Me.size=function(t){var e=t?mr(t):0;return Er(e)?e:yo(t).length},Me.snakeCase=Mo,Me.some=ki,Me.sortedIndex=Kr,Me.sortedLastIndex=Xr,Me.startCase=Lo,Me.startsWith=function(t,e,n){return t=Wt(t),n=null==n?0:xe(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n},Me.sum=function(t,e,n){return n&&br(t,e,n)&&(e=r),1==(e=pr(e,n,3)).length?function(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}(Gi(t)?t:Lr(t),e):function(t,e){var n=0;return rn(t,function(t,r,i){n+=+e(t,r,i)||0}),n}(t,e)},Me.template=function(t,e,n){var i=Me.templateSettings;n&&br(t,e,n)&&(e=n=r),t=Wt(t);var o,a,s=Ke(Xe({},(e=Ke(Xe({},n||e),i,Ye)).imports),i.imports,Ye),l=yo(s),u=Rn(s,l),c=0,f=e.interpolate||dt,p="__p += '",h=Et((e.escape||dt).source+"|"+f.source+"|"+(f===tt?lt:dt).source+"|"+(e.evaluate||dt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++yt+"]")+"\n";t.replace(h,function(e,n,r,i,s,l){return r||(r=i),p+=t.slice(c,l).replace(gt,qt),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),p+="';\n";var g=e.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(q,""):p).replace(G,"$1").replace(Y,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=jo(function(){return wt(l,d+"return "+p).apply(r,u)});if(m.source=p,Ki(m))throw m;return m},Me.trim=Po,Me.trimLeft=function(t,e,n){var r=t;return(t=Wt(t))?(n?br(r,e,n):null==e)?t.slice($t(t)):t.slice(Bt(t,e+"")):t},Me.trimRight=function(t,e,n){var r=t;return(t=Wt(t))?(n?br(r,e,n):null==e)?t.slice(0,Jt(t)+1):t.slice(0,Vt(t,e+"")+1):t},Me.trunc=function(t,e,n){n&&br(t,e,n)&&(e=r);var i=m,o=v;if(null!=e)if($i(e)){var a="separator"in e?e.separator:a;i="length"in e?+e.length||0:i,o="omission"in e?Wt(e.omission):o}else i=+e||0;if(i>=(t=Wt(t)).length)return t;var s=i-o.length;if(s<1)return o;var l=t.slice(0,s);if(null==a)return l+o;if(to(a)){if(t.slice(s).search(a)){var u,c,f=t.slice(0,s);for(a.global||(a=Et(a.source,(ut.exec(a)||"")+"g")),a.lastIndex=0;u=a.exec(f);)c=u.index;l=l.slice(0,null==c?s:c)}}else if(t.indexOf(a,s)!=s){var p=l.lastIndexOf(a);p>-1&&(l=l.slice(0,p))}return l+o},Me.unescape=function(t){return(t=Wt(t))&&$.test(t)?t.replace(K,Qt):t},Me.uniqueId=function(t){var e=++Kt;return Wt(t)+e},Me.words=No,Me.all=ui,Me.any=ki,Me.contains=mi,Me.eq=Yi,Me.detect=fi,Me.foldl=wi,Me.foldr=bi,Me.head=Fr,Me.include=mi,Me.inject=wi,Fo(Me,(qo={},hn(Me,function(t,e){Me.prototype[e]||(qo[e]=t)}),qo),!1),Me.sample=Ai,Me.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Ai(e,t)}):Ai(this.value())},Me.VERSION=a,Ve(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Me[t].placeholder=Me}),Ve(["drop","take"],function(t,e){Ne.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Ne(this);n=null==n?1:_e(ge(n)||0,0);var i=this.clone();return r?i.__takeCount__=xe(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},Ne.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ve(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=b;Ne.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:pr(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),Ve(["first","last"],function(t,e){var n="take"+(e?"Right":"");Ne.prototype[t]=function(){return this[n](1).value()[0]}}),Ve(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Ne.prototype[t]=function(){return this.__filtered__?new Ne(this):this[n](1)}}),Ve(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?xn:Ho;Ne.prototype[t]=function(t){return this[n](r(t))}}),Ne.prototype.compact=function(){return this.filter(Wo)},Ne.prototype.reject=function(t,e){return t=pr(t,e,1),this.filter(function(e){return!t(e)})},Ne.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new Ne(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=+e||0)<0?n.dropRight(-e):n.take(e-t)),n)},Ne.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Ne.prototype.toArray=function(){return this.take(Ee)},hn(Ne.prototype,function(t,e){var n=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e),o=Me[i?"take"+("last"==e?"Right":""):e];o&&(Me.prototype[e]=function(){var e=i?[1]:arguments,a=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,u=s instanceof Ne,c=e[0],f=u||Gi(s);f&&n&&"function"==typeof c&&1!=c.length&&(u=f=!1);var p=function(t){return i&&a?o(t,1)[0]:o.apply(r,He([t],e))},h={func:oi,args:[p],thisArg:r},d=u&&!l;if(i&&!a)return d?((s=s.clone()).__actions__.push(h),t.call(s)):o.call(r,this.value())[0];if(!i&&f){s=d?s:new Ne(this);var g=t.apply(s,e);return g.__actions__.push(h),new Pe(g,a)}return this.thru(p)})}),Ve(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?St:It)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);Me.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),hn(Ne.prototype,function(t,e){var n=Me[e];if(n){var r=n.name;(Re[r]||(Re[r]=[])).push({name:e,func:n})}}),Re[sr(r,l).name]=[{name:"wrapper",func:r}],Ne.prototype.clone=function(){var t=new Ne(this.__wrapped__);return t.__actions__=Be(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Be(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Be(this.__views__),t},Ne.prototype.reverse=function(){if(this.__filtered__){var t=new Ne(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ne.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gi(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=xe(e,t+a);break;case"takeRight":t=_e(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=xe(l,this.__takeCount__);if(!n||i<x||i==l&&h==l)return Ln(r&&n?t.reverse():t,this.__actions__);var d=[];t:for(;l--&&p<h;){for(var g=-1,m=t[u+=e];++g<f;){var v=c[g],y=v.iteratee,_=v.type,A=y(m);if(_==b)m=A;else if(!A){if(_==w)continue t;break t}}d[p++]=m}return d},Me.prototype.chain=function(){return ii(this)},Me.prototype.commit=function(){return new Pe(this.value(),this.__chain__)},Me.prototype.concat=ai,Me.prototype.plant=function(t){for(var e,n=this;n instanceof Le;){var r=jr(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Me.prototype.reverse=function(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Ne){var n=t;return this.__actions__.length&&(n=new Ne(this)),(n=n.reverse()).__actions__.push({func:oi,args:[e],thisArg:r}),new Pe(n,this.__chain__)}return this.thru(e)},Me.prototype.toString=function(){return this.value()+""},Me.prototype.run=Me.prototype.toJSON=Me.prototype.valueOf=Me.prototype.value=function(){return Ln(this.__wrapped__,this.__actions__)},Me.prototype.collect=Me.prototype.map,Me.prototype.head=Me.prototype.first,Me.prototype.select=Me.prototype.filter,Me.prototype.tail=Me.prototype.rest,Me}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?Lt._=Zt:Tt&&It?Mt?(It.exports=Zt)._=Zt:Tt._=Zt:Lt._=Zt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,n){var r=1e3,i=60*r,o=60*i,a=24*o,s=365.25*a;function l(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if((t=""+t).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(t):e.long?l(n=t,a,"day")||l(n,o,"hour")||l(n,i,"minute")||l(n,r,"second")||n+" ms":function(t){return t>=a?Math.round(t/a)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);var n}},{}],26:[function(t,e,n){e.exports=t("./lib/retry")},{"./lib/retry":27}],27:[function(t,e,n){var r=t("./retry_operation");n.operation=function(t){var e=!1;t&&!0===t.forever&&(e=!0);var i=n.timeouts(t);return new r(i,e)},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in t)e[n]=t[n];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<e.retries;i++)r.push(this.createTimeout(i,e));return r.sort(function(t,e){return t-e}),r},n.createTimeout=function(t,e){var n=e.randomize?Math.random()+1:1,r=Math.round(n*e.minTimeout*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout)},n.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r)for(var i in r=[],t)"function"==typeof t[i]&&r.push(i);for(var o=0;o<r.length;o++){var a=r[o],s=t[a];t[a]=function(){var r=n.operation(e),i=Array.prototype.slice.call(arguments),o=i.pop();i.push(function(t){r.retry(t)||(t&&(arguments[0]=r.mainError()),o.apply(this,arguments))}),r.attempt(function(){s.apply(t,i)})},t[a].options=e}}},{"./retry_operation":28}],28:[function(t,e,n){function r(t,e){this._timeouts=t,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,e&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=r,r.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;this._errors.push(t);var e=this._timeouts.shift();if(void 0===e){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),e=this._timeouts.shift()}var n=this;return setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout)),n._fn(n._attempts)},e),!0},r.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,a=(t[o]||0)+1;t[o]=a,a>=n&&(e=i,n=a)}return e}},{}],29:[function(t,e,n){e.exports=function(){var t=[].slice.call(arguments,0).join("/");return t.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}},{}],30:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(a(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(u=n.slice()).length,l=0;l<r;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],31:[function(t,e,n){var r,i=e.exports={},o=[],a=!1,s=-1;function l(){a=!1,r.length?o=r.concat(o):s=-1,o.length&&u()}function u(){if(!a){var t=setTimeout(l);a=!0;for(var e=o.length;e;){for(r=o,o=[];++s<e;)r&&r[s].run();s=-1,e=o.length}r=null,a=!1,clearTimeout(t)}}function c(t,e){this.fun=t,this.array=e}function f(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];o.push(new c(t,e)),1!==o.length||a||setTimeout(u,0)},c.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}]},{},[]);]]></script>
        <script_name>kore-ai-sdk3.min.js</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-01-02 05:25:24</sys_created_on>
        <sys_id>808039e097a775109b137076f053af07</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</sys_name>
        <sys_package display_value="IT Assist" source="x_831378_kore_ai_0">5db40dbc2f21111051c859a72799b60c</sys_package>
        <sys_policy/>
        <sys_scope display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</sys_scope>
        <sys_update_name>sys_ui_script_808039e097a775109b137076f053af07</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-01-02 05:25:24</sys_updated_on>
        <ui_type>0</ui_type>
        <use_scoped_format>false</use_scoped_format>
    </sys_ui_script>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</application>
        <file_path/>
        <instance_id>a8ade591db83d5140288c597059619f8</instance_id>
        <instance_name>dev143442</instance_name>
        <name>sys_ui_script_808039e097a775109b137076f053af07</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_script"&gt;&lt;sys_ui_script action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;description&gt;There are 7 part of the &amp;#13;
kore ai sdk. This is the thrd part of the sdk.  &lt;/description&gt;&lt;global&gt;false&lt;/global&gt;&lt;ignore_in_now_experience&gt;false&lt;/ignore_in_now_experience&gt;&lt;name&gt;x_831378_kore_ai_0.kore-ai-sdk3.min.js&lt;/name&gt;&lt;script&gt;&lt;![CDATA[var KoreGraphAdapter=function(t){function e(e,n){var i=e.data,o=e.columnsInfo,a=e.xAxis,s=e.yAxis,l=e.colorRange,u=e.mainDiv,c=u.substr(1,u.length),f=e.label,p=e.requireLegend;d3.select(u).append("svg").attr("width",n.outerWidth).attr("height",n.outerHeight);var h=d3.select(u+" svg"),d=20,g=40,m=70,v=n.innerWidth,y=n.innerHeight,_=h.append("g").attr("transform","translate("+m+","+d+")");null!=p&amp;&amp;void 0!=p&amp;&amp;0!=p&amp;&amp;(t("#Legend_"+c).remove(),function(e,n,r){var i=d3.scaleOrdinal().range(r),o=e.substr(1,e.length);o=o.replace(/ +/g,"").replace(/#/g,""),t(e).before("&lt;div id='Legend_"+o+"' class='pmd-card-body' style='margin-top:0; margin-bottom:0;'&gt;&lt;/div&gt;"),Object.keys(n).forEach(function(e){var r=i(e);t("#Legend_"+o).append("&lt;span class='team-graph team1' style='display: inline-block; margin-right:10px;margin-left: 20px;'&gt;        &lt;span style='background:"+r+";width: 10px;height: 10px;display: inline-block;vertical-align: middle;'&gt;&amp;nbsp;&lt;/span&gt;        &lt;span title="+n[e].replace(/[ ]/g,"Â ")+" style='padding-top: 0;font-family:Source Sans Pro, sans-serif;font-size: 13px;display: inline;'&gt;"+(n[e].length&gt;10?n[e].slice(0,7)+"...":n[e])+" &lt;/span&gt;    &lt;/span&gt;")})}(u,o,l));var x=d3.scaleBand().rangeRound([y,0]).paddingInner(.1),w=d3.scaleBand().padding(.05),b=d3.scaleLinear().rangeRound([0,v]),A=d3.scaleOrdinal().range(l),k=Object.keys(o);x.domain(i.map(function(t){return t[s]})),w.domain(k).rangeRound([0,x.bandwidth()]),b.domain([0,d3.max(i,function(t){return d3.max(k,function(e){return t[e]})})]).nice(),maxTicks=10;_.append("g").selectAll("g").data(i).enter().append("g").attr("transform",function(t){return"translate(0,"+x(t[s])+")"}).selectAll("rect").data(function(t,e){return k.map(function(n){return{key:n,value:t[n],index:n+"_"+e+"_"+t[s],dispVal:t[n+"dispVal"]}})}).enter().append("rect").attr("y",function(t){return w(t.key)}).attr("width",function(t){return b(t.value)}).attr("data-index",function(t,e){return t.index}).attr("displayVal",function(t){return t.dispVal}).attr("height",w.bandwidth()).on("mouseover",function(){C.style("display",null)}).on("mouseout",function(){C.style("display","none")}).on("mousemove",function(e){if("block"===t("#myPreviewModal").css("display"))var n=d3.event.pageX-document.querySelector(".chartContainerDiv").getBoundingClientRect().x+10,r=d3.event.pageY-document.querySelector(".chartContainerDiv").getBoundingClientRect().y+10;else n=d3.event.pageX-document.querySelector(u).getBoundingClientRect().x+10,r=d3.event.pageY-document.querySelector(u).getBoundingClientRect().y+10;if(this.attributes.displayVal)var i=this.attributes.displayVal.value;else i=e.value;d3.mouse(this)[0],d3.mouse(this)[1];C.attr("transform","translate("+n+","+r+")"),C.select("text").text(i)}).attr("fill",function(t){return A(t.key)});var E={};E.svg=h,E.cssPrefix="horgroupBar0_",E.data=i,E.keys=k,E.height=y,E.width=v,E.label=f,E.yAxis=s,E.xAxis=a,r.addTooltips(E);var C=h.append("g").attr("class","tooltipHBC").style("display","none");C.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),C.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold"),_.append("g").attr("class","axis").attr("transform","translate(0,"+y+")").call(d3.axisBottom(b).ticks(maxTicks)).append("text").attr("x",v/2).attr("y",.7*g).attr("dx","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),_.append("g").attr("class","axis").call(d3.axisLeft(x).ticks(null,"s")).append("text").attr("x",.4*y*-1).attr("y",.8*m*-1).attr("dy","0.71em").attr("fill","#000").attr("transform","rotate(-90)").attr("font-weight","bold"),_.selectAll(".axis text").attr("class","chart-disp-val"),_.selectAll(".axis line").attr("class","chart-axis-line"),_.selectAll(".axis .domain").classed("chart-axis-line",!0)}var n=function(t){var e=document.getElementById(t),n=0,r=0;if(e){var i=e.getBBox();n=i.width,r=i.height}else console.log("error: getDimensions() "+t+" not found.");return{w:n,h:r}},r={addTooltips:function(t){var e=t.keys,i=t.svg.append("g").selectAll("g").data(t.data).enter().append("g").attr("class",function(e,n){return t.cssPrefix+"tooltips_"+n});tooltips=i.selectAll("g").data(function(n,r){return e.map(function(e){return{key:e,value:n[e],index:e+"_"+r+"_"+n[t.yAxis]}})}).enter().append("g").attr("class",t.cssPrefix+"tooltip").attr("id",function(e,n){return t.cssPrefix+"tooltip"+e.index}).style("opacity",0).append("rect").attr("rx",2).attr("ry",2).attr("x",-2).attr("opacity",.71).style("fill","#000000"),i.selectAll("g").data(function(n,r){return e.map(function(e){return{key:e,value:n[e],index:e+"_"+r+"_"+n[t.yAxis]}})}).append("text").attr("fill",function(t){return"#efefef"}).style("font-size",function(t){return 10}).style("font-family",function(t){return"arial"}).text(function(e,n){var i=t.label.xAxis+":{value}";return r.replacePlaceholders(t,i,n,{value:e.value})}),i.selectAll("g rect").attr("width",function(e,r){return n(t.cssPrefix+"tooltip"+e.index).w+8}).attr("height",function(e,r){return n(t.cssPrefix+"tooltip"+e.index).h+8}).attr("y",function(e,r){return-n(t.cssPrefix+"tooltip"+e.index).h/2+1})},showTooltip:function(t,e){var n=250;r.currentTooltip===e&amp;&amp;(n=1),r.currentTooltip=e,d3.select("#"+t.cssPrefix+"tooltip"+e).transition().duration(n).style("opacity",function(){return 1}),r.moveTooltip(t)},moveTooltip:function(t){d3.selectAll("#"+t.cssPrefix+"tooltip"+r.currentTooltip).attr("transform",function(t){var e=d3.mouse(this.parentNode);return"translate("+(e[0]+4+2)+","+(e[1]-8-2)+")"})},hideTooltip:function(t,e){d3.select("#"+t.cssPrefix+"tooltip"+e).style("opacity",function(){return 0}),d3.select("#"+t.cssPrefix+"tooltip"+r.currentTooltip).attr("transform",function(e,n){return"translate("+(t.width+1e3)+","+(t.height+1e3)+")"})},replacePlaceholders:function(t,e,n,r){return e.replace(/\{(\w+)\}/g,function(t){var e=arguments[1];return r.hasOwnProperty(e)?r[arguments[1]]:arguments[0]})}};return{drawD3Pie:function(e,n,r,i){var o=e,a=3;legendCenterOffset=0,e.message?o=e.message[0].component.payload:(fromWidgets=!0,a=4,legendCenterOffset=-15);for(var s=[],l=0,u=0;u&lt;o.elements.length;u++)s[u]={},s[u].label=o.elements[u].title,s[u].count=o.elements[u].value,s[u].dispVal=o.elements[u].displayValue,o.elements[u].hasOwnProperty("subTitle")&amp;&amp;(s[u].subTitle=o.elements[u].subTitle),l+=Number(s[u].count);var c=0;for(u=0;u&lt;o.elements.length;u++)s[u].percentage=Math.round(s[u].count/l*100),u===o.elements.length-1&amp;&amp;(s[u].percentage=100-c),c+=s[u].percentage;var f=n.width,p=n.height,h=Math.min(f,p)/2-20,d=n.legendRectSize,g=n.legendSpacing,m=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),v=d3.select(r).append("svg").attr("width",f-15).attr("height",p).append("g").attr("class","pieRegular").attr("transform","translate("+(f/a+3)+","+p/2+")"),y=d3.arc().innerRadius(0).outerRadius(h),_=d3.arc().outerRadius(1.05*h).innerRadius(.9*h),x=d3.pie().value(function(t){return t.count}).sort(null),w=d3.select(r).append("div").attr("class","legend-tooltip-pie-chart no-show").attr("transform",function(t){console.log(t)}).on("mouseleave",function(e){w.attr("class","legend-tooltip-pie-chart no-show"),t(".more-legend").removeClass("no-visible")});t(".listTemplateContainer").on("click",function(){t(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var b=(s.length-4)*(d+g+20),A=w.append("svg").attr("width","150").attr("height",b+23),k=d3.select(r).append("div").attr("class","tooltip").style("display","none");k.append("div").attr("class","label"),k.append("div").attr("class","count"),k.append("div").attr("class","percent"),s.forEach(function(t){t.count=+t.count,t.enabled=!0});var E=v.selectAll("path").data(x(s)).enter().append("g").attr("class","arcRegular").append("path").attr("d",y).attr("fill",function(t){return m(t.data.label)}).each(function(t){this._current});E.on("mouseover",function(e){d3.sum(s.map(function(t){return t.enabled?t.count:0})),"block"===t("#myPreviewModal").css("display")?e.data.dispVal?k.select("#myPreviewModal .count").html(e.data.dispVal):k.select("#myPreviewModal .count").html(e.value):e.data.dispVal?k.select(".count").html(e.data.dispVal):k.select(".count").html(e.value),k.style("display","block")}),E.on("mouseout",function(){k.style("display","none")}),E.on("mousemove",function(t){k.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),v.append("g").attr("class","labels"),v.append("g").attr("class","lines"),v.append("g").classed("labels",!0),v.append("g").classed("lines",!0),v.select(".lines").selectAll("polyline").data(x(s)).enter().append("polyline").attr("points",function(t){var e=_.centroid(t);return e[0]=.95*h*(O(t)&lt;Math.PI?1:-1),[y.centroid(t),_.centroid(t),e]}),v.select(".labels").selectAll("text").data(x(s)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(t){return t.data.percentage+"%"}).attr("transform",function(t){var e=_.centroid(t);return e[0]=.95*h*(O(t)&lt;Math.PI?1:-1),"translate("+e+")"}).style("text-anchor",function(t){return O(t)&lt;Math.PI?"start":"end"});var C=d3.select(r).append("div").attr("class","tooltip-legend no-show"),T=A.selectAll(".legend"+window.PieChartCount).data(m.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=d+g+25,r=n*m.domain().length/2;return r=m.domain()&lt;4?n*m.domain().length/2:2*n,"translate(10,"+((e+6)*n-r-135)+")"});T.append("rect").attr("width","7").attr("height","7").style("fill",m).style("stroke",m),T.append("text").attr("x",d+g+4).attr("y",d-g).attr("class","legend-title").text(function(t){return t.length&gt;15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length&gt;15&amp;&amp;(C.attr("class","only-show tooltip-legend"),C.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length&gt;15&amp;&amp;C.attr("class","no-show tooltip-legend")}),T.append("text").attr("x",d+g+4).attr("y",d-g+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e&lt;o.elements.length&amp;&amp;s[e].label!=t;e++);return o.elements[e].hasOwnProperty("subTitle")?o.elements[e].subTitle:s[e].count});var I=v.selectAll(".legend"+window.PieChartCount).data(m.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=-60;for(e=0;e&lt;s.length;e++){if(t==s[e].label){var r=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(r+=15)+","+n+")"}s[e].hasOwnProperty("subTitle")&amp;&amp;""==s[e].subTitle?n+=18:n+=33}});function O(t){return t.startAngle+(t.endAngle-t.startAngle)/2}I.append("rect").attr("width","7").attr("height","7").style("fill",m).style("stroke",m),I.append("text").attr("x",d+g+4).attr("y",d-g).attr("class","legend-title").text(function(t){return t.length&gt;15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length&gt;15&amp;&amp;(C.attr("class","only-show tooltip-legend"),C.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length&gt;15&amp;&amp;C.attr("class","no-show tooltip-legend")}),I.append("text").attr("x",d+g+4).attr("y",d-g+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e&lt;o.elements.length&amp;&amp;s[e].label!=t;e++);return o.elements[e].hasOwnProperty("subTitle")?o.elements[e].subTitle:s[e].count}),m.domain().length&gt;4&amp;&amp;v.data(m.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(e){var n,r=d+g+25,i=(m.domain().length,7*r-2*r-115);try{var o=t(this).parent().siblings(".legend0")[0].getAttribute("transform");n=o.slice(10,o.lastIndexOf(","))}catch(t){n=110}return"translate("+n+","+i+")"}).on("mouseover",function(e){var n=t(this).closest(".listViewTmplContentChild").offset().top,r=t(this).closest(".listViewTmplContentChild").offset().left,i=t(this).offset().top-n-87.5,o=t(this).offset().left-r-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",o).style("top",i),t(this).addClass("no-visible")})},drawD3PieDonut:function(e,n,r,i,o){var a=n.width,s=n.height,l=Math.min(a,s)/2-10,u=[],c=0,f=e,p=3;legendCenterOffset=0,e.message?f=e.message[0].component.payload:(fromWidgets=!0,p=4,legendCenterOffset=-15);for(var h=0;h&lt;f.elements.length;h++)u[h]={},u[h].label=f.elements[h].title,u[h].count=Number(f.elements[h].value),u[h].dispVal=f.elements[h].displayValue,f.elements[h].hasOwnProperty("subTitle")&amp;&amp;(u[h].subTitle=f.elements[h].subTitle),c+=Number(f.elements[h].value);var d=0;for(h=0;h&lt;f.elements.length;h++)u[h].percentage=Math.round(u[h].count/c*100),h===f.elements.length-1&amp;&amp;(u[h].percentage=100-d),d+=u[h].percentage;var g=n.legendRectSize,m=n.legendSpacing,v=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),y=d3.arc().outerRadius(l-10).innerRadius(l-50),_=d3.arc().outerRadius(.9*l).innerRadius(.9*l),x=d3.pie().sort(null).value(function(t){return t.count}),w=d3.select(r).append("div").attr("class","legend-tooltip-pie-chart no-show").on("mouseleave",function(e){w.attr("class","legend-tooltip-pie-chart no-show"),t(".more-legend").removeClass("no-visible")}),b=(u.length-4)*(g+m+20),A=w.append("svg").attr("width","150").attr("height",b+23);t(".listTemplateContainer").on("click",function(){t(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var k=d3.select(r).append("svg").attr("width",a+5).attr("height",s).append("g").attr("transform","translate("+(a/p+13)+","+s/2+")"),E=k.selectAll(".arc").data(x(u)).enter().append("g").attr("class","arc");E.append("path").attr("d",y).style("fill",function(t){return v(t.data.label)});var C=d3.select(r).append("div").attr("class","tooltipDonut").style("display","none");if(C.append("div").attr("class","label"),C.append("div").attr("class","countDonut"),C.append("div").attr("class","percent"),u.forEach(function(t){t.count=+t.count,t.enabled=!0}),k.append("g").attr("class","labels"),k.append("g").attr("class","lines"),k.append("g").classed("labels",!0),k.append("g").classed("lines",!0),k.select(".lines").selectAll("polyline").data(x(u)).enter().append("polyline").attr("points",function(t){var e=_.centroid(t);return e[0]=.95*l*(S(t)&lt;Math.PI?1:-1),[y.centroid(t),_.centroid(t),e]}).style("display",function(t){return 0==t.data.percentage?"none":"block"}),k.select(".labels").selectAll("text").data(x(u)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(t){return t.data.percentage+"%"}).attr("transform",function(t){var e=_.centroid(t);return e[0]=.95*l*(S(t)&lt;Math.PI?1:-1),e[0]=e[0]+10,"translate("+e+")"}).style("text-anchor",function(t){return S(t)&lt;Math.PI?"start":"end"}).style("display",function(t){return 0==t.data.percentage?"none":"block"}),E.on("mouseover",function(e){d3.sum(u.map(function(t){return t.enabled?t.count:0})),"block"===t("#myPreviewModal").css("display")?e.data.dispVal?C.select("#myPreviewModal .countDonut").html(e.data.dispVal):C.select("#myPreviewModal .countDonut").html(e.value):e.data.dispVal?C.select(".countDonut").html(e.data.dispVal):C.select(".countDonut").html(e.value),C.style("display","block")}),E.on("mouseout",function(){C.style("display","none")}),E.on("mousemove",function(t){C.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),"donut_legend"===o||"donut"===o){var T=d3.select(r).append("div").attr("class","tooltip-legend no-show"),I=A.selectAll(".legend"+window.PieChartCount).data(v.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=g+m+25,r=n*v.domain().length/2;return r=v.domain()&lt;5?n*v.domain().length/2:2*n,"translate(10,"+((e+6)*n-r-135)+")"});I.append("rect").attr("width","7").attr("height","7").style("fill",v).style("stroke",v),I.append("text").attr("x",g+m+4).attr("y",g-m).attr("class","legend-title").text(function(t){return t.length&gt;15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length&gt;11&amp;&amp;(T.attr("class","only-show tooltip-legend"),T.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length&gt;15&amp;&amp;T.attr("class","no-show tooltip-legend")}),I.append("text").attr("x",g+m+4).attr("y",g-m+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e&lt;f.elements.length&amp;&amp;u[e].label!=t;e++);return f.elements[e].hasOwnProperty("subTitle")?f.elements[e].subTitle:f.elements[e].value});var O=k.selectAll(".legend"+window.PieChartCount).data(v.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(t,e){var n=-60;for(e=0;e&lt;u.length;e++){if(t==u[e].label){var r=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(r+=15)+","+n+")"}u[e].hasOwnProperty("subTitle")&amp;&amp;""==u[e].subTitle?n+=18:n+=33}});O.append("rect").attr("width","7").attr("height","7").style("fill",v).style("stroke",v),O.append("text").attr("x",g+m+4).attr("y",g-m).attr("class","legend-title").text(function(t){return t.length&gt;15?t.slice(0,12)+"...":t}).on("mouseover",function(t){t.length&gt;15&amp;&amp;(T.attr("class","only-show tooltip-legend"),T.html(t).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(t){t.length&gt;15&amp;&amp;T.attr("class","no-show tooltip-legend")}),O.append("text").attr("x",g+m+4).attr("y",g-m+16).attr("class","legend-value").attr("font-weight","bold").text(function(t){for(var e=0;e&lt;f.elements.length&amp;&amp;u[e].label!=t;e++);return f.elements[e].hasOwnProperty("subTitle")?f.elements[e].subTitle:u[e].count}),v.domain().length&gt;4&amp;&amp;k.data(v.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(e){var n,r=g+m+25,i=(v.domain().length,7*r-2*r-115);try{var o=t(this).parent().siblings(".legend0")[0].getAttribute("transform");n=o.slice(10,o.lastIndexOf(","))}catch(t){n=110}return"translate("+n+","+i+")"}).on("mouseover",function(e){var n=t(this).closest(".listViewTmplContentChild").offset().top,r=t(this).closest(".listViewTmplContentChild").offset().left,i=t(this).offset().top-n-87.5,o=t(this).offset().left-r-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",o).style("top",i),t(this).addClass("no-visible")})}function S(t){return t.startAngle+(t.endAngle-t.startAngle)/2}},drawD3barChart:function(t,e,n,r){var i=d3.select(n).append("svg").attr("width",e.outerWidth).attr("height",e.outerHeight),o=20,a=35,s=e.innerWidth,l=e.innerHeight,u=i.append("g").attr("transform","translate("+a+","+o+")"),c=t,f=d3.scaleBand().rangeRound([0,s]).paddingInner(.1),p=d3.scaleBand().padding(.05),h=d3.scaleLinear().rangeRound([l,0]),d=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]);t.message?c=t.message[0].component.payload:(fromWidgets=!0,widthDivision=4,legendCenterOffset=-15);var g=[],m=[];m.push("xAxis");for(var v=0;v&lt;c.elements.length;v++)m.push(c.elements[v].title);for(v=0;v&lt;c.X_axis.length;v++)g[v]={},g[v][m[0]]=c.X_axis[v];for(v=0;v&lt;c.elements.length;v++)for(var y=0;y&lt;c.elements[v].values.length;y++)g[y][m[v+1]]=c.elements[v].values[y],c.elements[v].displayValues&amp;&amp;(g[y][m[v+1]+"dispVal"]=c.elements[v].displayValues[y]);var _=m.slice(1);f.domain(g.map(function(t){return t.xAxis})),p.domain(_).rangeRound([0,f.bandwidth()]),h.domain([0,d3.max(g,function(t){return d3.max(_,function(e){return t[e]})})]).nice(),u.append("g").selectAll("g").data(g).enter().append("g").attr("transform",function(t){return"translate("+f(t.xAxis)+",0)"}).selectAll("rect").data(function(t){return _.map(function(e){return{key:e,value:t[e],dispVal:t[e+"dispVal"]}})}).enter().append("rect").on("mouseover",function(){b.style("display",null)}).on("mouseout",function(){b.style("display","none")}).on("mousemove",function(t){var e=1.25*this.parentNode.transform.baseVal[0].matrix.e,n=d3.mouse(this)[1]-5;if(t.dispVal)var r=t.dispVal;else r=t.value;b.attr("transform","translate("+e+","+n+")"),b.select("text").text(r)}).attr("x",function(t){return p(t.key)}).attr("y",function(t){return h(t.value)}).attr("width",p.bandwidth()).attr("height",function(t){return l-h(t.value)}).attr("fill",function(t){return d(t.key)}),u.append("g").attr("class","axis").attr("transform","translate(0,"+l+")").call(d3.axisBottom(f)),u.selectAll("text").attr("transform","rotate(-65) translate(-30, 0)"),u.append("g").attr("class","axis").call(d3.axisLeft(h).ticks(null,"s")).append("text").attr("x",2).attr("y",h(h.ticks().pop())+.5).attr("dy","0.12em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),u.selectAll(".axis text").attr("class","chart-disp-val"),u.selectAll(".axis line").attr("class","chart-axis-line"),u.selectAll(".axis .domain").classed("chart-axis-line",!0);var x=d3.select(n).append("div").attr("class","tooltip-legend no-show"),w=u.append("g").attr("font-family","sans-serif").attr("font-size",8).attr("text-anchor","end").selectAll("g").data(_.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(60,"+20*e+")"});w.append("rect").attr("x",s-19).attr("width",19).attr("height",19).attr("fill",d),w.append("text").attr("class","chart-disp-val").attr("x",s-24).attr("y",9.5).attr("dy","0.32em").text(function(t){return t.length&gt;10?t.slice(0,7)+"...":t}).on("mouseover",function(t){x.attr("class","only-show tooltip-legend"),x.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){x.attr("class","no-show tooltip-legend")});var b=i.append("g").attr("class","tooltipBC").style("display","none");b.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),b.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")},drawD3barStackedChart:function(t,e,n,r){var i=d3.select(n).append("svg").attr("width",e.outerWidth).attr("height",e.outerHeight),o=e.innerWidth,a=e.innerHeight,s=i.append("g").attr("transform","translate(70,20)"),l=t;legendCenterOffset=0,t.message?l=t.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);var u=d3.scaleBand().rangeRound([0,a]).paddingInner(.05).align(.1),c=d3.scaleLinear().rangeRound([0,o]),f=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),p=[],h=[];h.push("xAxis");for(var d=0;d&lt;l.elements.length;d++)h.push(l.elements[d].title);for(d=0;d&lt;l.X_axis.length;d++)p[d]={},p[d].dispVal=[],p[d][h[0]]=l.X_axis[d];for(d=0;d&lt;l.elements.length;d++)for(var g=0;g&lt;l.elements[d].values.length;g++)p[g][h[d+1]]=l.elements[d].values[g],l.elements[d].displayValues&amp;&amp;(p[g].dispVal[d]=l.elements[d].displayValues[g]);var m=h.slice(1);for(d=0;d&lt;p.length;d++){var v=0;for(key in p[d])"xAxis"!==key&amp;&amp;"dispVal"!==key&amp;&amp;(v+=p[d][key]);p[d].total=v}u.domain(p.map(function(t){return t.xAxis})),c.domain([0,d3.max(p,function(t){return t.total})]).nice(),f.domain(m);var y=[];s.append("g").selectAll("g").data(d3.stack().keys(m)(p)).enter().append("g").attr("fill",function(t){return f(t.key)}).selectAll("rect").data(function(t,e){y[e]=[];for(var n=0;n&lt;t.length;n++)y[e][n]={x:t[n][0],y:t[n][1],val:t[n].data.dispVal[e]};return t}).enter().append("rect").attr("y",function(t){return u(t.data.xAxis)}).attr("x",function(t){return c(t[0])}).attr("width",function(t){return c(t[1])-c(t[0])}).attr("height",.5*u.bandwidth()).attr("transform","translate(0,"+.25*u.bandwidth()+")").attr("dispVal",function(t){for(var e=0;e&lt;y.length;e++)for(var n=0;n&lt;y[e].length;n++)if(y[e][n].x===t[0]&amp;&amp;y[e][n].y===t[1])return y[e][n].val}).on("mouseover",function(){w.style("display",null)}).on("mouseout",function(){w.style("display","none")}).on("mousemove",function(t){var e=d3.mouse(this)[0]-5,n=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var r=this.attributes.dispVal.value;else r=t[1]-t[0];w.attr("transform","translate("+e+","+n+")"),w.select("text").text(r)}),s.append("g").attr("class","axis").attr("transform","translate(0,"+a+")").call(d3.axisBottom(c).ticks(null,"s")).append("text").attr("y",40).attr("x",c(c.ticks().pop())+.5).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start").attr("transform","translate("+-o+",-10)"),s.append("g").attr("class","axis").attr("transform","translate(0,0)").call(d3.axisLeft(u)),s.selectAll(".axis text").attr("class","chart-disp-val"),s.selectAll(".axis line").attr("class","chart-axis-line"),s.selectAll(".axis .domain").classed("chart-axis-line",!0);var _=d3.select(n).append("div").attr("class","tooltip-legend no-show"),x=s.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(m.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(80,"+(150+20*e)+")"});x.append("rect").attr("x",o-19).attr("width",19).attr("height",19).attr("fill",f),x.append("text").attr("x",o-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(t){return t.length&gt;10?t.slice(0,7)+"...":t}).on("mouseover",function(t){_.attr("class","only-show tooltip-legend"),_.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){_.attr("class","no-show tooltip-legend")});var w=i.append("g").attr("class","tooltipHStacked").style("display","none");w.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),w.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")},drawD3barVerticalStackedChart:function(t,e,n,r){var i=d3.select(n).append("svg").attr("width",e.outerWidth).attr("height",e.outerHeight),o=e.innerWidth,a=e.innerHeight,s=i.append("g").attr("transform","translate(20,20)"),l=t;legendCenterOffset=0,t.message?l=t.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);var u=d3.scaleBand().rangeRound([0,o]).paddingInner(.05).align(.1),c=d3.scaleLinear().rangeRound([a,0]),f=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),p=[],h=[];h.push("xAxis");for(var d=0;d&lt;l.elements.length;d++)h.push(l.elements[d].title);for(d=0;d&lt;l.X_axis.length;d++)p[d]={},p[d].dispVal=[],p[d][h[0]]=l.X_axis[d];for(d=0;d&lt;l.elements.length;d++)for(var g=0;g&lt;l.elements[d].values.length;g++)p[g][h[d+1]]=l.elements[d].values[g],l.elements[d].displayValues&amp;&amp;(p[g].dispVal[d]=l.elements[d].displayValues[g]);var m=h.slice(1);for(d=0;d&lt;p.length;d++){var v=0;for(key in p[d])"xAxis"!==key&amp;&amp;"dispVal"!==key&amp;&amp;(v+=p[d][key]);p[d].total=v}u.domain(p.map(function(t){return t.xAxis})),c.domain([0,d3.max(p,function(t){return t.total})]).nice(),f.domain(m),coordsVal=[],s.append("g").selectAll("g").data(d3.stack().keys(m)(p)).enter().append("g").attr("fill",function(t){return f(t.key)}).selectAll("rect").data(function(t,e){coordsVal[e]=[];for(var n=0;n&lt;t.length;n++)coordsVal[e][n]={x:t[n][0],y:t[n][1],val:t[n].data.dispVal[e]};return t}).enter().append("rect").attr("x",function(t){return u(t.data.xAxis)}).attr("y",function(t){return c(t[1])}).attr("height",function(t){return c(t[0])-c(t[1])}).attr("width",.5*u.bandwidth()).attr("dispVal",function(t){for(var e=0;e&lt;coordsVal.length;e++)for(var n=0;n&lt;coordsVal[e].length;n++)if(coordsVal[e][n].x===t[0]&amp;&amp;coordsVal[e][n].y===t[1])return coordsVal[e][n].val}).attr("transform","translate("+.25*u.bandwidth()+",0)").on("mouseover",function(){x.style("display",null)}).on("mouseout",function(){x.style("display","none")}).on("mousemove",function(t){var e=d3.mouse(this)[0]-5,n=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var r=this.attributes.dispVal.value;else r=t[1]-t[0];x.attr("transform","translate("+e+","+n+")"),x.select("text").text(r)}),s.append("g").attr("class","axis").attr("transform","translate(0,"+a+")").call(d3.axisBottom(u)),s.selectAll("text").attr("class","chart-disp-val").attr("transform","rotate(-65) translate(-30, 0)"),s.append("g").attr("class","axis").call(d3.axisLeft(c).ticks(null,"s")).append("text").attr("x",2).attr("y",c(c.ticks().pop())-10).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),s.selectAll("text").attr("class","chart-disp-val"),s.selectAll(".axis .domain").classed("chart-axis-line",!0),s.selectAll(".axis line").classed("chart-axis-line",!0);var y=d3.select(n).append("div").attr("class","tooltip-legend no-show"),_=s.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(m.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(48,"+20*e+")"});_.append("rect").attr("x",o-19).attr("width",19).attr("height",19).attr("fill",f),_.append("text").attr("x",o-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(t){return t.length&gt;10?t.slice(0,7)+"...":t}).on("mouseover",function(t){y.attr("class","only-show tooltip-legend"),y.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){y.attr("class","no-show tooltip-legend")});var x=i.append("g").attr("class","tooltipVSB").style("display","none");x.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),x.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")},drawD3barHorizontalbarChart:function(n,r,i,o){window.addEventListener("resize",function(e){t("#chart").width(.9*window.innerWidth),t("#chart").height(window.innerHeight)});var a=[],s=n;legendCenterOffset=0,n.message?s=n.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);for(var l=0;l&lt;s.X_axis.length;l++){a[l]={},a[l].date=s.X_axis[l];for(var u=0;u&lt;s.elements.length;u++)a[l][s.elements[u].title]=s.elements[u].values[l],s.elements[u].displayValues&amp;&amp;(a[l][s.elements[u].title+"dispVal"]=s.elements[u].displayValues[l])}var c={};for(u=0;u&lt;s.elements.length;u++)c[s.elements[u].title]=s.elements[u].title;t(i).empty(),new function(t,n){e(t,n)}({mainDiv:i,colorRange:["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],data:a,columnsInfo:c,xAxis:"value",yAxis:"date",label:{xAxis:"Value",yAxis:"Dates"},requireLegend:!0},r)},drawD3lineChartV2:function(e,n,r,i){var o=35,a=30,s=n.innerWidth,l=n.innerHeight,u=["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],c=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),f=e;legendCenterOffset=0,e.message?f=e.message[0].component.payload:(fromWidgets=!0,legendCenterOffset=-15);var p,h=f.X_axis,d=f.elements,g=d3.scaleLinear().domain([0,h.length-1]).range([0,s]),m=d3.scaleLinear().domain([0,60]).range([l,0]),v=d3.line().x(function(t){return g(t.ind)}).y(function(t){return m(t.value)}),y=d3.select(r).append("svg").attr("width",n.outerWidth).attr("height",n.outerHeight),_=y.append("g").attr("transform","translate("+a+","+o+")"),x=d3.axisBottom(g).tickFormat(function(t){return h[t]}),w=d3.axisLeft(m).tickFormat(d3.format(".2s"));_.append("g").attr("class","axis").call(w),_.append("g").attr("transform","translate(0,"+l+")").call(x).attr("class","axis xAxisR"),_.selectAll(".xAxisR text").attr("transform","rotate(-65) translate(-30, 0)");var b=[],A=[],k=[],E={};b.push("xAxis");for(var C=0;C&lt;f.elements.length;C++)b.push(f.elements[C].title);for(C=0;C&lt;f.elements.length;C++){A[C]={},A[C].valueSet=[],A[C].name=f.elements[C].title,A[C].currentVal=f.elements[C].values[f.elements[C].values.length-1];for(var T=0;T&lt;f.elements[C].values.length;T++)k[T]=k[T]||{},k[T].x_Axis=f.X_axis[T],k[T][b[C+1]]=f.elements[C].values[T],A[C].valueSet[T]={},A[C].valueSet[T].value=f.elements[C].values[T],f.elements[C].displayValues&amp;&amp;(A[C].valueSet[T].dispVal=f.elements[C].displayValues[T],E[f.elements[C].title]=f.elements[C].displayValues[T].replace(/[0-9]/g,"")),A[C].valueSet[T].x_Axis=f.X_axis[T],A[C].valueSet[T].ind=T}var I=b.slice(1),O=b.slice(1).map(function(t){return{id:t,values:k.map(function(e){return{xAxis:e.xAxis,temperature:e[t]}})}});p=A,_.selectAll().data(p).enter().append("path").attr("fill","none").attr("stroke",function(t){return c(t.name)}).attr("stroke-width",2).datum(function(t){return t.valueSet}).attr("d",v).attr("class","lineC"),_.selectAll().data(p).enter().append("text").html(function(t){}).attr("fill",function(t){return t.color}).attr("alignment-baseline","middle").attr("x",s).attr("dx",".5em").attr("y",function(t){return m(t.currentVal)});var S=y.append("g").attr("class","mouse-over-effects"),R=document.getElementsByClassName("lineC"),M=S.selectAll(".mouse-per-line").data(O).enter().append("g").attr("class","mouse-per-line");M.append("circle").attr("r",7).style("stroke",function(t,e){return u[e]}).style("fill","none").style("stroke-width","3px").style("opacity","0").attr("transform","translate(30,35)"),M.append("text").attr("transform",function(t,e){return 0==e?"translate(40,40)":1==e?"translate(20,10)":"translate(0,40)"}),S.append("svg:rect").attr("width",n.innerWidth+5).attr("height",n.innerHeight).attr("transform","translate(30,35)").attr("fill","none").attr("pointer-events","all").on("mouseout",function(){d3.selectAll(".mouse-per-line circle").style("opacity","0"),d3.selectAll(".mouse-per-line text").style("opacity","0")}).on("mouseover",function(){"block"===t("#myPreviewModal").css("display")?t(".lineChartChildDiv .mouse-per-line").hide():t(".lineChartChildDiv .mouse-per-line").show(),d3.selectAll(".mouse-per-line circle").style("opacity","0.5"),d3.selectAll(".mouse-per-line text").style("opacity","1")}).on("mousemove",function(){var t=d3.mouse(this);d3.selectAll(".mouse-per-line").attr("transform",function(e,n){var r=g.invert(t[0]),i=d3.bisector(function(t){return t.date}).right;idx=i(e.values,r);for(var o=0,a=R[n].getTotalLength()+2,s=null;s=Math.floor((o+a)/2),pos=R[n].getPointAtLength(s),s!==a&amp;&amp;s!==o||pos.x===t[0];)if(pos.x&gt;t[0])a=s;else{if(!(pos.x&lt;t[0]))break;o=s}return xtempLC=g,d3.select(this).select("text").text(function(t,e){for(var n=[],r=0;r&lt;d.length;r++)if(d[r].title===t.id)for(var i=0;i&lt;t.values.length;i++)n[i]=t.values[i].temperature;if(void 0!==E[this.__data__.id]){var o=m.invert(pos.y).toFixed(2);return-1!==n.indexOf(Math.round(o))&amp;&amp;n.indexOf(Math.round(o))===Math.round(xtempLC.invert(pos.x))?m.invert(pos.y).toFixed(2)+"\n"+h[Math.round(xtempLC.invert(pos.x))]:m.invert(pos.y).toFixed(2)+E[this.__data__.id]}return o=m.invert(pos.y).toFixed(2),-1!==n.indexOf(Math.round(o))&amp;&amp;n.indexOf(Math.round(o))===Math.round(xtempLC.invert(pos.x))?m.invert(pos.y).toFixed(2)+"\n"+h[Math.round(xtempLC.invert(pos.x))]:m.invert(pos.y).toFixed(2)}),"translate("+t[0]+","+pos.y+")"})}),_.selectAll(".axis text").attr("class","chart-disp-val"),_.selectAll(".axis line").attr("class","chart-axis-line"),_.selectAll(".axis .domain").classed("chart-axis-line",!0);var L=d3.select(r).append("div").attr("class","tooltip-legend no-show"),P=y.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(I.slice().reverse()).enter().append("g").attr("transform",function(t,e){return 230===n.innerWidth?"translate(100,"+(250+20*e)+")":"translate(100,"+(230+20*e)+")"});P.append("rect").attr("x",s-19).attr("width",19).attr("height",19).attr("fill",c),P.append("text").attr("x",s-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(t){return t.length&gt;10?t.slice(0,7)+"...":t}).on("mouseover",function(t){L.attr("class","only-show tooltip-legend"),L.html(t).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(t){L.attr("class","no-show tooltip-legend")})}}}($),bind=_.bind;function koreAnonymousFn(t){console.info("anonymous user login");var e=localStorage.getItem("korecom")||function(){console.info("generating UUID");var t=(new Date).getTime();return window.performance&amp;&amp;"function"==typeof window.performance.now&amp;&amp;(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&amp;n|8).toString(16)})}();if(localStorage.setItem("korecom",e),t.clientId){var n={};n.issuer=t.clientId,n.subject=e,t.assertion=n,this.options=t,this.claims=t.assertion,this.WebClient=new this.clients.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.WebClient.anonymouslogin.login({assertion:t.assertion,botInfo:this.options.botInfo},bind(this.onLogIn,this))}else console.log("clientId should be there for anonymous user")}requireKr=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&amp;&amp;require;if(!s&amp;&amp;l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&amp;&amp;require,a=0;a&lt;r.length;a++)i(r[a]);return i}({"/KoreBot.js":[function(t,e,n){var r,o=t("./index.js"),a=t("events"),s=t("inherits"),l=(r=t("lodash").bind?t("lodash"):_).bind,u=r.isFunction,c=o.CLIENT_EVENTS.RTM,f=o.RTM_EVENTS,p=t("./jstz.js"),h=r.noop;"undefined"!=typeof window&amp;&amp;(window.kore=window.kore||{},window.kore.botsdk=window.kore.botsdk||{},window.kore.botsdk.logger=window.kore.botsdk.logger||t("debug"),window.messageHistoryLimit=10);var d=t("debug")("botsdk:KoreBot");function g(){a.call(this),this.WebClient=null,this.RtmClient=null,this.options={},this.accessToken=null,this.initialized=!1,this.clients=o,this.latestId=null,this.oldestId=null}var m={city:"",country:"",latitude:0,longitude:0,street:""},v=!1;s(g,a),g.prototype.emit=function(){arguments&amp;&amp;"history"===arguments[0]&amp;&amp;this.historySyncInProgress?(arguments[2]="historysync",this.cbBotChatHistory(arguments)):!window._chatHistoryLoaded&amp;&amp;arguments&amp;&amp;"history"===arguments[0]?(v=!0,this.cbBotChatHistory(arguments)):v&amp;&amp;arguments&amp;&amp;"history"===arguments[0]&amp;&amp;setTimeout(function(){$(".chatInputBox").focus(),$(".disableFooter").removeClass("disableFooter")}),g.super_.prototype.emit.apply(this,arguments)},g.prototype.fetchUserLocation=function(){if(""===m.country){console.log("Fetching user location");var t=this.options;navigator.geolocation.getCurrentPosition(function(e){if(t.googleMapsAPIKey){var n=e.coords.latitude,r=e.coords.longitude;m.latitude=n,m.longitude=r;var o=new XMLHttpRequest,a="https://maps.googleapis.com/maps/api/geocode/json?latlng="+n+","+r+"&amp;sensor=true&amp;key="+t.googleMapsAPIKey;o.open("GET",a,!0),o.onreadystatechange=function(){if(4==o.readyState&amp;&amp;200==o.status){var t=JSON.parse(o.responseText);"undefined"!=typeof Storage&amp;&amp;(0==t.results.length?t=JSON.parse(localStorage.getItem("locationData")):localStorage.setItem("locationData",JSON.stringify(t)));var e=[];for(t.results&amp;&amp;t.results.length&amp;&amp;t.results[0].address_components&amp;&amp;(e=t.results[0].address_components),i=0;i&lt;e.length;i++){var n=e[i].types;"locality,political"==n?m.city=e[i].long_name:"country,political"==n?m.country=e[i].long_name:"political,sublocality,sublocality_level_2"==n&amp;&amp;(m.street=e[i].long_name)}}},o.send()}else console.warn("please provide google maps API key")})}},g.prototype.sendMessage=function(t,e){d("sending message to bot"),this.initialized?(t.resourceid="/bot.message",t.botInfo=this.options.botInfo||{},t.client=this.options.client||"sdk",t.meta={timezone:p.jstz.determine().name(),locale:window.navigator.userLanguage||window.navigator.language},0!==m.latitude&amp;&amp;0!==m.longitude&amp;&amp;(t.meta.location=m),this.RtmClient.sendMessage(t,e)):e&amp;&amp;e(new Error("Bot is Initializing...Please try again"))},g.prototype.onMessage=function(t){d("on message from bot/self"),"bot"===t.from&amp;&amp;"bot_response"===t.type&amp;&amp;(this.latestId=t.messageId||this.latestId,this.oldestId=this.oldestId||t.messageId),this.emit(f.MESSAGE,t)},g.prototype.close=function(){d("request to close ws connection"),this.RtmClient&amp;&amp;this.RtmClient._close()},g.prototype.destroy=function(){this.RtmClient&amp;&amp;this.RtmClient._close(),v=!1,this.removeAllListeners()},g.prototype.onForwardHistory=function(t,e){d("on forward history");var n,r={};if(r.moreAvailable=e.moreAvailable,r.messages=[],r.forward=!0,r.afterMessageId=this.latestId,e.messages&amp;&amp;e.messages.length&gt;0)for(n=0;n&lt;e.messages.length;n++){var i={};i.messageId=e.messages[n]._id,this.oldestId=this.oldestId||e.messages[n]._id,this.latestId=e.messages[n]._id||this.latestId,"incoming"===e.messages[n].type?(i.from="self",i.type="user_message"):(i.from="bot",i.type="bot_response");var o=0;if(e.messages[n].components&amp;&amp;e.messages[n].components.length&gt;0)for(i.message=[],o=0;o&lt;e.messages[n].components.length;o++){var a={};a.type=e.messages[n].components[o].cT,"text"===a.type&amp;&amp;(a.cInfo={},a.cInfo.body=e.messages[n].components[o].data&amp;&amp;e.messages[n].components[o].data.text),i.message[o]=a}i.createdOn=e.messages[n].createdOn,r.messages[n]=i}this.emit("history",r)},g.prototype.onBackWardHistory=function(t,e){d("on backword history");var n,r={};if(r.moreAvailable=e.moreAvailable,r.messages=[],r.backward=!0,r.beforeMessageId=this.oldestId,e.messages&amp;&amp;e.messages.length&gt;0)for(n=0;n&lt;e.messages.length;n++){var i={};i.messageId=e.messages[n]._id,this.oldestId=e.messages[n]._id||this.oldestId,this.latestId=this.latestId||e.messages[n]._id,"incoming"===e.messages[n].type?(i.from="self",i.type="user_message"):(i.from="bot",i.type="bot_response",i.icon=e.icon);var o=0;if(e.messages[n].components&amp;&amp;e.messages[n].components.length&gt;0)for(i.message=[],o=0;o&lt;e.messages[n].components.length;o++){var a={};a.type=e.messages[n].components[o].cT,"text"===a.type&amp;&amp;(a.cInfo={},a.cInfo.body=e.messages[n].components[o].data&amp;&amp;e.messages[n].components[o].data.text),i.message[o]=a}i.createdOn=e.messages[n].createdOn,r.messages[n]=i}this.emit("history",r)},g.prototype.getHistory=function(t){d("get history"),t=t||{},"undefined"!=typeof window&amp;&amp;(t.limit=t.limit||window.messageHistoryLimit||10);var e={};e.forward=t.forward,e.limit=t.limit||10,e.forward?this.latestId&amp;&amp;(e.msgId=this.latestId):this.oldestId&amp;&amp;(e.msgId=this.oldestId),e.botInfo=this.options.botInfo,e.authorization="bearer "+this.WebClient.user.accessToken,t.forHistorySync&amp;&amp;(this.historySyncInProgress=!0,delete e.msgId),e.forward?this.WebClient.history.history(e,l(this.onForwardHistory,this)):this.WebClient.history.history(e,l(this.onBackWardHistory,this))},g.prototype.sync=function(t){},g.prototype.onOpenWSConnection=function(t){d("opened WS Connection"),this.initialized=!0,this.options.loadHistory&amp;&amp;!v&amp;&amp;this.getHistory({}),this.emit(c.RTM_CONNECTION_OPENED,{})},g.prototype.onLogIn=function(t,e){d("sign-in/anonymous user onLogin"),t?(this.cbErrorToClient&amp;&amp;(e&amp;&amp;e.errors&amp;&amp;e.errors[0]&amp;&amp;e.errors[0].msg?this.cbErrorToClient(e.errors[0].msg):this.cbErrorToClient(t.message)),console.error(t&amp;&amp;t.stack)):(this.options&amp;&amp;this.options.jwtgrantSuccessCB&amp;&amp;this.options.jwtgrantSuccessCB(e),this.accessToken=e.authorization.accessToken,this.options.accessToken=this.accessToken,this.WebClient.user.accessToken=this.accessToken,this.userInfo=e,this.cbBotDetails(e,this.options.botInfo),this.RtmClient=new o.KoreRtmClient({},this.options),this.emit("rtm_client_initialized"),this.RtmClient.start({botInfo:this.options.botInfo}),this.RtmClient.on(f.MESSAGE,l(this.onMessage,this)),this.RtmClient.on(c.RTM_CONNECTION_OPENED,l(this.onOpenWSConnection,this)))},g.prototype.logIn=function(t,e){t?(d("error in assertionFn %s",t),console.error("error in assertionFn",t&amp;&amp;t.stack)):(d("signed-in user login"),this.options=e,this.claims=e.assertion,this.WebClient=new o.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.cbErrorToClient=e.handleError||h,this.cbBotDetails=e.botDetails||h,this.cbBotChatHistory=e.chatHistory||h,this.WebClient.login.login({assertion:e.assertion,botInfo:this.options.botInfo},l(this.onLogIn,this)))},g.prototype.init=function(t,e){(e=e||10)&gt;100&amp;&amp;(e=100),"undefined"!=typeof window&amp;&amp;(window.messageHistoryLimit=e||10),t=t||{},this.options=t,this.oldestId=null,this.RtmClient=null,t.test?(d("test is true"),u(t.koreAnonymousFn)?t.koreAnonymousFn.call(this,t):(d("koreAnonymousFn is not a function"),console.error("koreAnonymousFn is not a function"))):(d("test is false"),u(t.assertionFn)?t.assertionFn(t,l(this.logIn,this)):(d("assertion is not a function"),console.error("assertion is not a function")))},e.exports.instance=function(){return v=!1,new g}},{"./index.js":1,"./jstz.js":2,debug:21,events:30,inherits:23,lodash:24}],1:[function(t,e,n){var r=t("./lib/clients/events");e.exports={KoreWebClient:t("./lib/clients/web/client"),KoreRtmClient:t("./lib/clients/rtm/client"),CLIENT_EVENTS:{WEB:r.CLIENT_EVENTS.WEB,RTM:r.CLIENT_EVENTS.RTM},RTM_EVENTS:r.RTM_EVENTS,RTM_MESSAGE_SUBTYPES:r.RTM_MESSAGE_SUBTYPES}},{"./lib/clients/events":5,"./lib/clients/rtm/client":9,"./lib/clients/web/client":18}],2:[function(t,e,n){var r,i;r=this,(i=function(){"use strict";var t=function(t){var e=-t.getTimezoneOffset();return null!==e?e:0},e=function(t,e,n){var r=new Date;return void 0!==t&amp;&amp;r.setFullYear(t),r.setDate(n),r.setMonth(e),r},n=function(n){return t(e(n,0,2))},r=function(n){return t(e(n,5,2))};return{determine:function(){var t,e,o,a=(t=n(),e=r(),(o=n()-r())&lt;0?t+",1":o&gt;0?e+",1,s":t+",0");return new i.TimeZone(i.olson.timezones[a])},date_is_dst:function(e){return(e.getMonth()&gt;7?r(e.getFullYear()):n(e.getFullYear()))-t(e)!=0},dst_start_for:function(t){var e=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":e,"Asia/Yekaterinburg":e,"Asia/Omsk":e,"Asia/Krasnoyarsk":e,"Asia/Irkutsk":e,"Asia/Yakutsk":e,"Asia/Vladivostok":e,"Asia/Kamchatka":e,"Europe/Minsk":e,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}[t]}}}()).TimeZone=function(t){"use strict";var e={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},n=t;return void 0!==e[n]&amp;&amp;function(){for(var t=e[n],r=t.length,o=0,a=t[0];o&lt;r;o+=1)if(a=t[o],i.date_is_dst(i.dst_start_for(a)))return void(n=a)}(),{name:function(){return n}}},i.olson={},i.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},void 0!==n?n.jstz=i:r.jstz=i},{}],3:[function(t,e,n){var r=t("events"),i=t("async"),o=(t("lodash").bind?t("lodash"):_).bind,a=t("inherits"),s=t("retry"),l=t("url-join"),u=t("./events/client").WEB,c=t("./helpers"),f=t("./transports/request").requestTransport;function p(t,e){r.call(this),this._token=t,this.koreAPIUrl=e.koreAPIUrl||"https://app.kore.com/api/",this.reWriteSocketURL=e.reWriteSocketURL,this.transport=e.transport||f,this.userAgent,this._requestQueue=i.priorityQueue(o(this._callTransport,this),e.maxRequestConcurrency),this._createFacets()}a(p,r),p.prototype.emit=function(){p.super_.prototype.emit.apply(this,arguments)},p.prototype._createFacets=function(){},p.prototype._callTransport=function(t,e){var n=t.args,r=t.cb,i=this,o=s.operation(this.retryConfig),a=function t(a,s,l,c){var f,p;if(a){if(o.retry(a))return;r(o.mainError(),null)}200!==l?429===l?(i._requestQueue.pause(),f=parseInt(s["Retry-After"],10),setTimeout(function(){i.transport(n,t),i._requestQueue.resume()},1e3*f),i.emit(u.RATE_LIMITED,f)):(p=new Error("Unable to process request, received bad "+l+" error"),r(p,c)):(c&amp;&amp;c.userInfo&amp;&amp;(window.jwtDetails=c),r(null,c)),e()};o.attempt(function(){i.transport(n,a)})},p.prototype.makeAPICall=function(t,e,n){var r=c.getAPICallArgs(this._token,e,n),i={url:l(this.koreAPIUrl,t),data:r.data,headers:{"User-Agent":this.userAgent,"content-type":"application/json"}};e&amp;&amp;e.opts&amp;&amp;e.opts.authorization&amp;&amp;(i.headers.Authorization=e.opts.authorization,delete i.data.authorization),this._requestQueue.push({args:i,cb:r.cb})},e.exports=p},{"./events/client":4,"./helpers":8,"./transports/request":10,async:19,events:30,inherits:23,lodash:24,retry:26,"url-join":29}],4:[function(t,e,n){e.exports.WEB={RATE_LIMITED:"rate_limited"},e.exports.RTM={CONNECTING:"connecting",AUTHENTICATED:"authenticated",WS_OPENING:"ws_opening",WS_OPENED:"ws_opened",RTM_CONNECTION_OPENED:"open",DISCONNECT:"disconnect",UNABLE_TO_RTM_START:"unable_to_rtm_start",WS_CLOSE:"ws_close",WS_ERROR:"ws_error",ATTEMPTING_RECONNECT:"attempting_reconnect",RAW_MESSAGE:"raw_message"}},{}],5:[function(t,e,n){e.exports={CLIENT_EVENTS:{WEB:t("./client").WEB,RTM:t("./client").RTM},RTM_EVENTS:t("./rtm").EVENTS,RTM_MESSAGE_SUBTYPES:t("./rtm").MESSAGE_SUBTYPES}},{"./client":4,"./rtm":6}],6:[function(t,e,n){e.exports.EVENTS={HELLO:"hello",MESSAGE:"message"},e.exports.MESSAGE_SUBTYPES={BOT_MESSAGE:"bot_message",ME_MESSAGE:"me_message"}},{}],7:[function(t,e,n){var r=t("./rtm").EVENTS;e.exports.makeMessageEventWithSubtype=function(t,e){return[r.MESSAGE,t].join(e||"::")}},{"./rtm":6}],8:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).assign,o=r.isFunction,a=r.isUndefined,s=r.isString,l=r.forEach,u=function(t,e){var n=i({},t&amp;&amp;t.opts||{});return l(t||{},function(t,e){a(t)||null===t||"opts"===e||("attachments"===e?s(t)?n[e]=t:n[e]=JSON.stringify(t):n[e]=t)}),e&amp;&amp;(n.token=e),n};e.exports.getData=u,e.exports.getAPICallArgs=function(t,e,n){var r,i;return 1===arguments.length?(i=noop,r=u({},t)):2===arguments.length?o(arguments[1])?(i=arguments[1],r=u({},t)):(i=noop,r=u(e,t)):3===arguments.length&amp;&amp;(i=n||noop,r=u(e,t)),{cb:i,data:r}}},{lodash:24}],9:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).bind,o=r.cloneDeep,a=r.contains,s=t("inherits"),l=r.isUndefined,u=t("debug")("botsdk:KoreRTMClient"),c=t("../events/rtm").EVENTS,f=["pong",c.HELLO],p=["not_authed","invalid_auth","account_inactive","token_expired"],h=t("../events/client").RTM,d=t("../client"),g=t("../web/apis").RtmApi,m=t("../events/utils").makeMessageEventWithSubtype,v=t("../transports/ws");function y(t,e){var n=e||{};n.maxRequestConcurrency=1,d.call(this,t,n),this._socketFn=n.socketFn||v,this.ws=void 0,this.MAX_RECONNECTION_ATTEMPTS=n.maxReconnectionAttempts||10,this.RECONNECTION_BACKOFF=n.reconnectionBackoff||3e3,this.MAX_PONG_INTERVAL=n.maxPongInterval||1e4,this.WS_PING_INTERVAL=n.wsPingInterval||5e3,this.autoReconnect=!1!==n.autoReconnect,this.connected=!1,this.authenticated=!1,this.activeUserId=void 0,this._pendingMessages={},this._connAttempts=0,this._connecting=!1,this._reconnecting=!1,n.hasOwnProperty("_reconnecting")&amp;&amp;n._reconnecting&amp;&amp;(this._reconnecting=n._reconnecting,n._reconnecting=!1),this.user={},this.user.accessToken=n.accessToken,this.botInfo=n.botInfo||{}}s(y,d),y.prototype._createFacets=function(){y.super_.prototype._createFacets.call(this),this._rtm=new g(this)},y.prototype.start=function(t){this._connecting||(this.emit(h.CONNECTING),this._connecting=!0,(t=t||{botInfo:this.botInfo}).authorization="bearer "+this.user.accessToken,this._rtm.start(t,i(this._onStart,this)))},y.prototype.nextMessageId=function(){return this._messageId=this._messageId||1,this._messageId++},y.prototype._onStart=function(t,e){var n,r=!!this._reconnecting;this._connecting=!1,this._reconnecting=!1;try{e=e}catch(t){console.log(t&amp;&amp;t.stack)}e&amp;&amp;e.errors&amp;&amp;("TOKEN_EXPIRED"===e.errors[0].code||401===e.errors[0].code||"token expired"===e.errors[0].msg)&amp;&amp;($(".reload-btn").trigger("click",{isReconnect:!0}),e.error="token_expired"),t||!e.url?(u("error or no url in response %s",t||"no url"),this.emit(h.UNABLE_TO_RTM_START,t||e.error),e&amp;&amp;a(p,e.error)?(n="unrecoverable failure connecting to the RTM API",this.disconnect(n,e.error)):(this.authenticated=!1,this.autoReconnect&amp;&amp;this.reconnect())):(r&amp;&amp;(e.url=e.url+"&amp;isReconnect=true"),this.authenticated=!0,this.emit(h.AUTHENTICATED,e),this.connect(e.url))},y.prototype._close=function(){this.autoReconnect=!1,this._safeDisconnect()},y.prototype._safeDisconnect=function(){this.ws&amp;&amp;this.ws.close(),this.authenticated=!1,this.connected=!1},y.prototype.reWriteURL=function(t){if(this.reWriteSocketURL){var e=document.createElement("a");e.href=t,this.reWriteSocketURL.protocol&amp;&amp;(e.protocol=this.reWriteSocketURL.protocol),this.reWriteSocketURL.hostname&amp;&amp;(e.hostname=this.reWriteSocketURL.hostname),this.reWriteSocketURL.port&amp;&amp;(e.port=this.reWriteSocketURL.port),t=e.href}return t},y.prototype.connect=function(t){u("connecting"),this.emit(h.WS_OPENING,{}),t=this.reWriteURL(t),this.ws=this._socketFn(t),this.ws.onopen=i(this.handleWsOpen,this),this.ws.onmessage=i(this.handleWsMessage,this),this.ws.onerror=i(this.handleWsError,this),this.ws.onclose=i(this.handleWsClose,this),this.ws.onping=i(this.handleWsPing,this)},y.prototype.disconnect=function(t,e){u("disconnecting"),this.emit(h.DISCONNECT,t,e),this.autoReconnect=!1,this._safeDisconnect()},y.prototype.reconnect=function(){if(u("reconnecting"),console.log("in reconnect"),!this._reconnecting){if(this._reconnecting=!0,this.emit(h.ATTEMPTING_RECONNECT),this._safeDisconnect(),this._connAttempts++,this._connAttempts&gt;this.MAX_RECONNECTION_ATTEMPTS)throw new Error("unable to connect to kore.ai RTM API, failed after max reconnection attempts");setTimeout(i(this.start,this),this._connAttempts*this.RECONNECTION_BACKOFF)}},y.prototype.handleWsOpen=function(){u("connected"),this.connected=!0,this.emit("open",{data:{}}),this._connAttempts=0},y.prototype.handleWsMessage=function(t){var e;this.emit("message",t);try{e=JSON.parse(t)}catch(t){return}a(f,e.type)?this._handleWsMessageInternal(e.type,e):this._handleWsMessageViaEventHandler(e.type,e)},y.prototype._handleWsMessageInternal=function(t,e){t===c.HELLO&amp;&amp;this._handleHello()},y.prototype._handleWsMessageViaEventHandler=function(t,e){var n;if(t===c.MESSAGE&amp;&amp;(n=e.reply_to)){if(!this._pendingMessages[n])return;delete this._pendingMessages[n]}this.emit(t,e),t!==c.MESSAGE||l(e.subtype)||this.emit(m(e.subtype),e)},y.prototype.handleWsError=function(t){u("web socket error::%s",t),this.emit(h.WS_ERROR,t)},y.prototype.handleWsClose=function(t,e){this.connected=!1,this.emit(h.WS_CLOSE,t,e),this.autoReconnect?this._connecting||this.reconnect():(u("websocket closed with auto-reconnect false on the RTM client"),this.disconnect("websocket closed with auto-reconnect false on the RTM client"))},y.prototype.handleWsPing=function(){this.ws.pong&amp;&amp;this.ws.pong()},y.prototype._handleHello=function(){this.connected=!0,this.emit(h.RTM_CONNECTION_OPENED)},y.prototype.sendMessage=function(t,e){this.send(t,e)},y.prototype.send=function(t,e){var n,r,i=o(t);this.connected&amp;&amp;!this._reconnecting?(i.id=i.clientMessageId||this.nextMessageId(),n=JSON.stringify(i),this._pendingMessages[i.id]=i,this.ws.send(n,void 0,function(t){l(t),l(e)||e(t)})):(u(r="ws not connected or reconnecting, unable to send message"),l(e)||e(new Error(r)))},e.exports=y},{"../client":3,"../events/client":4,"../events/rtm":6,"../events/utils":7,"../transports/ws":11,"../web/apis":15,debug:21,inherits:23,lodash:24}],10:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).has,o=r.partial,a=t("browser-request"),s=function(t,e,n,r){e?t(e,n&amp;&amp;n.headers||{},n&amp;&amp;n.statusCode||null,r):t(e,n.headers,n.statusCode,r)};e.exports.requestTransport=function(t,e){var n=function(t){var e={url:t.url,headers:t.headers};return i(t.data,"file")?e.formData=t.data:e.json=t.data,e}(t);t.data&amp;&amp;t.data.type&amp;&amp;"GET"===t.data.type?a.get(n,o(s,e)):a.post(n,o(s,e))}},{"browser-request":20,lodash:24}],11:[function(t,e,n){e.exports=function(t,e){return new WebSocket(t)}},{}],12:[function(t,e,n){e.exports=function(){}},{}],13:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="anonymouslogin",this.client=t}t("inherits")(i,r),i.prototype.login=function(t,e){var n={opts:t=t||{}};return this.client.makeAPICall("/oAuth/token/jwtgrant/anonymous",n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],14:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="history",this.client=t}t("inherits")(i,r),i.prototype.history=function(t,e){var n={opts:t=t||{},type:"GET"},r="/botmessages/rtm",i=!1,o="?";return t.botInfo&amp;&amp;t.botInfo.taskBotId&amp;&amp;(!1===i?(r+=o+"botId="+t.botInfo.taskBotId,o="&amp;",i=!0):r+=o+"botId="+t.botInfo.taskBotId,delete t.botInfo),t.offset&amp;&amp;(!1===i?(r+=o+"offset="+t.offset,o="&amp;",i=!0):r+=o+"offset="+t.offset,delete t.offset),t.limit&amp;&amp;(!1===i?(r+=o+"limit="+t.limit,o="&amp;",i=!0):r+=o+"limit="+t.limit,delete t.limit),t.forward&amp;&amp;(!1===i?(r+=o+"forward="+t.forward,o="&amp;",i=!0):r+=o+"forward="+t.forward,delete t.forward),t.msgId&amp;&amp;(!1===i?(r+=o+"msgId="+t.msgId,o="&amp;",i=!0):r+=o+"msgId="+t.msgId,delete t.msgId),this.client.makeAPICall(r,n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],15:[function(t,e,n){e.exports={RtmApi:t("./rtm.js"),LogInApi:t("./login.js"),AnonymousLogin:t("./anonymouslogin.js"),HistoryApi:t("./history.js")}},{"./anonymouslogin.js":13,"./history.js":14,"./login.js":16,"./rtm.js":17}],16:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="login",this.client=t}t("inherits")(i,r),i.prototype.login=function(t,e){var n={opts:t=t||{}};return this.client.makeAPICall("/oAuth/token/jwtgrant",n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],17:[function(t,e,n){var r=t("./BaseApi");function i(t){this.name="rtm",this.client=t}t("inherits")(i,r),i.prototype.start=function(t,e){var n={opts:t};return this.client.makeAPICall("/rtm/start",n,e)},e.exports=i},{"./BaseApi":12,inherits:23}],18:[function(t,e,n){var r,i=(r=t("lodash").bind?t("lodash"):_).bind,o=r.forEach,a=t("inherits"),s=t("../client"),l=t("./apis/index");function u(t,e){var n=e||{};s.call(this,t,n),this.claims=e.claims,this.retryConfig=n.retryConfig||{retries:5,factor:3.9},this.user={}}a(u,s),u.prototype._createFacets=function(){var t;u.super_.prototype._createFacets.call(this),i(this.makeAPICall,this),o(l,function(e){this[(t=new e(this)).name]=t},this)},e.exports=u},{"../client":3,"./apis/index":15,inherits:23,lodash:24}],19:[function(t,e,n){(function(t,n){!function(){var r,i={};function o(){}function a(t){return t}function s(t){return!!t}function l(t){return!t}var u="object"==typeof self&amp;&amp;self.self===self&amp;&amp;self||"object"==typeof n&amp;&amp;n.global===n&amp;&amp;n||this;function c(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function f(t){return function(){null!==t&amp;&amp;(t.apply(this,arguments),t=null)}}null!=u&amp;&amp;(r=u.async),i.noConflict=function(){return u.async=r,i};var p=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===p.call(t)};function d(t){return h(t)||"number"==typeof t.length&amp;&amp;t.length&gt;=0&amp;&amp;t.length%1==0}function g(t,e){for(var n=-1,r=t.length;++n&lt;r;)e(t[n],n,t)}function m(t,e){for(var n=-1,r=t.length,i=Array(r);++n&lt;r;)i[n]=e(t[n],n,t);return i}function v(t){return m(Array(t),function(t,e){return e})}function y(t,e){for(var n=0;n&lt;t.length;n++)if(t[n]===e)return n;return-1}var _=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&amp;&amp;e.push(n);return e};function x(t){var e,n,r=-1;return d(t)?(e=t.length,function(){return++r&lt;e?r:null}):(n=_(t),e=n.length,function(){return++r&lt;e?n[r]:null})}function w(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i&lt;n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function b(t){return function(e,n,r){return t(e,r)}}var A="function"==typeof setImmediate&amp;&amp;setImmediate,k=A?function(t){A(t)}:function(t){setTimeout(t,0)};function E(t){return function(e,n,r){r=f(r||o);var i=x(e=e||[]);if(t&lt;=0)return r(null);var a=!1,s=0,l=!1;!function o(){if(a&amp;&amp;s&lt;=0)return r(null);for(;s&lt;t&amp;&amp;!l;){var u=i();if(null===u)return a=!0,void(s&lt;=0&amp;&amp;r(null));s+=1,n(e[u],u,c(function(t){s-=1,t?(r(t),l=!0):o()}))}}()}}function C(t){return function(e,n,r){return t(i.eachOf,e,n,r)}}function T(t){return function(e,n,r,i){return t(E(n),e,r,i)}}function I(t){return function(e,n,r){return t(i.eachOfSeries,e,n,r)}}function O(t,e,n,r){r=f(r||o);var i=d(e=e||[])?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function S(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&amp;&amp;i.push({index:e,value:t}),r()})},function(){r(m(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function R(t,e,n,r){S(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function M(t,e,n){return function(r,i,o,a){function s(){a&amp;&amp;a(n(!1,void 0))}function l(t,r,i){if(!a)return i();o(t,function(r){a&amp;&amp;e(r)&amp;&amp;(a(n(!0,t)),a=o=!1),i()})}arguments.length&gt;3?t(r,i,l,s):(a=o,o=i,t(r,l,s))}}function L(t,e){return e}function P(t,e,n){n=n||o;var r=d(e)?[]:{};t(e,function(t,e,n){t(w(function(t,i){i.length&lt;=1&amp;&amp;(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function N(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function j(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");function r(t,e,n,r){if(null!=r&amp;&amp;"function"!=typeof r)throw new Error("task callback must be a function");if(t.started=!0,h(e)||(e=[e]),0===e.length&amp;&amp;t.idle())return i.setImmediate(function(){t.drain()});g(e,function(e){var i={data:e,callback:r||o};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&amp;&amp;t.saturated()}),i.setImmediate(t.process)}function a(t,e){return function(){s-=1;var n=!1,r=arguments;g(e,function(t){g(l,function(e,r){e!==t||n||(l.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+s===0&amp;&amp;t.drain(),t.process()}}var s=0,l=[],u={tasks:[],concurrency:e,payload:n,saturated:o,empty:o,drain:o,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=o,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){for(;!u.paused&amp;&amp;s&lt;u.concurrency&amp;&amp;u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=m(e,function(t){return t.data});0===u.tasks.length&amp;&amp;u.empty(),s+=1,l.push(e[0]);var r=c(a(u,e));t(n,r)}},length:function(){return u.tasks.length},running:function(){return s},workersList:function(){return l},idle:function(){return u.tasks.length+s===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;e&lt;=t;e++)i.setImmediate(u.process)}}};return u}function D(t){return w(function(e,n){e.apply(null,n.concat([w(function(e,n){"object"==typeof console&amp;&amp;(e?console.error&amp;&amp;console.error(e):console[t]&amp;&amp;g(n,function(e){console[t](e)}))})]))})}function W(t){return function(e,n,r){t(v(e),n,r)}}function B(t){return w(function(e,n){var r=w(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function V(t){return w(function(e){var n=e.pop();e.push(function(){var t=arguments;r?i.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}"object"==typeof t&amp;&amp;"function"==typeof t.nextTick?i.nextTick=t.nextTick:i.nextTick=k,i.setImmediate=A?k:i.nextTick,i.forEach=i.each=function(t,e,n){return i.eachOf(t,b(e),n)},i.forEachSeries=i.eachSeries=function(t,e,n){return i.eachOfSeries(t,b(e),n)},i.forEachLimit=i.eachLimit=function(t,e,n,r){return E(e)(t,b(n),r)},i.forEachOf=i.eachOf=function(t,e,n){n=f(n||o);for(var r,i=x(t=t||[]),a=0;null!=(r=i());)a+=1,e(t[r],r,c(s));function s(t){a--,t?n(t):null===r&amp;&amp;a&lt;=0&amp;&amp;n(null)}0===a&amp;&amp;n(null)},i.forEachOfSeries=i.eachOfSeries=function(t,e,n){n=f(n||o);var r=x(t=t||[]),a=r();!function o(){var s=!0;if(null===a)return n(null);e(t[a],a,c(function(t){if(t)n(t);else{if(null===(a=r()))return n(null);s?i.setImmediate(o):o()}})),s=!1}()},i.forEachOfLimit=i.eachOfLimit=function(t,e,n,r){E(e)(t,n,r)},i.map=C(O),i.mapSeries=I(O),i.mapLimit=T(O),i.inject=i.foldl=i.reduce=function(t,e,n,r){i.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},i.foldr=i.reduceRight=function(t,e,n,r){var o=m(t,a).reverse();i.reduce(o,e,n,r)},i.transform=function(t,e,n,r){3===arguments.length&amp;&amp;(r=n,n=e,e=h(t)?[]:{}),i.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},i.select=i.filter=C(S),i.selectLimit=i.filterLimit=T(S),i.selectSeries=i.filterSeries=I(S),i.reject=C(R),i.rejectLimit=T(R),i.rejectSeries=I(R),i.any=i.some=M(i.eachOf,s,a),i.someLimit=M(i.eachOfLimit,s,a),i.all=i.every=M(i.eachOf,l,l),i.everyLimit=M(i.eachOfLimit,l,l),i.detect=M(i.eachOf,a,L),i.detectSeries=M(i.eachOfSeries,a,L),i.detectLimit=M(i.eachOfLimit,a,L),i.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n&lt;r?-1:n&gt;r?1:0}i.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,m(e.sort(r),function(t){return t.value}))})},i.auto=function(t,e,n){"function"==typeof arguments[1]&amp;&amp;(n=e,e=null),n=f(n||o);var r=_(t),a=r.length;if(!a)return n(null);e||(e=a);var s={},l=0,u=!1,c=[];function p(t){c.unshift(t)}function d(){a--,g(c.slice(0),function(t){t()})}p(function(){a||n(null,s)}),g(r,function(r){if(!u){for(var o,a=h(t[r])?t[r]:[t[r]],f=w(function(t,e){if(l--,e.length&lt;=1&amp;&amp;(e=e[0]),t){var o={};c=function(t,e){o[e]=t},g(_(a=s),function(t){c(a[t],t)}),o[r]=e,u=!0,n(t,o)}else s[r]=e,i.setImmediate(d);var a,c}),m=a.slice(0,a.length-1),v=m.length;v--;){if(!(o=t[m[v]]))throw new Error("Has nonexistent dependency in "+m.join(", "));if(h(o)&amp;&amp;y(o,r)&gt;=0)throw new Error("Has cyclic dependencies")}x()?(l++,a[a.length-1](f,s)):p(function t(){x()&amp;&amp;(l++,(e=y(c,t))&gt;=0&amp;&amp;c.splice(e,1),a[a.length-1](f,s));var e})}function x(){return l&lt;e&amp;&amp;(t=function(t,e){return t&amp;&amp;s.hasOwnProperty(e)},n=!0,g(m,function(e,r,i){n=t(n,e,r,i)}),n)&amp;&amp;!s.hasOwnProperty(r);var t,n}})},i.retry=function(t,e,n){var r=5,o=0,a=[],s={times:r,interval:o};var l=arguments.length;if(l&lt;1||l&gt;3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function u(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;s.times;){var o=!(s.times-=1);a.push(n(s.task,o)),!o&amp;&amp;s.interval&gt;0&amp;&amp;a.push(r(s.interval))}i.series(a,function(e,n){n=n[n.length-1],(t||s.callback)(n.err,n.result)})}return l&lt;=2&amp;&amp;"function"==typeof t&amp;&amp;(n=e,e=t),"function"!=typeof t&amp;&amp;function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||r;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||r,t.interval=parseInt(e.interval,10)||o}}(s,t),s.callback=n,s.task=e,s.callback?u():u},i.waterfall=function(t,e){if(e=f(e||o),!h(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();!function t(n){return w(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=n.next();o?i.push(t(o)):i.push(e),V(n).apply(null,i)}})}(i.iterator(t))()},i.parallel=function(t,e){P(i.eachOf,t,e)},i.parallelLimit=function(t,e,n){P(E(e),t,n)},i.series=function(t,e){P(i.eachOfSeries,t,e)},i.iterator=function(t){return function e(n){function r(){return t.length&amp;&amp;t[n].apply(null,arguments),r.next()}return r.next=function(){return n&lt;t.length-1?e(n+1):null},r}(0)},i.apply=w(function(t,e){return w(function(n){return t.apply(null,e.concat(n))})}),i.concat=C(N),i.concatSeries=I(N),i.whilst=function(t,e,n){if(n=n||o,t()){var r=w(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},i.doWhilst=function(t,e,n){var r=0;return i.whilst(function(){return++r&lt;=1||e.apply(this,arguments)},t,n)},i.until=function(t,e,n){return i.whilst(function(){return!t.apply(this,arguments)},e,n)},i.doUntil=function(t,e,n){return i.doWhilst(t,function(){return!e.apply(this,arguments)},n)},i.during=function(t,e,n){n=n||o;var r=w(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},i.doDuring=function(t,e,n){var r=0;i.during(function(t){r++&lt;1?t(null,!0):e.apply(this,arguments)},t,n)},i.queue=function(t,e){return j(function(e,n){t(e[0],n)},e,1)},i.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}var r=i.queue(t,e);return r.push=function(t,e,a){!function(t,e,r,a){if(null!=a&amp;&amp;"function"!=typeof a)throw new Error("task callback must be a function");if(t.started=!0,h(e)||(e=[e]),0===e.length)return i.setImmediate(function(){t.drain()});g(e,function(e){var s={data:e,priority:r,callback:"function"==typeof a?a:o};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r&lt;i;){var o=r+(i-r+1&gt;&gt;&gt;1);n(e,t[o])&gt;=0?r=o:i=o-1}return r}(t.tasks,s,n)+1,0,s),t.tasks.length===t.concurrency&amp;&amp;t.saturated(),i.setImmediate(t.process)})}(r,t,e,a)},delete r.unshift,r},i.cargo=function(t,e){return j(t,1,e)},i.log=D("log"),i.dir=D("dir"),i.memoize=function(t,e){var n={},r={},o=Object.prototype.hasOwnProperty;e=e||a;var s=w(function(a){var s=a.pop(),l=e.apply(null,a);o.call(n,l)?i.setImmediate(function(){s.apply(null,n[l])}):o.call(r,l)?r[l].push(s):(r[l]=[s],t.apply(null,a.concat([w(function(t){n[l]=t;var e=r[l];delete r[l];for(var i=0,o=e.length;i&lt;o;i++)e[i].apply(null,t)})])))});return s.memo=n,s.unmemoized=t,s},i.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},i.times=W(i.map),i.timesSeries=W(i.mapSeries),i.timesLimit=function(t,e,n,r){return i.mapLimit(v(t),e,n,r)},i.seq=function(){var t=arguments;return w(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=o,i.reduce(t,e,function(t,e,r){e.apply(n,t.concat([w(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},i.compose=function(){return i.seq.apply(null,Array.prototype.reverse.call(arguments))},i.applyEach=B(i.eachOf),i.applyEachSeries=B(i.eachOfSeries),i.forever=function(t,e){var n=c(e||o),r=V(t);!function t(e){if(e)return n(e);r(t)}()},i.ensureAsync=V,i.constant=w(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),i.wrapSync=i.asyncify=function(t){return w(function(e){var n,r,i,o=e.pop();try{n=t.apply(this,e)}catch(t){return o(t)}("function"===(i=typeof(r=n))||"object"===i&amp;&amp;r)&amp;&amp;"function"==typeof n.then?n.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,n)})},"object"==typeof e&amp;&amp;e.exports?e.exports=i:"function"==typeof define&amp;&amp;define.amd?define([],function(){return i}):u.async=i}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:31}],20:[function(t,e,n){var r,i;r=this,i=function(){var t=XMLHttpRequest;if(!t)throw new Error("missing XMLHttpRequest");e.log={trace:r,debug:r,info:r,warn:r,error:r};function e(o,a){if("function"!=typeof a)throw new Error("Bad callback given: "+a);if(!o)throw new Error("No options given");var s=o.onResponse;if((o="string"==typeof o?{uri:o}:JSON.parse(JSON.stringify(o))).onResponse=s,o.verbose&amp;&amp;(e.log=function(){var t,e,n={},o=["trace","debug","info","warn","error"];for(e=0;e&lt;o.length;e++)n[t=o[e]]=r,"undefined"!=typeof console&amp;&amp;console&amp;&amp;console[t]&amp;&amp;(n[t]=i(console,t));return n}()),o.url&amp;&amp;(o.uri=o.url,delete o.url),!o.uri&amp;&amp;""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var l=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],u=0;u&lt;l.length;u++)if(o[l[u]])throw new Error("options."+l[u]+" is not supported");if(o.callback=a,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||e.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&amp;&amp;(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&amp;&amp;(o.headers["content-type"]="application/json"),"boolean"!=typeof o.json?o.body=JSON.stringify(o.json):"string"!=typeof o.body&amp;&amp;(o.body=JSON.stringify(o.body)));var c=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&amp;&amp;e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&amp;")};if(o.qs){var f="string"==typeof o.qs?o.qs:c(o.qs);-1!==o.uri.indexOf("?")?o.uri=o.uri+"&amp;"+f:o.uri=o.uri+"?"+f}if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var p=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=p,p){case"application/x-www-form-urlencoded":o.body=c(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var h=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in t)t.hasOwnProperty(r)&amp;&amp;n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+t[r]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e}(o.form);o.body=h.body,o.headers["content-type"]=h.type;break;default:throw new Error("unsupported encoding:"+p)}}}return o.onResponse=o.onResponse||r,!0===o.onResponse&amp;&amp;(o.onResponse=a,o.callback=r),!o.headers.authorization&amp;&amp;o.auth&amp;&amp;(o.headers.authorization="Basic "+function(t){var e,n,r,i,o,a,s,l,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,f=0,p="",h=[];if(!t)return t;do{e=t.charCodeAt(c++),n=t.charCodeAt(c++),r=t.charCodeAt(c++),i=(l=e&lt;&lt;16|n&lt;&lt;8|r)&gt;&gt;18&amp;63,o=l&gt;&gt;12&amp;63,a=l&gt;&gt;6&amp;63,s=63&amp;l,h[f++]=u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(s)}while(c&lt;t.length);switch(p=h.join(""),t.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p}(o.auth.username+":"+o.auth.password)),function(r){var i=new t,o=!1,a=function(t){var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(t){(e=document.createElement("a")).href="",e=e.href}var r=n.exec(e.toLowerCase())||[],i=n.exec(t.toLowerCase());return!(!i||i[1]==r[1]&amp;&amp;i[2]==r[2]&amp;&amp;(i[3]||("http:"===i[1]?80:443))==(r[3]||("http:"===r[1]?80:443)))}(r.uri),s="withCredentials"in i;if(n+=1,i.seq_id=n,i.id=n+": "+r.method+" "+r.uri,i._id=i.id,a&amp;&amp;!s){var l=new Error("Browser does not support cross-origin request: "+r.uri);return l.cors="unsupported",r.callback(l,i)}i.timeoutTimer=setTimeout(function(){o=!0;var t=new Error("ETIMEDOUT");return t.code="ETIMEDOUT",t.duration=r.timeout,e.log.error("Timeout",{id:i._id,milliseconds:r.timeout}),r.callback(t,i)},r.timeout);var u={response:!1,loading:!1,end:!1};for(var c in i.onreadystatechange=function(n){if(o)return e.log.debug("Ignoring timed out state change",{state:i.readyState,id:i.id});e.log.debug("State change",{state:i.readyState,id:i.id,timed_out:o}),i.readyState===t.OPENED?e.log.debug("Request started",{id:i.id}):i.readyState===t.HEADERS_RECEIVED?f():i.readyState===t.LOADING?(f(),p()):i.readyState===t.DONE&amp;&amp;(f(),p(),function(){if(!u.end){if(u.end=!0,e.log.debug("Request done",{id:i.id}),i.body=i.responseText,r.json)try{i.body=JSON.parse(i.responseText)}catch(t){return r.callback(t,i)}r.callback(null,i,i.body)}}())},i.open(r.method,r.uri,!0),r.headers)i.setRequestHeader(c,r.headers[c]);a&amp;&amp;(i.withCredentials=!!r.withCredentials);return i.send(r.body),i;function f(){if(!u.response){if(u.response=!0,e.log.debug("Got response",{id:i.id,status:i.status}),clearTimeout(i.timeoutTimer),i.statusCode=i.status,a&amp;&amp;0==i.statusCode){var t=new Error("CORS request rejected: "+r.uri);return t.cors="rejected",u.loading=!0,u.end=!0,r.callback(t,i)}r.onResponse(null,i)}}function p(){u.loading||(u.loading=!0,e.log.debug("Response body loading",{id:i.id}))}}(o)}var n=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=12e4,e.defaults=function(t,n){var r=function(e){return function(n,r){for(var i in n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),t)void 0===n[i]&amp;&amp;(n[i]=t[i]);return e(n,r)}},i=r(e);return i.get=r(e.get),i.post=r(e.post),i.put=r(e.put),i.head=r(e.head),i};function r(){}function i(t,e){return function(n,r){"object"==typeof r&amp;&amp;(n+=" "+JSON.stringify(r));return t[e].call(t,n)}}return["get","put","post","head"].forEach(function(t){var n=t.toUpperCase();e[t.toLowerCase()]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t))).method=n;var r=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,r)}}),e.couch=function(t,n){return"string"==typeof t&amp;&amp;(t={uri:t}),t.json=!0,t.body&amp;&amp;(t.json=t.body),delete t.body,n=n||r,e(t,function(t,e,r){if(t)return n(t,e,r);if((e.statusCode&lt;200||e.statusCode&gt;299)&amp;&amp;r.error){for(var i in t=new Error("CouchDB error: "+(r.error.reason||r.error.error)),r)t[i]=r[i];return n(t,e,r)}return n(t,e,r)})},e},"function"==typeof define&amp;&amp;define.amd?e.exports=i():"object"==typeof n?e.exports=i():r.returnExports=i()},{}],21:[function(t,e,n){function r(){var t;try{t=n.storage.debug}catch(t){}return t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&amp;&amp;console.log&amp;&amp;Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color,i=0,o=0;return(t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&amp;&amp;"%c"===t&amp;&amp;(o=++i)}),t.splice(o,0,r),t},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&amp;&amp;(console.firebug||console.exception&amp;&amp;console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&amp;&amp;parseInt(RegExp.$1,10)&gt;=31},n.storage="undefined"!=typeof chrome&amp;&amp;void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(r())},{"./debug":22}],22:[function(t,e,n){(n=e.exports=function(t){function e(){}function o(){var t=o,e=+new Date,a=e-(r||e);t.diff=a,t.prev=r,t.curr=e,r=e,null==t.useColors&amp;&amp;(t.useColors=n.useColors()),null==t.color&amp;&amp;t.useColors&amp;&amp;(t.color=n.colors[i++%n.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&amp;&amp;(s=["%o"].concat(s));var l=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;l++;var i=n.formatters[r];if("function"==typeof i){var o=s[l];e=i.call(t,o),s.splice(l,1),l--}return e}),"function"==typeof n.formatArgs&amp;&amp;(s=n.formatArgs.apply(t,s));var u=o.log||n.log||console.log.bind(console);u.apply(t,s)}e.enabled=!1,o.enabled=!0;var a=n.enabled(t)?o:e;return a.namespace=t,a}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i&lt;r;i++)e[i]&amp;&amp;("-"===(t=e[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e&lt;r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e&lt;r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var r,i=0},{ms:25}],23:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],24:[function(t,e,n){(function(t){(function(){var r,i,o,a="3.10.1",s=1,l=2,u=4,c=8,f=16,p=32,h=64,d=128,g=256,m=30,v="...",y=150,_=16,x=200,w=1,b=2,A="Expected a function",k="__lodash_placeholder__",E="[object Arguments]",C="[object Array]",T="[object Boolean]",I="[object Date]",O="[object Error]",S="[object Function]",R="[object Number]",M="[object Object]",L="[object RegExp]",P="[object String]",N="[object ArrayBuffer]",j="[object Float32Array]",D="[object Float64Array]",W="[object Int8Array]",B="[object Int16Array]",V="[object Int32Array]",U="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",q=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&amp;(?:amp|lt|gt|quot|#39|#96);/g,X=/[&amp;&lt;&gt;"'`]/g,$=RegExp(K.source),J=RegExp(X.source),Q=/&lt;%-([\s\S]+?)%&gt;/g,Z=/&lt;%([\s\S]+?)%&gt;/g,tt=/&lt;%=([\s\S]+?)%&gt;/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,it=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,ot=RegExp(it.source),at=/[\u0300-\u036f\ufe20-\ufe23]/g,st=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ut=/\w*$/,ct=/^0[xX]/,ft=/^\[object .+?Constructor\]$/,pt=/^\d+$/,ht=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,dt=/($^)/,gt=/['\n\r\u2028\u2029\\]/g,mt=(i="[A-Z\\xc0-\\xd6\\xd8-\\xde]",o="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(i+"+(?="+i+o+")|"+i+"?"+o+"|"+i+"+|[0-9]+","g")),vt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],yt=-1,_t={};_t[j]=_t[D]=_t[W]=_t[B]=_t[V]=_t[U]=_t[F]=_t[z]=_t[H]=!0,_t[E]=_t[C]=_t[N]=_t[T]=_t[I]=_t[O]=_t[S]=_t["[object Map]"]=_t[R]=_t[M]=_t[L]=_t["[object Set]"]=_t[P]=_t["[object WeakMap]"]=!1;var xt={};xt[E]=xt[C]=xt[N]=xt[T]=xt[I]=xt[j]=xt[D]=xt[W]=xt[B]=xt[V]=xt[R]=xt[M]=xt[L]=xt[P]=xt[U]=xt[F]=xt[z]=xt[H]=!0,xt[O]=xt[S]=xt["[object Map]"]=xt["[object Set]"]=xt["[object WeakMap]"]=!1;var wt={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss"},bt={"&amp;":"&amp;amp;","&lt;":"&amp;lt;","&gt;":"&amp;gt;",'"':"&amp;quot;","'":"&amp;#39;","`":"&amp;#96;"},At={"&amp;amp;":"&amp;","&amp;lt;":"&lt;","&amp;gt;":"&gt;","&amp;quot;":'"',"&amp;#39;":"'","&amp;#96;":"`"},kt={function:!0,object:!0},Et={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tt=kt[typeof n]&amp;&amp;n&amp;&amp;!n.nodeType&amp;&amp;n,It=kt[typeof e]&amp;&amp;e&amp;&amp;!e.nodeType&amp;&amp;e,Ot=Tt&amp;&amp;It&amp;&amp;"object"==typeof t&amp;&amp;t&amp;&amp;t.Object&amp;&amp;t,St=kt[typeof self]&amp;&amp;self&amp;&amp;self.Object&amp;&amp;self,Rt=kt[typeof window]&amp;&amp;window&amp;&amp;window.Object&amp;&amp;window,Mt=It&amp;&amp;It.exports===Tt&amp;&amp;Tt,Lt=Ot||Rt!==(this&amp;&amp;this.window)&amp;&amp;Rt||St||this;function Pt(t,e){if(t!==e){var n=null===t,i=t===r,o=t==t,a=null===e,s=e===r,l=e==e;if(t&gt;e&amp;&amp;!a||!o||n&amp;&amp;!s&amp;&amp;l||i&amp;&amp;l)return 1;if(t&lt;e&amp;&amp;!n||!l||a&amp;&amp;!i&amp;&amp;o||s&amp;&amp;o)return-1}return 0}function Nt(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i&lt;r;)if(e(t[i],i,t))return i;return-1}function jt(t,e,n){if(e!=e)return Gt(t,n);for(var r=n-1,i=t.length;++r&lt;i;)if(t[r]===e)return r;return-1}function Dt(t){return"function"==typeof t||!1}function Wt(t){return null==t?"":t+""}function Bt(t,e){for(var n=-1,r=t.length;++n&lt;r&amp;&amp;e.indexOf(t.charAt(n))&gt;-1;);return n}function Vt(t,e){for(var n=t.length;n--&amp;&amp;e.indexOf(t.charAt(n))&gt;-1;);return n}function Ut(t,e){return Pt(t.criteria,e.criteria)||t.index-e.index}function Ft(t){return wt[t]}function zt(t){return bt[t]}function Ht(t,e,n){return e?t=Et[t]:n&amp;&amp;(t=Ct[t]),"\\"+t}function qt(t){return"\\"+Ct[t]}function Gt(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i&lt;r;){var o=t[i];if(o!=o)return i}return-1}function Yt(t){return!!t&amp;&amp;"object"==typeof t}function Kt(t){return t&lt;=160&amp;&amp;t&gt;=9&amp;&amp;t&lt;=13||32==t||160==t||5760==t||6158==t||t&gt;=8192&amp;&amp;(t&lt;=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function Xt(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n&lt;r;)t[n]===e&amp;&amp;(t[n]=k,o[++i]=n);return o}function $t(t){for(var e=-1,n=t.length;++e&lt;n&amp;&amp;Kt(t.charCodeAt(e)););return e}function Jt(t){for(var e=t.length;e--&amp;&amp;Kt(t.charCodeAt(e)););return e}function Qt(t){return At[t]}var Zt=function t(e){var n=(e=e?Zt.defaults(Lt.Object(),e,Zt.pick(Lt,vt)):Lt).Array,i=e.Date,o=e.Error,wt=e.Function,bt=e.Math,At=e.Number,kt=e.Object,Et=e.RegExp,Ct=e.String,Tt=e.TypeError,It=n.prototype,Ot=kt.prototype,St=Ct.prototype,Rt=wt.prototype.toString,Mt=Ot.hasOwnProperty,Kt=0,te=Ot.toString,ee=Lt._,ne=Et("^"+Rt.call(Mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&amp;").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=e.ArrayBuffer,ie=e.clearTimeout,oe=e.parseFloat,ae=bt.pow,se=Ot.propertyIsEnumerable,le=yr(e,"Set"),ue=e.setTimeout,ce=It.splice,fe=e.Uint8Array,pe=yr(e,"WeakMap"),he=bt.ceil,de=yr(kt,"create"),ge=bt.floor,me=yr(n,"isArray"),ve=e.isFinite,ye=yr(kt,"keys"),_e=bt.max,xe=bt.min,we=yr(i,"now"),be=e.parseInt,Ae=bt.random,ke=At.NEGATIVE_INFINITY,Ee=At.POSITIVE_INFINITY,Ce=4294967295,Te=Ce-1,Ie=Ce&gt;&gt;&gt;1,Oe=9007199254740991,Se=pe&amp;&amp;new pe,Re={};function Me(t){if(Yt(t)&amp;&amp;!Gi(t)&amp;&amp;!(t instanceof Ne)){if(t instanceof Pe)return t;if(Mt.call(t,"__chain__")&amp;&amp;Mt.call(t,"__wrapped__"))return jr(t)}return new Pe(t)}function Le(){}function Pe(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}Me.support={};function Ne(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function je(){this.__data__={}}function De(t){var e=t?t.length:0;for(this.data={hash:de(null),set:new le};e--;)this.push(t[e])}function We(t,e){var n=t.data;return("string"==typeof e||$i(e)?n.set.has(e):n.hash[e])?0:-1}function Be(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r&lt;i;)e[r]=t[r];return e}function Ve(t,e){for(var n=-1,r=t.length;++n&lt;r&amp;&amp;!1!==e(t[n],n,t););return t}function Ue(t,e){for(var n=-1,r=t.length;++n&lt;r;)if(!e(t[n],n,t))return!1;return!0}function Fe(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n&lt;r;){var a=t[n];e(a,n,t)&amp;&amp;(o[++i]=a)}return o}function ze(t,e){for(var r=-1,i=t.length,o=n(i);++r&lt;i;)o[r]=e(t[r],r,t);return o}function He(t,e){for(var n=-1,r=e.length,i=t.length;++n&lt;r;)t[i+n]=e[n];return t}function qe(t,e,n,r){var i=-1,o=t.length;for(r&amp;&amp;o&amp;&amp;(n=t[++i]);++i&lt;o;)n=e(n,t[i],i,t);return n}function Ge(t,e){for(var n=-1,r=t.length;++n&lt;r;)if(e(t[n],n,t))return!0;return!1}function Ye(t,e,n,i){return t!==r&amp;&amp;Mt.call(i,n)?t:e}function Ke(t,e,n){for(var i=-1,o=yo(e),a=o.length;++i&lt;a;){var s=o[i],l=t[s],u=n(l,e[s],s,t,e);(u==u?u===l:l!=l)&amp;&amp;(l!==r||s in t)||(t[s]=u)}return t}function Xe(t,e){return null==e?t:Je(e,yo(e),t)}function $e(t,e){for(var i=-1,o=null==t,a=!o&amp;&amp;xr(t),s=a?t.length:0,l=e.length,u=n(l);++i&lt;l;){var c=e[i];u[i]=a?wr(c,s)?t[c]:r:o?r:t[c]}return u}function Je(t,e,n){n||(n={});for(var r=-1,i=e.length;++r&lt;i;){var o=e[r];n[o]=t[o]}return n}function Qe(t,e,n){var i=typeof t;return"function"==i?e===r?t:jn(t,e,n):null==t?Wo:"object"==i?xn(t):e===r?Ho(t):wn(t,e)}function Ze(t,e,n,i,o,a,s){var l;if(n&amp;&amp;(l=o?n(t,i,o):n(t)),l!==r)return l;if(!$i(t))return t;var u=Gi(t);if(u){if(l=function(t){var e=t.length,n=new t.constructor(e);return e&amp;&amp;"string"==typeof t[0]&amp;&amp;Mt.call(t,"index")&amp;&amp;(n.index=t.index,n.input=t.input),n}(t),!e)return Be(t,l)}else{var c=te.call(t),f=c==S;if(c!=M&amp;&amp;c!=E&amp;&amp;(!f||o))return xt[c]?function(t,e,n){var r=t.constructor;switch(e){case N:return Dn(t);case T:case I:return new r(+t);case j:case D:case W:case B:case V:case U:case F:case z:case H:var i=t.buffer;return new r(n?Dn(i):i,t.byteOffset,t.length);case R:case P:return new r(t);case L:var o=new r(t.source,ut.exec(t));o.lastIndex=t.lastIndex}return o}(t,c,e):o?t:{};if(l=function(t){var e=t.constructor;return"function"==typeof e&amp;&amp;e instanceof e||(e=kt),new e}(f?{}:t),!e)return Xe(l,t)}a||(a=[]),s||(s=[]);for(var p=a.length;p--;)if(a[p]==t)return s[p];return a.push(t),s.push(l),(u?Ve:hn)(t,function(r,i){l[i]=Ze(r,e,n,i,t,a,s)}),l}Me.templateSettings={escape:Q,evaluate:Z,interpolate:tt,variable:"",imports:{_:Me}};var tn=function(){function t(){}return function(e){if($i(e)){t.prototype=e;var n=new t;t.prototype=r}return n||{}}}();function en(t,e,n){if("function"!=typeof t)throw new Tt(A);return ue(function(){t.apply(r,n)},e)}function nn(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=gr(),a=o==jt,s=a&amp;&amp;e.length&gt;=x?Hn(e):null,l=e.length;s&amp;&amp;(o=We,a=!1,e=s);t:for(;++i&lt;n;){var u=t[i];if(a&amp;&amp;u==u){for(var c=l;c--;)if(e[c]===u)continue t;r.push(u)}else o(e,u,0)&lt;0&amp;&amp;r.push(u)}return r}var rn=Fn(hn),on=Fn(dn,!0);function an(t,e){var n=!0;return rn(t,function(t,r,i){return n=!!e(t,r,i)}),n}function sn(t,e){var n=[];return rn(t,function(t,r,i){e(t,r,i)&amp;&amp;n.push(t)}),n}function ln(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function un(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i&lt;o;){var a=t[i];Yt(a)&amp;&amp;xr(a)&amp;&amp;(n||Gi(a)||qi(a))?e?un(a,e,n,r):He(r,a):n||(r[r.length]=a)}return r}var cn=zn(),fn=zn(!0);function pn(t,e){return cn(t,e,_o)}function hn(t,e){return cn(t,e,yo)}function dn(t,e){return fn(t,e,yo)}function gn(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n&lt;r;){var a=e[n];Xi(t[a])&amp;&amp;(o[++i]=a)}return o}function mn(t,e,n){if(null!=t){n!==r&amp;&amp;n in Pr(t)&amp;&amp;(e=[n]);for(var i=0,o=e.length;null!=t&amp;&amp;i&lt;o;)t=t[e[i++]];return i&amp;&amp;i==o?t:r}}function vn(t,e,n,i,o,a){return t===e||(null==t||null==e||!$i(t)&amp;&amp;!Yt(e)?t!=t&amp;&amp;e!=e:function(t,e,n,i,o,a,s){var l=Gi(t),u=Gi(e),c=C,f=C;l||((c=te.call(t))==E?c=M:c!=M&amp;&amp;(l=no(t))),u||((f=te.call(e))==E?f=M:f!=M&amp;&amp;(u=no(e)));var p=c==M,h=f==M,d=c==f;if(d&amp;&amp;!l&amp;&amp;!p)return function(t,e,n){switch(n){case T:case I:return+t==+e;case O:return t.name==e.name&amp;&amp;t.message==e.message;case R:return t!=+t?e!=+e:t==+e;case L:case P:return t==e+""}return!1}(t,e,c);if(!o){var g=p&amp;&amp;Mt.call(t,"__wrapped__"),m=h&amp;&amp;Mt.call(e,"__wrapped__");if(g||m)return n(g?t.value():t,m?e.value():e,i,o,a,s)}if(!d)return!1;a||(a=[]),s||(s=[]);for(var v=a.length;v--;)if(a[v]==t)return s[v]==e;a.push(t),s.push(e);var y=(l?function(t,e,n,i,o,a,s){var l=-1,u=t.length,c=e.length;if(u!=c&amp;&amp;!(o&amp;&amp;c&gt;u))return!1;for(;++l&lt;u;){var f=t[l],p=e[l],h=i?i(o?p:f,o?f:p,l):r;if(h!==r){if(h)continue;return!1}if(o){if(!Ge(e,function(t){return f===t||n(f,t,i,o,a,s)}))return!1}else if(f!==p&amp;&amp;!n(f,p,i,o,a,s))return!1}return!0}:function(t,e,n,i,o,a,s){var l=yo(t),u=l.length,c=yo(e).length;if(u!=c&amp;&amp;!o)return!1;for(var f=u;f--;){var p=l[f];if(!(o?p in e:Mt.call(e,p)))return!1}for(var h=o;++f&lt;u;){p=l[f];var d=t[p],g=e[p],m=i?i(o?g:d,o?d:g,p):r;if(!(m===r?n(d,g,i,o,a,s):m))return!1;h||(h="constructor"==p)}if(!h){var v=t.constructor,y=e.constructor;if(v!=y&amp;&amp;"constructor"in t&amp;&amp;"constructor"in e&amp;&amp;!("function"==typeof v&amp;&amp;v instanceof v&amp;&amp;"function"==typeof y&amp;&amp;y instanceof y))return!1}return!0})(t,e,n,i,o,a,s);return a.pop(),s.pop(),y}(t,e,vn,n,i,o,a))}function yn(t,e,n){var i=e.length,o=i,a=!n;if(null==t)return!o;for(t=Pr(t);i--;){var s=e[i];if(a&amp;&amp;s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i&lt;o;){var l=(s=e[i])[0],u=t[l],c=s[1];if(a&amp;&amp;s[2]){if(u===r&amp;&amp;!(l in t))return!1}else{var f=n?n(u,c,l):r;if(!(f===r?vn(c,u,n,!0):f))return!1}}return!0}function _n(t,e){var r=-1,i=xr(t)?n(t.length):[];return rn(t,function(t,n,o){i[++r]=e(t,n,o)}),i}function xn(t){var e=vr(t);if(1==e.length&amp;&amp;e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null!=t&amp;&amp;t[n]===i&amp;&amp;(i!==r||n in Pr(t))}}return function(t){return yn(t,e)}}function wn(t,e){var n=Gi(t),i=Ar(t)&amp;&amp;Cr(e),o=t+"";return t=Nr(t),function(a){if(null==a)return!1;var s=o;if(a=Pr(a),(n||!i)&amp;&amp;!(s in a)){if(null==(a=1==t.length?a:mn(a,Cn(t,0,-1))))return!1;s=qr(t),a=Pr(a)}return a[s]===e?e!==r||s in a:vn(e,a[s],r,!0)}}function bn(t){return function(e){return null==e?r:e[t]}}function An(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&amp;&amp;wr(r)){var i=r;ce.call(t,r,1)}}return t}function kn(t,e){return t+ge(Ae()*(e-t+1))}var En=Se?function(t,e){return Se.set(t,e),t}:Wo;function Cn(t,e,i){var o=-1,a=t.length;(e=null==e?0:+e||0)&lt;0&amp;&amp;(e=-e&gt;a?0:a+e),(i=i===r||i&gt;a?a:+i||0)&lt;0&amp;&amp;(i+=a),a=e&gt;i?0:i-e&gt;&gt;&gt;0,e&gt;&gt;&gt;=0;for(var s=n(a);++o&lt;a;)s[o]=t[o+e];return s}function Tn(t,e){var n;return rn(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function In(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function On(t,e,n){var r=pr(),i=-1;return e=ze(e,function(t){return r(t)}),In(_n(t,function(t){return{criteria:ze(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r&lt;a;){var l=Pt(i[r],o[r]);if(l){if(r&gt;=s)return l;var u=n[r];return l*("asc"===u||!0===u?1:-1)}}return t.index-e.index}(t,e,n)})}function Sn(t,e){var n=-1,r=gr(),i=t.length,o=r==jt,a=o&amp;&amp;i&gt;=x,s=a?Hn():null,l=[];s?(r=We,o=!1):(a=!1,s=e?[]:l);t:for(;++n&lt;i;){var u=t[n],c=e?e(u,n,t):u;if(o&amp;&amp;u==u){for(var f=s.length;f--;)if(s[f]===c)continue t;e&amp;&amp;s.push(c),l.push(u)}else r(s,c,0)&lt;0&amp;&amp;((e||a)&amp;&amp;s.push(c),l.push(u))}return l}function Rn(t,e){for(var r=-1,i=e.length,o=n(i);++r&lt;i;)o[r]=t[e[r]];return o}function Mn(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o&lt;i)&amp;&amp;e(t[o],o,t););return n?Cn(t,r?0:o,r?o+1:i):Cn(t,r?o+1:0,r?i:o)}function Ln(t,e){var n=t;n instanceof Ne&amp;&amp;(n=n.value());for(var r=-1,i=e.length;++r&lt;i;){var o=e[r];n=o.func.apply(o.thisArg,He([n],o.args))}return n}function Pn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&amp;&amp;e==e&amp;&amp;i&lt;=Ie){for(;r&lt;i;){var o=r+i&gt;&gt;&gt;1,a=t[o];(n?a&lt;=e:a&lt;e)&amp;&amp;null!==a?r=o+1:i=o}return i}return Nn(t,e,Wo,n)}function Nn(t,e,n,i){e=n(e);for(var o=0,a=t?t.length:0,s=e!=e,l=null===e,u=e===r;o&lt;a;){var c=ge((o+a)/2),f=n(t[c]),p=f!==r,h=f==f;if(s)var d=h||i;else d=l?h&amp;&amp;p&amp;&amp;(i||null!=f):u?h&amp;&amp;(i||p):null!=f&amp;&amp;(i?f&lt;=e:f&lt;e);d?o=c+1:a=c}return xe(a,Te)}function jn(t,e,n){if("function"!=typeof t)return Wo;if(e===r)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function Dn(t){var e=new re(t.byteLength);return new fe(e).set(new fe(t)),e}function Wn(t,e,r){for(var i=r.length,o=-1,a=_e(t.length-i,0),s=-1,l=e.length,u=n(l+a);++s&lt;l;)u[s]=e[s];for(;++o&lt;i;)u[r[o]]=t[o];for(;a--;)u[s++]=t[o++];return u}function Bn(t,e,r){for(var i=-1,o=r.length,a=-1,s=_e(t.length-o,0),l=-1,u=e.length,c=n(s+u);++a&lt;s;)c[a]=t[a];for(var f=a;++l&lt;u;)c[f+l]=e[l];for(;++i&lt;o;)c[f+r[i]]=t[a++];return c}function Vn(t,e){return function(n,r,i){var o=e?e():{};if(r=pr(r,i,3),Gi(n))for(var a=-1,s=n.length;++a&lt;s;){var l=n[a];t(o,l,r(l,a,n),n)}else rn(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function Un(t){return zi(function(e,n){var i=-1,o=null==e?0:n.length,a=o&gt;2?n[o-2]:r,s=o&gt;2?n[2]:r,l=o&gt;1?n[o-1]:r;for("function"==typeof a?(a=jn(a,l,5),o-=2):o-=(a="function"==typeof l?l:r)?1:0,s&amp;&amp;br(n[0],n[1],s)&amp;&amp;(a=o&lt;3?r:a,o=1);++i&lt;o;){var u=n[i];u&amp;&amp;t(e,u,a)}return e})}function Fn(t,e){return function(n,r){var i=n?mr(n):0;if(!Er(i))return t(n,r);for(var o=e?i:-1,a=Pr(n);(e?o--:++o&lt;i)&amp;&amp;!1!==r(a[o],o,a););return n}}function zn(t){return function(e,n,r){for(var i=Pr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s&lt;a;){var l=o[s];if(!1===n(i[l],l,i))break}return e}}function Hn(t){return de&amp;&amp;le?new De(t):null}function qn(t){return function(e){for(var n=-1,r=No(To(e)),i=r.length,o="";++n&lt;i;)o=t(o,r[n],n);return o}}function Gn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=tn(t.prototype),r=t.apply(n,e);return $i(r)?r:n}}function Yn(t){return function e(n,i,o){o&amp;&amp;br(n,i,o)&amp;&amp;(i=r);var a=fr(n,t,r,r,r,r,r,i);return a.placeholder=e.placeholder,a}}function Kn(t,e){return zi(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(r,n))})}function Xn(t,e){return function(n,i,o){if(o&amp;&amp;br(n,i,o)&amp;&amp;(i=r),1==(i=pr(i,o,3)).length){var a=function(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i&lt;o;){var l=t[i],u=+e(l);n(u,a)&amp;&amp;(a=u,s=l)}return s}(n=Gi(n)?n:Lr(n),i,t,e);if(!n.length||a!==e)return a}return function(t,e,n,r){var i=r,o=i;return rn(t,function(t,a,s){var l=+e(t,a,s);(n(l,i)||l===r&amp;&amp;l===o)&amp;&amp;(i=l,o=t)}),o}(n,i,t,e)}}function $n(t,e){return function(n,i,o){if(i=pr(i,o,3),Gi(n)){var a=Nt(n,i,e);return a&gt;-1?n[a]:r}return ln(n,i,t)}}function Jn(t){return function(e,n,r){return e&amp;&amp;e.length?Nt(e,n=pr(n,r,3),t):-1}}function Qn(t){return function(e,n,r){return ln(e,n=pr(n,r,3),t,!0)}}function Zn(t){return function(){for(var e,i=arguments.length,o=t?i:-1,a=0,s=n(i);t?o--:++o&lt;i;){var l=s[a++]=arguments[o];if("function"!=typeof l)throw new Tt(A);!e&amp;&amp;Pe.prototype.thru&amp;&amp;"wrapper"==dr(l)&amp;&amp;(e=new Pe([],!0))}for(o=e?-1:i;++o&lt;i;){var u=dr(l=s[o]),f="wrapper"==u?hr(l):r;e=f&amp;&amp;kr(f[0])&amp;&amp;f[1]==(d|c|p|g)&amp;&amp;!f[4].length&amp;&amp;1==f[9]?e[dr(f[0])].apply(e,f[3]):1==l.length&amp;&amp;kr(l)?e[u]():e.thru(l)}return function(){var t=arguments,n=t[0];if(e&amp;&amp;1==t.length&amp;&amp;Gi(n)&amp;&amp;n.length&gt;=x)return e.plant(n).value();for(var r=0,o=i?s[r].apply(this,t):n;++r&lt;i;)o=s[r].call(this,o);return o}}}function tr(t,e){return function(n,i,o){return"function"==typeof i&amp;&amp;o===r&amp;&amp;Gi(n)?t(n,i):e(n,jn(i,o,3))}}function er(t){return function(e,n,i){return"function"==typeof n&amp;&amp;i===r||(n=jn(n,i,3)),t(e,n,_o)}}function nr(t){return function(e,n,i){return"function"==typeof n&amp;&amp;i===r||(n=jn(n,i,3)),t(e,n)}}function rr(t){return function(e,n,r){var i={};return n=pr(n,r,3),hn(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function ir(t){return function(e,n,r){return e=Wt(e),(t?e:"")+lr(e,n,r)+(t?"":e)}}function or(t){var e=zi(function(n,i){var o=Xt(i,e.placeholder);return fr(n,t,r,i,o)});return e}function ar(t,e){return function(n,i,o,a){var s=arguments.length&lt;3;return"function"==typeof i&amp;&amp;a===r&amp;&amp;Gi(n)?t(n,i,o,s):function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}(n,pr(i,a,4),o,s,e)}}function sr(t,e,i,o,a,g,m,v,y,_){var x=e&amp;d,w=e&amp;s,b=e&amp;l,A=e&amp;c,k=e&amp;u,E=e&amp;f,C=b?r:Gn(t);return function u(){for(var c=arguments.length,f=c,d=n(c);f--;)d[f]=arguments[f];if(o&amp;&amp;(d=Wn(d,o,a)),g&amp;&amp;(d=Bn(d,g,m)),A||E){var T=u.placeholder,I=Xt(d,T);if((c-=I.length)&lt;_){var O=v?Be(v):r,S=_e(_-c,0);e|=A?p:h,e&amp;=~(A?h:p),k||(e&amp;=~(s|l));var R=[t,e,i,A?d:r,A?I:r,A?r:d,A?r:I,O,y,S],M=sr.apply(r,R);return kr(t)&amp;&amp;Rr(M,R),M.placeholder=T,M}}var L=w?i:this,P=b?L[t]:t;return v&amp;&amp;(d=function(t,e){for(var n=t.length,i=xe(e.length,n),o=Be(t);i--;){var a=e[i];t[i]=wr(a,n)?o[a]:r}return t}(d,v)),x&amp;&amp;y&lt;d.length&amp;&amp;(d.length=y),this&amp;&amp;this!==Lt&amp;&amp;this instanceof u&amp;&amp;(P=C||Gn(t)),P.apply(L,d)}}function lr(t,e,n){var r=t.length;if(r&gt;=(e=+e)||!ve(e))return"";var i=e-r;return Ro(n=null==n?" ":n+"",he(i/n.length)).slice(0,i)}function ur(t){var e=bt[t];return function(t,n){return(n=n===r?0:+n||0)?(n=ae(10,n),e(t*n)/n):e(t)}}function cr(t){return function(e,n,r,i){var o=pr(r);return null==r&amp;&amp;o===Qe?Pn(e,n,t):Nn(e,n,o(r,i,1),t)}}function fr(t,e,i,o,a,f,m,v){var y=e&amp;l;if(!y&amp;&amp;"function"!=typeof t)throw new Tt(A);var _=o?o.length:0;if(_||(e&amp;=~(p|h),o=a=r),_-=a?a.length:0,e&amp;h){var x=o,w=a;o=a=r}var b=y?r:hr(t),E=[t,e,i,o,a,x,w,f,m,v];if(b&amp;&amp;(function(t,e){var n=t[1],r=e[1],i=n|r,o=i&lt;d,a=r==d&amp;&amp;n==c||r==d&amp;&amp;n==g&amp;&amp;t[7].length&lt;=e[8]||r==(d|g)&amp;&amp;n==c;if(!o&amp;&amp;!a)return t;r&amp;s&amp;&amp;(t[2]=e[2],i|=n&amp;s?0:u);var l=e[3];if(l){var f=t[3];t[3]=f?Wn(f,l,e[4]):Be(l),t[4]=f?Xt(t[3],k):Be(e[4])}(l=e[5])&amp;&amp;(f=t[5],t[5]=f?Bn(f,l,e[6]):Be(l),t[6]=f?Xt(t[5],k):Be(e[6])),(l=e[7])&amp;&amp;(t[7]=Be(l)),r&amp;d&amp;&amp;(t[8]=null==t[8]?e[8]:xe(t[8],e[8])),null==t[9]&amp;&amp;(t[9]=e[9]),t[0]=e[0],t[1]=i}(E,b),e=E[1],v=E[9]),E[9]=null==v?y?0:t.length:_e(v-_,0)||0,e==s)var C=function(t,e){var n=Gn(t);return function r(){return(this&amp;&amp;this!==Lt&amp;&amp;this instanceof r?n:t).apply(e,arguments)}}(E[0],E[2]);else C=e!=p&amp;&amp;e!=(s|p)||E[4].length?sr.apply(r,E):function(t,e,r,i){var o=e&amp;s,a=Gn(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=i.length,f=n(c+l);++u&lt;c;)f[u]=i[u];for(;l--;)f[u++]=arguments[++s];return(this&amp;&amp;this!==Lt&amp;&amp;this instanceof e?a:t).apply(o?r:this,f)}}.apply(r,E);return(b?En:Rr)(C,E)}function pr(t,e,n){var r=Me.callback||Do;return r=r===Do?Qe:r,n?r(t,e,n):r}var hr=Se?function(t){return Se.get(t)}:zo;function dr(t){for(var e=t.name,n=Re[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function gr(t,e,n){var r=Me.indexOf||zr;return r=r===zr?jt:r,t?r(t,e,n):r}var mr=bn("length");function vr(t){for(var e=Ao(t),n=e.length;n--;)e[n][2]=Cr(e[n][1]);return e}function yr(t,e){var n=null==t?r:t[e];return Ji(n)?n:r}function _r(t,e,n){null==t||Ar(e,t)||(t=1==(e=Nr(e)).length?t:mn(t,Cn(e,0,-1)),e=qr(e));var i=null==t?t:t[e];return null==i?r:i.apply(t,n)}function xr(t){return null!=t&amp;&amp;Er(mr(t))}function wr(t,e){return t="number"==typeof t||pt.test(t)?+t:-1,e=null==e?Oe:e,t&gt;-1&amp;&amp;t%1==0&amp;&amp;t&lt;e}function br(t,e,n){if(!$i(n))return!1;var r=typeof e;if("number"==r?xr(n)&amp;&amp;wr(e,n.length):"string"==r&amp;&amp;e in n){var i=n[e];return t==t?t===i:i!=i}return!1}function Ar(t,e){var n=typeof t;return!!("string"==n&amp;&amp;nt.test(t)||"number"==n)||!Gi(t)&amp;&amp;(!et.test(t)||null!=e&amp;&amp;t in Pr(e))}function kr(t){var e=dr(t);if(!(e in Ne.prototype))return!1;var n=Me[e];if(t===n)return!0;var r=hr(n);return!!r&amp;&amp;t===r[0]}function Er(t){return"number"==typeof t&amp;&amp;t&gt;-1&amp;&amp;t%1==0&amp;&amp;t&lt;=Oe}function Cr(t){return t==t&amp;&amp;!$i(t)}function Tr(t,e){t=Pr(t);for(var n=-1,r=e.length,i={};++n&lt;r;){var o=e[n];o in t&amp;&amp;(i[o]=t[o])}return i}function Ir(t,e){var n={};return pn(t,function(t,r,i){e(t,r,i)&amp;&amp;(n[r]=t)}),n}var Or,Sr,Rr=(Or=0,Sr=0,function(t,e){var n=Ci(),r=_-(n-Sr);if(Sr=n,r&gt;0){if(++Or&gt;=y)return t}else Or=0;return En(t,e)});function Mr(t){for(var e=_o(t),n=e.length,r=n&amp;&amp;t.length,i=!!r&amp;&amp;Er(r)&amp;&amp;(Gi(t)||qi(t)),o=-1,a=[];++o&lt;n;){var s=e[o];(i&amp;&amp;wr(s,r)||Mt.call(t,s))&amp;&amp;a.push(s)}return a}function Lr(t){return null==t?[]:xr(t)?$i(t)?t:kt(t):Eo(t)}function Pr(t){return $i(t)?t:kt(t)}function Nr(t){if(Gi(t))return t;var e=[];return Wt(t).replace(rt,function(t,n,r,i){e.push(r?i.replace(st,"$1"):n||t)}),e}function jr(t){return t instanceof Ne?t.clone():new Pe(t.__wrapped__,t.__chain__,Be(t.__actions__))}var Dr=zi(function(t,e){return Yt(t)&amp;&amp;xr(t)?nn(t,un(e,!1,!0)):[]});function Wr(t,e,n){return t&amp;&amp;t.length?((n?br(t,e,n):null==e)&amp;&amp;(e=1),Cn(t,e&lt;0?0:e)):[]}function Br(t,e,n){var r=t?t.length:0;return r?((n?br(t,e,n):null==e)&amp;&amp;(e=1),Cn(t,0,(e=r-(+e||0))&lt;0?0:e)):[]}var Vr=Jn(),Ur=Jn(!0);function Fr(t){return t?t[0]:r}function zr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n&lt;0?_e(r+n,0):n;else if(n){var i=Pn(t,e);return i&lt;r&amp;&amp;(e==e?e===t[i]:t[i]!=t[i])?i:-1}return jt(t,e,n||0)}var Hr=zi(function(t){for(var e=t.length,r=e,i=n(f),o=gr(),a=o==jt,s=[];r--;){var l=t[r]=xr(l=t[r])?l:[];i[r]=a&amp;&amp;l.length&gt;=120?Hn(r&amp;&amp;l):null}var u=t[0],c=-1,f=u?u.length:0,p=i[0];t:for(;++c&lt;f;)if(l=u[c],(p?We(p,l):o(s,l,0))&lt;0){for(r=e;--r;){var h=i[r];if((h?We(h,l):o(t[r],l,0))&lt;0)continue t}p&amp;&amp;p.push(l),s.push(l)}return s});function qr(t){var e=t?t.length:0;return e?t[e-1]:r}var Gr=zi(function(t,e){var n=$e(t,e=un(e));return An(t,e.sort(Pt)),n});function Yr(t){return Wr(t,1)}var Kr=cr(),Xr=cr(!0);var $r=zi(function(t){return Sn(un(t,!1,!0))});function Jr(t,e,n,i){if(!t||!t.length)return[];null!=e&amp;&amp;"boolean"!=typeof e&amp;&amp;(n=br(t,e,i=n)?r:e,e=!1);var o=pr();return null==n&amp;&amp;o===Qe||(n=o(n,i,3)),e&amp;&amp;gr()==jt?function(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r&lt;i;){var s=t[r],l=e?e(s,r,t):s;r&amp;&amp;n===l||(n=l,a[++o]=s)}return a}(t,n):Sn(t,n)}function Qr(t){if(!t||!t.length)return[];var e=-1,r=0;t=Fe(t,function(t){if(xr(t))return r=_e(t.length,r),!0});for(var i=n(r);++e&lt;r;)i[e]=ze(t,bn(e));return i}function Zr(t,e,n){if(!t||!t.length)return[];var i=Qr(t);return null==e?i:(e=jn(e,n,4),ze(i,function(t){return qe(t,e,r,!0)}))}var ti=zi(function(t,e){return xr(t)?nn(t,e):[]});var ei=zi(Qr);function ni(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Gi(t[0])||(e=[]);++n&lt;r;){var o=t[n];e?i[o]=e[n]:o&amp;&amp;(i[o[0]]=o[1])}return i}var ri=zi(function(t){var e=t.length,n=e&gt;2?t[e-2]:r,i=e&gt;1?t[e-1]:r;return e&gt;2&amp;&amp;"function"==typeof n?e-=2:(n=e&gt;1&amp;&amp;"function"==typeof i?(--e,i):r,i=r),t.length=e,Zr(t,n,i)});function ii(t){var e=Me(t);return e.__chain__=!0,e}function oi(t,e,n){return e.call(n,t)}var ai=zi(function(t){return t=un(t),this.thru(function(e){return function(t,e){for(var r=-1,i=t.length,o=-1,a=e.length,s=n(i+a);++r&lt;i;)s[r]=t[r];for(;++o&lt;a;)s[r++]=e[o];return s}(Gi(e)?e:[Pr(e)],t)})});var si=zi(function(t,e){return $e(t,un(e))}),li=Vn(function(t,e,n){Mt.call(t,n)?++t[n]:t[n]=1});function ui(t,e,n){var i=Gi(t)?Ue:an;return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),"function"==typeof e&amp;&amp;n===r||(e=pr(e,n,3)),i(t,e)}function ci(t,e,n){return(Gi(t)?Fe:sn)(t,e=pr(e,n,3))}var fi=$n(rn),pi=$n(on,!0);var hi=tr(Ve,rn),di=tr(function(t,e){for(var n=t.length;n--&amp;&amp;!1!==e(t[n],n,t););return t},on),gi=Vn(function(t,e,n){Mt.call(t,n)?t[n].push(e):t[n]=[e]});function mi(t,e,n,r){var i=t?mr(t):0;return Er(i)||(i=(t=Eo(t)).length),n="number"!=typeof n||r&amp;&amp;br(e,n,r)?0:n&lt;0?_e(i+n,0):n||0,"string"==typeof t||!Gi(t)&amp;&amp;eo(t)?n&lt;=i&amp;&amp;t.indexOf(e,n)&gt;-1:!!i&amp;&amp;gr(t,e,n)&gt;-1}var vi=Vn(function(t,e,n){t[n]=e}),yi=zi(function(t,e,i){var o=-1,a="function"==typeof e,s=Ar(e),l=xr(t)?n(t.length):[];return rn(t,function(t){var n=a?e:s&amp;&amp;null!=t?t[e]:r;l[++o]=n?n.apply(t,i):_r(t,e,i)}),l});function _i(t,e,n){return(Gi(t)?ze:_n)(t,e=pr(e,n,3))}var xi=Vn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var wi=ar(qe,rn),bi=ar(function(t,e,n,r){var i=t.length;for(r&amp;&amp;i&amp;&amp;(n=t[--i]);i--;)n=e(n,t[i],i,t);return n},on);function Ai(t,e,n){if(n?br(t,e,n):null==e)return(i=(t=Lr(t)).length)&gt;0?t[kn(0,i-1)]:r;var i,o=-1,a=io(t),s=(i=a.length)-1;for(e=xe(e&lt;0?0:+e||0,i);++o&lt;e;){var l=kn(o,s),u=a[l];a[l]=a[o],a[o]=u}return a.length=e,a}function ki(t,e,n){var i=Gi(t)?Ge:Tn;return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),"function"==typeof e&amp;&amp;n===r||(e=pr(e,n,3)),i(t,e)}var Ei=zi(function(t,e){if(null==t)return[];var n=e[2];return n&amp;&amp;br(e[0],e[1],n)&amp;&amp;(e.length=1),On(t,un(e),[])});var Ci=we||function(){return(new i).getTime()};function Ti(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Tt(A);var i=t;t=e,e=i}return function(){return--t&gt;0&amp;&amp;(n=e.apply(this,arguments)),t&lt;=1&amp;&amp;(e=r),n}}var Ii=zi(function(t,e,n){var r=s;if(n.length){var i=Xt(n,Ii.placeholder);r|=p}return fr(t,r,e,n,i)}),Oi=zi(function(t,e){for(var n=-1,r=(e=e.length?un(e):vo(t)).length;++n&lt;r;){var i=e[n];t[i]=fr(t[i],s,t)}return t}),Si=zi(function(t,e,n){var r=s|l;if(n.length){var i=Xt(n,Si.placeholder);r|=p}return fr(e,r,t,n,i)}),Ri=Yn(c),Mi=Yn(f);function Li(t,e,n){var i,o,a,s,l,u,c,f=0,p=!1,h=!0;if("function"!=typeof t)throw new Tt(A);if(e=e&lt;0?0:+e||0,!0===n){var d=!0;h=!1}else $i(n)&amp;&amp;(d=!!n.leading,p="maxWait"in n&amp;&amp;_e(+n.maxWait||0,e),h="trailing"in n?!!n.trailing:h);function g(e,n){n&amp;&amp;ie(n),o=u=c=r,e&amp;&amp;(f=Ci(),a=t.apply(l,i),u||o||(i=l=r))}function m(){var t=e-(Ci()-s);t&lt;=0||t&gt;e?g(c,o):u=ue(m,t)}function v(){g(h,u)}function y(){if(i=arguments,s=Ci(),l=this,c=h&amp;&amp;(u||!d),!1===p)var n=d&amp;&amp;!u;else{o||d||(f=s);var g=p-(s-f),y=g&lt;=0||g&gt;p;y?(o&amp;&amp;(o=ie(o)),f=s,a=t.apply(l,i)):o||(o=ue(v,g))}return y&amp;&amp;u?u=ie(u):u||e===p||(u=ue(m,e)),n&amp;&amp;(y=!0,a=t.apply(l,i)),!y||u||o||(i=l=r),a}return y.cancel=function(){u&amp;&amp;ie(u),o&amp;&amp;ie(o),f=0,o=u=c=r},y}var Pi=zi(function(t,e){return en(t,1,e)}),Ni=zi(function(t,e,n){return en(t,e,n)}),ji=Zn(),Di=Zn(!0);function Wi(t,e){if("function"!=typeof t||e&amp;&amp;"function"!=typeof e)throw new Tt(A);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new Wi.Cache,n}var Bi=zi(function(t,e){if(e=un(e),"function"!=typeof t||!Ue(e,Dt))throw new Tt(A);var n=e.length;return zi(function(r){for(var i=xe(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})});var Vi=or(p),Ui=or(h),Fi=zi(function(t,e){return fr(t,g,r,r,r,un(e))});function zi(t,e){if("function"!=typeof t)throw new Tt(A);return e=_e(e===r?t.length-1:+e||0,0),function(){for(var r=arguments,i=-1,o=_e(r.length-e,0),a=n(o);++i&lt;o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=n(e+1);for(i=-1;++i&lt;e;)s[i]=r[i];return s[e]=a,t.apply(this,s)}}function Hi(t,e){return t&gt;e}function qi(t){return Yt(t)&amp;&amp;xr(t)&amp;&amp;Mt.call(t,"callee")&amp;&amp;!se.call(t,"callee")}var Gi=me||function(t){return Yt(t)&amp;&amp;Er(t.length)&amp;&amp;te.call(t)==C};function Yi(t,e,n,i){var o=(n="function"==typeof n?jn(n,i,3):r)?n(t,e):r;return o===r?vn(t,e,n):!!o}function Ki(t){return Yt(t)&amp;&amp;"string"==typeof t.message&amp;&amp;te.call(t)==O}function Xi(t){return $i(t)&amp;&amp;te.call(t)==S}function $i(t){var e=typeof t;return!!t&amp;&amp;("object"==e||"function"==e)}function Ji(t){return null!=t&amp;&amp;(Xi(t)?ne.test(Rt.call(t)):Yt(t)&amp;&amp;ft.test(t))}function Qi(t){return"number"==typeof t||Yt(t)&amp;&amp;te.call(t)==R}function Zi(t){var e,n;return!(!Yt(t)||te.call(t)!=M||qi(t)||!(Mt.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&amp;&amp;(pn(t,function(t,e){n=e}),n===r||Mt.call(t,n))}function to(t){return $i(t)&amp;&amp;te.call(t)==L}function eo(t){return"string"==typeof t||Yt(t)&amp;&amp;te.call(t)==P}function no(t){return Yt(t)&amp;&amp;Er(t.length)&amp;&amp;!!_t[te.call(t)]}function ro(t,e){return t&lt;e}function io(t){var e=t?mr(t):0;return Er(e)?e?Be(t):[]:Eo(t)}function oo(t){return Je(t,_o(t))}var ao=Un(function t(e,n,i,o,a){if(!$i(e))return e;var s=xr(n)&amp;&amp;(Gi(n)||no(n)),l=s?r:yo(n);return Ve(l||n,function(u,c){if(l&amp;&amp;(u=n[c=u]),Yt(u))o||(o=[]),a||(a=[]),function(t,e,n,i,o,a,s){for(var l=a.length,u=e[n];l--;)if(a[l]==u)return void(t[n]=s[l]);var c=t[n],f=o?o(c,u,n,t,e):r,p=f===r;p&amp;&amp;(f=u,xr(u)&amp;&amp;(Gi(u)||no(u))?f=Gi(c)?c:xr(c)?Be(c):[]:Zi(u)||qi(u)?f=qi(c)?oo(c):Zi(c)?c:{}:p=!1),a.push(u),s.push(f),p?t[n]=i(f,u,o,a,s):(f==f?f!==c:c==c)&amp;&amp;(t[n]=f)}(e,n,c,t,i,o,a);else{var f=e[c],p=i?i(f,u,c,e,n):r,h=p===r;h&amp;&amp;(p=u),p===r&amp;&amp;(!s||c in e)||!h&amp;&amp;(p==p?p===f:f!=f)||(e[c]=p)}}),e}),so=Un(function(t,e,n){return n?Ke(t,e,n):Xe(t,e)});var lo=Kn(so,function(t,e){return t===r?e:t}),uo=Kn(ao,function t(e,n){return e===r?n:ao(e,n,t)}),co=Qn(hn),fo=Qn(dn),po=er(cn),ho=er(fn),go=nr(hn),mo=nr(dn);function vo(t){return gn(t,_o(t))}var yo=ye?function(t){var e=null==t?r:t.constructor;return"function"==typeof e&amp;&amp;e.prototype===t||"function"!=typeof t&amp;&amp;xr(t)?Mr(t):$i(t)?ye(t):[]}:Mr;function _o(t){if(null==t)return[];$i(t)||(t=kt(t));var e=t.length;e=e&amp;&amp;Er(e)&amp;&amp;(Gi(t)||qi(t))&amp;&amp;e||0;for(var r=t.constructor,i=-1,o="function"==typeof r&amp;&amp;r.prototype===t,a=n(e),s=e&gt;0;++i&lt;e;)a[i]=i+"";for(var l in t)s&amp;&amp;wr(l,e)||"constructor"==l&amp;&amp;(o||!Mt.call(t,l))||a.push(l);return a}var xo=rr(!0),wo=rr(),bo=zi(function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=ze(un(e),Ct),Tr(t,nn(_o(t),e));var n=jn(e[0],e[1],3);return Ir(t,function(t,e,r){return!n(t,e,r)})});function Ao(t){t=Pr(t);for(var e=-1,r=yo(t),i=r.length,o=n(i);++e&lt;i;){var a=r[e];o[e]=[a,t[a]]}return o}var ko=zi(function(t,e){return null==t?{}:"function"==typeof e[0]?Ir(t,jn(e[0],e[1],3)):Tr(t,un(e))});function Eo(t){return Rn(t,yo(t))}var Co=qn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)});function To(t){return(t=Wt(t))&amp;&amp;t.replace(ht,Ft).replace(at,"")}var Io=qn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var Oo=ir(),So=ir(!0);function Ro(t,e){var n="";if(t=Wt(t),(e=+e)&lt;1||!t||!ve(e))return n;do{e%2&amp;&amp;(n+=t),e=ge(e/2),t+=t}while(e);return n}var Mo=qn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Lo=qn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))});function Po(t,e,n){var r=t;return(t=Wt(t))?(n?br(r,e,n):null==e)?t.slice($t(t),Jt(t)+1):(e+="",t.slice(Bt(t,e),Vt(t,e)+1)):t}function No(t,e,n){return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),(t=Wt(t)).match(e||mt)||[]}var jo=zi(function(t,e){try{return t.apply(r,e)}catch(t){return Ki(t)?t:new o(t)}});function Do(t,e,n){return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),Yt(t)?Bo(t):Qe(t,e)}function Wo(t){return t}function Bo(t){return xn(Ze(t,!0))}var Vo=zi(function(t,e){return function(n){return _r(n,t,e)}}),Uo=zi(function(t,e){return function(n){return _r(t,n,e)}});function Fo(t,e,n){if(null==n){var i=$i(e),o=i?yo(e):r,a=o&amp;&amp;o.length?gn(e,o):r;(a?a.length:i)||(a=!1,n=e,e=t,t=this)}a||(a=gn(e,yo(e)));var s=!0,l=-1,u=Xi(t),c=a.length;!1===n?s=!1:$i(n)&amp;&amp;"chain"in n&amp;&amp;(s=n.chain);for(;++l&lt;c;){var f=a[l],p=e[f];t[f]=p,u&amp;&amp;(t.prototype[f]=function(e){return function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__);return(r.__actions__=Be(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,He([this.value()],arguments))}}(p))}return t}function zo(){}function Ho(t){return Ar(t)?bn(t):function(t){var e=t+"";return t=Nr(t),function(n){return mn(n,t,e)}}(t)}var qo,Go=ur("ceil"),Yo=ur("floor"),Ko=Xn(Hi,ke),Xo=Xn(ro,Ee),$o=ur("round");return Me.prototype=Le.prototype,Pe.prototype=tn(Le.prototype),Pe.prototype.constructor=Pe,Ne.prototype=tn(Le.prototype),Ne.prototype.constructor=Ne,je.prototype.delete=function(t){return this.has(t)&amp;&amp;delete this.__data__[t]},je.prototype.get=function(t){return"__proto__"==t?r:this.__data__[t]},je.prototype.has=function(t){return"__proto__"!=t&amp;&amp;Mt.call(this.__data__,t)},je.prototype.set=function(t,e){return"__proto__"!=t&amp;&amp;(this.__data__[t]=e),this},De.prototype.push=function(t){var e=this.data;"string"==typeof t||$i(t)?e.set.add(t):e.hash[t]=!0},Wi.Cache=je,Me.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Tt(A);var n=t;t=e,e=n}return t=ve(t=+t)?t:0,function(){if(--t&lt;1)return e.apply(this,arguments)}},Me.ary=function(t,e,n){return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),e=t&amp;&amp;null==e?t.length:_e(+e||0,0),fr(t,d,r,r,r,r,e)},Me.assign=so,Me.at=si,Me.before=Ti,Me.bind=Ii,Me.bindAll=Oi,Me.bindKey=Si,Me.callback=Do,Me.chain=ii,Me.chunk=function(t,e,r){e=(r?br(t,e,r):null==e)?1:_e(ge(e)||1,1);for(var i=0,o=t?t.length:0,a=-1,s=n(he(o/e));i&lt;o;)s[++a]=Cn(t,i,i+=e);return s},Me.compact=function(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e&lt;n;){var o=t[e];o&amp;&amp;(i[++r]=o)}return i},Me.constant=function(t){return function(){return t}},Me.countBy=li,Me.create=function(t,e,n){var i=tn(t);return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),e?Xe(i,e):i},Me.curry=Ri,Me.curryRight=Mi,Me.debounce=Li,Me.defaults=lo,Me.defaultsDeep=uo,Me.defer=Pi,Me.delay=Ni,Me.difference=Dr,Me.drop=Wr,Me.dropRight=Br,Me.dropRightWhile=function(t,e,n){return t&amp;&amp;t.length?Mn(t,pr(e,n,3),!0,!0):[]},Me.dropWhile=function(t,e,n){return t&amp;&amp;t.length?Mn(t,pr(e,n,3),!0):[]},Me.fill=function(t,e,n,i){var o=t?t.length:0;return o?(n&amp;&amp;"number"!=typeof n&amp;&amp;br(t,e,n)&amp;&amp;(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=null==n?0:+n||0)&lt;0&amp;&amp;(n=-n&gt;o?0:o+n),(i=i===r||i&gt;o?o:+i||0)&lt;0&amp;&amp;(i+=o),o=n&gt;i?0:i&gt;&gt;&gt;0,n&gt;&gt;&gt;=0;n&lt;o;)t[n++]=e;return t}(t,e,n,i)):[]},Me.filter=ci,Me.flatten=function(t,e,n){var r=t?t.length:0;return n&amp;&amp;br(t,e,n)&amp;&amp;(e=!1),r?un(t,e):[]},Me.flattenDeep=function(t){return t&amp;&amp;t.length?un(t,!0):[]},Me.flow=ji,Me.flowRight=Di,Me.forEach=hi,Me.forEachRight=di,Me.forIn=po,Me.forInRight=ho,Me.forOwn=go,Me.forOwnRight=mo,Me.functions=vo,Me.groupBy=gi,Me.indexBy=vi,Me.initial=function(t){return Br(t,1)},Me.intersection=Hr,Me.invert=function(t,e,n){n&amp;&amp;br(t,e,n)&amp;&amp;(e=r);for(var i=-1,o=yo(t),a=o.length,s={};++i&lt;a;){var l=o[i],u=t[l];e?Mt.call(s,u)?s[u].push(l):s[u]=[l]:s[u]=l}return s},Me.invoke=yi,Me.keys=yo,Me.keysIn=_o,Me.map=_i,Me.mapKeys=xo,Me.mapValues=wo,Me.matches=Bo,Me.matchesProperty=function(t,e){return wn(t,Ze(e,!0))},Me.memoize=Wi,Me.merge=ao,Me.method=Vo,Me.methodOf=Uo,Me.mixin=Fo,Me.modArgs=Bi,Me.negate=function(t){if("function"!=typeof t)throw new Tt(A);return function(){return!t.apply(this,arguments)}},Me.omit=bo,Me.once=function(t){return Ti(2,t)},Me.pairs=Ao,Me.partial=Vi,Me.partialRight=Ui,Me.partition=xi,Me.pick=ko,Me.pluck=function(t,e){return _i(t,Ho(e))},Me.property=Ho,Me.propertyOf=function(t){return function(e){return mn(t,Nr(e),e+"")}},Me.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=gr(),i=t.length;++n&lt;i;)for(var o=0,a=t[n];(o=r(e,a,o))&gt;-1;)ce.call(e,o,1);return e},Me.pullAt=Gr,Me.range=function(t,e,i){i&amp;&amp;br(t,e,i)&amp;&amp;(e=i=r),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var o=-1,a=_e(he((e-t)/(i||1)),0),s=n(a);++o&lt;a;)s[o]=t,t+=i;return s},Me.rearg=Fi,Me.reject=function(t,e,n){var r=Gi(t)?Fe:sn;return e=pr(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})},Me.remove=function(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=pr(e,n,3);++i&lt;a;){var s=t[i];e(s,i,t)&amp;&amp;(r.push(s),o.push(i))}return An(t,o),r},Me.rest=Yr,Me.restParam=zi,Me.set=function(t,e,n){if(null==t)return t;for(var r=e+"",i=-1,o=(e=null!=t[r]||Ar(e,t)?[r]:Nr(e)).length,a=o-1,s=t;null!=s&amp;&amp;++i&lt;o;){var l=e[i];$i(s)&amp;&amp;(i==a?s[l]=n:null==s[l]&amp;&amp;(s[l]=wr(e[i+1])?[]:{})),s=s[l]}return t},Me.shuffle=function(t){return Ai(t,Ee)},Me.slice=function(t,e,n){var r=t?t.length:0;return r?(n&amp;&amp;"number"!=typeof n&amp;&amp;br(t,e,n)&amp;&amp;(e=0,n=r),Cn(t,e,n)):[]},Me.sortBy=function(t,e,n){if(null==t)return[];n&amp;&amp;br(t,e,n)&amp;&amp;(e=r);var i=-1;return e=pr(e,n,3),In(_n(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}}),Ut)},Me.sortByAll=Ei,Me.sortByOrder=function(t,e,n,i){return null==t?[]:(i&amp;&amp;br(e,n,i)&amp;&amp;(n=r),Gi(e)||(e=null==e?[]:[e]),Gi(n)||(n=null==n?[]:[n]),On(t,e,n))},Me.spread=function(t){if("function"!=typeof t)throw new Tt(A);return function(e){return t.apply(this,e)}},Me.take=function(t,e,n){return t&amp;&amp;t.length?((n?br(t,e,n):null==e)&amp;&amp;(e=1),Cn(t,0,e&lt;0?0:e)):[]},Me.takeRight=function(t,e,n){var r=t?t.length:0;return r?((n?br(t,e,n):null==e)&amp;&amp;(e=1),Cn(t,(e=r-(+e||0))&lt;0?0:e)):[]},Me.takeRightWhile=function(t,e,n){return t&amp;&amp;t.length?Mn(t,pr(e,n,3),!1,!0):[]},Me.takeWhile=function(t,e,n){return t&amp;&amp;t.length?Mn(t,pr(e,n,3)):[]},Me.tap=function(t,e,n){return e.call(n,t),t},Me.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Tt(A);return!1===n?r=!1:$i(n)&amp;&amp;(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Li(t,e,{leading:r,maxWait:+e,trailing:i})},Me.thru=oi,Me.times=function(t,e,r){if((t=ge(t))&lt;1||!ve(t))return[];var i=-1,o=n(xe(t,Ce));for(e=jn(e,r,1);++i&lt;t;)i&lt;Ce?o[i]=e(i):e(i);return o},Me.toArray=io,Me.toPlainObject=oo,Me.transform=function(t,e,n,i){var o=Gi(t)||no(t);if(e=pr(e,i,4),null==n)if(o||$i(t)){var a=t.constructor;n=o?Gi(t)?new a:[]:tn(Xi(a)?a.prototype:r)}else n={};return(o?Ve:hn)(t,function(t,r,i){return e(n,t,r,i)}),n},Me.union=$r,Me.uniq=Jr,Me.unzip=Qr,Me.unzipWith=Zr,Me.values=Eo,Me.valuesIn=function(t){return Rn(t,_o(t))},Me.where=function(t,e){return ci(t,xn(e))},Me.without=ti,Me.wrap=function(t,e){return fr(e=null==e?Wo:e,p,r,[t],[])},Me.xor=function(){for(var t=-1,e=arguments.length;++t&lt;e;){var n=arguments[t];if(xr(n))var r=r?He(nn(r,n),nn(n,r)):n}return r?Sn(r):[]},Me.zip=ei,Me.zipObject=ni,Me.zipWith=ri,Me.backflow=Di,Me.collect=_i,Me.compose=Di,Me.each=hi,Me.eachRight=di,Me.extend=so,Me.iteratee=Do,Me.methods=vo,Me.object=ni,Me.select=ci,Me.tail=Yr,Me.unique=Jr,Fo(Me,Me),Me.add=function(t,e){return(+t||0)+(+e||0)},Me.attempt=jo,Me.camelCase=Co,Me.capitalize=function(t){return(t=Wt(t))&amp;&amp;t.charAt(0).toUpperCase()+t.slice(1)},Me.ceil=Go,Me.clone=function(t,e,n,r){return e&amp;&amp;"boolean"!=typeof e&amp;&amp;br(t,e,n)?e=!1:"function"==typeof e&amp;&amp;(r=n,n=e,e=!1),"function"==typeof n?Ze(t,e,jn(n,r,1)):Ze(t,e)},Me.cloneDeep=function(t,e,n){return"function"==typeof e?Ze(t,!0,jn(e,n,1)):Ze(t,!0)},Me.deburr=To,Me.endsWith=function(t,e,n){e+="";var i=(t=Wt(t)).length;return n=n===r?i:xe(n&lt;0?0:+n||0,i),(n-=e.length)&gt;=0&amp;&amp;t.indexOf(e,n)==n},Me.escape=function(t){return(t=Wt(t))&amp;&amp;J.test(t)?t.replace(X,zt):t},Me.escapeRegExp=function(t){return(t=Wt(t))&amp;&amp;ot.test(t)?t.replace(it,Ht):t||"(?:)"},Me.every=ui,Me.find=fi,Me.findIndex=Vr,Me.findKey=co,Me.findLast=pi,Me.findLastIndex=Ur,Me.findLastKey=fo,Me.findWhere=function(t,e){return fi(t,xn(e))},Me.first=Fr,Me.floor=Yo,Me.get=function(t,e,n){var i=null==t?r:mn(t,Nr(e),e+"");return i===r?n:i},Me.gt=Hi,Me.gte=function(t,e){return t&gt;=e},Me.has=function(t,e){if(null==t)return!1;var n=Mt.call(t,e);if(!n&amp;&amp;!Ar(e)){if(null==(t=1==(e=Nr(e)).length?t:mn(t,Cn(e,0,-1))))return!1;e=qr(e),n=Mt.call(t,e)}return n||Er(t.length)&amp;&amp;wr(e,t.length)&amp;&amp;(Gi(t)||qi(t))},Me.identity=Wo,Me.includes=mi,Me.indexOf=zr,Me.inRange=function(t,e,n){return e=+e||0,n===r?(n=e,e=0):n=+n||0,t&gt;=xe(e,n)&amp;&amp;t&lt;_e(e,n)},Me.isArguments=qi,Me.isArray=Gi,Me.isBoolean=function(t){return!0===t||!1===t||Yt(t)&amp;&amp;te.call(t)==T},Me.isDate=function(t){return Yt(t)&amp;&amp;te.call(t)==I},Me.isElement=function(t){return!!t&amp;&amp;1===t.nodeType&amp;&amp;Yt(t)&amp;&amp;!Zi(t)},Me.isEmpty=function(t){return null==t||(xr(t)&amp;&amp;(Gi(t)||eo(t)||qi(t)||Yt(t)&amp;&amp;Xi(t.splice))?!t.length:!yo(t).length)},Me.isEqual=Yi,Me.isError=Ki,Me.isFinite=function(t){return"number"==typeof t&amp;&amp;ve(t)},Me.isFunction=Xi,Me.isMatch=function(t,e,n,i){return n="function"==typeof n?jn(n,i,3):r,yn(t,vr(e),n)},Me.isNaN=function(t){return Qi(t)&amp;&amp;t!=+t},Me.isNative=Ji,Me.isNull=function(t){return null===t},Me.isNumber=Qi,Me.isObject=$i,Me.isPlainObject=Zi,Me.isRegExp=to,Me.isString=eo,Me.isTypedArray=no,Me.isUndefined=function(t){return t===r},Me.kebabCase=Io,Me.last=qr,Me.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n&lt;0?_e(r+n,0):xe(n||0,r-1))+1;else if(n){var o=t[i=Pn(t,e,!0)-1];return(e==e?e===o:o!=o)?i:-1}if(e!=e)return Gt(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},Me.lt=ro,Me.lte=function(t,e){return t&lt;=e},Me.max=Ko,Me.min=Xo,Me.noConflict=function(){return Lt._=ee,this},Me.noop=zo,Me.now=Ci,Me.pad=function(t,e,n){e=+e;var r=(t=Wt(t)).length;if(r&gt;=e||!ve(e))return t;var i=(e-r)/2,o=ge(i);return(n=lr("",he(i),n)).slice(0,o)+t+n},Me.padLeft=Oo,Me.padRight=So,Me.parseInt=function(t,e,n){return(n?br(t,e,n):null==e)?e=0:e&amp;&amp;(e=+e),t=Po(t),be(t,e||(ct.test(t)?16:10))},Me.random=function(t,e,n){n&amp;&amp;br(t,e,n)&amp;&amp;(e=n=r);var i=null==t,o=null==e;if(null==n&amp;&amp;(o&amp;&amp;"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&amp;&amp;(n=e,o=!0)),i&amp;&amp;o&amp;&amp;(e=1,o=!1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Ae();return xe(t+a*(e-t+oe("1e-"+((a+"").length-1))),e)}return kn(t,e)},Me.reduce=wi,Me.reduceRight=bi,Me.repeat=Ro,Me.result=function(t,e,n){var i=null==t?r:t[e];return i===r&amp;&amp;(null==t||Ar(e,t)||(i=null==(t=1==(e=Nr(e)).length?t:mn(t,Cn(e,0,-1)))?r:t[qr(e)]),i=i===r?n:i),Xi(i)?i.call(t):i},Me.round=$o,Me.runInContext=t,Me.size=function(t){var e=t?mr(t):0;return Er(e)?e:yo(t).length},Me.snakeCase=Mo,Me.some=ki,Me.sortedIndex=Kr,Me.sortedLastIndex=Xr,Me.startCase=Lo,Me.startsWith=function(t,e,n){return t=Wt(t),n=null==n?0:xe(n&lt;0?0:+n||0,t.length),t.lastIndexOf(e,n)==n},Me.sum=function(t,e,n){return n&amp;&amp;br(t,e,n)&amp;&amp;(e=r),1==(e=pr(e,n,3)).length?function(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}(Gi(t)?t:Lr(t),e):function(t,e){var n=0;return rn(t,function(t,r,i){n+=+e(t,r,i)||0}),n}(t,e)},Me.template=function(t,e,n){var i=Me.templateSettings;n&amp;&amp;br(t,e,n)&amp;&amp;(e=n=r),t=Wt(t);var o,a,s=Ke(Xe({},(e=Ke(Xe({},n||e),i,Ye)).imports),i.imports,Ye),l=yo(s),u=Rn(s,l),c=0,f=e.interpolate||dt,p="__p += '",h=Et((e.escape||dt).source+"|"+f.source+"|"+(f===tt?lt:dt).source+"|"+(e.evaluate||dt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++yt+"]")+"\n";t.replace(h,function(e,n,r,i,s,l){return r||(r=i),p+=t.slice(c,l).replace(gt,qt),n&amp;&amp;(o=!0,p+="' +\n__e("+n+") +\n'"),s&amp;&amp;(a=!0,p+="';\n"+s+";\n__p += '"),r&amp;&amp;(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),p+="';\n";var g=e.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(q,""):p).replace(G,"$1").replace(Y,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=jo(function(){return wt(l,d+"return "+p).apply(r,u)});if(m.source=p,Ki(m))throw m;return m},Me.trim=Po,Me.trimLeft=function(t,e,n){var r=t;return(t=Wt(t))?(n?br(r,e,n):null==e)?t.slice($t(t)):t.slice(Bt(t,e+"")):t},Me.trimRight=function(t,e,n){var r=t;return(t=Wt(t))?(n?br(r,e,n):null==e)?t.slice(0,Jt(t)+1):t.slice(0,Vt(t,e+"")+1):t},Me.trunc=function(t,e,n){n&amp;&amp;br(t,e,n)&amp;&amp;(e=r);var i=m,o=v;if(null!=e)if($i(e)){var a="separator"in e?e.separator:a;i="length"in e?+e.length||0:i,o="omission"in e?Wt(e.omission):o}else i=+e||0;if(i&gt;=(t=Wt(t)).length)return t;var s=i-o.length;if(s&lt;1)return o;var l=t.slice(0,s);if(null==a)return l+o;if(to(a)){if(t.slice(s).search(a)){var u,c,f=t.slice(0,s);for(a.global||(a=Et(a.source,(ut.exec(a)||"")+"g")),a.lastIndex=0;u=a.exec(f);)c=u.index;l=l.slice(0,null==c?s:c)}}else if(t.indexOf(a,s)!=s){var p=l.lastIndexOf(a);p&gt;-1&amp;&amp;(l=l.slice(0,p))}return l+o},Me.unescape=function(t){return(t=Wt(t))&amp;&amp;$.test(t)?t.replace(K,Qt):t},Me.uniqueId=function(t){var e=++Kt;return Wt(t)+e},Me.words=No,Me.all=ui,Me.any=ki,Me.contains=mi,Me.eq=Yi,Me.detect=fi,Me.foldl=wi,Me.foldr=bi,Me.head=Fr,Me.include=mi,Me.inject=wi,Fo(Me,(qo={},hn(Me,function(t,e){Me.prototype[e]||(qo[e]=t)}),qo),!1),Me.sample=Ai,Me.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Ai(e,t)}):Ai(this.value())},Me.VERSION=a,Ve(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Me[t].placeholder=Me}),Ve(["drop","take"],function(t,e){Ne.prototype[t]=function(n){var r=this.__filtered__;if(r&amp;&amp;!e)return new Ne(this);n=null==n?1:_e(ge(n)||0,0);var i=this.clone();return r?i.__takeCount__=xe(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__&lt;0?"Right":"")}),i},Ne.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ve(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=b;Ne.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:pr(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),Ve(["first","last"],function(t,e){var n="take"+(e?"Right":"");Ne.prototype[t]=function(){return this[n](1).value()[0]}}),Ve(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Ne.prototype[t]=function(){return this.__filtered__?new Ne(this):this[n](1)}}),Ve(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?xn:Ho;Ne.prototype[t]=function(t){return this[n](r(t))}}),Ne.prototype.compact=function(){return this.filter(Wo)},Ne.prototype.reject=function(t,e){return t=pr(t,e,1),this.filter(function(e){return!t(e)})},Ne.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&amp;&amp;(t&gt;0||e&lt;0)?new Ne(n):(t&lt;0?n=n.takeRight(-t):t&amp;&amp;(n=n.drop(t)),e!==r&amp;&amp;(n=(e=+e||0)&lt;0?n.dropRight(-e):n.take(e-t)),n)},Ne.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Ne.prototype.toArray=function(){return this.take(Ee)},hn(Ne.prototype,function(t,e){var n=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e),o=Me[i?"take"+("last"==e?"Right":""):e];o&amp;&amp;(Me.prototype[e]=function(){var e=i?[1]:arguments,a=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,u=s instanceof Ne,c=e[0],f=u||Gi(s);f&amp;&amp;n&amp;&amp;"function"==typeof c&amp;&amp;1!=c.length&amp;&amp;(u=f=!1);var p=function(t){return i&amp;&amp;a?o(t,1)[0]:o.apply(r,He([t],e))},h={func:oi,args:[p],thisArg:r},d=u&amp;&amp;!l;if(i&amp;&amp;!a)return d?((s=s.clone()).__actions__.push(h),t.call(s)):o.call(r,this.value())[0];if(!i&amp;&amp;f){s=d?s:new Ne(this);var g=t.apply(s,e);return g.__actions__.push(h),new Pe(g,a)}return this.thru(p)})}),Ve(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?St:It)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);Me.prototype[t]=function(){var t=arguments;return r&amp;&amp;!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),hn(Ne.prototype,function(t,e){var n=Me[e];if(n){var r=n.name;(Re[r]||(Re[r]=[])).push({name:e,func:n})}}),Re[sr(r,l).name]=[{name:"wrapper",func:r}],Ne.prototype.clone=function(){var t=new Ne(this.__wrapped__);return t.__actions__=Be(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Be(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Be(this.__views__),t},Ne.prototype.reverse=function(){if(this.__filtered__){var t=new Ne(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ne.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Gi(t),r=e&lt;0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r&lt;i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=xe(e,t+a);break;case"takeRight":t=_e(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,f=c.length,p=0,h=xe(l,this.__takeCount__);if(!n||i&lt;x||i==l&amp;&amp;h==l)return Ln(r&amp;&amp;n?t.reverse():t,this.__actions__);var d=[];t:for(;l--&amp;&amp;p&lt;h;){for(var g=-1,m=t[u+=e];++g&lt;f;){var v=c[g],y=v.iteratee,_=v.type,A=y(m);if(_==b)m=A;else if(!A){if(_==w)continue t;break t}}d[p++]=m}return d},Me.prototype.chain=function(){return ii(this)},Me.prototype.commit=function(){return new Pe(this.value(),this.__chain__)},Me.prototype.concat=ai,Me.prototype.plant=function(t){for(var e,n=this;n instanceof Le;){var r=jr(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},Me.prototype.reverse=function(){var t=this.__wrapped__,e=function(t){return n&amp;&amp;n.__dir__&lt;0?t:t.reverse()};if(t instanceof Ne){var n=t;return this.__actions__.length&amp;&amp;(n=new Ne(this)),(n=n.reverse()).__actions__.push({func:oi,args:[e],thisArg:r}),new Pe(n,this.__chain__)}return this.thru(e)},Me.prototype.toString=function(){return this.value()+""},Me.prototype.run=Me.prototype.toJSON=Me.prototype.valueOf=Me.prototype.value=function(){return Ln(this.__wrapped__,this.__actions__)},Me.prototype.collect=Me.prototype.map,Me.prototype.head=Me.prototype.first,Me.prototype.select=Me.prototype.filter,Me.prototype.tail=Me.prototype.rest,Me}();"function"==typeof define&amp;&amp;"object"==typeof define.amd&amp;&amp;define.amd?Lt._=Zt:Tt&amp;&amp;It?Mt?(It.exports=Zt)._=Zt:Tt._=Zt:Lt._=Zt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,n){var r=1e3,i=60*r,o=60*i,a=24*o,s=365.25*a;function l(t,e,n){if(!(t&lt;e))return t&lt;1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if((t=""+t).length&gt;1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(t):e.long?l(n=t,a,"day")||l(n,o,"hour")||l(n,i,"minute")||l(n,r,"second")||n+" ms":function(t){return t&gt;=a?Math.round(t/a)+"d":t&gt;=o?Math.round(t/o)+"h":t&gt;=i?Math.round(t/i)+"m":t&gt;=r?Math.round(t/r)+"s":t+"ms"}(t);var n}},{}],26:[function(t,e,n){e.exports=t("./lib/retry")},{"./lib/retry":27}],27:[function(t,e,n){var r=t("./retry_operation");n.operation=function(t){var e=!1;t&amp;&amp;!0===t.forever&amp;&amp;(e=!0);var i=n.timeouts(t);return new r(i,e)},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in t)e[n]=t[n];if(e.minTimeout&gt;e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i&lt;e.retries;i++)r.push(this.createTimeout(i,e));return r.sort(function(t,e){return t-e}),r},n.createTimeout=function(t,e){var n=e.randomize?Math.random()+1:1,r=Math.round(n*e.minTimeout*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout)},n.wrap=function(t,e,r){if(e instanceof Array&amp;&amp;(r=e,e=null),!r)for(var i in r=[],t)"function"==typeof t[i]&amp;&amp;r.push(i);for(var o=0;o&lt;r.length;o++){var a=r[o],s=t[a];t[a]=function(){var r=n.operation(e),i=Array.prototype.slice.call(arguments),o=i.pop();i.push(function(t){r.retry(t)||(t&amp;&amp;(arguments[0]=r.mainError()),o.apply(this,arguments))}),r.attempt(function(){s.apply(t,i)})},t[a].options=e}}},{"./retry_operation":28}],28:[function(t,e,n){function r(t,e){this._timeouts=t,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,e&amp;&amp;(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=r,r.prototype.retry=function(t){if(this._timeout&amp;&amp;clearTimeout(this._timeout),!t)return!1;this._errors.push(t);var e=this._timeouts.shift();if(void 0===e){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),e=this._timeouts.shift()}var n=this;return setTimeout(function(){n._attempts++,n._operationTimeoutCb&amp;&amp;(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout)),n._fn(n._attempts)},e),!0},r.prototype.attempt=function(t,e){this._fn=t,e&amp;&amp;(e.timeout&amp;&amp;(this._operationTimeout=e.timeout),e.cb&amp;&amp;(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&amp;&amp;(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,n=0,r=0;r&lt;this._errors.length;r++){var i=this._errors[r],o=i.message,a=(t[o]||0)+1;t[o]=a,a&gt;=n&amp;&amp;(e=i,n=a)}return e}},{}],29:[function(t,e,n){e.exports=function(){var t=[].slice.call(arguments,0).join("/");return t.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}},{}],30:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&amp;&amp;null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t&lt;0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,l,u;if(this._events||(this._events={}),"error"===t&amp;&amp;(!this._events.error||o(this._events.error)&amp;&amp;!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(a(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(u=n.slice()).length,l=0;l&lt;r;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&amp;&amp;!this._events[t].warned&amp;&amp;(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&amp;&amp;n&gt;0&amp;&amp;this._events[t].length&gt;n&amp;&amp;(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&amp;&amp;console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,r=-1,n===e||i(n.listener)&amp;&amp;n.listener===e)delete this._events[t],this._events.removeListener&amp;&amp;this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- &gt;0;)if(n[s]===e||n[s].listener&amp;&amp;n[s].listener===e){r=s;break}if(r&lt;0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&amp;&amp;this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&amp;&amp;delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&amp;&amp;this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&amp;&amp;this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],31:[function(t,e,n){var r,i=e.exports={},o=[],a=!1,s=-1;function l(){a=!1,r.length?o=r.concat(o):s=-1,o.length&amp;&amp;u()}function u(){if(!a){var t=setTimeout(l);a=!0;for(var e=o.length;e;){for(r=o,o=[];++s&lt;e;)r&amp;&amp;r[s].run();s=-1,e=o.length}r=null,a=!1,clearTimeout(t)}}function c(t,e){this.fun=t,this.array=e}function f(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length&gt;1)for(var n=1;n&lt;arguments.length;n++)e[n-1]=arguments[n];o.push(new c(t,e)),1!==o.length||a||setTimeout(u,0)},c.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}]},{},[]);]]&gt;&lt;/script&gt;&lt;script_name&gt;kore-ai-sdk3.min.js&lt;/script_name&gt;&lt;sys_class_name&gt;sys_ui_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-01-02 05:25:24&lt;/sys_created_on&gt;&lt;sys_id&gt;808039e097a775109b137076f053af07&lt;/sys_id&gt;&lt;sys_mod_count&gt;0&lt;/sys_mod_count&gt;&lt;sys_name&gt;x_831378_kore_ai_0.kore-ai-sdk3.min.js&lt;/sys_name&gt;&lt;sys_package display_value="IT Assist" source="x_831378_kore_ai_0"&gt;5db40dbc2f21111051c859a72799b60c&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="IT Assist"&gt;5db40dbc2f21111051c859a72799b60c&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_script_808039e097a775109b137076f053af07&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-01-02 05:25:24&lt;/sys_updated_on&gt;&lt;ui_type&gt;0&lt;/ui_type&gt;&lt;use_scoped_format&gt;false&lt;/use_scoped_format&gt;&lt;/sys_ui_script&gt;&lt;/record_update&gt;</payload>
        <payload_hash>1131790973</payload_hash>
        <record_name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</record_name>
        <reverted_from/>
        <source>79b20a47970231109b137076f053af13</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-01-02 05:25:24</sys_created_on>
        <sys_id>51a075e497a775109b137076f053af5b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>18cc8a23b8e0000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-01-02 05:25:24</sys_updated_on>
        <type>UI Script</type>
        <update_guid>99a075e43ea77510054b1450a446d05a</update_guid>
        <update_guid_history>99a075e43ea77510054b1450a446d05a:1131790973</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-01-02 05:43:01</sys_created_on>
        <sys_db_object display_value="" name="sys_ui_script">sys_ui_script</sys_db_object>
        <sys_id>1fc1dcdcc4304db2bd11c3f597065a04</sys_id>
        <sys_metadata>808039e097a775109b137076f053af07</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</sys_name>
        <sys_package display_value="IT Assist" source="x_831378_kore_ai_0">5db40dbc2f21111051c859a72799b60c</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</sys_scope>
        <sys_scope_delete/>
        <sys_update_name>sys_ui_script_808039e097a775109b137076f053af07</sys_update_name>
        <sys_update_version display_value="sys_ui_script_808039e097a775109b137076f053af07">51a075e497a775109b137076f053af5b</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-01-02 05:43:01</sys_updated_on>
    </sys_metadata_delete>
</record_update>
