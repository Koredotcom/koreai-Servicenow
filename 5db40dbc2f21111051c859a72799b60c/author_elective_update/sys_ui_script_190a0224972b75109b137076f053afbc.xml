<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="DELETE">
        <active>true</active>
        <description/>
        <global>false</global>
        <ignore_in_now_experience>false</ignore_in_now_experience>
        <name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</name>
        <script><![CDATA[function koreAnonymousFn(a){function b(){console.info("generating UUID");var a=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})}console.info("anonymous user login");var c=localStorage.getItem("korecom"),d=c||b();if(localStorage.setItem("korecom",d),!a.clientId)return void console.log("clientId should be there for anonymous user");var e={};e.issuer=a.clientId,e.subject=d,a.assertion=e,this.options=a,this.claims=a.assertion,this.WebClient=new this.clients.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.WebClient.anonymouslogin.login({assertion:a.assertion,botInfo:this.options.botInfo},bind(this.onLogIn,this))}var KoreGraphAdapter=function(a){function b(b,c,d,e){function f(a){return a.startAngle+(a.endAngle-a.startAngle)/2}var g=b,h=3;legendCenterOffset=0,b.message?g=b.message[0].component.payload:(fromWidgets=!0,h=4,legendCenterOffset=-15);for(var i=[],j=0,k=0;k<g.elements.length;k++)i[k]={},i[k].label=g.elements[k].title,i[k].count=g.elements[k].value,i[k].dispVal=g.elements[k].displayValue,g.elements[k].hasOwnProperty("subTitle")&&(i[k].subTitle=g.elements[k].subTitle),j+=Number(i[k].count);for(var l=0,k=0;k<g.elements.length;k++)i[k].percentage=Math.round(i[k].count/j*100),k===g.elements.length-1&&(i[k].percentage=100-l),l+=i[k].percentage;var m=c.width,n=c.height,o=Math.min(m,n)/2-20,p=c.legendRectSize,q=c.legendSpacing,r=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),s=d3.select(d).append("svg").attr("width",m-15).attr("height",n).append("g").attr("class","pieRegular").attr("transform","translate("+(m/h+3)+","+n/2+")"),t=d3.arc().innerRadius(0).outerRadius(o),u=d3.arc().outerRadius(1.05*o).innerRadius(.9*o),v=d3.pie().value(function(a){return a.count}).sort(null),w=d3.select(d).append("div").attr("class","legend-tooltip-pie-chart no-show").attr("transform",function(a){console.log(a)}).on("mouseleave",function(b){w.attr("class","legend-tooltip-pie-chart no-show"),a(".more-legend").removeClass("no-visible")});a(".listTemplateContainer").on("click",function(){a(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var x=(i.length-4)*(p+q+20),y=w.append("svg").attr("width","150").attr("height",x+23),z=d3.select(d).append("div").attr("class","tooltip").style("display","none");z.append("div").attr("class","label"),z.append("div").attr("class","count"),z.append("div").attr("class","percent"),i.forEach(function(a){a.count=+a.count,a.enabled=!0});var A=s.selectAll("path").data(v(i)).enter().append("g").attr("class","arcRegular").append("path").attr("d",t).attr("fill",function(a){return r(a.data.label)}).each(function(a){this._current});A.on("mouseover",function(b){d3.sum(i.map(function(a){return a.enabled?a.count:0}));"block"===a("#myPreviewModal").css("display")?b.data.dispVal?z.select("#myPreviewModal .count").html(b.data.dispVal):z.select("#myPreviewModal .count").html(b.value):b.data.dispVal?z.select(".count").html(b.data.dispVal):z.select(".count").html(b.value),z.style("display","block")}),A.on("mouseout",function(){z.style("display","none")}),A.on("mousemove",function(a){z.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),s.append("g").attr("class","labels"),s.append("g").attr("class","lines"),s.append("g").classed("labels",!0),s.append("g").classed("lines",!0);var B=(s.select(".lines").selectAll("polyline").data(v(i)).enter().append("polyline").attr("points",function(a){var b=u.centroid(a);return b[0]=.95*o*(f(a)<Math.PI?1:-1),[t.centroid(a),u.centroid(a),b]}),s.select(".labels").selectAll("text").data(v(i)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(a){return a.data.percentage+"%"}).attr("transform",function(a){var b=u.centroid(a);return b[0]=.95*o*(f(a)<Math.PI?1:-1),"translate("+b+")"}).style("text-anchor",function(a){return f(a)<Math.PI?"start":"end"}),d3.select(d).append("div").attr("class","tooltip-legend no-show")),C=y.selectAll(".legend"+window.PieChartCount).data(r.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){var c=p+q+25,d=c*r.domain().length/2;d=r.domain()<4?c*r.domain().length/2:2*c;return"translate(10,"+((b+6)*c-d-135)+")"});C.append("rect").attr("width","7").attr("height","7").style("fill",r).style("stroke",r),C.append("text").attr("x",p+q+4).attr("y",p-q).attr("class","legend-title").text(function(a){return a.length>15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length>15&&(B.attr("class","only-show tooltip-legend"),B.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length>15&&B.attr("class","no-show tooltip-legend")}),C.append("text").attr("x",p+q+4).attr("y",p-q+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b<g.elements.length&&i[b].label!=a;b++);return g.elements[b].hasOwnProperty("subTitle")?g.elements[b].subTitle:i[b].count});var D=s.selectAll(".legend"+window.PieChartCount).data(r.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){for(var c=-60,b=0;b<i.length;b++){if(a==i[b].label){var d=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(d+=15)+","+c+")"}i[b].hasOwnProperty("subTitle")&&""==i[b].subTitle?c+=18:c+=33}});D.append("rect").attr("width","7").attr("height","7").style("fill",r).style("stroke",r),D.append("text").attr("x",p+q+4).attr("y",p-q).attr("class","legend-title").text(function(a){return a.length>15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length>15&&(B.attr("class","only-show tooltip-legend"),B.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length>15&&B.attr("class","no-show tooltip-legend")}),D.append("text").attr("x",p+q+4).attr("y",p-q+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b<g.elements.length&&i[b].label!=a;b++);return g.elements[b].hasOwnProperty("subTitle")?g.elements[b].subTitle:i[b].count}),r.domain().length>4&&s.data(r.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(b){var c=p+q+25,d=c*r.domain().length/2;d=2*c;var e,f=7*c-d-115;try{var g=a(this).parent().siblings(".legend0")[0].getAttribute("transform");e=g.slice(10,g.lastIndexOf(","))}catch(a){e=110}return"translate("+e+","+f+")"}).on("mouseover",function(b){var c=a(this).closest(".listViewTmplContentChild").offset().top,d=a(this).closest(".listViewTmplContentChild").offset().left,e=a(this).offset().top,f=a(this).offset().left,g=e-c-87.5,h=f-d-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",h).style("top",g),a(this).addClass("no-visible")})}function c(b,c,d,e,f){function g(a){return a.startAngle+(a.endAngle-a.startAngle)/2}var h=c.width,i=c.height,j=Math.min(h,i)/2-10,k=[],l=0,m=b,n=3;legendCenterOffset=0,b.message?m=b.message[0].component.payload:(fromWidgets=!0,n=4,legendCenterOffset=-15);for(var o=0;o<m.elements.length;o++)k[o]={},k[o].label=m.elements[o].title,k[o].count=Number(m.elements[o].value),k[o].dispVal=m.elements[o].displayValue,m.elements[o].hasOwnProperty("subTitle")&&(k[o].subTitle=m.elements[o].subTitle),l+=Number(m.elements[o].value);for(var p=0,o=0;o<m.elements.length;o++)k[o].percentage=Math.round(k[o].count/l*100),o===m.elements.length-1&&(k[o].percentage=100-p),p+=k[o].percentage;var q=c.legendRectSize,r=c.legendSpacing,s=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),t=d3.arc().outerRadius(j-10).innerRadius(j-50),u=d3.arc().outerRadius(.9*j).innerRadius(.9*j),v=d3.pie().sort(null).value(function(a){return a.count}),w=d3.select(d).append("div").attr("class","legend-tooltip-pie-chart no-show").on("mouseleave",function(b){w.attr("class","legend-tooltip-pie-chart no-show"),a(".more-legend").removeClass("no-visible")}),x=(k.length-4)*(q+r+20),y=w.append("svg").attr("width","150").attr("height",x+23);a(".listTemplateContainer").on("click",function(){a(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var z=d3.select(d).append("svg").attr("width",h+5).attr("height",i).append("g").attr("transform","translate("+(h/n+13)+","+i/2+")"),A=z.selectAll(".arc").data(v(k)).enter().append("g").attr("class","arc");A.append("path").attr("d",t).style("fill",function(a){return s(a.data.label)});var B=d3.select(d).append("div").attr("class","tooltipDonut").style("display","none");B.append("div").attr("class","label"),B.append("div").attr("class","countDonut"),B.append("div").attr("class","percent"),k.forEach(function(a){a.count=+a.count,a.enabled=!0}),z.append("g").attr("class","labels"),z.append("g").attr("class","lines"),z.append("g").classed("labels",!0),z.append("g").classed("lines",!0);z.select(".lines").selectAll("polyline").data(v(k)).enter().append("polyline").attr("points",function(a){var b=u.centroid(a);return b[0]=.95*j*(g(a)<Math.PI?1:-1),[t.centroid(a),u.centroid(a),b]}).style("display",function(a){return 0==a.data.percentage?"none":"block"}),z.select(".labels").selectAll("text").data(v(k)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(a){return a.data.percentage+"%"}).attr("transform",function(a){var b=u.centroid(a);return b[0]=.95*j*(g(a)<Math.PI?1:-1),b[0]=b[0]+10,"translate("+b+")"}).style("text-anchor",function(a){return g(a)<Math.PI?"start":"end"}).style("display",function(a){return 0==a.data.percentage?"none":"block"});if(A.on("mouseover",function(b){d3.sum(k.map(function(a){return a.enabled?a.count:0}));"block"===a("#myPreviewModal").css("display")?b.data.dispVal?B.select("#myPreviewModal .countDonut").html(b.data.dispVal):B.select("#myPreviewModal .countDonut").html(b.value):b.data.dispVal?B.select(".countDonut").html(b.data.dispVal):B.select(".countDonut").html(b.value),B.style("display","block")}),A.on("mouseout",function(){B.style("display","none")}),A.on("mousemove",function(a){B.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),"donut_legend"===f||"donut"===f){var C=d3.select(d).append("div").attr("class","tooltip-legend no-show"),D=y.selectAll(".legend"+window.PieChartCount).data(s.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){var c=q+r+25,d=c*s.domain().length/2;d=s.domain()<5?c*s.domain().length/2:2*c;return"translate(10,"+((b+6)*c-d-135)+")"});D.append("rect").attr("width","7").attr("height","7").style("fill",s).style("stroke",s),D.append("text").attr("x",q+r+4).attr("y",q-r).attr("class","legend-title").text(function(a){return a.length>15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length>11&&(C.attr("class","only-show tooltip-legend"),C.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length>15&&C.attr("class","no-show tooltip-legend")}),D.append("text").attr("x",q+r+4).attr("y",q-r+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b<m.elements.length&&k[b].label!=a;b++);return m.elements[b].hasOwnProperty("subTitle")?m.elements[b].subTitle:m.elements[b].value});var E=z.selectAll(".legend"+window.PieChartCount).data(s.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){for(var c=-60,b=0;b<k.length;b++){if(a==k[b].label){var d=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(d+=15)+","+c+")"}k[b].hasOwnProperty("subTitle")&&""==k[b].subTitle?c+=18:c+=33}});E.append("rect").attr("width","7").attr("height","7").style("fill",s).style("stroke",s),E.append("text").attr("x",q+r+4).attr("y",q-r).attr("class","legend-title").text(function(a){return a.length>15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length>15&&(C.attr("class","only-show tooltip-legend"),C.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length>15&&C.attr("class","no-show tooltip-legend")}),E.append("text").attr("x",q+r+4).attr("y",q-r+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b<m.elements.length&&k[b].label!=a;b++);return m.elements[b].hasOwnProperty("subTitle")?m.elements[b].subTitle:k[b].count}),s.domain().length>4&&z.data(s.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(b){var c=q+r+25,d=c*s.domain().length/2;d=2*c;var e,f=7*c-d-115;try{var g=a(this).parent().siblings(".legend0")[0].getAttribute("transform");e=g.slice(10,g.lastIndexOf(","))}catch(a){e=110}return"translate("+e+","+f+")"}).on("mouseover",function(b){var c=a(this).closest(".listViewTmplContentChild").offset().top,d=a(this).closest(".listViewTmplContentChild").offset().left,e=a(this).offset().top,f=a(this).offset().left,g=e-c-87.5,h=f-d-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",h).style("top",g),a(this).addClass("no-visible")})}}function d(a,b,c,d){var e=d3.select(c).append("svg").attr("width",b.outerWidth).attr("height",b.outerHeight),f={top:20,right:20,bottom:30,left:40},g=b.innerWidth,h=b.innerHeight,i=e.append("g").attr("transform","translate(20,"+f.top+")"),j=a;legendCenterOffset=0,a.message?j=a.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);var k=d3.scaleBand().rangeRound([0,g]).paddingInner(.05).align(.1),l=d3.scaleLinear().rangeRound([h,0]),m=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),n=[],o=[];o.push("xAxis");for(var p=0;p<j.elements.length;p++)o.push(j.elements[p].title);for(var p=0;p<j.X_axis.length;p++)n[p]={},n[p].dispVal=[],n[p][o[0]]=j.X_axis[p];for(var p=0;p<j.elements.length;p++)for(var q=0;q<j.elements[p].values.length;q++)n[q][o[p+1]]=j.elements[p].values[q],j.elements[p].displayValues&&(n[q].dispVal[p]=j.elements[p].displayValues[q]);for(var r=o.slice(1),p=0;p<n.length;p++){var s=0;for(key in n[p])"xAxis"!==key&&"dispVal"!==key&&(s+=n[p][key]);n[p].total=s}k.domain(n.map(function(a){return a.xAxis})),l.domain([0,d3.max(n,function(a){return a.total})]).nice(),m.domain(r),coordsVal=[],i.append("g").selectAll("g").data(d3.stack().keys(r)(n)).enter().append("g").attr("fill",function(a){return m(a.key)}).selectAll("rect").data(function(a,b){coordsVal[b]=[];for(var c=0;c<a.length;c++)coordsVal[b][c]={x:a[c][0],y:a[c][1],val:a[c].data.dispVal[b]};return a}).enter().append("rect").attr("x",function(a){return k(a.data.xAxis)}).attr("y",function(a){return l(a[1])}).attr("height",function(a){return l(a[0])-l(a[1])}).attr("width",.5*k.bandwidth()).attr("dispVal",function(a){for(var b=0;b<coordsVal.length;b++)for(var c=0;c<coordsVal[b].length;c++)if(coordsVal[b][c].x===a[0]&&coordsVal[b][c].y===a[1])return coordsVal[b][c].val}).attr("transform","translate("+.25*k.bandwidth()+",0)").on("mouseover",function(){v.style("display",null)}).on("mouseout",function(){v.style("display","none")}).on("mousemove",function(a){var b=d3.mouse(this)[0]-5,c=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var d=this.attributes.dispVal.value;else var d=a[1]-a[0];v.attr("transform","translate("+b+","+c+")"),v.select("text").text(d)}),i.append("g").attr("class","axis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(k)),i.selectAll("text").attr("class","chart-disp-val").attr("transform","rotate(-65) translate(-30, 0)"),i.append("g").attr("class","axis").call(d3.axisLeft(l).ticks(null,"s")).append("text").attr("x",2).attr("y",l(l.ticks().pop())-10).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),i.selectAll("text").attr("class","chart-disp-val"),i.selectAll(".axis .domain").classed("chart-axis-line",!0),i.selectAll(".axis line").classed("chart-axis-line",!0);var t=d3.select(c).append("div").attr("class","tooltip-legend no-show"),u=i.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(r.slice().reverse()).enter().append("g").attr("transform",function(a,b){return"translate(48,"+20*b+")"});u.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",m),u.append("text").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(a){return a.length>10?a.slice(0,7)+"...":a}).on("mouseover",function(a){t.attr("class","only-show tooltip-legend"),t.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){t.attr("class","no-show tooltip-legend")});var v=e.append("g").attr("class","tooltipVSB").style("display","none");v.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),v.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function e(a,b){g(a,b)}function f(b,c,d){var e=d3.scaleOrdinal().range(d),f=b.substr(1,b.length);f=f.replace(/ +/g,"").replace(/#/g,""),a(b).before("<div id='Legend_"+f+"' class='pmd-card-body' style='margin-top:0; margin-bottom:0;'></div>"),Object.keys(c).forEach(function(b){var d=e(b);a("#Legend_"+f).append("<span class='team-graph team1' style='display: inline-block; margin-right:10px;margin-left: 20px;'>        <span style='background:"+d+";width: 10px;height: 10px;display: inline-block;vertical-align: middle;'>&nbsp;</span>        <span title="+c[b].replace(/[ ]/g," ")+" style='padding-top: 0;font-family:Source Sans Pro, sans-serif;font-size: 13px;display: inline;'>"+(c[b].length>10?c[b].slice(0,7)+"...":c[b])+" </span>    </span>")})}function g(b,c){var d=b.data,e=b.columnsInfo,g=b.xAxis,h=b.yAxis,i=b.colorRange,j=b.mainDiv,k=j.substr(1,j.length),l=b.label,n=b.requireLegend;d3.select(j).append("svg").attr("width",c.outerWidth).attr("height",c.outerHeight);var o=d3.select(j+" svg"),p={top:20,right:20,bottom:40,left:70},q=c.innerWidth,r=c.innerHeight,s=o.append("g").attr("transform","translate("+p.left+","+p.top+")");null!=n&&void 0!=n&&0!=n&&(a("#Legend_"+k).remove(),f(j,e,i));var t=d3.scaleBand().rangeRound([r,0]).paddingInner(.1),u=d3.scaleBand().padding(.05),v=d3.scaleLinear().rangeRound([0,q]),w=d3.scaleOrdinal().range(i),x=Object.keys(e);t.domain(d.map(function(a){return a[h]})),u.domain(x).rangeRound([0,t.bandwidth()]),v.domain([0,d3.max(d,function(a){return d3.max(x,function(b){return a[b]})})]).nice(),maxTicks=10;var y=s.append("g").selectAll("g").data(d).enter().append("g").attr("transform",function(a){return"translate(0,"+t(a[h])+")"}),z=(y.selectAll("rect").data(function(a,b){return x.map(function(c){return{key:c,value:a[c],index:c+"_"+b+"_"+a[h],dispVal:a[c+"dispVal"]}})}).enter().append("rect").attr("y",function(a){return u(a.key)}).attr("width",function(a){return v(a.value)}).attr("data-index",function(a,b){return a.index}).attr("displayVal",function(a){return a.dispVal}).attr("height",u.bandwidth()).on("mouseover",function(){A.style("display",null)}).on("mouseout",function(){A.style("display","none")}).on("mousemove",function(b){if("block"===a("#myPreviewModal").css("display"))var c=d3.event.pageX-document.querySelector(".chartContainerDiv").getBoundingClientRect().x+10,d=d3.event.pageY-document.querySelector(".chartContainerDiv").getBoundingClientRect().y+10;else var c=d3.event.pageX-document.querySelector(j).getBoundingClientRect().x+10,d=d3.event.pageY-document.querySelector(j).getBoundingClientRect().y+10;if(this.attributes.displayVal)var e=this.attributes.displayVal.value;else var e=b.value;d3.mouse(this)[0],d3.mouse(this)[1];A.attr("transform","translate("+c+","+d+")"),A.select("text").text(e)}).attr("fill",function(a){return w(a.key)}),{});z.svg=o,z.cssPrefix="horgroupBar0_",z.data=d,z.keys=x,z.height=r,z.width=q,z.label=l,z.yAxis=h,z.xAxis=g,m.addTooltips(z);var A=o.append("g").attr("class","tooltipHBC").style("display","none");A.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),A.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold"),s.append("g").attr("class","axis").attr("transform","translate(0,"+r+")").call(d3.axisBottom(v).ticks(maxTicks)).append("text").attr("x",q/2).attr("y",.7*p.bottom).attr("dx","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),s.append("g").attr("class","axis").call(d3.axisLeft(t).ticks(null,"s")).append("text").attr("x",.4*r*-1).attr("y",.8*p.left*-1).attr("dy","0.71em").attr("fill","#000").attr("transform","rotate(-90)").attr("font-weight","bold"),s.selectAll(".axis text").attr("class","chart-disp-val"),s.selectAll(".axis line").attr("class","chart-axis-line"),s.selectAll(".axis .domain").classed("chart-axis-line",!0)}function h(b,c,d,f){window.addEventListener("resize",function(b){a("#chart").width(.9*window.innerWidth),a("#chart").height(window.innerHeight)});var g=[],h=b;legendCenterOffset=0,b.message?h=b.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);for(var i=0;i<h.X_axis.length;i++){g[i]={},g[i].date=h.X_axis[i];for(var j=0;j<h.elements.length;j++)g[i][h.elements[j].title]=h.elements[j].values[i],h.elements[j].displayValues&&(g[i][h.elements[j].title+"dispVal"]=h.elements[j].displayValues[i])}for(var k={},j=0;j<h.elements.length;j++)k[h.elements[j].title]=h.elements[j].title;a(d).empty();var l={mainDiv:d,colorRange:["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],data:g,columnsInfo:k,xAxis:"value",yAxis:"date",label:{xAxis:"Value",yAxis:"Dates"},requireLegend:!0};new e(l,c)}function i(a,b,c,d){var e=d3.select(c).append("svg").attr("width",b.outerWidth).attr("height",b.outerHeight),f={top:20,right:20,bottom:30,left:35},g=b.innerWidth,h=b.innerHeight,i=e.append("g").attr("transform","translate("+f.left+","+f.top+")"),j=a,k=d3.scaleBand().rangeRound([0,g]).paddingInner(.1),l=d3.scaleBand().padding(.05),m=d3.scaleLinear().rangeRound([h,0]),n=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]);a.message?j=a.message[0].component.payload:(fromWidgets=!0,widthDivision=4,legendCenterOffset=-15);var o=[],p=[];p.push("xAxis");for(var q=0;q<j.elements.length;q++)p.push(j.elements[q].title);for(var q=0;q<j.X_axis.length;q++)o[q]={},o[q][p[0]]=j.X_axis[q];for(var q=0;q<j.elements.length;q++)for(var r=0;r<j.elements[q].values.length;r++)o[r][p[q+1]]=j.elements[q].values[r],j.elements[q].displayValues&&(o[r][p[q+1]+"dispVal"]=j.elements[q].displayValues[r]);var s=p.slice(1);k.domain(o.map(function(a){return a.xAxis})),l.domain(s).rangeRound([0,k.bandwidth()]),m.domain([0,d3.max(o,function(a){return d3.max(s,function(b){return a[b]})})]).nice(),i.append("g").selectAll("g").data(o).enter().append("g").attr("transform",function(a){return"translate("+k(a.xAxis)+",0)"}).selectAll("rect").data(function(a){return s.map(function(b){return{key:b,value:a[b],dispVal:a[b+"dispVal"]}})}).enter().append("rect").on("mouseover",function(){v.style("display",null)}).on("mouseout",function(){v.style("display","none")}).on("mousemove",function(a){var b=1.25*this.parentNode.transform.baseVal[0].matrix.e,c=d3.mouse(this)[1]-5;if(a.dispVal)var d=a.dispVal;else var d=a.value;v.attr("transform","translate("+b+","+c+")"),v.select("text").text(d)}).attr("x",function(a){return l(a.key)}).attr("y",function(a){return m(a.value)}).attr("width",l.bandwidth()).attr("height",function(a){return h-m(a.value)}).attr("fill",function(a){return n(a.key)}),i.append("g").attr("class","axis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(k)),i.selectAll("text").attr("transform","rotate(-65) translate(-30, 0)"),i.append("g").attr("class","axis").call(d3.axisLeft(m).ticks(null,"s")).append("text").attr("x",2).attr("y",m(m.ticks().pop())+.5).attr("dy","0.12em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),i.selectAll(".axis text").attr("class","chart-disp-val"),i.selectAll(".axis line").attr("class","chart-axis-line"),i.selectAll(".axis .domain").classed("chart-axis-line",!0);var t=d3.select(c).append("div").attr("class","tooltip-legend no-show"),u=i.append("g").attr("font-family","sans-serif").attr("font-size",8).attr("text-anchor","end").selectAll("g").data(s.slice().reverse()).enter().append("g").attr("transform",function(a,b){return"translate(60,"+20*b+")"});u.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",n),u.append("text").attr("class","chart-disp-val").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").text(function(a){return a.length>10?a.slice(0,7)+"...":a}).on("mouseover",function(a){t.attr("class","only-show tooltip-legend"),t.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){t.attr("class","no-show tooltip-legend")});var v=e.append("g").attr("class","tooltipBC").style("display","none");v.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),v.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function j(a,b,c,d){var e=d3.select(c).append("svg").attr("width",b.outerWidth).attr("height",b.outerHeight),f={top:20,right:20,bottom:30,left:40},g=b.innerWidth,h=b.innerHeight,i=e.append("g").attr("transform","translate(70,"+f.top+")"),j=a;legendCenterOffset=0,a.message?j=a.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);var k=d3.scaleBand().rangeRound([0,h]).paddingInner(.05).align(.1),l=d3.scaleLinear().rangeRound([0,g]),m=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),n=[],o=[];o.push("xAxis");for(var p=0;p<j.elements.length;p++)o.push(j.elements[p].title);for(var p=0;p<j.X_axis.length;p++)n[p]={},n[p].dispVal=[],n[p][o[0]]=j.X_axis[p];for(var p=0;p<j.elements.length;p++)for(var q=0;q<j.elements[p].values.length;q++)n[q][o[p+1]]=j.elements[p].values[q],j.elements[p].displayValues&&(n[q].dispVal[p]=j.elements[p].displayValues[q]);for(var r=o.slice(1),p=0;p<n.length;p++){var s=0;for(key in n[p])"xAxis"!==key&&"dispVal"!==key&&(s+=n[p][key]);n[p].total=s}k.domain(n.map(function(a){return a.xAxis})),l.domain([0,d3.max(n,function(a){return a.total})]).nice(),m.domain(r);var t=[];i.append("g").selectAll("g").data(d3.stack().keys(r)(n)).enter().append("g").attr("fill",function(a){return m(a.key)}).selectAll("rect").data(function(a,b){t[b]=[];for(var c=0;c<a.length;c++)t[b][c]={x:a[c][0],y:a[c][1],val:a[c].data.dispVal[b]};return a}).enter().append("rect").attr("y",function(a){return k(a.data.xAxis)}).attr("x",function(a){return l(a[0])}).attr("width",function(a){return l(a[1])-l(a[0])}).attr("height",.5*k.bandwidth()).attr("transform","translate(0,"+.25*k.bandwidth()+")").attr("dispVal",function(a){for(var b=0;b<t.length;b++)for(var c=0;c<t[b].length;c++)if(t[b][c].x===a[0]&&t[b][c].y===a[1])return t[b][c].val}).on("mouseover",function(){w.style("display",null)}).on("mouseout",function(){w.style("display","none")}).on("mousemove",function(a){var b=d3.mouse(this)[0]-5,c=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var d=this.attributes.dispVal.value;else var d=a[1]-a[0];w.attr("transform","translate("+b+","+c+")"),w.select("text").text(d)}),i.append("g").attr("class","axis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(l).ticks(null,"s")).append("text").attr("y",40).attr("x",l(l.ticks().pop())+.5).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start").attr("transform","translate("+-g+",-10)"),i.append("g").attr("class","axis").attr("transform","translate(0,0)").call(d3.axisLeft(k)),i.selectAll(".axis text").attr("class","chart-disp-val"),i.selectAll(".axis line").attr("class","chart-axis-line"),i.selectAll(".axis .domain").classed("chart-axis-line",!0);var u=d3.select(c).append("div").attr("class","tooltip-legend no-show"),v=i.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(r.slice().reverse()).enter().append("g").attr("transform",function(a,b){return"translate(80,"+(150+20*b)+")"});v.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",m),v.append("text").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(a){return a.length>10?a.slice(0,7)+"...":a}).on("mouseover",function(a){u.attr("class","only-show tooltip-legend"),u.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){u.attr("class","no-show tooltip-legend")});var w=e.append("g").attr("class","tooltipHStacked").style("display","none");w.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),w.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function k(b,c,d,e){var f={top:35,right:120,bottom:30,left:30},g=c.innerWidth,h=c.innerHeight,i=["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],j=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),k=b;legendCenterOffset=0,b.message?k=b.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);var l=k.X_axis,m=k.elements,n=d3.scaleLinear().domain([0,l.length-1]).range([0,g]),o=d3.scaleLinear().domain([0,60]).range([h,0]),p=d3.line().x(function(a){return n(a.ind)}).y(function(a){return o(a.value)}),q=d3.select(d).append("svg").attr("width",c.outerWidth).attr("height",c.outerHeight),r=q.append("g").attr("transform","translate("+f.left+","+f.top+")"),s=d3.axisBottom(n).tickFormat(function(a){return l[a]}),t=d3.axisLeft(o).tickFormat(d3.format(".2s"));r.append("g").attr("class","axis").call(t),r.append("g").attr("transform","translate(0,"+h+")").call(s).attr("class","axis xAxisR"),r.selectAll(".xAxisR text").attr("transform","rotate(-65) translate(-30, 0)");var u,v=[],w=[],x=[],y={};v.push("xAxis");for(var z=0;z<k.elements.length;z++)v.push(k.elements[z].title);for(var z=0;z<k.elements.length;z++){w[z]={},w[z].valueSet=[],w[z].name=k.elements[z].title,w[z].currentVal=k.elements[z].values[k.elements[z].values.length-1];for(var A=0;A<k.elements[z].values.length;A++)x[A]=x[A]||{},x[A].x_Axis=k.X_axis[A],x[A][v[z+1]]=k.elements[z].values[A],w[z].valueSet[A]={},w[z].valueSet[A].value=k.elements[z].values[A],k.elements[z].displayValues&&(w[z].valueSet[A].dispVal=k.elements[z].displayValues[A],y[k.elements[z].title]=k.elements[z].displayValues[A].replace(/[0-9]/g,"")),w[z].valueSet[A].x_Axis=k.X_axis[A],w[z].valueSet[A].ind=A}var B=v.slice(1),C=v.slice(1).map(function(a){return{id:a,values:x.map(function(b){return{xAxis:b.xAxis,temperature:b[a]}})}});u=w,r.selectAll().data(u).enter().append("path").attr("fill","none").attr("stroke",function(a){return j(a.name)}).attr("stroke-width",2).datum(function(a){return a.valueSet}).attr("d",p).attr("class","lineC"),r.selectAll().data(u).enter().append("text").html(function(a){}).attr("fill",function(a){return a.color}).attr("alignment-baseline","middle").attr("x",g).attr("dx",".5em").attr("y",function(a){return o(a.currentVal)});var D=q.append("g").attr("class","mouse-over-effects"),E=document.getElementsByClassName("lineC"),F=D.selectAll(".mouse-per-line").data(C).enter().append("g").attr("class","mouse-per-line");F.append("circle").attr("r",7).style("stroke",function(a,b){return i[b]}).style("fill","none").style("stroke-width","3px").style("opacity","0").attr("transform","translate(30,35)"),F.append("text").attr("transform",function(a,b){return 0==b?"translate(40,40)":1==b?"translate(20,10)":"translate(0,40)"}),D.append("svg:rect").attr("width",c.innerWidth+5).attr("height",c.innerHeight).attr("transform","translate(30,35)").attr("fill","none").attr("pointer-events","all").on("mouseout",function(){d3.selectAll(".mouse-per-line circle").style("opacity","0"),d3.selectAll(".mouse-per-line text").style("opacity","0")}).on("mouseover",function(){"block"===a("#myPreviewModal").css("display")?a(".lineChartChildDiv .mouse-per-line").hide():a(".lineChartChildDiv .mouse-per-line").show(),d3.selectAll(".mouse-per-line circle").style("opacity","0.5"),d3.selectAll(".mouse-per-line text").style("opacity","1")}).on("mousemove",function(){var a=d3.mouse(this);d3.selectAll(".mouse-per-line").attr("transform",function(b,c){var d=n.invert(a[0]),e=d3.bisector(function(a){return a.date}).right;idx=e(b.values,d);for(var f=0,g=E[c].getTotalLength()+2,h=null;;){if(h=Math.floor((f+g)/2),pos=E[c].getPointAtLength(h),(h===g||h===f)&&pos.x!==a[0])break;if(pos.x>a[0])g=h;else{if(!(pos.x<a[0]))break;f=h}}return xtempLC=n,d3.select(this).select("text").text(function(a,b){for(var c=[],d=0;d<m.length;d++)if(m[d].title===a.id)for(var e=0;e<a.values.length;e++)c[e]=a.values[e].temperature;if(void 0!==y[this.__data__.id]){var f=o.invert(pos.y).toFixed(2);return-1!==c.indexOf(Math.round(f))&&c.indexOf(Math.round(f))===Math.round(xtempLC.invert(pos.x))?o.invert(pos.y).toFixed(2)+"\n"+l[Math.round(xtempLC.invert(pos.x))]:o.invert(pos.y).toFixed(2)+y[this.__data__.id]}var f=o.invert(pos.y).toFixed(2);return-1!==c.indexOf(Math.round(f))&&c.indexOf(Math.round(f))===Math.round(xtempLC.invert(pos.x))?o.invert(pos.y).toFixed(2)+"\n"+l[Math.round(xtempLC.invert(pos.x))]:o.invert(pos.y).toFixed(2)}),"translate("+a[0]+","+pos.y+")"})}),r.selectAll(".axis text").attr("class","chart-disp-val"),r.selectAll(".axis line").attr("class","chart-axis-line"),r.selectAll(".axis .domain").classed("chart-axis-line",!0);var G=d3.select(d).append("div").attr("class","tooltip-legend no-show"),H=q.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(B.slice().reverse()).enter().append("g").attr("transform",function(a,b){return 230===c.innerWidth?"translate(100,"+(250+20*b)+")":"translate(100,"+(230+20*b)+")"});H.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",j),H.append("text").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(a){return a.length>10?a.slice(0,7)+"...":a}).on("mouseover",function(a){G.attr("class","only-show tooltip-legend"),G.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){G.attr("class","no-show tooltip-legend")})}var l={getDimensions:function(a){var b=document.getElementById(a),c=0,d=0;if(b){var e=b.getBBox();c=e.width,d=e.height}else console.log("error: getDimensions() "+a+" not found.");return{w:c,h:d}}},m={addTooltips:function(a){var b=a.keys,c=a.svg.append("g").selectAll("g").data(a.data).enter().append("g").attr("class",function(b,c){return a.cssPrefix+"tooltips_"+c});tooltips=c.selectAll("g").data(function(c,d){return b.map(function(b){return{key:b,value:c[b],index:b+"_"+d+"_"+c[a.yAxis]}})}).enter().append("g").attr("class",a.cssPrefix+"tooltip").attr("id",function(b,c){return a.cssPrefix+"tooltip"+b.index}).style("opacity",0).append("rect").attr("rx",2).attr("ry",2).attr("x",-2).attr("opacity",.71).style("fill","#000000"),c.selectAll("g").data(function(c,d){return b.map(function(b){return{key:b,value:c[b],index:b+"_"+d+"_"+c[a.yAxis]}})}).append("text").attr("fill",function(a){return"#efefef"}).style("font-size",function(a){return 10}).style("font-family",function(a){return"arial"}).text(function(b,c){var d=a.label.xAxis+":{value}";return m.replacePlaceholders(a,d,c,{value:b.value})}),c.selectAll("g rect").attr("width",function(b,c){return l.getDimensions(a.cssPrefix+"tooltip"+b.index).w+8}).attr("height",function(b,c){return l.getDimensions(a.cssPrefix+"tooltip"+b.index).h+8}).attr("y",function(b,c){return-l.getDimensions(a.cssPrefix+"tooltip"+b.index).h/2+1})},showTooltip:function(a,b){var c=250;m.currentTooltip===b&&(c=1),m.currentTooltip=b,d3.select("#"+a.cssPrefix+"tooltip"+b).transition().duration(c).style("opacity",function(){return 1}),m.moveTooltip(a)},moveTooltip:function(a){d3.selectAll("#"+a.cssPrefix+"tooltip"+m.currentTooltip).attr("transform",function(a){var b=d3.mouse(this.parentNode);return"translate("+(b[0]+4+2)+","+(b[1]-8-2)+")"})},hideTooltip:function(a,b){d3.select("#"+a.cssPrefix+"tooltip"+b).style("opacity",function(){return 0}),d3.select("#"+a.cssPrefix+"tooltip"+m.currentTooltip).attr("transform",function(b,c){return"translate("+(a.width+1e3)+","+(a.height+1e3)+")"})},replacePlaceholders:function(a,b,c,d){var e=function(){return function(a){var b=arguments[1];return d.hasOwnProperty(b)?d[arguments[1]]:arguments[0]}};return b.replace(/\{(\w+)\}/g,e(d))}};return{drawD3Pie:b,drawD3PieDonut:c,drawD3barChart:i,drawD3barStackedChart:j,drawD3barVerticalStackedChart:d,drawD3barHorizontalbarChart:h,drawD3lineChartV2:k}}($),bind=_.bind;requireKr=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"/KoreBot.js":[function(a,b,c){function d(){g.call(this),this.WebClient=null,this.RtmClient=null,this.options={},this.accessToken=null,this.initialized=!1,this.clients=f,this.latestId=null,this.oldestId=null}var e,f=a("./index.js"),g=a("events"),h=a("inherits");e=a("lodash").bind?a("lodash"):_;var j=e.bind,k=e.isFunction,l=f.CLIENT_EVENTS.RTM,m=f.RTM_EVENTS,n=a("./jstz.js"),o=e.noop;"undefined"!=typeof window&&(window.kore=window.kore||{},window.kore.botsdk=window.kore.botsdk||{},window.kore.botsdk.logger=window.kore.botsdk.logger||a("debug"),window.messageHistoryLimit=10);var p=a("debug")("botsdk:KoreBot"),q={city:"",country:"",latitude:0,longitude:0,street:""},r=!1;h(d,g),d.prototype.emit=function(){arguments&&"history"===arguments[0]&&this.historySyncInProgress?(arguments[2]="historysync",this.cbBotChatHistory(arguments)):!window._chatHistoryLoaded&&arguments&&"history"===arguments[0]?(r=!0,this.cbBotChatHistory(arguments)):r&&arguments&&"history"===arguments[0]&&setTimeout(function(){$(".chatInputBox").focus(),$(".disableFooter").removeClass("disableFooter")}),d.super_.prototype.emit.apply(this,arguments)},d.prototype.fetchUserLocation=function(){if(""===q.country){console.log("Fetching user location");var a=this.options,b=function(b){if(a.googleMapsAPIKey){var c=b.coords.latitude,d=b.coords.longitude;q.latitude=c,q.longitude=d;var e=new XMLHttpRequest,f="https://maps.googleapis.com/maps/api/geocode/json?latlng="+c+","+d+"&sensor=true&key="+a.googleMapsAPIKey;e.open("GET",f,!0),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var a=JSON.parse(e.responseText);"undefined"!=typeof Storage&&(0==a.results.length?a=JSON.parse(localStorage.getItem("locationData")):localStorage.setItem("locationData",JSON.stringify(a)));var b=[];for(a.results&&a.results.length&&a.results[0].address_components&&(b=a.results[0].address_components),i=0;i<b.length;i++){var c=b[i].types;"locality,political"==c?q.city=b[i].long_name:"country,political"==c?q.country=b[i].long_name:"political,sublocality,sublocality_level_2"==c&&(q.street=b[i].long_name)}}},e.send()}else console.warn("please provide google maps API key")};navigator.geolocation.getCurrentPosition(b)}},d.prototype.sendMessage=function(a,b){p("sending message to bot"),this.initialized?(a.resourceid="/bot.message",a.botInfo=this.options.botInfo||{},a.client=this.options.client||"sdk",a.meta={timezone:n.jstz.determine().name(),locale:window.navigator.userLanguage||window.navigator.language},0!==q.latitude&&0!==q.longitude&&(a.meta.location=q),this.RtmClient.sendMessage(a,b)):b&&b(new Error("Bot is Initializing...Please try again"))},d.prototype.onMessage=function(a){p("on message from bot/self"),"bot"===a.from&&"bot_response"===a.type&&(this.latestId=a.messageId||this.latestId,this.oldestId=this.oldestId||a.messageId),this.emit(m.MESSAGE,a)},d.prototype.close=function(){p("request to close ws connection"),this.RtmClient&&this.RtmClient._close()},d.prototype.destroy=function(){this.RtmClient&&this.RtmClient._close(),r=!1,this.removeAllListeners()},d.prototype.onForwardHistory=function(a,b){p("on forward history");var c={};if(c.moreAvailable=b.moreAvailable,c.messages=[],c.forward=!0,c.afterMessageId=this.latestId,b.messages&&b.messages.length>0){var d;for(d=0;d<b.messages.length;d++){var e={};e.messageId=b.messages[d]._id,this.oldestId=this.oldestId||b.messages[d]._id,this.latestId=b.messages[d]._id||this.latestId,"incoming"===b.messages[d].type?(e.from="self",e.type="user_message"):(e.from="bot",e.type="bot_response");var f=0;if(b.messages[d].components&&b.messages[d].components.length>0)for(e.message=[],f=0;f<b.messages[d].components.length;f++){var g={};g.type=b.messages[d].components[f].cT,"text"===g.type&&(g.cInfo={},g.cInfo.body=b.messages[d].components[f].data&&b.messages[d].components[f].data.text),e.message[f]=g}e.createdOn=b.messages[d].createdOn,c.messages[d]=e}}this.emit("history",c)},d.prototype.onBackWardHistory=function(a,b){p("on backword history");var c={};if(c.moreAvailable=b.moreAvailable,c.messages=[],c.backward=!0,c.beforeMessageId=this.oldestId,b.messages&&b.messages.length>0){var d;for(d=0;d<b.messages.length;d++){var e={};e.messageId=b.messages[d]._id,this.oldestId=b.messages[d]._id||this.oldestId,this.latestId=this.latestId||b.messages[d]._id,"incoming"===b.messages[d].type?(e.from="self",e.type="user_message"):(e.from="bot",e.type="bot_response",e.icon=b.icon);var f=0;if(b.messages[d].components&&b.messages[d].components.length>0)for(e.message=[],f=0;f<b.messages[d].components.length;f++){var g={};g.type=b.messages[d].components[f].cT,"text"===g.type&&(g.cInfo={},g.cInfo.body=b.messages[d].components[f].data&&b.messages[d].components[f].data.text),e.message[f]=g}e.createdOn=b.messages[d].createdOn,c.messages[d]=e}}this.emit("history",c)},d.prototype.getHistory=function(a){p("get history"),a=a||{},"undefined"!=typeof window&&(a.limit=a.limit||window.messageHistoryLimit||10);var b={};b.forward=a.forward,b.limit=a.limit||10,b.forward?this.latestId&&(b.msgId=this.latestId):this.oldestId&&(b.msgId=this.oldestId),b.botInfo=this.options.botInfo,b.authorization="bearer "+this.WebClient.user.accessToken,a.forHistorySync&&(this.historySyncInProgress=!0,delete b.msgId),b.forward?this.WebClient.history.history(b,j(this.onForwardHistory,this)):this.WebClient.history.history(b,j(this.onBackWardHistory,this))},d.prototype.sync=function(a){},d.prototype.onOpenWSConnection=function(a){p("opened WS Connection"),this.initialized=!0,this.options.loadHistory&&!r&&this.getHistory({}),this.emit(l.RTM_CONNECTION_OPENED,{})},d.prototype.onLogIn=function(a,b){p("sign-in/anonymous user onLogin"),a?(this.cbErrorToClient&&(b&&b.errors&&b.errors[0]&&b.errors[0].msg?this.cbErrorToClient(b.errors[0].msg):this.cbErrorToClient(a.message)),console.error(a&&a.stack)):(this.options&&this.options.jwtgrantSuccessCB&&this.options.jwtgrantSuccessCB(b),this.accessToken=b.authorization.accessToken,this.options.accessToken=this.accessToken,this.WebClient.user.accessToken=this.accessToken,this.userInfo=b,this.cbBotDetails(b,this.options.botInfo),this.RtmClient=new f.KoreRtmClient({},this.options),this.emit("rtm_client_initialized"),this.RtmClient.start({botInfo:this.options.botInfo}),this.RtmClient.on(m.MESSAGE,j(this.onMessage,this)),this.RtmClient.on(l.RTM_CONNECTION_OPENED,j(this.onOpenWSConnection,this)))},d.prototype.logIn=function(a,b){a?(p("error in assertionFn %s",a),console.error("error in assertionFn",a&&a.stack)):(p("signed-in user login"),this.options=b,this.claims=b.assertion,this.WebClient=new f.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.cbErrorToClient=b.handleError||o,this.cbBotDetails=b.botDetails||o,this.cbBotChatHistory=b.chatHistory||o,this.WebClient.login.login({assertion:b.assertion,botInfo:this.options.botInfo},j(this.onLogIn,this)))},d.prototype.init=function(a,b){b=b||10,b>100&&(b=100),"undefined"!=typeof window&&(window.messageHistoryLimit=b||10),a=a||{},this.options=a,this.oldestId=null,this.RtmClient=null,a.test?(p("test is true"),k(a.koreAnonymousFn)?a.koreAnonymousFn.call(this,a):(p("koreAnonymousFn is not a function"),console.error("koreAnonymousFn is not a function"))):(p("test is false"),k(a.assertionFn)?a.assertionFn(a,j(this.logIn,this)):(p("assertion is not a function"),console.error("assertion is not a function")))},b.exports.instance=function(){return r=!1,new d}},{"./index.js":1,"./jstz.js":2,debug:21,events:30,inherits:23,lodash:24}],1:[function(a,b,c){var d=a("./lib/clients/events");b.exports={KoreWebClient:a("./lib/clients/web/client"),KoreRtmClient:a("./lib/clients/rtm/client"),CLIENT_EVENTS:{WEB:d.CLIENT_EVENTS.WEB,RTM:d.CLIENT_EVENTS.RTM},RTM_EVENTS:d.RTM_EVENTS,RTM_MESSAGE_SUBTYPES:d.RTM_MESSAGE_SUBTYPES}},{"./lib/clients/events":5,"./lib/clients/rtm/client":9,"./lib/clients/web/client":18}],2:[function(a,b,c){!function(a){var b=function(){"use strict";var a="s",c=function(a){var b=-a.getTimezoneOffset();return null!==b?b:0},d=function(a,b,c){var d=new Date;return void 0!==a&&d.setFullYear(a),d.setDate(c),d.setMonth(b),d},e=function(a){return c(d(a,0,2))},f=function(a){return c(d(a,5,2))},g=function(a){return(a.getMonth()>7?f(a.getFullYear()):e(a.getFullYear()))-c(a)!=0},h=function(){var b=e(),c=f(),d=e()-f();return d<0?b+",1":d>0?c+",1,"+a:b+",0"};return{determine:function(){var a=h();return new b.TimeZone(b.olson.timezones[a])},date_is_dst:g,dst_start_for:function(a){var b=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":b,"Asia/Yekaterinburg":b,"Asia/Omsk":b,"Asia/Krasnoyarsk":b,"Asia/Irkutsk":b,"Asia/Yakutsk":b,"Asia/Vladivostok":b,"Asia/Kamchatka":b,"Europe/Minsk":b,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}[a]}}}();b.TimeZone=function(a){"use strict";var c={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},d=a,e=function(){for(var a=c[d],e=a.length,f=0,g=a[0];f<e;f+=1)if(g=a[f],b.date_is_dst(b.dst_start_for(g)))return void(d=g)};return function(){return void 0!==c[d]}()&&e(),{name:function(){return d}}},b.olson={},b.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},void 0!==c?c.jstz=b:a.jstz=b}(this)},{}],3:[function(a,b,c){function d(a,b){f.call(this),this._token=a,this.koreAPIUrl=b.koreAPIUrl||"https://app.kore.com/api/",this.reWriteSocketURL=b.reWriteSocketURL,this.transport=b.transport||n,this.userAgent,this._requestQueue=g.priorityQueue(h(this._callTransport,this),b.maxRequestConcurrency),this._createFacets()}var e,f=a("events"),g=a("async");e=a("lodash").bind?a("lodash"):_;var h=e.bind,i=a("inherits"),j=a("retry"),k=a("url-join"),l=a("./events/client").WEB,m=a("./helpers"),n=a("./transports/request").requestTransport;i(d,f),d.prototype.emit=function(){d.super_.prototype.emit.apply(this,arguments)},d.prototype._createFacets=function(){},d.prototype._callTransport=function(a,b){var c=a.args,d=a.cb,e=this,f=j.operation(this.retryConfig),g=function a(g,h,i,j){var k,m,n;if(g){if(f.retry(g))return;d(f.mainError(),null)}200!==i?429===i?(e._requestQueue.pause(),k=parseInt(h["Retry-After"],10),m=1e3*k,setTimeout(function(){e.transport(c,a),e._requestQueue.resume()},m),e.emit(l.RATE_LIMITED,k)):(n=new Error("Unable to process request, received bad "+i+" error"),d(n,j)):(j&&j.userInfo&&(window.jwtDetails=j),d(null,j)),b()};f.attempt(function(){e.transport(c,g)})},d.prototype.makeAPICall=function(a,b,c){var d=m.getAPICallArgs(this._token,b,c),e={url:k(this.koreAPIUrl,a),data:d.data,headers:{"User-Agent":this.userAgent,"content-type":"application/json"}};b&&b.opts&&b.opts.authorization&&(e.headers.Authorization=b.opts.authorization,delete e.data.authorization),this._requestQueue.push({args:e,cb:d.cb})},b.exports=d},{"./events/client":4,"./helpers":8,"./transports/request":10,async:19,events:30,inherits:23,lodash:24,retry:26,"url-join":29}],4:[function(a,b,c){b.exports.WEB={RATE_LIMITED:"rate_limited"},b.exports.RTM={CONNECTING:"connecting",AUTHENTICATED:"authenticated",WS_OPENING:"ws_opening",WS_OPENED:"ws_opened",RTM_CONNECTION_OPENED:"open",DISCONNECT:"disconnect",UNABLE_TO_RTM_START:"unable_to_rtm_start",WS_CLOSE:"ws_close",WS_ERROR:"ws_error",ATTEMPTING_RECONNECT:"attempting_reconnect",RAW_MESSAGE:"raw_message"}},{}],5:[function(a,b,c){b.exports={CLIENT_EVENTS:{WEB:a("./client").WEB,RTM:a("./client").RTM},RTM_EVENTS:a("./rtm").EVENTS,RTM_MESSAGE_SUBTYPES:a("./rtm").MESSAGE_SUBTYPES}},{"./client":4,"./rtm":6}],6:[function(a,b,c){b.exports.EVENTS={HELLO:"hello",MESSAGE:"message"},b.exports.MESSAGE_SUBTYPES={BOT_MESSAGE:"bot_message",ME_MESSAGE:"me_message"}},{}],7:[function(a,b,c){var d=a("./rtm").EVENTS,e=function(a,b){return[d.MESSAGE,a].join(b||"::")};b.exports.makeMessageEventWithSubtype=e},{"./rtm":6}],8:[function(a,b,c){var d;d=a("lodash").bind?a("lodash"):_;var e=d.assign,f=d.isFunction,g=d.isUndefined,h=d.isString,i=d.forEach,j=function(a,b){var c=e({},a?a.opts||{}:{});return i(a||{},function(a,b){g(a)||null===a||"opts"===b||("attachments"===b?h(a)?c[b]=a:c[b]=JSON.stringify(a):c[b]=a)}),b&&(c.token=b),c},k=function(a,b,c){var d,e;return 1===arguments.length?(e=noop,d=j({},a)):2===arguments.length?f(arguments[1])?(e=arguments[1],d=j({},a)):(e=noop,d=j(b,a)):3===arguments.length&&(e=c||noop,d=j(b,a)),{cb:e,data:d}};b.exports.getData=j,b.exports.getAPICallArgs=k},{lodash:24}],9:[function(a,b,c){function d(a,b){var c=b||{};c.maxRequestConcurrency=1,p.call(this,a,c),this._socketFn=c.socketFn||s,this.ws=void 0,this.MAX_RECONNECTION_ATTEMPTS=c.maxReconnectionAttempts||10,this.RECONNECTION_BACKOFF=c.reconnectionBackoff||3e3,this.MAX_PONG_INTERVAL=c.maxPongInterval||1e4,this.WS_PING_INTERVAL=c.wsPingInterval||5e3,this.autoReconnect=!1!==c.autoReconnect,this.connected=!1,this.authenticated=!1,this.activeUserId=void 0,this._pendingMessages={},this._connAttempts=0,this._connecting=!1,this._reconnecting=!1,c.hasOwnProperty("_reconnecting")&&c._reconnecting&&(this._reconnecting=c._reconnecting,c._reconnecting=!1),this.user={},this.user.accessToken=c.accessToken,this.botInfo=c.botInfo||{}}var e;e=a("lodash").bind?a("lodash"):_;var f=e.bind,g=e.cloneDeep,h=e.contains,i=a("inherits"),j=e.isUndefined,k=a("debug")("botsdk:KoreRTMClient"),l=a("../events/rtm").EVENTS,m=["pong",l.HELLO],n=["not_authed","invalid_auth","account_inactive","token_expired"],o=a("../events/client").RTM,p=a("../client"),q=a("../web/apis").RtmApi,r=a("../events/utils").makeMessageEventWithSubtype,s=a("../transports/ws");i(d,p),d.prototype._createFacets=function(){d.super_.prototype._createFacets.call(this),this._rtm=new q(this)},d.prototype.start=function(a){this._connecting||(this.emit(o.CONNECTING),this._connecting=!0,a=a||{botInfo:this.botInfo},a.authorization="bearer "+this.user.accessToken,this._rtm.start(a,f(this._onStart,this)))},d.prototype.nextMessageId=function(){return this._messageId=this._messageId||1,this._messageId++},d.prototype._onStart=function(a,b){var c,d=!!this._reconnecting;this._connecting=!1,this._reconnecting=!1;try{b=b}catch(a){console.log(a&&a.stack)}b&&b.errors&&("TOKEN_EXPIRED"===b.errors[0].code||401===b.errors[0].code||"token expired"===b.errors[0].msg)&&($(".reload-btn").trigger("click",{isReconnect:!0}),b.error="token_expired"),a||!b.url?(k("error or no url in response %s",a||"no url"),this.emit(o.UNABLE_TO_RTM_START,a||b.error),b&&h(n,b.error)?(c="unrecoverable failure connecting to the RTM API",this.disconnect(c,b.error)):(this.authenticated=!1,this.autoReconnect&&this.reconnect())):(d&&(b.url=b.url+"&isReconnect=true"),this.authenticated=!0,this.emit(o.AUTHENTICATED,b),this.connect(b.url))},d.prototype._close=function(){this.autoReconnect=!1,this._safeDisconnect()},d.prototype._safeDisconnect=function(){this.ws&&this.ws.close(),this.authenticated=!1,this.connected=!1},d.prototype.reWriteURL=function(a){if(this.reWriteSocketURL){var b=document.createElement("a");b.href=a,this.reWriteSocketURL.protocol&&(b.protocol=this.reWriteSocketURL.protocol),this.reWriteSocketURL.hostname&&(b.hostname=this.reWriteSocketURL.hostname),this.reWriteSocketURL.port&&(b.port=this.reWriteSocketURL.port),a=b.href}return a},d.prototype.connect=function(a){k("connecting"),this.emit(o.WS_OPENING,{}),a=this.reWriteURL(a),this.ws=this._socketFn(a),this.ws.onopen=f(this.handleWsOpen,this),this.ws.onmessage=f(this.handleWsMessage,this),this.ws.onerror=f(this.handleWsError,this),this.ws.onclose=f(this.handleWsClose,this),this.ws.onping=f(this.handleWsPing,this)},d.prototype.disconnect=function(a,b){k("disconnecting"),this.emit(o.DISCONNECT,a,b),this.autoReconnect=!1,this._safeDisconnect()},d.prototype.reconnect=function(){if(k("reconnecting"),console.log("in reconnect"),!this._reconnecting){if(this._reconnecting=!0,this.emit(o.ATTEMPTING_RECONNECT),this._safeDisconnect(),++this._connAttempts>this.MAX_RECONNECTION_ATTEMPTS)throw new Error("unable to connect to kore.ai RTM API, failed after max reconnection attempts");setTimeout(f(this.start,this),this._connAttempts*this.RECONNECTION_BACKOFF)}},d.prototype.handleWsOpen=function(){k("connected"),this.connected=!0,this.emit("open",{data:{}}),this._connAttempts=0},d.prototype.handleWsMessage=function(a){var b;this.emit("message",a);try{b=JSON.parse(a)}catch(a){return}h(m,b.type)?this._handleWsMessageInternal(b.type,b):this._handleWsMessageViaEventHandler(b.type,b)},d.prototype._handleWsMessageInternal=function(a,b){a===l.HELLO&&this._handleHello()},d.prototype._handleWsMessageViaEventHandler=function(a,b){var c;if(a===l.MESSAGE&&(c=b.reply_to)){if(!this._pendingMessages[c])return;delete this._pendingMessages[c]}this.emit(a,b),a!==l.MESSAGE||j(b.subtype)||this.emit(r(b.subtype),b)},d.prototype.handleWsError=function(a){k("web socket error::%s",a),this.emit(o.WS_ERROR,a)},d.prototype.handleWsClose=function(a,b){this.connected=!1,this.emit(o.WS_CLOSE,a,b),this.autoReconnect?this._connecting||this.reconnect():(k("websocket closed with auto-reconnect false on the RTM client"),this.disconnect("websocket closed with auto-reconnect false on the RTM client"))},d.prototype.handleWsPing=function(){this.ws.pong&&this.ws.pong()},d.prototype._handleHello=function(){this.connected=!0,this.emit(o.RTM_CONNECTION_OPENED)},d.prototype.sendMessage=function(a,b){this.send(a,b)},d.prototype.send=function(a,b){var c,d,e=g(a);this.connected&&!this._reconnecting?(e.id=e.clientMessageId||this.nextMessageId(),c=JSON.stringify(e),this._pendingMessages[e.id]=e,this.ws.send(c,void 0,function(a){j(a),j(b)||b(a)})):(d="ws not connected or reconnecting, unable to send message",k(d),j(b)||b(new Error(d)))},b.exports=d},{"../client":3,"../events/client":4,"../events/rtm":6,"../events/utils":7,"../transports/ws":11,"../web/apis":15,debug:21,inherits:23,lodash:24}],10:[function(a,b,c){var d;d=a("lodash").bind?a("lodash"):_;var e=d.has,f=d.partial,g=a("browser-request"),h=function(a,b,c,d){var e,f;b?(e=c?c.headers||{}:{},f=c?c.statusCode||null:null,a(b,e,f,d)):a(b,c.headers,c.statusCode,d)},i=function(a){var b={url:a.url,headers:a.headers};return e(a.data,"file")?b.formData=a.data:b.json=a.data,b},j=function(a,b){var c=i(a);a.data&&a.data.type&&"GET"===a.data.type?g.get(c,f(h,b)):g.post(c,f(h,b))};b.exports.requestTransport=j},{"browser-request":20,lodash:24}],11:[function(a,b,c){var d=function(a,b){return new WebSocket(a)};b.exports=d},{}],12:[function(a,b,c){function d(){}b.exports=d},{}],13:[function(a,b,c){function d(a){this.name="anonymouslogin",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.login=function(a,b){a=a||{};var c={opts:a};return this.client.makeAPICall("/oAuth/token/jwtgrant/anonymous",c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],14:[function(a,b,c){function d(a){this.name="history",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.history=function(a,b){a=a||{};var c={opts:a,type:"GET"},d="/botmessages/rtm",e=!1,f="?";return a.botInfo&&a.botInfo.taskBotId&&(!1===e?(d+=f+"botId="+a.botInfo.taskBotId,f="&",e=!0):d+=f+"botId="+a.botInfo.taskBotId,delete a.botInfo),a.offset&&(!1===e?(d+=f+"offset="+a.offset,f="&",e=!0):d+=f+"offset="+a.offset,delete a.offset),a.limit&&(!1===e?(d+=f+"limit="+a.limit,f="&",e=!0):d+=f+"limit="+a.limit,delete a.limit),a.forward&&(!1===e?(d+=f+"forward="+a.forward,f="&",e=!0):d+=f+"forward="+a.forward,delete a.forward),a.msgId&&(!1===e?(d+=f+"msgId="+a.msgId,f="&",e=!0):d+=f+"msgId="+a.msgId,delete a.msgId),this.client.makeAPICall(d,c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],15:[function(a,b,c){b.exports={RtmApi:a("./rtm.js"),LogInApi:a("./login.js"),AnonymousLogin:a("./anonymouslogin.js"),HistoryApi:a("./history.js")}},{"./anonymouslogin.js":13,"./history.js":14,"./login.js":16,"./rtm.js":17}],16:[function(a,b,c){function d(a){this.name="login",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.login=function(a,b){a=a||{};var c={opts:a};return this.client.makeAPICall("/oAuth/token/jwtgrant",c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],17:[function(a,b,c){function d(a){this.name="rtm",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.start=function(a,b){var c={opts:a};return this.client.makeAPICall("/rtm/start",c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],18:[function(a,b,c){function d(a,b){var c=b||{};i.call(this,a,c),this.claims=b.claims,this.retryConfig=c.retryConfig||{retries:5,factor:3.9},this.user={}}var e;e=a("lodash").bind?a("lodash"):_;var f=e.bind,g=e.forEach,h=a("inherits"),i=a("../client"),j=a("./apis/index");h(d,i),d.prototype._createFacets=function(){var a;d.super_.prototype._createFacets.call(this),f(this.makeAPICall,this),g(j,function(b){a=new b(this),this[a.name]=a},this)},b.exports=d},{"../client":3,"./apis/index":15,inherits:23,lodash:24}],19:[function(a,b,c){(function(a,c){!function(){function d(){}function e(a){return a}function f(a){return!!a}function g(a){return!a}function h(a){return function(){if(null===a)throw new Error("Callback was already called.");a.apply(this,arguments),a=null}}function i(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function j(a){return N(a)||"number"==typeof a.length&&a.length>=0&&a.length%1==0}function k(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function l(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function m(a){return l(Array(a),function(a,b){return b})}function n(a,b,c){return k(a,function(a,d,e){c=b(c,a,d,e)}),c}function o(a,b){k(P(a),function(c){b(a[c],c)})}function p(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function q(a){var b,c,d=-1;return j(a)?(b=a.length,function(){return d++,d<b?d:null}):(c=P(a),b=c.length,function(){return d++,d<b?c[d]:null})}function r(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;e<c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d)}}}function s(a){return function(b,c,d){return a(b,d)}}function t(a){return function(b,c,e){e=i(e||d),b=b||[];var f=q(b);if(a<=0)return e(null);var g=!1,j=0,k=!1;!function d(){if(g&&j<=0)return e(null);for(;j<a&&!k;){var i=f();if(null===i)return g=!0,void(j<=0&&e(null));j+=1,c(b[i],i,h(function(a){j-=1,a?(e(a),k=!0):d()}))}}()}}function u(a){return function(b,c,d){return a(K.eachOf,b,c,d)}}function v(a){return function(b,c,d,e){return a(t(c),b,d,e)}}function w(a){return function(b,c,d){return a(K.eachOfSeries,b,c,d)}}function x(a,b,c,e){e=i(e||d),b=b||[];var f=j(b)?[]:{};a(b,function(a,b,d){c(a,function(a,c){f[b]=c,d(a)})},function(a){e(a,f)})}function y(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&&e.push({index:b,value:a}),d()})},function(){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function z(a,b,c,d){y(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function A(a,b,c){return function(d,e,f,g){function h(){g&&g(c(!1,void 0))}function i(a,d,e){if(!g)return e();f(a,function(d){g&&b(d)&&(g(c(!0,a)),g=f=!1),e()})}arguments.length>3?a(d,e,i,h):(g=f,f=e,a(d,i,h))}}function B(a,b){return b}function C(a,b,c){c=c||d;var e=j(b)?[]:{};a(b,function(a,b,c){a(r(function(a,d){d.length<=1&&(d=d[0]),e[b]=d,c(a)}))},function(a){c(a,e)})}function D(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function E(a,b,c){function e(a,b,c,e){if(null!=e&&"function"!=typeof e)throw new Error("task callback must be a function");if(a.started=!0,N(b)||(b=[b]),0===b.length&&a.idle())return K.setImmediate(function(){a.drain()});k(b,function(b){var f={data:b,callback:e||d};c?a.tasks.unshift(f):a.tasks.push(f),a.tasks.length===a.concurrency&&a.saturated()}),K.setImmediate(a.process)}function f(a,b){return function(){g-=1;var c=!1,d=arguments;k(b,function(a){k(i,function(b,d){b!==a||c||(i.splice(d,1),c=!0)}),a.callback.apply(a,d)}),a.tasks.length+g===0&&a.drain(),a.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,i=[],j={tasks:[],concurrency:b,payload:c,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(a,b){e(j,a,!1,b)},kill:function(){j.drain=d,j.tasks=[]},unshift:function(a,b){e(j,a,!0,b)},process:function(){for(;!j.paused&&g<j.concurrency&&j.tasks.length;){var b=j.payload?j.tasks.splice(0,j.payload):j.tasks.splice(0,j.tasks.length),c=l(b,function(a){return a.data});0===j.tasks.length&&j.empty(),g+=1,i.push(b[0]);var d=h(f(j,b));a(c,d)}},length:function(){return j.tasks.length},running:function(){return g},workersList:function(){return i},idle:function(){return j.tasks.length+g===0},pause:function(){j.paused=!0},resume:function(){if(!1!==j.paused){j.paused=!1;for(var a=Math.min(j.concurrency,j.tasks.length),b=1;b<=a;b++)K.setImmediate(j.process)}}};return j}function F(a){return r(function(b,c){b.apply(null,c.concat([r(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&k(c,function(b){console[a](b)}))})]))})}function G(a){return function(b,c,d){a(m(b),c,d)}}function H(a){return r(function(b,c){var d=r(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function I(a){return r(function(b){var c=b.pop();b.push(function(){var a=arguments;d?K.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b),d=!1})}var J,K={},L="object"==typeof self&&self.self===self&&self||"object"==typeof c&&c.global===c&&c||this;null!=L&&(J=L.async),K.noConflict=function(){return L.async=J,K};var M=Object.prototype.toString,N=Array.isArray||function(a){return"[object Array]"===M.call(a)},O=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},P=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},Q="function"==typeof setImmediate&&setImmediate,R=Q?function(a){Q(a)}:function(a){setTimeout(a,0)};"object"==typeof a&&"function"==typeof a.nextTick?K.nextTick=a.nextTick:K.nextTick=R,K.setImmediate=Q?R:K.nextTick,K.forEach=K.each=function(a,b,c){return K.eachOf(a,s(b),c)},K.forEachSeries=K.eachSeries=function(a,b,c){return K.eachOfSeries(a,s(b),c)},K.forEachLimit=K.eachLimit=function(a,b,c,d){return t(b)(a,s(c),d)},K.forEachOf=K.eachOf=function(a,b,c){function e(a){j--,a?c(a):null===f&&j<=0&&c(null)}c=i(c||d),a=a||[];for(var f,g=q(a),j=0;null!=(f=g());)j+=1,b(a[f],f,h(e));0===j&&c(null)},K.forEachOfSeries=K.eachOfSeries=function(a,b,c){function e(){var d=!0;if(null===g)return c(null);b(a[g],g,h(function(a){if(a)c(a);else{if(null===(g=f()))return c(null);d?K.setImmediate(e):e()}})),d=!1}c=i(c||d),a=a||[];var f=q(a),g=f();e()},K.forEachOfLimit=K.eachOfLimit=function(a,b,c,d){t(b)(a,c,d)},K.map=u(x),K.mapSeries=w(x),K.mapLimit=v(x),K.inject=K.foldl=K.reduce=function(a,b,c,d){K.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})},K.foldr=K.reduceRight=function(a,b,c,d){var f=l(a,e).reverse();K.reduce(f,b,c,d)},K.transform=function(a,b,c,d){3===arguments.length&&(d=c,c=b,b=N(a)?[]:{}),K.eachOf(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})},K.select=K.filter=u(y),K.selectLimit=K.filterLimit=v(y),K.selectSeries=K.filterSeries=w(y),K.reject=u(z),K.rejectLimit=v(z),K.rejectSeries=w(z),K.any=K.some=A(K.eachOf,f,e),K.someLimit=A(K.eachOfLimit,f,e),K.all=K.every=A(K.eachOf,g,g),K.everyLimit=A(K.eachOfLimit,g,g),K.detect=A(K.eachOf,e,B),K.detectSeries=A(K.eachOfSeries,e,B),K.detectLimit=A(K.eachOfLimit,e,B),K.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}K.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);c(null,l(b.sort(d),function(a){return a.value}))})},K.auto=function(a,b,c){function e(a){s.unshift(a)}function f(a){var b=p(s,a);b>=0&&s.splice(b,1)}function g(){j--,k(s.slice(0),function(a){a()})}"function"==typeof arguments[1]&&(c=b,b=null),c=i(c||d);var h=P(a),j=h.length;if(!j)return c(null);b||(b=j);var l={},m=0,q=!1,s=[];e(function(){j||c(null,l)}),k(h,function(d){function h(){return m<b&&n(t,function(a,b){return a&&l.hasOwnProperty(b)},!0)&&!l.hasOwnProperty(d)}function i(){h()&&(m++,f(i),k[k.length-1](s,l))}if(!q){for(var j,k=N(a[d])?a[d]:[a[d]],s=r(function(a,b){if(m--,b.length<=1&&(b=b[0]),a){var e={};o(l,function(a,b){e[b]=a}),e[d]=b,q=!0,c(a,e)}else l[d]=b,K.setImmediate(g)}),t=k.slice(0,k.length-1),u=t.length;u--;){if(!(j=a[t[u]]))throw new Error("Has nonexistent dependency in "+t.join(", "));if(N(j)&&p(j,d)>=0)throw new Error("Has cyclic dependencies")}h()?(m++,k[k.length-1](s,l)):e(i)}})},K.retry=function(a,b,c){function d(a,b){if("number"==typeof b)a.times=parseInt(b,10)||f;else{if("object"!=typeof b)throw new Error("Unsupported argument type for 'times': "+typeof b);a.times=parseInt(b.times,10)||f,a.interval=parseInt(b.interval,10)||g}}function e(a,b){function c(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}function d(a){return function(b){setTimeout(function(){b(null)},a)}}for(;i.times;){var e=!(i.times-=1);h.push(c(i.task,e)),!e&&i.interval>0&&h.push(d(i.interval))}K.series(h,function(b,c){c=c[c.length-1],(a||i.callback)(c.err,c.result)})}var f=5,g=0,h=[],i={times:f,interval:g},j=arguments.length;if(j<1||j>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return j<=2&&"function"==typeof a&&(c=b,b=a),"function"!=typeof a&&d(i,a),i.callback=c,i.task=b,i.callback?e():e},K.waterfall=function(a,b){function c(a){return r(function(d,e){if(d)b.apply(null,[d].concat(e));else{var f=a.next();f?e.push(c(f)):e.push(b),I(a).apply(null,e)}})}if(b=i(b||d),!N(a)){var e=new Error("First argument to waterfall must be an array of functions");return b(e)}if(!a.length)return b();c(K.iterator(a))()},K.parallel=function(a,b){C(K.eachOf,a,b)},K.parallelLimit=function(a,b,c){C(t(b),a,c)},K.series=function(a,b){C(K.eachOfSeries,a,b)},K.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},K.apply=r(function(a,b){return r(function(c){return a.apply(null,b.concat(c))})}),K.concat=u(D),K.concatSeries=w(D),K.whilst=function(a,b,c){if(c=c||d,a()){var e=r(function(d,f){d?c(d):a.apply(this,f)?b(e):c.apply(null,[null].concat(f))});b(e)}else c(null)},K.doWhilst=function(a,b,c){var d=0;return K.whilst(function(){return++d<=1||b.apply(this,arguments)},a,c)},K.until=function(a,b,c){return K.whilst(function(){return!a.apply(this,arguments)},b,c)},K.doUntil=function(a,b,c){return K.doWhilst(a,function(){return!b.apply(this,arguments)},c)},K.during=function(a,b,c){c=c||d;var e=r(function(b,d){b?c(b):(d.push(f),a.apply(this,d))}),f=function(a,d){a?c(a):d?b(e):c(null)};a(f)},K.doDuring=function(a,b,c){var d=0;K.during(function(a){d++<1?a(null,!0):b.apply(this,arguments)},a,c)},K.queue=function(a,b){return E(function(b,c){a(b[0],c)},b,1)},K.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,e=a.length-1;d<e;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function f(a,b,f,g){if(null!=g&&"function"!=typeof g)throw new Error("task callback must be a function");if(a.started=!0,N(b)||(b=[b]),0===b.length)return K.setImmediate(function(){a.drain()});k(b,function(b){var h={data:b,priority:f,callback:"function"==typeof g?g:d};a.tasks.splice(e(a.tasks,h,c)+1,0,h),a.tasks.length===a.concurrency&&a.saturated(),K.setImmediate(a.process)})}var g=K.queue(a,b);return g.push=function(a,b,c){f(g,a,b,c)},delete g.unshift,g},K.cargo=function(a,b){return E(a,1,b)},K.log=F("log"),K.dir=F("dir"),K.memoize=function(a,b){var c={},d={},f=Object.prototype.hasOwnProperty;b=b||e;var g=r(function(e){var g=e.pop(),h=b.apply(null,e);f.call(c,h)?K.setImmediate(function(){g.apply(null,c[h])}):f.call(d,h)?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([r(function(a){c[h]=a;var b=d[h];delete d[h];for(var e=0,f=b.length;e<f;e++)b[e].apply(null,a)})])))});return g.memo=c,g.unmemoized=a,g},K.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},K.times=G(K.map),K.timesSeries=G(K.mapSeries),K.timesLimit=function(a,b,c,d){return K.mapLimit(m(a),b,c,d)},K.seq=function(){var a=arguments;return r(function(b){var c=this,e=b[b.length-1];"function"==typeof e?b.pop():e=d,K.reduce(a,b,function(a,b,d){b.apply(c,a.concat([r(function(a,b){d(a,b)})]))},function(a,b){e.apply(c,[a].concat(b))})})},K.compose=function(){return K.seq.apply(null,Array.prototype.reverse.call(arguments))},K.applyEach=H(K.eachOf),K.applyEachSeries=H(K.eachOfSeries),K.forever=function(a,b){function c(a){if(a)return e(a);f(c)}var e=h(b||d),f=I(a);c()},K.ensureAsync=I,K.constant=r(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}}),K.wrapSync=K.asyncify=function(a){return r(function(b){var c,d=b.pop();try{c=a.apply(this,b)}catch(a){return d(a)}O(c)&&"function"==typeof c.then?c.then(function(a){d(null,a)}).catch(function(a){d(a.message?a:new Error(a))}):d(null,c)})},"object"==typeof b&&b.exports?b.exports=K:"function"==typeof define&&define.amd?define([],function(){return K}):L.async=K}()}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:31}],20:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?b.exports=d():"object"==typeof c?b.exports=d():a.returnExports=d()}(this,function(){function a(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var h=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=h,e.verbose&&(a.log=d()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],j=0;j<i.length;j++)if(e[i[j]])throw new Error("options."+i[j]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||a.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body)));var k=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};if(e.qs){var l="string"==typeof e.qs?e.qs:k(e.qs);-1!==e.uri.indexOf("?")?e.uri=e.uri+"&"+l:e.uri=e.uri+"?"+l}var m=function(a){var b={};b.boundry="-------------------------------"+Math.floor(1e9*Math.random());var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push("--"+b.boundry+'\nContent-Disposition: form-data; name="'+d+'"\n\n'+a[d]+"\n");return c.push("--"+b.boundry+"--"),b.body=c.join(""),b.length=b.body.length,b.type="multipart/form-data; boundary="+b.boundry,b};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var n=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(e.headers["content-type"]=n,n){case"application/x-www-form-urlencoded":e.body=k(e.form).replace(/%20/g,"+");break;case"multipart/form-data":var o=m(e.form);e.body=o.body,e.headers["content-type"]=o.type;break;default:throw new Error("unsupported encoding:"+n)}}}return e.onResponse=e.onResponse||c,!0===e.onResponse&&(e.onResponse=f,e.callback=c),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+g(e.auth.username+":"+e.auth.password)),b(e)}function b(b){function c(){l=!0;var c=new Error("ETIMEDOUT");return c.code="ETIMEDOUT",c.duration=b.timeout,a.log.error("Timeout",{id:k._id,milliseconds:b.timeout}),b.callback(c,k)}function d(b){if(l)return a.log.debug("Ignoring timed out state change",{state:k.readyState,id:k.id});a.log.debug("State change",{state:k.readyState,id:k.id,timed_out:l}),k.readyState===h.OPENED?a.log.debug("Request started",{id:k.id}):k.readyState===h.HEADERS_RECEIVED?e():k.readyState===h.LOADING?(e(),g()):k.readyState===h.DONE&&(e(),g(),j())}function e(){if(!p.response){if(p.response=!0,a.log.debug("Got response",{id:k.id,status:k.status}),clearTimeout(k.timeoutTimer),k.statusCode=k.status,m&&0==k.statusCode){var c=new Error("CORS request rejected: "+b.uri);return c.cors="rejected",p.loading=!0,p.end=!0,b.callback(c,k)}b.onResponse(null,k)}}function g(){p.loading||(p.loading=!0,a.log.debug("Response body loading",{id:k.id}))}function j(){if(!p.end){if(p.end=!0,a.log.debug("Request done",{id:k.id}),k.body=k.responseText,b.json)try{k.body=JSON.parse(k.responseText)}catch(a){return b.callback(a,k)}b.callback(null,k,k.body)}}var k=new h,l=!1,m=f(b.uri),n="withCredentials"in k;if(i+=1,k.seq_id=i,k.id=i+": "+b.method+" "+b.uri,k._id=k.id,m&&!n){var o=new Error("Browser does not support cross-origin request: "+b.uri);return o.cors="unsupported",b.callback(o,k)}k.timeoutTimer=setTimeout(c,b.timeout);var p={response:!1,loading:!1,end:!1};k.onreadystatechange=d,k.open(b.method,b.uri,!0);for(var q in b.headers)k.setRequestHeader(q,b.headers[q]);return m&&(k.withCredentials=!!b.withCredentials),k.send(b.body),k}function c(){}function d(){var a,b,d={},f=["trace","debug","info","warn","error"];for(b=0;b<f.length;b++)a=f[b],d[a]=c,"undefined"!=typeof console&&console&&console[a]&&(d[a]=e(console,a));return d}function e(a,b){function c(c,d){return"object"==typeof d&&(c+=" "+JSON.stringify(d)),a[b].call(a,c)}return c}function f(a){var b,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{b=location.href}catch(a){b=document.createElement("a"),b.href="",b=b.href}var d=c.exec(b.toLowerCase())||[],e=c.exec(a.toLowerCase());return!(!e||e[1]==d[1]&&e[2]==d[2]&&(e[3]||("http:"===e[1]?80:443))==(d[3]||("http:"===d[1]?80:443)))}function g(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do{b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h)}while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");a.log={trace:c,debug:c,info:c,warn:c,error:c};var i=0;return a.withCredentials=!1,a.DEFAULT_TIMEOUT=12e4,a.defaults=function(b,c){var d=function(a){return function(c,d){c="string"==typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in b)void 0===c[e]&&(c[e]=b[e]);return a(c,d)}},e=d(a);return e.get=d(a.get),e.post=d(a.post),e.put=d(a.put),e.head=d(a.head),e},["get","put","post","head"].forEach(function(b){var c=b.toUpperCase();a[b.toLowerCase()]=function(b){"string"==typeof b?b={method:c,uri:b}:(b=JSON.parse(JSON.stringify(b)),b.method=c);var d=[b].concat(Array.prototype.slice.apply(arguments,[1]));return a.apply(this,d)}}),a.couch=function(b,d){function e(a,b,c){if(a)return d(a,b,c);if((b.statusCode<200||b.statusCode>299)&&c.error){a=new Error("CouchDB error: "+(c.error.reason||c.error.error));for(var e in c)a[e]=c[e];return d(a,b,c)}return d(a,b,c)}return"string"==typeof b&&(b={uri:b}),b.json=!0,b.body&&(b.json=b.body),delete b.body,d=d||c,a(b,e)},a})},{}],21:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function h(){var a;try{a=c.storage.debug}catch(a){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":22}],22:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g)),(e.log||c.log||console.log.bind(console)).apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:25}],23:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],24:[function(a,b,c){(function(a){(function(){function d(a,b){if(a!==b){var c=null===a,d=a===z,e=a===a,f=null===b,g=b===z,h=b===b;if(a>b&&!f||!e||c&&!g&&h||d&&h)return 1;if(a<b&&!c||!h||f&&!d&&e||g&&e)return-1}return 0}function e(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function f(a,b,c){if(b!==b)return q(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function g(a){return"function"==typeof a||!1}function h(a){return null==a?"":a+""}function i(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function j(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function k(a,b){return d(a.criteria,b.criteria)||a.index-b.index}function l(a,b,c){for(var e=-1,f=a.criteria,g=b.criteria,h=f.length,i=c.length;++e<h;){var j=d(f[e],g[e]);if(j){if(e>=i)return j;var k=c[e];return j*("asc"===k||!0===k?1:-1)}}return a.index-b.index}function m(a){return Sa[a]}function n(a){return Ta[a]}function o(a,b,c){return b?a=Wa[a]:c&&(a=Xa[a]),"\\"+a}function p(a){return"\\"+Xa[a]}function q(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function r(a){return!!a&&"object"==typeof a}function s(a){return a<=160&&a>=9&&a<=13||32==a||160==a||5760==a||6158==a||a>=8192&&(a<=8202||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function t(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=S,f[++e]=c);return f}function u(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function v(a){for(var b=-1,c=a.length;++b<c&&s(a.charCodeAt(b)););return b}function w(a){for(var b=a.length;b--&&s(a.charCodeAt(b)););return b}function x(a){return Ua[a]}function y(a){function b(a){if(r(a)&&!Ch(a)&&!(a instanceof Z)){if(a instanceof s)return a;if(ag.call(a,"__chain__")&&ag.call(a,"__wrapped__"))return md(a)}return new s(a)}function c(){}function s(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Z(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bg,this.__views__=[]}function ba(){var a=new Z(this.__wrapped__);return a.__actions__=ab(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ab(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ab(this.__views__),a}function da(){if(this.__filtered__){var a=new Z(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Sa(){var a=this.__wrapped__.value(),b=this.__dir__,c=Ch(a),d=b<0,e=c?a.length:0,f=Tc(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=wg(i,this.__takeCount__);if(!c||e<O||e==i&&n==i)return cc(d&&c?a.reverse():a,this.__actions__);var o=[];a:for(;i--&&m<n;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==Q)q=u;else if(!u){if(t==P)continue a;break a}}o[m++]=q}return o}function Ta(){this.__data__={}}function Ua(a){return this.has(a)&&delete this.__data__[a]}function Va(a){return"__proto__"==a?z:this.__data__[a]}function Wa(a){return"__proto__"!=a&&ag.call(this.__data__,a)}function Xa(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Ya(a){var b=a?a.length:0;for(this.data={hash:qg(null),set:new kg};b--;)this.push(a[b])}function Za(a,b){var c=a.data;return("string"==typeof b||He(b)?c.set.has(b):c.hash[b])?0:-1}function $a(a){var b=this.data;"string"==typeof a||He(a)?b.set.add(a):b.hash[a]=!0}function _a(a,b){for(var c=-1,d=a.length,e=-1,f=b.length,g=Of(d+f);++c<d;)g[c]=a[c];for(;++e<f;)g[c++]=b[e];return g}function ab(a,b){var c=-1,d=a.length;for(b||(b=Of(d));++c<d;)b[c]=a[c];return b}function bb(a,b){for(var c=-1,d=a.length;++c<d&&!1!==b(a[c],c,a););return a}function eb(a,b){for(var c=a.length;c--&&!1!==b(a[c],c,a););return a}function fb(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function gb(a,b,c,d){for(var e=-1,f=a.length,g=d,h=g;++e<f;){var i=a[e],j=+b(i);c(j,g)&&(g=j,h=i)}return h}function hb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function ib(a,b){for(var c=-1,d=a.length,e=Of(d);++c<d;)e[c]=b(a[c],c,a);return e}function jb(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function kb(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function lb(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function mb(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function nb(a,b){for(var c=a.length,d=0;c--;)d+=+b(a[c])||0;return d}function ob(a,b){return a===z?b:a}function pb(a,b,c,d){return a!==z&&ag.call(d,c)?a:b}function qb(a,b,c){for(var d=-1,e=Nh(b),f=e.length;++d<f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==z||g in a)||(a[g]=i)}return a}function rb(a,b){return null==b?a:tb(b,Nh(b),a)}function sb(a,b){for(var c=-1,d=null==a,e=!d&&Yc(a),f=e?a.length:0,g=b.length,h=Of(g);++c<g;){var i=b[c];h[c]=e?Zc(i,f)?a[i]:z:d?z:a[i]}return h}function tb(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function ub(a,b,c){var d=typeof a;return"function"==d?b===z?a:fc(a,b,c):null==a?Bf:"object"==d?Nb(a):b===z?Hf(a):Ob(a,b)}function vb(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==z)return h;if(!He(a))return a;var i=Ch(a);if(i){if(h=Uc(a),!b)return ab(a,h)}else{var j=cg.call(a),k=j==Y;if(j!=_&&j!=T&&(!k||e))return Ra[j]?Wc(a,j,b):e?a:{};if(h=Vc(k?{}:a),!b)return rb(h,a)}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?bb:Fb)(a,function(d,e){h[e]=vb(d,b,c,e,a,f,g)}),h}function wb(a,b,c){if("function"!=typeof a)throw new Xf(R);return lg(function(){a.apply(z,c)},b)}function xb(a,b){var c=a?a.length:0,d=[];if(!c)return d;var e=-1,g=Qc(),h=g==f,i=h&&b.length>=O?oc(b):null,j=b.length;i&&(g=Za,h=!1,b=i);a:for(;++e<c;){var k=a[e];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;d.push(k)}else g(b,k,0)<0&&d.push(k)}return d}function yb(a,b){var c=!0;return Jg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function zb(a,b,c,d){var e=d,f=e;return Jg(a,function(a,g,h){var i=+b(a,g,h);(c(i,e)||i===d&&i===f)&&(e=i,f=a)}),f}function Ab(a,b,c,d){var e=a.length;for(c=null==c?0:+c||0,c<0&&(c=-c>e?0:e+c),d=d===z||d>e?e:+d||0,d<0&&(d+=e),e=c>d?0:d>>>0,c>>>=0;c<e;)a[c++]=b;return a}function Bb(a,b){var c=[];return Jg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Cb(a,b,c,d){var e;return c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1}),e}function Db(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e<f;){var g=a[e];r(g)&&Yc(g)&&(c||Ch(g)||ye(g))?b?Db(g,b,c,d):jb(d,g):c||(d[d.length]=g)}return d}function Eb(a,b){return Lg(a,b,_e)}function Fb(a,b){return Lg(a,b,Nh)}function Gb(a,b){return Mg(a,b,Nh)}function Hb(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];Ge(a[g])&&(f[++e]=g)}return f}function Ib(a,b,c){if(null!=a){c!==z&&c in kd(a)&&(b=[c]);for(var d=0,e=b.length;null!=a&&d<e;)a=a[b[d++]];return d&&d==e?a:z}}function Jb(a,b,c,d,e,f){return a===b||(null==a||null==b||!He(a)&&!r(b)?a!==a&&b!==b:Kb(a,b,Jb,c,d,e,f))}function Kb(a,b,c,d,e,f,g){var h=Ch(a),i=Ch(b),j=U,k=U;h||(j=cg.call(a),j==T?j=_:j!=_&&(h=Qe(a))),i||(k=cg.call(b),k==T?k=_:k!=_&&(i=Qe(b)));var l=j==_,m=k==_,n=j==k;if(n&&!h&&!l)return Mc(a,b,j);if(!e){var o=l&&ag.call(a,"__wrapped__"),p=m&&ag.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Lc:Nc)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Lb(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=kd(a);d--;){var g=b[d];if(f&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d<e;){g=b[d];var h=g[0],i=a[h],j=g[1];if(f&&g[2]){if(i===z&&!(h in a))return!1}else{var k=c?c(i,j,h):z;if(!(k===z?Jb(j,i,c,!0):k))return!1}}return!0}function Mb(a,b){var c=-1,d=Yc(a)?Of(a.length):[];return Jg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Nb(a){var b=Rc(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null!=a&&(a[c]===d&&(d!==z||c in kd(a)))}}return function(a){return Lb(a,b)}}function Ob(a,b){var c=Ch(a),d=_c(a)&&cd(b),e=a+"";return a=ld(a),function(f){if(null==f)return!1;var g=e;if(f=kd(f),(c||!d)&&!(g in f)){if(null==(f=1==a.length?f:Ib(f,Wb(a,0,-1))))return!1;g=zd(a),f=kd(f)}return f[g]===b?b!==z||g in f:Jb(b,f[g],z,!0)}}function Pb(a,b,c,d,e){if(!He(a))return a;var f=Yc(b)&&(Ch(b)||Qe(b)),g=f?z:Nh(b);return bb(g||b,function(h,i){if(g&&(i=h,h=b[i]),r(h))d||(d=[]),e||(e=[]),Qb(a,b,i,Pb,c,d,e);else{var j=a[i],k=c?c(j,h,i,a,b):z,l=k===z;l&&(k=h),k===z&&(!f||i in a)||!l&&(k===k?k===j:j!==j)||(a[i]=k)}}),a}function Qb(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):z,l=k===z;l&&(k=i,Yc(i)&&(Ch(i)||Qe(i))?k=Ch(j)?j:Yc(j)?ab(j):[]:Ne(i)||ye(i)?k=ye(j)?Ve(j):Ne(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Rb(a){return function(b){return null==b?z:b[a]}}function Sb(a){var b=a+"";return a=ld(a),function(c){return Ib(c,a,b)}}function Tb(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&&Zc(d)){var e=d;mg.call(a,d,1)}}return a}function Ub(a,b){return a+rg(zg()*(b-a+1))}function Vb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Wb(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,b<0&&(b=-b>e?0:e+b),c=c===z||c>e?e:+c||0,c<0&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Of(e);++d<e;)f[d]=a[d+b];return f}function Xb(a,b){var c;return Jg(a,function(a,d,e){return!(c=b(a,d,e))}),!!c}function Yb(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function Zb(a,b,c){var d=Oc(),e=-1;return b=ib(b,function(a){return d(a)}),Yb(Mb(a,function(a){return{criteria:ib(b,function(b){return b(a)}),index:++e,value:a}}),function(a,b){return l(a,b,c)})}function $b(a,b){var c=0;return Jg(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function _b(a,b){var c=-1,d=Qc(),e=a.length,g=d==f,h=g&&e>=O,i=h?oc():null,j=[];i?(d=Za,g=!1):(h=!1,i=b?[]:j);a:for(;++c<e;){var k=a[c],l=b?b(k,c,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else d(i,l,0)<0&&((b||h)&&i.push(l),j.push(k))}return j}function ac(a,b){for(var c=-1,d=b.length,e=Of(d);++c<d;)e[c]=a[b[c]];return e}function bc(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Wb(a,d?0:f,d?f+1:e):Wb(a,d?f+1:0,d?e:f)}function cc(a,b){var c=a;c instanceof Z&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=b[d];c=f.func.apply(f.thisArg,jb([c],f.args))}return c}function dc(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&e<=Eg){for(;d<e;){var f=d+e>>>1,g=a[f];(c?g<=b:g<b)&&null!==g?d=f+1:e=f}return e}return ec(a,b,Bf,c)}function ec(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=b===z;e<f;){var j=rg((e+f)/2),k=c(a[j]),l=k!==z,m=k===k;if(g)var n=m||d;else n=h?m&&l&&(d||null!=k):i?m&&(d||l):null!=k&&(d?k<=b:k<b);n?e=j+1:f=j}return wg(f,Dg)}function fc(a,b,c){if("function"!=typeof a)return Bf;if(b===z)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function gc(a){var b=new fg(a.byteLength);return new ng(b).set(new ng(a)),b}function hc(a,b,c){for(var d=c.length,e=-1,f=vg(a.length-d,0),g=-1,h=b.length,i=Of(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function ic(a,b,c){for(var d=-1,e=c.length,f=-1,g=vg(a.length-e,0),h=-1,i=b.length,j=Of(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function jc(a,b){return function(c,d,e){var f=b?b():{};if(d=Oc(d,e,3),Ch(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else Jg(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function kc(a){return qe(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2?c[e-2]:z,g=e>2?c[2]:z,h=e>1?c[e-1]:z;for("function"==typeof f?(f=fc(f,h,5),e-=2):(f="function"==typeof h?h:z,e-=f?1:0),g&&$c(c[0],c[1],g)&&(f=e<3?z:f,e=1);++d<e;){var i=c[d];i&&a(b,i,f)}return b})}function lc(a,b){return function(c,d){var e=c?Pg(c):0;if(!bd(e))return a(c,d);for(var f=b?e:-1,g=kd(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function mc(a){return function(b,c,d){for(var e=kd(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(!1===c(e[i],i,e))break}return b}}function nc(a,b){function c(){return(this&&this!==cb&&this instanceof c?d:a).apply(b,arguments)}var d=qc(a);return c}function oc(a){return qg&&kg?new Ya(a):null}function pc(a){return function(b){for(var c=-1,d=yf(kf(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function qc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Ig(a.prototype),d=a.apply(c,b);return He(d)?d:c}}function rc(a){function b(c,d,e){e&&$c(c,d,e)&&(d=z);var f=Kc(c,a,z,z,z,z,z,d);return f.placeholder=b.placeholder,f}return b}function sc(a,b){return qe(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(z,c))})}function tc(a,b){return function(c,d,e){if(e&&$c(c,d,e)&&(d=z),d=Oc(d,e,3),1==d.length){c=Ch(c)?c:jd(c);var f=gb(c,d,a,b);if(!c.length||f!==b)return f}return zb(c,d,a,b)}}function uc(a,b){return function(c,d,f){if(d=Oc(d,f,3),Ch(c)){var g=e(c,d,b);return g>-1?c[g]:z}return Cb(c,d,a)}}function vc(a){return function(b,c,d){return b&&b.length?(c=Oc(c,d,3),e(b,c,a)):-1}}function wc(a){return function(b,c,d){return c=Oc(c,d,3),Cb(b,c,a,!0)}}function xc(a){return function(){for(var b,c=arguments.length,d=a?c:-1,e=0,f=Of(c);a?d--:++d<c;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Xf(R);!b&&s.prototype.thru&&"wrapper"==Pc(g)&&(b=new s([],!0))}for(d=b?-1:c;++d<c;){g=f[d];var h=Pc(g),i="wrapper"==h?Og(g):z;b=i&&ad(i[0])&&i[1]==(I|E|G|J)&&!i[4].length&&1==i[9]?b[Pc(i[0])].apply(b,i[3]):1==g.length&&ad(g)?b[h]():b.thru(g)}return function(){var a=arguments,d=a[0];if(b&&1==a.length&&Ch(d)&&d.length>=O)return b.plant(d).value();for(var e=0,g=c?f[e].apply(this,a):d;++e<c;)g=f[e].call(this,g);return g}}}function yc(a,b){return function(c,d,e){return"function"==typeof d&&e===z&&Ch(c)?a(c,d):b(c,fc(d,e,3))}}function zc(a){return function(b,c,d){return"function"==typeof c&&d===z||(c=fc(c,d,3)),a(b,c,_e)}}function Ac(a){return function(b,c,d){return"function"==typeof c&&d===z||(c=fc(c,d,3)),a(b,c)}}function Bc(a){return function(b,c,d){var e={};return c=Oc(c,d,3),Fb(b,function(b,d,f){var g=c(b,d,f);d=a?g:d,b=a?b:g,e[d]=b}),e}}function Cc(a){return function(b,c,d){return b=h(b),(a?b:"")+Gc(b,c,d)+(a?"":b)}}function Dc(a){var b=qe(function(c,d){var e=t(d,b.placeholder);return Kc(c,a,z,d,e)});return b}function Ec(a,b){return function(c,d,e,f){var g=arguments.length<3;return"function"==typeof d&&f===z&&Ch(c)?a(c,d,e,g):Vb(c,Oc(d,f,4),e,g,b)}}function Fc(a,b,c,d,e,f,g,h,i,j){function k(){for(var s=arguments.length,u=s,v=Of(s);u--;)v[u]=arguments[u];if(d&&(v=hc(v,d,e)),f&&(v=ic(v,f,g)),o||q){var w=k.placeholder,x=t(v,w);if((s-=x.length)<j){var y=h?ab(h):z,A=vg(j-s,0),D=o?x:z,E=o?z:x,F=o?v:z,I=o?z:v;b|=o?G:H,b&=~(o?H:G),p||(b&=~(B|C));var J=[a,b,c,F,D,I,E,y,i,A],K=Fc.apply(z,J);return ad(a)&&Qg(K,J),K.placeholder=w,K}}var L=m?c:this,M=n?L[a]:a;return h&&(v=hd(v,h)),l&&i<v.length&&(v.length=i),this&&this!==cb&&this instanceof k&&(M=r||qc(a)),M.apply(L,v)}var l=b&I,m=b&B,n=b&C,o=b&E,p=b&D,q=b&F,r=n?z:qc(a);return k}function Gc(a,b,c){var d=a.length;if(b=+b,d>=b||!tg(b))return"";var e=b-d;return c=null==c?" ":c+"",qf(c,pg(e/c.length)).slice(0,e)}function Hc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Of(j+h);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this&&this!==cb&&this instanceof e?g:a).apply(f?c:this,k)}var f=b&B,g=qc(a);return e}function Ic(a){var b=Sf[a];return function(a,c){return c=c===z?0:+c||0,c?(c=ig(10,c),b(a*c)/c):b(a)}}function Jc(a){return function(b,c,d,e){var f=Oc(d);return null==d&&f===ub?dc(b,c,a):ec(b,c,f(d,e,1),a)}}function Kc(a,b,c,d,e,f,g,h){var i=b&C;if(!i&&"function"!=typeof a)throw new Xf(R);var j=d?d.length:0;if(j||(b&=~(G|H),d=e=z),j-=e?e.length:0,b&H){var k=d,l=e;d=e=z}var m=i?z:Og(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&(dd(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:vg(h-j,0)||0,b==B)var o=nc(n[0],n[2]);else o=b!=G&&b!=(B|G)||n[4].length?Fc.apply(z,n):Hc.apply(z,n);return(m?Ng:Qg)(o,n)}function Lc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length;if(i!=j&&!(e&&j>i))return!1;for(;++h<i;){var k=a[h],l=b[h],m=d?d(e?l:k,e?k:l,h):z;if(m!==z){if(m)continue;return!1}if(e){if(!mb(b,function(a){return k===a||c(k,a,d,e,f,g)}))return!1}else if(k!==l&&!c(k,l,d,e,f,g))return!1}return!0}function Mc(a,b,c){switch(c){case V:case W:return+a==+b;case X:return a.name==b.name&&a.message==b.message;case $:return a!=+a?b!=+b:a==+b;case aa:case ca:return a==b+""}return!1}function Nc(a,b,c,d,e,f,g){var h=Nh(a),i=h.length;if(i!=Nh(b).length&&!e)return!1;for(var j=i;j--;){var k=h[j];if(!(e?k in b:ag.call(b,k)))return!1}for(var l=e;++j<i;){k=h[j];var m=a[k],n=b[k],o=d?d(e?n:m,e?m:n,k):z;if(!(o===z?c(m,n,d,e,f,g):o))return!1;l||(l="constructor"==k)}if(!l){var p=a.constructor,q=b.constructor;if(p!=q&&"constructor"in a&&"constructor"in b&&!("function"==typeof p&&p instanceof p&&"function"==typeof q&&q instanceof q))return!1}return!0}function Oc(a,c,d){var e=b.callback||zf;return e=e===zf?ub:e,d?e(a,c,d):e}function Pc(a){for(var b=a.name,c=Hg[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Qc(a,c,d){var e=b.indexOf||xd;return e=e===xd?f:e,a?e(a,c,d):e}function Rc(a){for(var b=af(a),c=b.length;c--;)b[c][2]=cd(b[c][1]);return b}function Sc(a,b){var c=null==a?z:a[b];return Ke(c)?c:z}function Tc(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=wg(b,a+g);break;case"takeRight":a=vg(a,b-g)}}return{start:a,end:b}}function Uc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&ag.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Vc(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Uf),new b}function Wc(a,b,c){var d=a.constructor;switch(b){case ea:return gc(a);case V:case W:return new d(+a);case fa:case ga:case ha:case ia:case ja:case ka:case la:case ma:case na:var e=a.buffer;return new d(c?gc(e):e,a.byteOffset,a.length);case $:case ca:return new d(a);case aa:var f=new d(a.source,Ga.exec(a));f.lastIndex=a.lastIndex}return f}function Xc(a,b,c){null==a||_c(b,a)||(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),b=zd(b));var d=null==a?a:a[b];return null==d?z:d.apply(a,c)}function Yc(a){return null!=a&&bd(Pg(a))}function Zc(a,b){return a="number"==typeof a||Ja.test(a)?+a:-1,b=null==b?Fg:b,a>-1&&a%1==0&&a<b}function $c(a,b,c){if(!He(c))return!1;var d=typeof b;if("number"==d?Yc(c)&&Zc(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function _c(a,b){var c=typeof a;return!!("string"==c&&za.test(a)||"number"==c)||!Ch(a)&&(!ya.test(a)||null!=b&&a in kd(b))}function ad(a){var c=Pc(a);if(!(c in Z.prototype))return!1;var d=b[c];if(a===d)return!0;var e=Og(d);return!!e&&a===e[0]}function bd(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Fg}function cd(a){return a===a&&!He(a)}function dd(a,b){var c=a[1],d=b[1],e=c|d,f=e<I,g=d==I&&c==E||d==I&&c==J&&a[7].length<=b[8]||d==(I|J)&&c==E;if(!f&&!g)return a;d&B&&(a[2]=b[2],e|=c&B?0:D);var h=b[3];if(h){var i=a[3];a[3]=i?hc(i,h,b[4]):ab(h),a[4]=i?t(a[3],S):ab(b[4])}return h=b[5],h&&(i=a[5],a[5]=i?ic(i,h,b[6]):ab(h),a[6]=i?t(a[5],S):ab(b[6])),h=b[7],h&&(a[7]=ab(h)),d&I&&(a[8]=null==a[8]?b[8]:wg(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function ed(a,b){return a===z?b:Dh(a,b,ed)}function fd(a,b){a=kd(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function gd(a,b){var c={};return Eb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function hd(a,b){for(var c=a.length,d=wg(b.length,c),e=ab(a);d--;){var f=b[d];a[d]=Zc(f,c)?e[f]:z}return a}function id(a){for(var b=_e(a),c=b.length,d=c&&a.length,e=!!d&&bd(d)&&(Ch(a)||ye(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&Zc(h,d)||ag.call(a,h))&&g.push(h)}return g}function jd(a){return null==a?[]:Yc(a)?He(a)?a:Uf(a):ef(a)}function kd(a){return He(a)?a:Uf(a)}function ld(a){if(Ch(a))return a;var b=[];return h(a).replace(Aa,function(a,c,d,e){b.push(d?e.replace(Ea,"$1"):c||a)}),b}function md(a){return a instanceof Z?a.clone():new s(a.__wrapped__,a.__chain__,ab(a.__actions__))}function nd(a,b,c){b=(c?$c(a,b,c):null==b)?1:vg(rg(b)||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Of(pg(e/b));d<e;)g[++f]=Wb(a,d,d+=b);return g}function od(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function pd(a,b,c){return(a?a.length:0)?((c?$c(a,b,c):null==b)&&(b=1),Wb(a,b<0?0:b)):[]}function qd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&&(b=1),b=d-(+b||0),Wb(a,0,b<0?0:b)):[]}function rd(a,b,c){return a&&a.length?bc(a,Oc(b,c,3),!0,!0):[]}function sd(a,b,c){return a&&a.length?bc(a,Oc(b,c,3),!0):[]}function td(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&$c(a,b,c)&&(c=0,d=e),Ab(a,b,c,d)):[]}function ud(a){return a?a[0]:z}function vd(a,b,c){var d=a?a.length:0;return c&&$c(a,b,c)&&(b=!1),d?Db(a,b):[]}function wd(a){return(a?a.length:0)?Db(a,!0):[]}function xd(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=c<0?vg(d+c,0):c;else if(c){var e=dc(a,b);return e<d&&(b===b?b===a[e]:a[e]!==a[e])?e:-1}return f(a,b,c||0)}function yd(a){return qd(a,1)}function zd(a){var b=a?a.length:0;return b?a[b-1]:z}function Ad(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(c<0?vg(d+c,0):wg(c||0,d-1))+1;else if(c){e=dc(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return q(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Bd(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Qc(),e=a.length;++c<e;)for(var f=0,g=a[c];(f=d(b,g,f))>-1;)mg.call(b,f,1);return b}function Cd(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Oc(b,c,3);++e<g;){var h=a[e];b(h,e,a)&&(d.push(h),f.push(e))}return Tb(a,f),d}function Dd(a){return pd(a,1)}function Ed(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&$c(a,b,c)&&(b=0,c=d),Wb(a,b,c)):[]}function Fd(a,b,c){return(a?a.length:0)?((c?$c(a,b,c):null==b)&&(b=1),Wb(a,0,b<0?0:b)):[]}function Gd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&&(b=1),b=d-(+b||0),Wb(a,b<0?0:b)):[]}function Hd(a,b,c){return a&&a.length?bc(a,Oc(b,c,3),!1,!0):[]}function Id(a,b,c){return a&&a.length?bc(a,Oc(b,c,3)):[]}function Jd(a,b,c,d){if(!(a?a.length:0))return[];null!=b&&"boolean"!=typeof b&&(d=c,c=$c(a,b,d)?z:b,b=!1);var e=Oc();return null==c&&e===ub||(c=e(c,d,3)),b&&Qc()==f?u(a,c):_b(a,c)}function Kd(a){if(!a||!a.length)return[];var b=-1,c=0;a=hb(a,function(a){if(Yc(a))return c=vg(a.length,c),!0});for(var d=Of(c);++b<c;)d[b]=ib(a,Rb(b));return d}function Ld(a,b,c){if(!(a?a.length:0))return[];var d=Kd(a);return null==b?d:(b=fc(b,c,4),ib(d,function(a){return kb(a,b,z,!0)}))}function Md(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Yc(c))var d=d?jb(xb(d,c),xb(c,d)):c}return d?_b(d):[]}function Nd(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Ch(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Od(a){var c=b(a);return c.__chain__=!0,c}function Pd(a,b,c){return b.call(c,a),a}function Qd(a,b,c){return b.call(c,a)}function Rd(){return Od(this)}function Sd(){return new s(this.value(),this.__chain__)}function Td(a){for(var b,d=this;d instanceof c;){var e=md(d);b?f.__wrapped__=e:b=e;var f=e;d=d.__wrapped__}return f.__wrapped__=a,b}function Ud(){var a=this.__wrapped__,b=function(a){return c&&c.__dir__<0?a:a.reverse()};if(a instanceof Z){var c=a;return this.__actions__.length&&(c=new Z(this)),c=c.reverse(),c.__actions__.push({func:Qd,args:[b],thisArg:z}),new s(c,this.__chain__)}return this.thru(b)}function Vd(){return this.value()+""}function Wd(){return cc(this.__wrapped__,this.__actions__)}function Xd(a,b,c){var d=Ch(a)?fb:yb;return c&&$c(a,b,c)&&(b=z),"function"==typeof b&&c===z||(b=Oc(b,c,3)),d(a,b)}function Yd(a,b,c){var d=Ch(a)?hb:Bb;return b=Oc(b,c,3),d(a,b)}function Zd(a,b){return dh(a,Nb(b))}function $d(a,b,c,d){var e=a?Pg(a):0;return bd(e)||(a=ef(a),e=a.length),c="number"!=typeof c||d&&$c(b,c,d)?0:c<0?vg(e+c,0):c||0,"string"==typeof a||!Ch(a)&&Pe(a)?c<=e&&a.indexOf(b,c)>-1:!!e&&Qc(a,b,c)>-1}function _d(a,b,c){var d=Ch(a)?ib:Mb;return b=Oc(b,c,3),d(a,b)}function ae(a,b){return _d(a,Hf(b))}function be(a,b,c){var d=Ch(a)?hb:Bb;return b=Oc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function ce(a,b,c){if(c?$c(a,b,c):null==b){a=jd(a);var d=a.length;return d>0?a[Ub(0,d-1)]:z}var e=-1,f=Ue(a),d=f.length,g=d-1;for(b=wg(b<0?0:+b||0,d);++e<b;){var h=Ub(e,g),i=f[h];f[h]=f[e],f[e]=i}return f.length=b,f}function de(a){return ce(a,Bg)}function ee(a){var b=a?Pg(a):0;return bd(b)?b:Nh(a).length}function fe(a,b,c){var d=Ch(a)?mb:Xb;return c&&$c(a,b,c)&&(b=z),"function"==typeof b&&c===z||(b=Oc(b,c,3)),d(a,b)}function ge(a,b,c){if(null==a)return[];c&&$c(a,b,c)&&(b=z);var d=-1;return b=Oc(b,c,3),Yb(Mb(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}}),k)}function he(a,b,c,d){return null==a?[]:(d&&$c(b,c,d)&&(c=z),Ch(b)||(b=null==b?[]:[b]),Ch(c)||(c=null==c?[]:[c]),Zb(a,b,c))}function ie(a,b){return Yd(a,Nb(b))}function je(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Xf(R);var c=a;a=b,b=c}return a=tg(a=+a)?a:0,function(){if(--a<1)return b.apply(this,arguments)}}function ke(a,b,c){return c&&$c(a,b,c)&&(b=z),b=a&&null==b?a.length:vg(+b||0,0),Kc(a,I,z,z,z,z,b)}function le(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Xf(R);var d=a;a=b,b=d}return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=z),c}}function me(a,b,c){function d(){n&&gg(n),j&&gg(j),p=0,j=n=o=z}function e(b,c){c&&gg(c),j=n=o=z,b&&(p=oh(),k=a.apply(m,i),n||j||(i=m=z))}function f(){var a=b-(oh()-l);a<=0||a>b?e(o,j):n=lg(f,a)}function g(){e(r,n)}function h(){if(i=arguments,l=oh(),m=this,o=r&&(n||!s),!1===q)var c=s&&!n;else{j||s||(p=l);var d=q-(l-p),e=d<=0||d>q;e?(j&&(j=gg(j)),p=l,k=a.apply(m,i)):j||(j=lg(g,d))}return e&&n?n=gg(n):n||b===q||(n=lg(f,b)),c&&(e=!0,k=a.apply(m,i)),!e||n||j||(i=m=z),k}var i,j,k,l,m,n,o,p=0,q=!1,r=!0;if("function"!=typeof a)throw new Xf(R);if(b=b<0?0:+b||0,!0===c){var s=!0;r=!1}else He(c)&&(s=!!c.leading,q="maxWait"in c&&vg(+c.maxWait||0,b),r="trailing"in c?!!c.trailing:r);return h.cancel=d,h}function ne(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Xf(R);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new ne.Cache,c}function oe(a){if("function"!=typeof a)throw new Xf(R);return function(){return!a.apply(this,arguments)}}function pe(a){return le(2,a)}function qe(a,b){if("function"!=typeof a)throw new Xf(R);return b=vg(b===z?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=vg(c.length-b,0),f=Of(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Of(b+1);for(d=-1;++d<b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function re(a){if("function"!=typeof a)throw new Xf(R);return function(b){return a.apply(this,b)}}function se(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Xf(R);return!1===c?d=!1:He(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),me(a,b,{leading:d,maxWait:+b,trailing:e})}function te(a,b){return b=null==b?Bf:b,Kc(b,G,z,[a],[])}function ue(a,b,c,d){return b&&"boolean"!=typeof b&&$c(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),"function"==typeof c?vb(a,b,fc(c,d,1)):vb(a,b)}function ve(a,b,c){return"function"==typeof b?vb(a,!0,fc(b,c,1)):vb(a,!0)}function we(a,b){return a>b}function xe(a,b){return a>=b}function ye(a){return r(a)&&Yc(a)&&ag.call(a,"callee")&&!jg.call(a,"callee")}function ze(a){return!0===a||!1===a||r(a)&&cg.call(a)==V}function Ae(a){return r(a)&&cg.call(a)==W}function Be(a){return!!a&&1===a.nodeType&&r(a)&&!Ne(a)}function Ce(a){return null==a||(Yc(a)&&(Ch(a)||Pe(a)||ye(a)||r(a)&&Ge(a.splice))?!a.length:!Nh(a).length)}function De(a,b,c,d){c="function"==typeof c?fc(c,d,3):z;var e=c?c(a,b):z;return e===z?Jb(a,b,c):!!e}function Ee(a){return r(a)&&"string"==typeof a.message&&cg.call(a)==X}function Fe(a){return"number"==typeof a&&tg(a)}function Ge(a){return He(a)&&cg.call(a)==Y}function He(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Ie(a,b,c,d){return c="function"==typeof c?fc(c,d,3):z,Lb(a,Rc(b),c)}function Je(a){return Me(a)&&a!=+a}function Ke(a){return null!=a&&(Ge(a)?eg.test(_f.call(a)):r(a)&&Ia.test(a))}function Le(a){return null===a}function Me(a){return"number"==typeof a||r(a)&&cg.call(a)==$}function Ne(a){var b;if(!r(a)||cg.call(a)!=_||ye(a)||!ag.call(a,"constructor")&&"function"==typeof(b=a.constructor)&&!(b instanceof b))return!1;var c;return Eb(a,function(a,b){c=b}),c===z||ag.call(a,c)}function Oe(a){return He(a)&&cg.call(a)==aa}function Pe(a){return"string"==typeof a||r(a)&&cg.call(a)==ca}function Qe(a){return r(a)&&bd(a.length)&&!!Qa[cg.call(a)]}function Re(a){return a===z}function Se(a,b){return a<b}function Te(a,b){return a<=b}function Ue(a){var b=a?Pg(a):0;return bd(b)?b?ab(a):[]:ef(a)}function Ve(a){return tb(a,_e(a))}function We(a,b,c){var d=Ig(a);return c&&$c(a,b,c)&&(b=z),b?rb(d,b):d}function Xe(a){return Hb(a,_e(a))}function Ye(a,b,c){var d=null==a?z:Ib(a,ld(b),b+"");return d===z?c:d}function Ze(a,b){if(null==a)return!1;var c=ag.call(a,b);if(!c&&!_c(b)){if(b=ld(b),null==(a=1==b.length?a:Ib(a,Wb(b,0,-1))))return!1;b=zd(b),c=ag.call(a,b)}return c||bd(a.length)&&Zc(b,a.length)&&(Ch(a)||ye(a))}function $e(a,b,c){c&&$c(a,b,c)&&(b=z);for(var d=-1,e=Nh(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?ag.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function _e(a){if(null==a)return[];He(a)||(a=Uf(a));var b=a.length;b=b&&bd(b)&&(Ch(a)||ye(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Of(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&Zc(h,b)||"constructor"==h&&(e||!ag.call(a,h))||f.push(h);return f}function af(a){a=kd(a);for(var b=-1,c=Nh(a),d=c.length,e=Of(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function bf(a,b,c){var d=null==a?z:a[b];return d===z&&(null==a||_c(b,a)||(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),d=null==a?z:a[zd(b)]),d=d===z?c:d),Ge(d)?d.call(a):d}function cf(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||_c(b,a)?[d]:ld(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=b[e];He(h)&&(e==g?h[i]=c:null==h[i]&&(h[i]=Zc(b[e+1])?[]:{})),h=h[i]}return a}function df(a,b,c,d){var e=Ch(a)||Qe(a);if(b=Oc(b,d,4),null==c)if(e||He(a)){var f=a.constructor;c=e?Ch(a)?new f:[]:Ig(Ge(f)?f.prototype:z)}else c={};return(e?bb:Fb)(a,function(a,d,e){return b(c,a,d,e)}),c}function ef(a){return ac(a,Nh(a))}function ff(a){return ac(a,_e(a))}function gf(a,b,c){return b=+b||0,c===z?(c=b,b=0):c=+c||0,a>=wg(b,c)&&a<vg(b,c)}function hf(a,b,c){c&&$c(a,b,c)&&(b=c=z);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=zg();return wg(a+f*(b-a+hg("1e-"+((f+"").length-1))),b)}return Ub(a,b)}function jf(a){return(a=h(a))&&a.charAt(0).toUpperCase()+a.slice(1)}function kf(a){return(a=h(a))&&a.replace(Ka,m).replace(Da,"")}function lf(a,b,c){a=h(a),b+="";var d=a.length;return c=c===z?d:wg(c<0?0:+c||0,d),(c-=b.length)>=0&&a.indexOf(b,c)==c}function mf(a){return a=h(a),a&&ua.test(a)?a.replace(sa,n):a}function nf(a){return a=h(a),a&&Ca.test(a)?a.replace(Ba,o):a||"(?:)"}function of(a,b,c){a=h(a),b=+b;var d=a.length;if(d>=b||!tg(b))return a;var e=(b-d)/2,f=rg(e);return c=Gc("",pg(e),c),c.slice(0,f)+a+c}function pf(a,b,c){return(c?$c(a,b,c):null==b)?b=0:b&&(b=+b),a=tf(a),yg(a,b||(Ha.test(a)?16:10))}function qf(a,b){var c="";if(a=h(a),(b=+b)<1||!a||!tg(b))return c;do{b%2&&(c+=a),b=rg(b/2),a+=a}while(b);return c}function rf(a,b,c){return a=h(a),c=null==c?0:wg(c<0?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function sf(a,c,d){var e=b.templateSettings;d&&$c(a,c,d)&&(c=d=z),a=h(a),c=qb(rb({},d||c),e,pb);var f,g,i=qb(rb({},c.imports),e.imports,pb),j=Nh(i),k=ac(i,j),l=0,m=c.interpolate||La,n="__p += '",o=Vf((c.escape||La).source+"|"+m.source+"|"+(m===xa?Fa:La).source+"|"+(c.evaluate||La).source+"|$","g"),q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Pa+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(l,i).replace(Ma,p),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),h&&(g=!0,n+="';\n"+h+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),l=i+b.length,b}),n+="';\n";var r=c.variable;r||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(oa,""):n).replace(pa,"$1").replace(qa,"$1;"),n="function("+(r||"obj")+") {\n"+(r?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var s=Yh(function(){return Rf(j,q+"return "+n).apply(z,k)});if(s.source=n,Ee(s))throw s;return s}function tf(a,b,c){var d=a;return(a=h(a))?(c?$c(d,b,c):null==b)?a.slice(v(a),w(a)+1):(b+="",a.slice(i(a,b),j(a,b)+1)):a}function uf(a,b,c){var d=a;return a=h(a),a?(c?$c(d,b,c):null==b)?a.slice(v(a)):a.slice(i(a,b+"")):a}function vf(a,b,c){var d=a;return a=h(a),a?(c?$c(d,b,c):null==b)?a.slice(0,w(a)+1):a.slice(0,j(a,b+"")+1):a}function wf(a,b,c){c&&$c(a,b,c)&&(b=z);var d=K,e=L;if(null!=b)if(He(b)){var f="separator"in b?b.separator:f;d="length"in b?+b.length||0:d,e="omission"in b?h(b.omission):e}else d=+b||0;if(a=h(a),d>=a.length)return a;var g=d-e.length;if(g<1)return e;var i=a.slice(0,g);if(null==f)return i+e;if(Oe(f)){if(a.slice(g).search(f)){var j,k,l=a.slice(0,g);for(f.global||(f=Vf(f.source,(Ga.exec(f)||"")+"g")),f.lastIndex=0;j=f.exec(l);)k=j.index;i=i.slice(0,null==k?g:k)}}else if(a.indexOf(f,g)!=g){var m=i.lastIndexOf(f);m>-1&&(i=i.slice(0,m))}return i+e}function xf(a){return a=h(a),a&&ta.test(a)?a.replace(ra,x):a}function yf(a,b,c){return c&&$c(a,b,c)&&(b=z),a=h(a),a.match(b||Na)||[]}function zf(a,b,c){return c&&$c(a,b,c)&&(b=z),r(a)?Cf(a):ub(a,b)}function Af(a){return function(){return a}}function Bf(a){return a}function Cf(a){return Nb(vb(a,!0))}function Df(a,b){return Ob(a,vb(b,!0))}function Ef(a,b,c){if(null==c){var d=He(b),e=d?Nh(b):z,f=e&&e.length?Hb(b,e):z;(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Hb(b,Nh(b)));var g=!0,h=-1,i=Ge(a),j=f.length;!1===c?g=!1:He(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__);return(d.__actions__=ab(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}return b.apply(a,jb([this.value()],arguments))}}(l))}return a}function Ff(){return cb._=dg,this}function Gf(){}function Hf(a){return _c(a)?Rb(a):Sb(a)}function If(a){return function(b){return Ib(a,ld(b),b+"")}}function Jf(a,b,c){c&&$c(a,b,c)&&(b=c=z),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=vg(pg((b-a)/(c||1)),0),f=Of(e);++d<e;)f[d]=a,a+=c;return f}function Kf(a,b,c){if((a=rg(a))<1||!tg(a))return[];var d=-1,e=Of(wg(a,Cg));for(b=fc(b,c,1);++d<a;)d<Cg?e[d]=b(d):b(d);return e}function Lf(a){var b=++bg;return h(a)+b}function Mf(a,b){return(+a||0)+(+b||0)}function Nf(a,b,c){return c&&$c(a,b,c)&&(b=z),b=Oc(b,c,3),1==b.length?nb(Ch(a)?a:jd(a),b):$b(a,b)}a=a?db.defaults(cb.Object(),a,db.pick(cb,Oa)):cb;var Of=a.Array,Pf=a.Date,Qf=a.Error,Rf=a.Function,Sf=a.Math,Tf=a.Number,Uf=a.Object,Vf=a.RegExp,Wf=a.String,Xf=a.TypeError,Yf=Of.prototype,Zf=Uf.prototype,$f=Wf.prototype,_f=Rf.prototype.toString,ag=Zf.hasOwnProperty,bg=0,cg=Zf.toString,dg=cb._,eg=Vf("^"+_f.call(ag).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fg=a.ArrayBuffer,gg=a.clearTimeout,hg=a.parseFloat,ig=Sf.pow,jg=Zf.propertyIsEnumerable,kg=Sc(a,"Set"),lg=a.setTimeout,mg=Yf.splice,ng=a.Uint8Array,og=Sc(a,"WeakMap"),pg=Sf.ceil,qg=Sc(Uf,"create"),rg=Sf.floor,sg=Sc(Of,"isArray"),tg=a.isFinite,ug=Sc(Uf,"keys"),vg=Sf.max,wg=Sf.min,xg=Sc(Pf,"now"),yg=a.parseInt,zg=Sf.random,Ag=Tf.NEGATIVE_INFINITY,Bg=Tf.POSITIVE_INFINITY,Cg=4294967295,Dg=Cg-1,Eg=Cg>>>1,Fg=9007199254740991,Gg=og&&new og,Hg={};b.support={};b.templateSettings={escape:va,evaluate:wa,interpolate:xa,variable:"",imports:{_:b}};var Ig=function(){function a(){}return function(b){if(He(b)){a.prototype=b;var c=new a;a.prototype=z}return c||{}}}(),Jg=lc(Fb),Kg=lc(Gb,!0),Lg=mc(),Mg=mc(!0),Ng=Gg?function(a,b){return Gg.set(a,b),a}:Bf,Og=Gg?function(a){return Gg.get(a)}:Gf,Pg=Rb("length"),Qg=function(){var a=0,b=0;return function(c,d){var e=oh(),f=N-(e-b);if(b=e,f>0){if(++a>=M)return c}else a=0;return Ng(c,d)}}(),Rg=qe(function(a,b){return r(a)&&Yc(a)?xb(a,Db(b,!1,!0)):[]}),Sg=vc(),Tg=vc(!0),Ug=qe(function(a){for(var b=a.length,c=b,d=Of(l),e=Qc(),g=e==f,h=[];c--;){var i=a[c]=Yc(i=a[c])?i:[];d[c]=g&&i.length>=120?oc(c&&i):null}var j=a[0],k=-1,l=j?j.length:0,m=d[0];a:for(;++k<l;)if(i=j[k],(m?Za(m,i):e(h,i,0))<0){for(var c=b;--c;){var n=d[c];if((n?Za(n,i):e(a[c],i,0))<0)continue a}m&&m.push(i),h.push(i)}return h}),Vg=qe(function(a,b){b=Db(b);var c=sb(a,b);return Tb(a,b.sort(d)),c}),Wg=Jc(),Xg=Jc(!0),Yg=qe(function(a){return _b(Db(a,!1,!0))}),Zg=qe(function(a,b){return Yc(a)?xb(a,b):[]}),$g=qe(Kd),_g=qe(function(a){var b=a.length,c=b>2?a[b-2]:z,d=b>1?a[b-1]:z;return b>2&&"function"==typeof c?b-=2:(c=b>1&&"function"==typeof d?(--b,d):z,d=z),a.length=b,Ld(a,c,d)}),ah=qe(function(a){return a=Db(a),this.thru(function(b){return _a(Ch(b)?b:[kd(b)],a)})}),bh=qe(function(a,b){return sb(a,Db(b))}),ch=jc(function(a,b,c){ag.call(a,c)?++a[c]:a[c]=1}),dh=uc(Jg),eh=uc(Kg,!0),fh=yc(bb,Jg),gh=yc(eb,Kg),hh=jc(function(a,b,c){ag.call(a,c)?a[c].push(b):a[c]=[b]}),ih=jc(function(a,b,c){a[c]=b}),jh=qe(function(a,b,c){var d=-1,e="function"==typeof b,f=_c(b),g=Yc(a)?Of(a.length):[];return Jg(a,function(a){var h=e?b:f&&null!=a?a[b]:z;g[++d]=h?h.apply(a,c):Xc(a,b,c)}),g}),kh=jc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),lh=Ec(kb,Jg),mh=Ec(lb,Kg),nh=qe(function(a,b){if(null==a)return[];var c=b[2];return c&&$c(b[0],b[1],c)&&(b.length=1),Zb(a,Db(b),[])}),oh=xg||function(){return(new Pf).getTime()},ph=qe(function(a,b,c){var d=B;if(c.length){var e=t(c,ph.placeholder);d|=G}return Kc(a,d,b,c,e)}),qh=qe(function(a,b){b=b.length?Db(b):Xe(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Kc(a[e],B,a)}return a}),rh=qe(function(a,b,c){var d=B|C;if(c.length){var e=t(c,rh.placeholder);d|=G}return Kc(b,d,a,c,e)}),sh=rc(E),th=rc(F),uh=qe(function(a,b){return wb(a,1,b)}),vh=qe(function(a,b,c){return wb(a,b,c)}),wh=xc(),xh=xc(!0),yh=qe(function(a,b){if(b=Db(b),"function"!=typeof a||!fb(b,g))throw new Xf(R);var c=b.length;return qe(function(d){for(var e=wg(d.length,c);e--;)d[e]=b[e](d[e]);return a.apply(this,d)})}),zh=Dc(G),Ah=Dc(H),Bh=qe(function(a,b){return Kc(a,J,z,z,z,Db(b))}),Ch=sg||function(a){return r(a)&&bd(a.length)&&cg.call(a)==U},Dh=kc(Pb),Eh=kc(function(a,b,c){return c?qb(a,b,c):rb(a,b)}),Fh=sc(Eh,ob),Gh=sc(Dh,ed),Hh=wc(Fb),Ih=wc(Gb),Jh=zc(Lg),Kh=zc(Mg),Lh=Ac(Fb),Mh=Ac(Gb),Nh=ug?function(a){var b=null==a?z:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&Yc(a)?id(a):He(a)?ug(a):[]}:id,Oh=Bc(!0),Ph=Bc(),Qh=qe(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=ib(Db(b),Wf);return fd(a,xb(_e(a),b))}var c=fc(b[0],b[1],3);return gd(a,function(a,b,d){return!c(a,b,d)})}),Rh=qe(function(a,b){return null==a?{}:"function"==typeof b[0]?gd(a,fc(b[0],b[1],3)):fd(a,Db(b))}),Sh=pc(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Th=pc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Uh=Cc(),Vh=Cc(!0),Wh=pc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Xh=pc(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Yh=qe(function(a,b){try{return a.apply(z,b)}catch(a){return Ee(a)?a:new Qf(a)}}),Zh=qe(function(a,b){return function(c){return Xc(c,a,b)}}),$h=qe(function(a,b){return function(c){return Xc(a,c,b)}}),_h=Ic("ceil"),ai=Ic("floor"),bi=tc(we,Ag),ci=tc(Se,Bg),di=Ic("round");return b.prototype=c.prototype,s.prototype=Ig(c.prototype),s.prototype.constructor=s,Z.prototype=Ig(c.prototype),Z.prototype.constructor=Z,Ta.prototype.delete=Ua,Ta.prototype.get=Va,Ta.prototype.has=Wa,Ta.prototype.set=Xa,Ya.prototype.push=$a,ne.Cache=Ta,b.after=je,b.ary=ke,b.assign=Eh,b.at=bh,b.before=le,b.bind=ph,b.bindAll=qh,b.bindKey=rh,b.callback=zf,b.chain=Od,b.chunk=nd,b.compact=od,b.constant=Af,b.countBy=ch,b.create=We,b.curry=sh,b.curryRight=th,b.debounce=me,b.defaults=Fh,b.defaultsDeep=Gh,b.defer=uh,b.delay=vh,b.difference=Rg,b.drop=pd,b.dropRight=qd,b.dropRightWhile=rd,b.dropWhile=sd,b.fill=td,b.filter=Yd,b.flatten=vd,b.flattenDeep=wd,b.flow=wh,b.flowRight=xh,b.forEach=fh,b.forEachRight=gh,b.forIn=Jh,b.forInRight=Kh,b.forOwn=Lh,b.forOwnRight=Mh,b.functions=Xe,b.groupBy=hh,b.indexBy=ih,b.initial=yd,b.intersection=Ug,b.invert=$e,b.invoke=jh,b.keys=Nh,b.keysIn=_e,b.map=_d,b.mapKeys=Oh,b.mapValues=Ph,b.matches=Cf,b.matchesProperty=Df,b.memoize=ne,b.merge=Dh,b.method=Zh,b.methodOf=$h,b.mixin=Ef,b.modArgs=yh,b.negate=oe,b.omit=Qh,b.once=pe,b.pairs=af,b.partial=zh,b.partialRight=Ah,b.partition=kh,b.pick=Rh,b.pluck=ae,b.property=Hf,b.propertyOf=If,b.pull=Bd,b.pullAt=Vg,b.range=Jf,b.rearg=Bh,b.reject=be,b.remove=Cd,b.rest=Dd,b.restParam=qe,b.set=cf,b.shuffle=de,b.slice=Ed,b.sortBy=ge,b.sortByAll=nh,b.sortByOrder=he,b.spread=re,b.take=Fd,b.takeRight=Gd,b.takeRightWhile=Hd,b.takeWhile=Id,b.tap=Pd,b.throttle=se,b.thru=Qd,b.times=Kf,b.toArray=Ue,b.toPlainObject=Ve,b.transform=df,b.union=Yg,b.uniq=Jd,b.unzip=Kd,b.unzipWith=Ld,b.values=ef,b.valuesIn=ff,b.where=ie,b.without=Zg,b.wrap=te,b.xor=Md,b.zip=$g,b.zipObject=Nd,b.zipWith=_g,b.backflow=xh,b.collect=_d,b.compose=xh,b.each=fh,b.eachRight=gh,b.extend=Eh,b.iteratee=zf,b.methods=Xe,b.object=Nd,b.select=Yd,b.tail=Dd,b.unique=Jd,Ef(b,b),b.add=Mf,b.attempt=Yh,b.camelCase=Sh,b.capitalize=jf,b.ceil=_h,b.clone=ue,b.cloneDeep=ve,b.deburr=kf,b.endsWith=lf,b.escape=mf,b.escapeRegExp=nf,b.every=Xd,b.find=dh,b.findIndex=Sg,b.findKey=Hh,b.findLast=eh,b.findLastIndex=Tg,b.findLastKey=Ih,b.findWhere=Zd,b.first=ud,b.floor=ai,b.get=Ye,b.gt=we,b.gte=xe,b.has=Ze,b.identity=Bf,b.includes=$d,b.indexOf=xd,b.inRange=gf,b.isArguments=ye,b.isArray=Ch,b.isBoolean=ze,b.isDate=Ae,b.isElement=Be,b.isEmpty=Ce,b.isEqual=De,b.isError=Ee,b.isFinite=Fe,b.isFunction=Ge,b.isMatch=Ie,b.isNaN=Je,b.isNative=Ke,b.isNull=Le,b.isNumber=Me,b.isObject=He,b.isPlainObject=Ne,b.isRegExp=Oe,b.isString=Pe,b.isTypedArray=Qe,b.isUndefined=Re,b.kebabCase=Th,b.last=zd,b.lastIndexOf=Ad,b.lt=Se,b.lte=Te,b.max=bi,b.min=ci,b.noConflict=Ff,b.noop=Gf,b.now=oh,b.pad=of,b.padLeft=Uh,b.padRight=Vh,b.parseInt=pf,b.random=hf,b.reduce=lh,b.reduceRight=mh,b.repeat=qf,b.result=bf,b.round=di,b.runInContext=y,b.size=ee,b.snakeCase=Wh,b.some=fe,b.sortedIndex=Wg,b.sortedLastIndex=Xg,b.startCase=Xh,b.startsWith=rf,b.sum=Nf,b.template=sf,b.trim=tf,b.trimLeft=uf,b.trimRight=vf,b.trunc=wf,b.unescape=xf,b.uniqueId=Lf,b.words=yf,b.all=Xd,b.any=fe,b.contains=$d,b.eq=De,b.detect=dh,b.foldl=lh,b.foldr=mh,b.head=ud,b.include=$d,b.inject=lh,Ef(b,function(){var a={};return Fb(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.sample=ce,b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return ce(b,a)}):ce(this.value())},b.VERSION=A,bb(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){b[a].placeholder=b}),bb(["drop","take"],function(a,b){Z.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Z(this);c=null==c?1:vg(rg(c)||0,0);var e=this.clone();return d?e.__takeCount__=wg(e.__takeCount__,c):e.__views__.push({size:c,type:a+(e.__dir__<0?"Right":"")}),e},Z.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),bb(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c!=Q;Z.prototype[a]=function(a,b){var e=this.clone();return e.__iteratees__.push({iteratee:Oc(a,b,1),type:c}),e.__filtered__=e.__filtered__||d,e}}),bb(["first","last"],function(a,b){var c="take"+(b?"Right":"");Z.prototype[a]=function(){return this[c](1).value()[0]}}),bb(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Z.prototype[a]=function(){return this.__filtered__?new Z(this):this[c](1)}}),bb(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Nb:Hf;Z.prototype[a]=function(a){return this[c](d(a))}}),Z.prototype.compact=function(){return this.filter(Bf)},Z.prototype.reject=function(a,b){return a=Oc(a,b,1),this.filter(function(b){return!a(b)})},Z.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return c.__filtered__&&(a>0||b<0)?new Z(c):(a<0?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==z&&(b=+b||0,c=b<0?c.dropRight(-b):c.take(b-a)),c)},Z.prototype.takeRightWhile=function(a,b){return this.reverse().takeWhile(a,b).reverse()},Z.prototype.toArray=function(){return this.take(Bg)},Fb(Z.prototype,function(a,c){var d=/^(?:filter|map|reject)|While$/.test(c),e=/^(?:first|last)$/.test(c),f=b[e?"take"+("last"==c?"Right":""):c];f&&(b.prototype[c]=function(){var b=e?[1]:arguments,c=this.__chain__,g=this.__wrapped__,h=!!this.__actions__.length,i=g instanceof Z,j=b[0],k=i||Ch(g);k&&d&&"function"==typeof j&&1!=j.length&&(i=k=!1);var l=function(a){return e&&c?f(a,1)[0]:f.apply(z,jb([a],b))},m={func:Qd,args:[l],thisArg:z},n=i&&!h;if(e&&!c)return n?(g=g.clone(),g.__actions__.push(m),a.call(g)):f.call(z,this.value())[0];if(!e&&k){g=n?g:new Z(this);var o=a.apply(g,b);return o.__actions__.push(m),new s(o,c)}return this.thru(l)})}),bb(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(a){var c=(/^(?:replace|split)$/.test(a)?$f:Yf)[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[d](function(b){return c.apply(b,a)})}}),Fb(Z.prototype,function(a,c){var d=b[c];if(d){var e=d.name;(Hg[e]||(Hg[e]=[])).push({name:c,func:d})}}),Hg[Fc(z,C).name]=[{name:"wrapper",func:z}],Z.prototype.clone=ba,Z.prototype.reverse=da,Z.prototype.value=Sa,b.prototype.chain=Rd,b.prototype.commit=Sd,b.prototype.concat=ah,b.prototype.plant=Td,b.prototype.reverse=Ud,b.prototype.toString=Vd,b.prototype.run=b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=Wd,b.prototype.collect=b.prototype.map,b.prototype.head=b.prototype.first,b.prototype.select=b.prototype.filter,b.prototype.tail=b.prototype.rest,b}var z,A="3.10.1",B=1,C=2,D=4,E=8,F=16,G=32,H=64,I=128,J=256,K=30,L="...",M=150,N=16,O=200,P=1,Q=2,R="Expected a function",S="__lodash_placeholder__",T="[object Arguments]",U="[object Array]",V="[object Boolean]",W="[object Date]",X="[object Error]",Y="[object Function]",Z="[object Map]",$="[object Number]",_="[object Object]",aa="[object RegExp]",ba="[object Set]",ca="[object String]",da="[object WeakMap]",ea="[object ArrayBuffer]",fa="[object Float32Array]",ga="[object Float64Array]",ha="[object Int8Array]",ia="[object Int16Array]",ja="[object Int32Array]",ka="[object Uint8Array]",la="[object Uint8ClampedArray]",ma="[object Uint16Array]",na="[object Uint32Array]",oa=/\b__p \+= '';/g,pa=/\b(__p \+=) '' \+/g,qa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ra=/&(?:amp|lt|gt|quot|#39|#96);/g,sa=/[&<>"'`]/g,ta=RegExp(ra.source),ua=RegExp(sa.source),va=/<%-([\s\S]+?)%>/g,wa=/<%([\s\S]+?)%>/g,xa=/<%=([\s\S]+?)%>/g,ya=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,za=/^\w*$/,Aa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ba=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ca=RegExp(Ba.source),Da=/[\u0300-\u036f\ufe20-\ufe23]/g,Ea=/\\(\\)?/g,Fa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ga=/\w*$/,Ha=/^0[xX]/,Ia=/^\[object .+?Constructor\]$/,Ja=/^\d+$/,Ka=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,La=/($^)/,Ma=/['\n\r\u2028\u2029\\]/g,Na=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Oa=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Pa=-1,Qa={};Qa[fa]=Qa[ga]=Qa[ha]=Qa[ia]=Qa[ja]=Qa[ka]=Qa[la]=Qa[ma]=Qa[na]=!0,Qa[T]=Qa[U]=Qa[ea]=Qa[V]=Qa[W]=Qa[X]=Qa[Y]=Qa[Z]=Qa[$]=Qa[_]=Qa[aa]=Qa[ba]=Qa[ca]=Qa[da]=!1;var Ra={};Ra[T]=Ra[U]=Ra[ea]=Ra[V]=Ra[W]=Ra[fa]=Ra[ga]=Ra[ha]=Ra[ia]=Ra[ja]=Ra[$]=Ra[_]=Ra[aa]=Ra[ca]=Ra[ka]=Ra[la]=Ra[ma]=Ra[na]=!0,Ra[X]=Ra[Y]=Ra[Z]=Ra[ba]=Ra[da]=!1;var Sa={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ta={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ua={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Va={function:!0,object:!0},Wa={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Xa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ya=Va[typeof c]&&c&&!c.nodeType&&c,Za=Va[typeof b]&&b&&!b.nodeType&&b,$a=Ya&&Za&&"object"==typeof a&&a&&a.Object&&a,_a=Va[typeof self]&&self&&self.Object&&self,ab=Va[typeof window]&&window&&window.Object&&window,bb=Za&&Za.exports===Ya&&Ya,cb=$a||ab!==(this&&this.window)&&ab||_a||this,db=y();"function"==typeof define&&"object"==typeof define.amd&&define.amd?cb._=db:Ya&&Za?bb?(Za.exports=db)._=db:Ya._=db:cb._=db}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b.long?f(a):e(a)}},{}],26:[function(a,b,c){b.exports=a("./lib/retry")},{"./lib/retry":27}],27:[function(a,b,c){var d=a("./retry_operation");c.operation=function(a){var b=!1;a&&!0===a.forever&&(b=!0);var e=c.timeouts(a);return new d(e,b)},c.timeouts=function(a){if(a instanceof Array)return[].concat(a);var b={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var c in a)b[c]=a[c];if(b.minTimeout>b.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var d=[],e=0;e<b.retries;e++)d.push(this.createTimeout(e,b));return d.sort(function(a,b){return a-b}),d},c.createTimeout=function(a,b){var c=b.randomize?Math.random()+1:1,d=Math.round(c*b.minTimeout*Math.pow(b.factor,a));return d=Math.min(d,b.maxTimeout)},c.wrap=function(a,b,d){if(b instanceof Array&&(d=b,b=null),!d){d=[];for(var e in a)"function"==typeof a[e]&&d.push(e)}for(var f=0;f<d.length;f++){var g=d[f],h=a[g];a[g]=function(){var d=c.operation(b),e=Array.prototype.slice.call(arguments),f=e.pop();e.push(function(a){d.retry(a)||(a&&(arguments[0]=d.mainError()),f.apply(this,arguments))}),d.attempt(function(){h.apply(a,e)})},a[g].options=b}}},{"./retry_operation":28}],28:[function(a,b,c){function d(a,b){this._timeouts=a,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,b&&(this._cachedTimeouts=this._timeouts.slice(0))}b.exports=d,d.prototype.retry=function(a){if(this._timeout&&clearTimeout(this._timeout),!a)return!1;this._errors.push(a);var b=this._timeouts.shift();if(void 0===b){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),b=this._timeouts.shift()}var c=this;return setTimeout(function(){c._attempts++,c._operationTimeoutCb&&(c._timeout=setTimeout(function(){c._operationTimeoutCb(c._attempts)},c._operationTimeout)),c._fn(c._attempts)},b),!0},d.prototype.attempt=function(a,b){this._fn=a,b&&(b.timeout&&(this._operationTimeout=b.timeout),b.cb&&(this._operationTimeoutCb=b.cb));var c=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){c._operationTimeoutCb()},c._operationTimeout)),this._fn(this._attempts)},d.prototype.try=function(a){console.log("Using RetryOperation.try() is deprecated"),this.attempt(a)},d.prototype.start=function(a){console.log("Using RetryOperation.start() is deprecated"),this.attempt(a)},d.prototype.start=d.prototype.try,d.prototype.errors=function(){return this._errors},d.prototype.attempts=function(){return this._attempts},d.prototype.mainError=function(){if(0===this._errors.length)return null;for(var a={},b=null,c=0,d=0;d<this._errors.length;d++){var e=this._errors[d],f=e.message,g=(a[f]||0)+1;a[f]=g,g>=c&&(b=e,c=g)}return b}},{}],29:[function(a,b,c){function d(a){return a.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}b.exports=function(){return d([].slice.call(arguments,0).join("/"))}},{}],30:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],31:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}]},{},[]);]]></script>
        <script_name>kore-ai-sdk3.min.js</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-01-02 07:16:42</sys_created_on>
        <sys_id>190a0224972b75109b137076f053afbc</sys_id>
        <sys_mod_count>7</sys_mod_count>
        <sys_name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</sys_name>
        <sys_package display_value="IT Assist" source="x_831378_kore_ai_0">5db40dbc2f21111051c859a72799b60c</sys_package>
        <sys_policy/>
        <sys_scope display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</sys_scope>
        <sys_update_name>sys_ui_script_190a0224972b75109b137076f053afbc</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-02-19 13:08:06</sys_updated_on>
        <ui_type>1</ui_type>
        <use_scoped_format>false</use_scoped_format>
    </sys_ui_script>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</application>
        <file_path/>
        <instance_id>a8ade591db83d5140288c597059619f8</instance_id>
        <instance_name>dev143442</instance_name>
        <name>sys_ui_script_190a0224972b75109b137076f053afbc</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_script"&gt;&lt;sys_ui_script action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;description/&gt;&lt;global&gt;false&lt;/global&gt;&lt;ignore_in_now_experience&gt;false&lt;/ignore_in_now_experience&gt;&lt;name&gt;x_831378_kore_ai_0.kore-ai-sdk3.min.js&lt;/name&gt;&lt;script&gt;&lt;![CDATA[function koreAnonymousFn(a){function b(){console.info("generating UUID");var a=(new Date).getTime();return window.performance&amp;&amp;"function"==typeof window.performance.now&amp;&amp;(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&amp;c|8).toString(16)})}console.info("anonymous user login");var c=localStorage.getItem("korecom"),d=c||b();if(localStorage.setItem("korecom",d),!a.clientId)return void console.log("clientId should be there for anonymous user");var e={};e.issuer=a.clientId,e.subject=d,a.assertion=e,this.options=a,this.claims=a.assertion,this.WebClient=new this.clients.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.WebClient.anonymouslogin.login({assertion:a.assertion,botInfo:this.options.botInfo},bind(this.onLogIn,this))}var KoreGraphAdapter=function(a){function b(b,c,d,e){function f(a){return a.startAngle+(a.endAngle-a.startAngle)/2}var g=b,h=3;legendCenterOffset=0,b.message?g=b.message[0].component.payload:(fromWidgets=!0,h=4,legendCenterOffset=-15);for(var i=[],j=0,k=0;k&lt;g.elements.length;k++)i[k]={},i[k].label=g.elements[k].title,i[k].count=g.elements[k].value,i[k].dispVal=g.elements[k].displayValue,g.elements[k].hasOwnProperty("subTitle")&amp;&amp;(i[k].subTitle=g.elements[k].subTitle),j+=Number(i[k].count);for(var l=0,k=0;k&lt;g.elements.length;k++)i[k].percentage=Math.round(i[k].count/j*100),k===g.elements.length-1&amp;&amp;(i[k].percentage=100-l),l+=i[k].percentage;var m=c.width,n=c.height,o=Math.min(m,n)/2-20,p=c.legendRectSize,q=c.legendSpacing,r=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),s=d3.select(d).append("svg").attr("width",m-15).attr("height",n).append("g").attr("class","pieRegular").attr("transform","translate("+(m/h+3)+","+n/2+")"),t=d3.arc().innerRadius(0).outerRadius(o),u=d3.arc().outerRadius(1.05*o).innerRadius(.9*o),v=d3.pie().value(function(a){return a.count}).sort(null),w=d3.select(d).append("div").attr("class","legend-tooltip-pie-chart no-show").attr("transform",function(a){console.log(a)}).on("mouseleave",function(b){w.attr("class","legend-tooltip-pie-chart no-show"),a(".more-legend").removeClass("no-visible")});a(".listTemplateContainer").on("click",function(){a(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var x=(i.length-4)*(p+q+20),y=w.append("svg").attr("width","150").attr("height",x+23),z=d3.select(d).append("div").attr("class","tooltip").style("display","none");z.append("div").attr("class","label"),z.append("div").attr("class","count"),z.append("div").attr("class","percent"),i.forEach(function(a){a.count=+a.count,a.enabled=!0});var A=s.selectAll("path").data(v(i)).enter().append("g").attr("class","arcRegular").append("path").attr("d",t).attr("fill",function(a){return r(a.data.label)}).each(function(a){this._current});A.on("mouseover",function(b){d3.sum(i.map(function(a){return a.enabled?a.count:0}));"block"===a("#myPreviewModal").css("display")?b.data.dispVal?z.select("#myPreviewModal .count").html(b.data.dispVal):z.select("#myPreviewModal .count").html(b.value):b.data.dispVal?z.select(".count").html(b.data.dispVal):z.select(".count").html(b.value),z.style("display","block")}),A.on("mouseout",function(){z.style("display","none")}),A.on("mousemove",function(a){z.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),s.append("g").attr("class","labels"),s.append("g").attr("class","lines"),s.append("g").classed("labels",!0),s.append("g").classed("lines",!0);var B=(s.select(".lines").selectAll("polyline").data(v(i)).enter().append("polyline").attr("points",function(a){var b=u.centroid(a);return b[0]=.95*o*(f(a)&lt;Math.PI?1:-1),[t.centroid(a),u.centroid(a),b]}),s.select(".labels").selectAll("text").data(v(i)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(a){return a.data.percentage+"%"}).attr("transform",function(a){var b=u.centroid(a);return b[0]=.95*o*(f(a)&lt;Math.PI?1:-1),"translate("+b+")"}).style("text-anchor",function(a){return f(a)&lt;Math.PI?"start":"end"}),d3.select(d).append("div").attr("class","tooltip-legend no-show")),C=y.selectAll(".legend"+window.PieChartCount).data(r.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){var c=p+q+25,d=c*r.domain().length/2;d=r.domain()&lt;4?c*r.domain().length/2:2*c;return"translate(10,"+((b+6)*c-d-135)+")"});C.append("rect").attr("width","7").attr("height","7").style("fill",r).style("stroke",r),C.append("text").attr("x",p+q+4).attr("y",p-q).attr("class","legend-title").text(function(a){return a.length&gt;15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length&gt;15&amp;&amp;(B.attr("class","only-show tooltip-legend"),B.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length&gt;15&amp;&amp;B.attr("class","no-show tooltip-legend")}),C.append("text").attr("x",p+q+4).attr("y",p-q+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b&lt;g.elements.length&amp;&amp;i[b].label!=a;b++);return g.elements[b].hasOwnProperty("subTitle")?g.elements[b].subTitle:i[b].count});var D=s.selectAll(".legend"+window.PieChartCount).data(r.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){for(var c=-60,b=0;b&lt;i.length;b++){if(a==i[b].label){var d=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(d+=15)+","+c+")"}i[b].hasOwnProperty("subTitle")&amp;&amp;""==i[b].subTitle?c+=18:c+=33}});D.append("rect").attr("width","7").attr("height","7").style("fill",r).style("stroke",r),D.append("text").attr("x",p+q+4).attr("y",p-q).attr("class","legend-title").text(function(a){return a.length&gt;15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length&gt;15&amp;&amp;(B.attr("class","only-show tooltip-legend"),B.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length&gt;15&amp;&amp;B.attr("class","no-show tooltip-legend")}),D.append("text").attr("x",p+q+4).attr("y",p-q+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b&lt;g.elements.length&amp;&amp;i[b].label!=a;b++);return g.elements[b].hasOwnProperty("subTitle")?g.elements[b].subTitle:i[b].count}),r.domain().length&gt;4&amp;&amp;s.data(r.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(b){var c=p+q+25,d=c*r.domain().length/2;d=2*c;var e,f=7*c-d-115;try{var g=a(this).parent().siblings(".legend0")[0].getAttribute("transform");e=g.slice(10,g.lastIndexOf(","))}catch(a){e=110}return"translate("+e+","+f+")"}).on("mouseover",function(b){var c=a(this).closest(".listViewTmplContentChild").offset().top,d=a(this).closest(".listViewTmplContentChild").offset().left,e=a(this).offset().top,f=a(this).offset().left,g=e-c-87.5,h=f-d-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",h).style("top",g),a(this).addClass("no-visible")})}function c(b,c,d,e,f){function g(a){return a.startAngle+(a.endAngle-a.startAngle)/2}var h=c.width,i=c.height,j=Math.min(h,i)/2-10,k=[],l=0,m=b,n=3;legendCenterOffset=0,b.message?m=b.message[0].component.payload:(fromWidgets=!0,n=4,legendCenterOffset=-15);for(var o=0;o&lt;m.elements.length;o++)k[o]={},k[o].label=m.elements[o].title,k[o].count=Number(m.elements[o].value),k[o].dispVal=m.elements[o].displayValue,m.elements[o].hasOwnProperty("subTitle")&amp;&amp;(k[o].subTitle=m.elements[o].subTitle),l+=Number(m.elements[o].value);for(var p=0,o=0;o&lt;m.elements.length;o++)k[o].percentage=Math.round(k[o].count/l*100),o===m.elements.length-1&amp;&amp;(k[o].percentage=100-p),p+=k[o].percentage;var q=c.legendRectSize,r=c.legendSpacing,s=d3.scaleOrdinal(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),t=d3.arc().outerRadius(j-10).innerRadius(j-50),u=d3.arc().outerRadius(.9*j).innerRadius(.9*j),v=d3.pie().sort(null).value(function(a){return a.count}),w=d3.select(d).append("div").attr("class","legend-tooltip-pie-chart no-show").on("mouseleave",function(b){w.attr("class","legend-tooltip-pie-chart no-show"),a(".more-legend").removeClass("no-visible")}),x=(k.length-4)*(q+r+20),y=w.append("svg").attr("width","150").attr("height",x+23);a(".listTemplateContainer").on("click",function(){a(".legend-tooltip-pie-chart").removeClass("only-show").addClass("no-show")});var z=d3.select(d).append("svg").attr("width",h+5).attr("height",i).append("g").attr("transform","translate("+(h/n+13)+","+i/2+")"),A=z.selectAll(".arc").data(v(k)).enter().append("g").attr("class","arc");A.append("path").attr("d",t).style("fill",function(a){return s(a.data.label)});var B=d3.select(d).append("div").attr("class","tooltipDonut").style("display","none");B.append("div").attr("class","label"),B.append("div").attr("class","countDonut"),B.append("div").attr("class","percent"),k.forEach(function(a){a.count=+a.count,a.enabled=!0}),z.append("g").attr("class","labels"),z.append("g").attr("class","lines"),z.append("g").classed("labels",!0),z.append("g").classed("lines",!0);z.select(".lines").selectAll("polyline").data(v(k)).enter().append("polyline").attr("points",function(a){var b=u.centroid(a);return b[0]=.95*j*(g(a)&lt;Math.PI?1:-1),[t.centroid(a),u.centroid(a),b]}).style("display",function(a){return 0==a.data.percentage?"none":"block"}),z.select(".labels").selectAll("text").data(v(k)).enter().append("text").attr("dy",".35em").attr("class","chart-disp-val").html(function(a){return a.data.percentage+"%"}).attr("transform",function(a){var b=u.centroid(a);return b[0]=.95*j*(g(a)&lt;Math.PI?1:-1),b[0]=b[0]+10,"translate("+b+")"}).style("text-anchor",function(a){return g(a)&lt;Math.PI?"start":"end"}).style("display",function(a){return 0==a.data.percentage?"none":"block"});if(A.on("mouseover",function(b){d3.sum(k.map(function(a){return a.enabled?a.count:0}));"block"===a("#myPreviewModal").css("display")?b.data.dispVal?B.select("#myPreviewModal .countDonut").html(b.data.dispVal):B.select("#myPreviewModal .countDonut").html(b.value):b.data.dispVal?B.select(".countDonut").html(b.data.dispVal):B.select(".countDonut").html(b.value),B.style("display","block")}),A.on("mouseout",function(){B.style("display","none")}),A.on("mousemove",function(a){B.style("top",d3.event.layerY+10+"px").style("left",d3.event.layerX+10+"px")}),"donut_legend"===f||"donut"===f){var C=d3.select(d).append("div").attr("class","tooltip-legend no-show"),D=y.selectAll(".legend"+window.PieChartCount).data(s.domain().slice(4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){var c=q+r+25,d=c*s.domain().length/2;d=s.domain()&lt;5?c*s.domain().length/2:2*c;return"translate(10,"+((b+6)*c-d-135)+")"});D.append("rect").attr("width","7").attr("height","7").style("fill",s).style("stroke",s),D.append("text").attr("x",q+r+4).attr("y",q-r).attr("class","legend-title").text(function(a){return a.length&gt;15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length&gt;11&amp;&amp;(C.attr("class","only-show tooltip-legend"),C.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length&gt;15&amp;&amp;C.attr("class","no-show tooltip-legend")}),D.append("text").attr("x",q+r+4).attr("y",q-r+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b&lt;m.elements.length&amp;&amp;k[b].label!=a;b++);return m.elements[b].hasOwnProperty("subTitle")?m.elements[b].subTitle:m.elements[b].value});var E=z.selectAll(".legend"+window.PieChartCount).data(s.domain().slice(0,4)).enter().append("g").attr("class","legend"+window.PieChartCount).attr("transform",function(a,b){for(var c=-60,b=0;b&lt;k.length;b++){if(a==k[b].label){var d=Number(this.parentElement.getAttribute("transform").slice(10,this.parentElement.getAttribute("transform").indexOf(",")));return"translate("+(d+=15)+","+c+")"}k[b].hasOwnProperty("subTitle")&amp;&amp;""==k[b].subTitle?c+=18:c+=33}});E.append("rect").attr("width","7").attr("height","7").style("fill",s).style("stroke",s),E.append("text").attr("x",q+r+4).attr("y",q-r).attr("class","legend-title").text(function(a){return a.length&gt;15?a.slice(0,12)+"...":a}).on("mouseover",function(a){a.length&gt;15&amp;&amp;(C.attr("class","only-show tooltip-legend"),C.html(a).style("left",d3.event.pageX-1090+"px").style("top",d3.event.pageY-164+"px"))}).on("mouseout",function(a){a.length&gt;15&amp;&amp;C.attr("class","no-show tooltip-legend")}),E.append("text").attr("x",q+r+4).attr("y",q-r+16).attr("class","legend-value").attr("font-weight","bold").text(function(a){for(var b=0;b&lt;m.elements.length&amp;&amp;k[b].label!=a;b++);return m.elements[b].hasOwnProperty("subTitle")?m.elements[b].subTitle:k[b].count}),s.domain().length&gt;4&amp;&amp;z.data(s.domain()).append("g").append("text").text("More...").attr("class","more-legend").attr("fill","#009dab").attr("font-weight","bold").attr("cursor","pointer").attr("transform",function(b){var c=q+r+25,d=c*s.domain().length/2;d=2*c;var e,f=7*c-d-115;try{var g=a(this).parent().siblings(".legend0")[0].getAttribute("transform");e=g.slice(10,g.lastIndexOf(","))}catch(a){e=110}return"translate("+e+","+f+")"}).on("mouseover",function(b){var c=a(this).closest(".listViewTmplContentChild").offset().top,d=a(this).closest(".listViewTmplContentChild").offset().left,e=a(this).offset().top,f=a(this).offset().left,g=e-c-87.5,h=f-d-15;w.attr("class","legend-tooltip-pie-chart only-show").style("position","absolute").style("left",h).style("top",g),a(this).addClass("no-visible")})}}function d(a,b,c,d){var e=d3.select(c).append("svg").attr("width",b.outerWidth).attr("height",b.outerHeight),f={top:20,right:20,bottom:30,left:40},g=b.innerWidth,h=b.innerHeight,i=e.append("g").attr("transform","translate(20,"+f.top+")"),j=a;legendCenterOffset=0,a.message?j=a.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);var k=d3.scaleBand().rangeRound([0,g]).paddingInner(.05).align(.1),l=d3.scaleLinear().rangeRound([h,0]),m=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),n=[],o=[];o.push("xAxis");for(var p=0;p&lt;j.elements.length;p++)o.push(j.elements[p].title);for(var p=0;p&lt;j.X_axis.length;p++)n[p]={},n[p].dispVal=[],n[p][o[0]]=j.X_axis[p];for(var p=0;p&lt;j.elements.length;p++)for(var q=0;q&lt;j.elements[p].values.length;q++)n[q][o[p+1]]=j.elements[p].values[q],j.elements[p].displayValues&amp;&amp;(n[q].dispVal[p]=j.elements[p].displayValues[q]);for(var r=o.slice(1),p=0;p&lt;n.length;p++){var s=0;for(key in n[p])"xAxis"!==key&amp;&amp;"dispVal"!==key&amp;&amp;(s+=n[p][key]);n[p].total=s}k.domain(n.map(function(a){return a.xAxis})),l.domain([0,d3.max(n,function(a){return a.total})]).nice(),m.domain(r),coordsVal=[],i.append("g").selectAll("g").data(d3.stack().keys(r)(n)).enter().append("g").attr("fill",function(a){return m(a.key)}).selectAll("rect").data(function(a,b){coordsVal[b]=[];for(var c=0;c&lt;a.length;c++)coordsVal[b][c]={x:a[c][0],y:a[c][1],val:a[c].data.dispVal[b]};return a}).enter().append("rect").attr("x",function(a){return k(a.data.xAxis)}).attr("y",function(a){return l(a[1])}).attr("height",function(a){return l(a[0])-l(a[1])}).attr("width",.5*k.bandwidth()).attr("dispVal",function(a){for(var b=0;b&lt;coordsVal.length;b++)for(var c=0;c&lt;coordsVal[b].length;c++)if(coordsVal[b][c].x===a[0]&amp;&amp;coordsVal[b][c].y===a[1])return coordsVal[b][c].val}).attr("transform","translate("+.25*k.bandwidth()+",0)").on("mouseover",function(){v.style("display",null)}).on("mouseout",function(){v.style("display","none")}).on("mousemove",function(a){var b=d3.mouse(this)[0]-5,c=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var d=this.attributes.dispVal.value;else var d=a[1]-a[0];v.attr("transform","translate("+b+","+c+")"),v.select("text").text(d)}),i.append("g").attr("class","axis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(k)),i.selectAll("text").attr("class","chart-disp-val").attr("transform","rotate(-65) translate(-30, 0)"),i.append("g").attr("class","axis").call(d3.axisLeft(l).ticks(null,"s")).append("text").attr("x",2).attr("y",l(l.ticks().pop())-10).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),i.selectAll("text").attr("class","chart-disp-val"),i.selectAll(".axis .domain").classed("chart-axis-line",!0),i.selectAll(".axis line").classed("chart-axis-line",!0);var t=d3.select(c).append("div").attr("class","tooltip-legend no-show"),u=i.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(r.slice().reverse()).enter().append("g").attr("transform",function(a,b){return"translate(48,"+20*b+")"});u.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",m),u.append("text").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(a){return a.length&gt;10?a.slice(0,7)+"...":a}).on("mouseover",function(a){t.attr("class","only-show tooltip-legend"),t.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){t.attr("class","no-show tooltip-legend")});var v=e.append("g").attr("class","tooltipVSB").style("display","none");v.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),v.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function e(a,b){g(a,b)}function f(b,c,d){var e=d3.scaleOrdinal().range(d),f=b.substr(1,b.length);f=f.replace(/ +/g,"").replace(/#/g,""),a(b).before("&lt;div id='Legend_"+f+"' class='pmd-card-body' style='margin-top:0; margin-bottom:0;'&gt;&lt;/div&gt;"),Object.keys(c).forEach(function(b){var d=e(b);a("#Legend_"+f).append("&lt;span class='team-graph team1' style='display: inline-block; margin-right:10px;margin-left: 20px;'&gt;        &lt;span style='background:"+d+";width: 10px;height: 10px;display: inline-block;vertical-align: middle;'&gt;&amp;nbsp;&lt;/span&gt;        &lt;span title="+c[b].replace(/[ ]/g," ")+" style='padding-top: 0;font-family:Source Sans Pro, sans-serif;font-size: 13px;display: inline;'&gt;"+(c[b].length&gt;10?c[b].slice(0,7)+"...":c[b])+" &lt;/span&gt;    &lt;/span&gt;")})}function g(b,c){var d=b.data,e=b.columnsInfo,g=b.xAxis,h=b.yAxis,i=b.colorRange,j=b.mainDiv,k=j.substr(1,j.length),l=b.label,n=b.requireLegend;d3.select(j).append("svg").attr("width",c.outerWidth).attr("height",c.outerHeight);var o=d3.select(j+" svg"),p={top:20,right:20,bottom:40,left:70},q=c.innerWidth,r=c.innerHeight,s=o.append("g").attr("transform","translate("+p.left+","+p.top+")");null!=n&amp;&amp;void 0!=n&amp;&amp;0!=n&amp;&amp;(a("#Legend_"+k).remove(),f(j,e,i));var t=d3.scaleBand().rangeRound([r,0]).paddingInner(.1),u=d3.scaleBand().padding(.05),v=d3.scaleLinear().rangeRound([0,q]),w=d3.scaleOrdinal().range(i),x=Object.keys(e);t.domain(d.map(function(a){return a[h]})),u.domain(x).rangeRound([0,t.bandwidth()]),v.domain([0,d3.max(d,function(a){return d3.max(x,function(b){return a[b]})})]).nice(),maxTicks=10;var y=s.append("g").selectAll("g").data(d).enter().append("g").attr("transform",function(a){return"translate(0,"+t(a[h])+")"}),z=(y.selectAll("rect").data(function(a,b){return x.map(function(c){return{key:c,value:a[c],index:c+"_"+b+"_"+a[h],dispVal:a[c+"dispVal"]}})}).enter().append("rect").attr("y",function(a){return u(a.key)}).attr("width",function(a){return v(a.value)}).attr("data-index",function(a,b){return a.index}).attr("displayVal",function(a){return a.dispVal}).attr("height",u.bandwidth()).on("mouseover",function(){A.style("display",null)}).on("mouseout",function(){A.style("display","none")}).on("mousemove",function(b){if("block"===a("#myPreviewModal").css("display"))var c=d3.event.pageX-document.querySelector(".chartContainerDiv").getBoundingClientRect().x+10,d=d3.event.pageY-document.querySelector(".chartContainerDiv").getBoundingClientRect().y+10;else var c=d3.event.pageX-document.querySelector(j).getBoundingClientRect().x+10,d=d3.event.pageY-document.querySelector(j).getBoundingClientRect().y+10;if(this.attributes.displayVal)var e=this.attributes.displayVal.value;else var e=b.value;d3.mouse(this)[0],d3.mouse(this)[1];A.attr("transform","translate("+c+","+d+")"),A.select("text").text(e)}).attr("fill",function(a){return w(a.key)}),{});z.svg=o,z.cssPrefix="horgroupBar0_",z.data=d,z.keys=x,z.height=r,z.width=q,z.label=l,z.yAxis=h,z.xAxis=g,m.addTooltips(z);var A=o.append("g").attr("class","tooltipHBC").style("display","none");A.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),A.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold"),s.append("g").attr("class","axis").attr("transform","translate(0,"+r+")").call(d3.axisBottom(v).ticks(maxTicks)).append("text").attr("x",q/2).attr("y",.7*p.bottom).attr("dx","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),s.append("g").attr("class","axis").call(d3.axisLeft(t).ticks(null,"s")).append("text").attr("x",.4*r*-1).attr("y",.8*p.left*-1).attr("dy","0.71em").attr("fill","#000").attr("transform","rotate(-90)").attr("font-weight","bold"),s.selectAll(".axis text").attr("class","chart-disp-val"),s.selectAll(".axis line").attr("class","chart-axis-line"),s.selectAll(".axis .domain").classed("chart-axis-line",!0)}function h(b,c,d,f){window.addEventListener("resize",function(b){a("#chart").width(.9*window.innerWidth),a("#chart").height(window.innerHeight)});var g=[],h=b;legendCenterOffset=0,b.message?h=b.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);for(var i=0;i&lt;h.X_axis.length;i++){g[i]={},g[i].date=h.X_axis[i];for(var j=0;j&lt;h.elements.length;j++)g[i][h.elements[j].title]=h.elements[j].values[i],h.elements[j].displayValues&amp;&amp;(g[i][h.elements[j].title+"dispVal"]=h.elements[j].displayValues[i])}for(var k={},j=0;j&lt;h.elements.length;j++)k[h.elements[j].title]=h.elements[j].title;a(d).empty();var l={mainDiv:d,colorRange:["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],data:g,columnsInfo:k,xAxis:"value",yAxis:"date",label:{xAxis:"Value",yAxis:"Dates"},requireLegend:!0};new e(l,c)}function i(a,b,c,d){var e=d3.select(c).append("svg").attr("width",b.outerWidth).attr("height",b.outerHeight),f={top:20,right:20,bottom:30,left:35},g=b.innerWidth,h=b.innerHeight,i=e.append("g").attr("transform","translate("+f.left+","+f.top+")"),j=a,k=d3.scaleBand().rangeRound([0,g]).paddingInner(.1),l=d3.scaleBand().padding(.05),m=d3.scaleLinear().rangeRound([h,0]),n=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]);a.message?j=a.message[0].component.payload:(fromWidgets=!0,widthDivision=4,legendCenterOffset=-15);var o=[],p=[];p.push("xAxis");for(var q=0;q&lt;j.elements.length;q++)p.push(j.elements[q].title);for(var q=0;q&lt;j.X_axis.length;q++)o[q]={},o[q][p[0]]=j.X_axis[q];for(var q=0;q&lt;j.elements.length;q++)for(var r=0;r&lt;j.elements[q].values.length;r++)o[r][p[q+1]]=j.elements[q].values[r],j.elements[q].displayValues&amp;&amp;(o[r][p[q+1]+"dispVal"]=j.elements[q].displayValues[r]);var s=p.slice(1);k.domain(o.map(function(a){return a.xAxis})),l.domain(s).rangeRound([0,k.bandwidth()]),m.domain([0,d3.max(o,function(a){return d3.max(s,function(b){return a[b]})})]).nice(),i.append("g").selectAll("g").data(o).enter().append("g").attr("transform",function(a){return"translate("+k(a.xAxis)+",0)"}).selectAll("rect").data(function(a){return s.map(function(b){return{key:b,value:a[b],dispVal:a[b+"dispVal"]}})}).enter().append("rect").on("mouseover",function(){v.style("display",null)}).on("mouseout",function(){v.style("display","none")}).on("mousemove",function(a){var b=1.25*this.parentNode.transform.baseVal[0].matrix.e,c=d3.mouse(this)[1]-5;if(a.dispVal)var d=a.dispVal;else var d=a.value;v.attr("transform","translate("+b+","+c+")"),v.select("text").text(d)}).attr("x",function(a){return l(a.key)}).attr("y",function(a){return m(a.value)}).attr("width",l.bandwidth()).attr("height",function(a){return h-m(a.value)}).attr("fill",function(a){return n(a.key)}),i.append("g").attr("class","axis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(k)),i.selectAll("text").attr("transform","rotate(-65) translate(-30, 0)"),i.append("g").attr("class","axis").call(d3.axisLeft(m).ticks(null,"s")).append("text").attr("x",2).attr("y",m(m.ticks().pop())+.5).attr("dy","0.12em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start"),i.selectAll(".axis text").attr("class","chart-disp-val"),i.selectAll(".axis line").attr("class","chart-axis-line"),i.selectAll(".axis .domain").classed("chart-axis-line",!0);var t=d3.select(c).append("div").attr("class","tooltip-legend no-show"),u=i.append("g").attr("font-family","sans-serif").attr("font-size",8).attr("text-anchor","end").selectAll("g").data(s.slice().reverse()).enter().append("g").attr("transform",function(a,b){return"translate(60,"+20*b+")"});u.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",n),u.append("text").attr("class","chart-disp-val").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").text(function(a){return a.length&gt;10?a.slice(0,7)+"...":a}).on("mouseover",function(a){t.attr("class","only-show tooltip-legend"),t.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){t.attr("class","no-show tooltip-legend")});var v=e.append("g").attr("class","tooltipBC").style("display","none");v.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),v.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function j(a,b,c,d){var e=d3.select(c).append("svg").attr("width",b.outerWidth).attr("height",b.outerHeight),f={top:20,right:20,bottom:30,left:40},g=b.innerWidth,h=b.innerHeight,i=e.append("g").attr("transform","translate(70,"+f.top+")"),j=a;legendCenterOffset=0,a.message?j=a.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);var k=d3.scaleBand().rangeRound([0,h]).paddingInner(.05).align(.1),l=d3.scaleLinear().rangeRound([0,g]),m=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),n=[],o=[];o.push("xAxis");for(var p=0;p&lt;j.elements.length;p++)o.push(j.elements[p].title);for(var p=0;p&lt;j.X_axis.length;p++)n[p]={},n[p].dispVal=[],n[p][o[0]]=j.X_axis[p];for(var p=0;p&lt;j.elements.length;p++)for(var q=0;q&lt;j.elements[p].values.length;q++)n[q][o[p+1]]=j.elements[p].values[q],j.elements[p].displayValues&amp;&amp;(n[q].dispVal[p]=j.elements[p].displayValues[q]);for(var r=o.slice(1),p=0;p&lt;n.length;p++){var s=0;for(key in n[p])"xAxis"!==key&amp;&amp;"dispVal"!==key&amp;&amp;(s+=n[p][key]);n[p].total=s}k.domain(n.map(function(a){return a.xAxis})),l.domain([0,d3.max(n,function(a){return a.total})]).nice(),m.domain(r);var t=[];i.append("g").selectAll("g").data(d3.stack().keys(r)(n)).enter().append("g").attr("fill",function(a){return m(a.key)}).selectAll("rect").data(function(a,b){t[b]=[];for(var c=0;c&lt;a.length;c++)t[b][c]={x:a[c][0],y:a[c][1],val:a[c].data.dispVal[b]};return a}).enter().append("rect").attr("y",function(a){return k(a.data.xAxis)}).attr("x",function(a){return l(a[0])}).attr("width",function(a){return l(a[1])-l(a[0])}).attr("height",.5*k.bandwidth()).attr("transform","translate(0,"+.25*k.bandwidth()+")").attr("dispVal",function(a){for(var b=0;b&lt;t.length;b++)for(var c=0;c&lt;t[b].length;c++)if(t[b][c].x===a[0]&amp;&amp;t[b][c].y===a[1])return t[b][c].val}).on("mouseover",function(){w.style("display",null)}).on("mouseout",function(){w.style("display","none")}).on("mousemove",function(a){var b=d3.mouse(this)[0]-5,c=d3.mouse(this)[1]-5;if(this.attributes.dispVal)var d=this.attributes.dispVal.value;else var d=a[1]-a[0];w.attr("transform","translate("+b+","+c+")"),w.select("text").text(d)}),i.append("g").attr("class","axis").attr("transform","translate(0,"+h+")").call(d3.axisBottom(l).ticks(null,"s")).append("text").attr("y",40).attr("x",l(l.ticks().pop())+.5).attr("dy","0.32em").attr("fill","#000").attr("font-weight","bold").attr("text-anchor","start").attr("transform","translate("+-g+",-10)"),i.append("g").attr("class","axis").attr("transform","translate(0,0)").call(d3.axisLeft(k)),i.selectAll(".axis text").attr("class","chart-disp-val"),i.selectAll(".axis line").attr("class","chart-axis-line"),i.selectAll(".axis .domain").classed("chart-axis-line",!0);var u=d3.select(c).append("div").attr("class","tooltip-legend no-show"),v=i.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(r.slice().reverse()).enter().append("g").attr("transform",function(a,b){return"translate(80,"+(150+20*b)+")"});v.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",m),v.append("text").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(a){return a.length&gt;10?a.slice(0,7)+"...":a}).on("mouseover",function(a){u.attr("class","only-show tooltip-legend"),u.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){u.attr("class","no-show tooltip-legend")});var w=e.append("g").attr("class","tooltipHStacked").style("display","none");w.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),w.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function k(b,c,d,e){var f={top:35,right:120,bottom:30,left:30},g=c.innerWidth,h=c.innerHeight,i=["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"],j=d3.scaleOrdinal().range(["#5bc8c4","#4a9af2","#8ecb60","#e7cc61","#eeaf4b","#ef7e63","#8e8eb7","#6483c3","#2249ab","#f352b7"]),k=b;legendCenterOffset=0,b.message?k=b.message[0].component.payload:(fromWidgets=!0,4,legendCenterOffset=-15);var l=k.X_axis,m=k.elements,n=d3.scaleLinear().domain([0,l.length-1]).range([0,g]),o=d3.scaleLinear().domain([0,60]).range([h,0]),p=d3.line().x(function(a){return n(a.ind)}).y(function(a){return o(a.value)}),q=d3.select(d).append("svg").attr("width",c.outerWidth).attr("height",c.outerHeight),r=q.append("g").attr("transform","translate("+f.left+","+f.top+")"),s=d3.axisBottom(n).tickFormat(function(a){return l[a]}),t=d3.axisLeft(o).tickFormat(d3.format(".2s"));r.append("g").attr("class","axis").call(t),r.append("g").attr("transform","translate(0,"+h+")").call(s).attr("class","axis xAxisR"),r.selectAll(".xAxisR text").attr("transform","rotate(-65) translate(-30, 0)");var u,v=[],w=[],x=[],y={};v.push("xAxis");for(var z=0;z&lt;k.elements.length;z++)v.push(k.elements[z].title);for(var z=0;z&lt;k.elements.length;z++){w[z]={},w[z].valueSet=[],w[z].name=k.elements[z].title,w[z].currentVal=k.elements[z].values[k.elements[z].values.length-1];for(var A=0;A&lt;k.elements[z].values.length;A++)x[A]=x[A]||{},x[A].x_Axis=k.X_axis[A],x[A][v[z+1]]=k.elements[z].values[A],w[z].valueSet[A]={},w[z].valueSet[A].value=k.elements[z].values[A],k.elements[z].displayValues&amp;&amp;(w[z].valueSet[A].dispVal=k.elements[z].displayValues[A],y[k.elements[z].title]=k.elements[z].displayValues[A].replace(/[0-9]/g,"")),w[z].valueSet[A].x_Axis=k.X_axis[A],w[z].valueSet[A].ind=A}var B=v.slice(1),C=v.slice(1).map(function(a){return{id:a,values:x.map(function(b){return{xAxis:b.xAxis,temperature:b[a]}})}});u=w,r.selectAll().data(u).enter().append("path").attr("fill","none").attr("stroke",function(a){return j(a.name)}).attr("stroke-width",2).datum(function(a){return a.valueSet}).attr("d",p).attr("class","lineC"),r.selectAll().data(u).enter().append("text").html(function(a){}).attr("fill",function(a){return a.color}).attr("alignment-baseline","middle").attr("x",g).attr("dx",".5em").attr("y",function(a){return o(a.currentVal)});var D=q.append("g").attr("class","mouse-over-effects"),E=document.getElementsByClassName("lineC"),F=D.selectAll(".mouse-per-line").data(C).enter().append("g").attr("class","mouse-per-line");F.append("circle").attr("r",7).style("stroke",function(a,b){return i[b]}).style("fill","none").style("stroke-width","3px").style("opacity","0").attr("transform","translate(30,35)"),F.append("text").attr("transform",function(a,b){return 0==b?"translate(40,40)":1==b?"translate(20,10)":"translate(0,40)"}),D.append("svg:rect").attr("width",c.innerWidth+5).attr("height",c.innerHeight).attr("transform","translate(30,35)").attr("fill","none").attr("pointer-events","all").on("mouseout",function(){d3.selectAll(".mouse-per-line circle").style("opacity","0"),d3.selectAll(".mouse-per-line text").style("opacity","0")}).on("mouseover",function(){"block"===a("#myPreviewModal").css("display")?a(".lineChartChildDiv .mouse-per-line").hide():a(".lineChartChildDiv .mouse-per-line").show(),d3.selectAll(".mouse-per-line circle").style("opacity","0.5"),d3.selectAll(".mouse-per-line text").style("opacity","1")}).on("mousemove",function(){var a=d3.mouse(this);d3.selectAll(".mouse-per-line").attr("transform",function(b,c){var d=n.invert(a[0]),e=d3.bisector(function(a){return a.date}).right;idx=e(b.values,d);for(var f=0,g=E[c].getTotalLength()+2,h=null;;){if(h=Math.floor((f+g)/2),pos=E[c].getPointAtLength(h),(h===g||h===f)&amp;&amp;pos.x!==a[0])break;if(pos.x&gt;a[0])g=h;else{if(!(pos.x&lt;a[0]))break;f=h}}return xtempLC=n,d3.select(this).select("text").text(function(a,b){for(var c=[],d=0;d&lt;m.length;d++)if(m[d].title===a.id)for(var e=0;e&lt;a.values.length;e++)c[e]=a.values[e].temperature;if(void 0!==y[this.__data__.id]){var f=o.invert(pos.y).toFixed(2);return-1!==c.indexOf(Math.round(f))&amp;&amp;c.indexOf(Math.round(f))===Math.round(xtempLC.invert(pos.x))?o.invert(pos.y).toFixed(2)+"\n"+l[Math.round(xtempLC.invert(pos.x))]:o.invert(pos.y).toFixed(2)+y[this.__data__.id]}var f=o.invert(pos.y).toFixed(2);return-1!==c.indexOf(Math.round(f))&amp;&amp;c.indexOf(Math.round(f))===Math.round(xtempLC.invert(pos.x))?o.invert(pos.y).toFixed(2)+"\n"+l[Math.round(xtempLC.invert(pos.x))]:o.invert(pos.y).toFixed(2)}),"translate("+a[0]+","+pos.y+")"})}),r.selectAll(".axis text").attr("class","chart-disp-val"),r.selectAll(".axis line").attr("class","chart-axis-line"),r.selectAll(".axis .domain").classed("chart-axis-line",!0);var G=d3.select(d).append("div").attr("class","tooltip-legend no-show"),H=q.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(B.slice().reverse()).enter().append("g").attr("transform",function(a,b){return 230===c.innerWidth?"translate(100,"+(250+20*b)+")":"translate(100,"+(230+20*b)+")"});H.append("rect").attr("x",g-19).attr("width",19).attr("height",19).attr("fill",j),H.append("text").attr("x",g-24).attr("y",9.5).attr("dy","0.32em").attr("class","chart-disp-val").text(function(a){return a.length&gt;10?a.slice(0,7)+"...":a}).on("mouseover",function(a){G.attr("class","only-show tooltip-legend"),G.html(a).style("left",d3.event.pageX-1042+"px").style("top",d3.event.pageY-178+"px")}).on("mouseout",function(a){G.attr("class","no-show tooltip-legend")})}var l={getDimensions:function(a){var b=document.getElementById(a),c=0,d=0;if(b){var e=b.getBBox();c=e.width,d=e.height}else console.log("error: getDimensions() "+a+" not found.");return{w:c,h:d}}},m={addTooltips:function(a){var b=a.keys,c=a.svg.append("g").selectAll("g").data(a.data).enter().append("g").attr("class",function(b,c){return a.cssPrefix+"tooltips_"+c});tooltips=c.selectAll("g").data(function(c,d){return b.map(function(b){return{key:b,value:c[b],index:b+"_"+d+"_"+c[a.yAxis]}})}).enter().append("g").attr("class",a.cssPrefix+"tooltip").attr("id",function(b,c){return a.cssPrefix+"tooltip"+b.index}).style("opacity",0).append("rect").attr("rx",2).attr("ry",2).attr("x",-2).attr("opacity",.71).style("fill","#000000"),c.selectAll("g").data(function(c,d){return b.map(function(b){return{key:b,value:c[b],index:b+"_"+d+"_"+c[a.yAxis]}})}).append("text").attr("fill",function(a){return"#efefef"}).style("font-size",function(a){return 10}).style("font-family",function(a){return"arial"}).text(function(b,c){var d=a.label.xAxis+":{value}";return m.replacePlaceholders(a,d,c,{value:b.value})}),c.selectAll("g rect").attr("width",function(b,c){return l.getDimensions(a.cssPrefix+"tooltip"+b.index).w+8}).attr("height",function(b,c){return l.getDimensions(a.cssPrefix+"tooltip"+b.index).h+8}).attr("y",function(b,c){return-l.getDimensions(a.cssPrefix+"tooltip"+b.index).h/2+1})},showTooltip:function(a,b){var c=250;m.currentTooltip===b&amp;&amp;(c=1),m.currentTooltip=b,d3.select("#"+a.cssPrefix+"tooltip"+b).transition().duration(c).style("opacity",function(){return 1}),m.moveTooltip(a)},moveTooltip:function(a){d3.selectAll("#"+a.cssPrefix+"tooltip"+m.currentTooltip).attr("transform",function(a){var b=d3.mouse(this.parentNode);return"translate("+(b[0]+4+2)+","+(b[1]-8-2)+")"})},hideTooltip:function(a,b){d3.select("#"+a.cssPrefix+"tooltip"+b).style("opacity",function(){return 0}),d3.select("#"+a.cssPrefix+"tooltip"+m.currentTooltip).attr("transform",function(b,c){return"translate("+(a.width+1e3)+","+(a.height+1e3)+")"})},replacePlaceholders:function(a,b,c,d){var e=function(){return function(a){var b=arguments[1];return d.hasOwnProperty(b)?d[arguments[1]]:arguments[0]}};return b.replace(/\{(\w+)\}/g,e(d))}};return{drawD3Pie:b,drawD3PieDonut:c,drawD3barChart:i,drawD3barStackedChart:j,drawD3barVerticalStackedChart:d,drawD3barHorizontalbarChart:h,drawD3lineChartV2:k}}($),bind=_.bind;requireKr=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&amp;&amp;require;if(!h&amp;&amp;i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&amp;&amp;require,g=0;g&lt;d.length;g++)e(d[g]);return e}({"/KoreBot.js":[function(a,b,c){function d(){g.call(this),this.WebClient=null,this.RtmClient=null,this.options={},this.accessToken=null,this.initialized=!1,this.clients=f,this.latestId=null,this.oldestId=null}var e,f=a("./index.js"),g=a("events"),h=a("inherits");e=a("lodash").bind?a("lodash"):_;var j=e.bind,k=e.isFunction,l=f.CLIENT_EVENTS.RTM,m=f.RTM_EVENTS,n=a("./jstz.js"),o=e.noop;"undefined"!=typeof window&amp;&amp;(window.kore=window.kore||{},window.kore.botsdk=window.kore.botsdk||{},window.kore.botsdk.logger=window.kore.botsdk.logger||a("debug"),window.messageHistoryLimit=10);var p=a("debug")("botsdk:KoreBot"),q={city:"",country:"",latitude:0,longitude:0,street:""},r=!1;h(d,g),d.prototype.emit=function(){arguments&amp;&amp;"history"===arguments[0]&amp;&amp;this.historySyncInProgress?(arguments[2]="historysync",this.cbBotChatHistory(arguments)):!window._chatHistoryLoaded&amp;&amp;arguments&amp;&amp;"history"===arguments[0]?(r=!0,this.cbBotChatHistory(arguments)):r&amp;&amp;arguments&amp;&amp;"history"===arguments[0]&amp;&amp;setTimeout(function(){$(".chatInputBox").focus(),$(".disableFooter").removeClass("disableFooter")}),d.super_.prototype.emit.apply(this,arguments)},d.prototype.fetchUserLocation=function(){if(""===q.country){console.log("Fetching user location");var a=this.options,b=function(b){if(a.googleMapsAPIKey){var c=b.coords.latitude,d=b.coords.longitude;q.latitude=c,q.longitude=d;var e=new XMLHttpRequest,f="https://maps.googleapis.com/maps/api/geocode/json?latlng="+c+","+d+"&amp;sensor=true&amp;key="+a.googleMapsAPIKey;e.open("GET",f,!0),e.onreadystatechange=function(){if(4==e.readyState&amp;&amp;200==e.status){var a=JSON.parse(e.responseText);"undefined"!=typeof Storage&amp;&amp;(0==a.results.length?a=JSON.parse(localStorage.getItem("locationData")):localStorage.setItem("locationData",JSON.stringify(a)));var b=[];for(a.results&amp;&amp;a.results.length&amp;&amp;a.results[0].address_components&amp;&amp;(b=a.results[0].address_components),i=0;i&lt;b.length;i++){var c=b[i].types;"locality,political"==c?q.city=b[i].long_name:"country,political"==c?q.country=b[i].long_name:"political,sublocality,sublocality_level_2"==c&amp;&amp;(q.street=b[i].long_name)}}},e.send()}else console.warn("please provide google maps API key")};navigator.geolocation.getCurrentPosition(b)}},d.prototype.sendMessage=function(a,b){p("sending message to bot"),this.initialized?(a.resourceid="/bot.message",a.botInfo=this.options.botInfo||{},a.client=this.options.client||"sdk",a.meta={timezone:n.jstz.determine().name(),locale:window.navigator.userLanguage||window.navigator.language},0!==q.latitude&amp;&amp;0!==q.longitude&amp;&amp;(a.meta.location=q),this.RtmClient.sendMessage(a,b)):b&amp;&amp;b(new Error("Bot is Initializing...Please try again"))},d.prototype.onMessage=function(a){p("on message from bot/self"),"bot"===a.from&amp;&amp;"bot_response"===a.type&amp;&amp;(this.latestId=a.messageId||this.latestId,this.oldestId=this.oldestId||a.messageId),this.emit(m.MESSAGE,a)},d.prototype.close=function(){p("request to close ws connection"),this.RtmClient&amp;&amp;this.RtmClient._close()},d.prototype.destroy=function(){this.RtmClient&amp;&amp;this.RtmClient._close(),r=!1,this.removeAllListeners()},d.prototype.onForwardHistory=function(a,b){p("on forward history");var c={};if(c.moreAvailable=b.moreAvailable,c.messages=[],c.forward=!0,c.afterMessageId=this.latestId,b.messages&amp;&amp;b.messages.length&gt;0){var d;for(d=0;d&lt;b.messages.length;d++){var e={};e.messageId=b.messages[d]._id,this.oldestId=this.oldestId||b.messages[d]._id,this.latestId=b.messages[d]._id||this.latestId,"incoming"===b.messages[d].type?(e.from="self",e.type="user_message"):(e.from="bot",e.type="bot_response");var f=0;if(b.messages[d].components&amp;&amp;b.messages[d].components.length&gt;0)for(e.message=[],f=0;f&lt;b.messages[d].components.length;f++){var g={};g.type=b.messages[d].components[f].cT,"text"===g.type&amp;&amp;(g.cInfo={},g.cInfo.body=b.messages[d].components[f].data&amp;&amp;b.messages[d].components[f].data.text),e.message[f]=g}e.createdOn=b.messages[d].createdOn,c.messages[d]=e}}this.emit("history",c)},d.prototype.onBackWardHistory=function(a,b){p("on backword history");var c={};if(c.moreAvailable=b.moreAvailable,c.messages=[],c.backward=!0,c.beforeMessageId=this.oldestId,b.messages&amp;&amp;b.messages.length&gt;0){var d;for(d=0;d&lt;b.messages.length;d++){var e={};e.messageId=b.messages[d]._id,this.oldestId=b.messages[d]._id||this.oldestId,this.latestId=this.latestId||b.messages[d]._id,"incoming"===b.messages[d].type?(e.from="self",e.type="user_message"):(e.from="bot",e.type="bot_response",e.icon=b.icon);var f=0;if(b.messages[d].components&amp;&amp;b.messages[d].components.length&gt;0)for(e.message=[],f=0;f&lt;b.messages[d].components.length;f++){var g={};g.type=b.messages[d].components[f].cT,"text"===g.type&amp;&amp;(g.cInfo={},g.cInfo.body=b.messages[d].components[f].data&amp;&amp;b.messages[d].components[f].data.text),e.message[f]=g}e.createdOn=b.messages[d].createdOn,c.messages[d]=e}}this.emit("history",c)},d.prototype.getHistory=function(a){p("get history"),a=a||{},"undefined"!=typeof window&amp;&amp;(a.limit=a.limit||window.messageHistoryLimit||10);var b={};b.forward=a.forward,b.limit=a.limit||10,b.forward?this.latestId&amp;&amp;(b.msgId=this.latestId):this.oldestId&amp;&amp;(b.msgId=this.oldestId),b.botInfo=this.options.botInfo,b.authorization="bearer "+this.WebClient.user.accessToken,a.forHistorySync&amp;&amp;(this.historySyncInProgress=!0,delete b.msgId),b.forward?this.WebClient.history.history(b,j(this.onForwardHistory,this)):this.WebClient.history.history(b,j(this.onBackWardHistory,this))},d.prototype.sync=function(a){},d.prototype.onOpenWSConnection=function(a){p("opened WS Connection"),this.initialized=!0,this.options.loadHistory&amp;&amp;!r&amp;&amp;this.getHistory({}),this.emit(l.RTM_CONNECTION_OPENED,{})},d.prototype.onLogIn=function(a,b){p("sign-in/anonymous user onLogin"),a?(this.cbErrorToClient&amp;&amp;(b&amp;&amp;b.errors&amp;&amp;b.errors[0]&amp;&amp;b.errors[0].msg?this.cbErrorToClient(b.errors[0].msg):this.cbErrorToClient(a.message)),console.error(a&amp;&amp;a.stack)):(this.options&amp;&amp;this.options.jwtgrantSuccessCB&amp;&amp;this.options.jwtgrantSuccessCB(b),this.accessToken=b.authorization.accessToken,this.options.accessToken=this.accessToken,this.WebClient.user.accessToken=this.accessToken,this.userInfo=b,this.cbBotDetails(b,this.options.botInfo),this.RtmClient=new f.KoreRtmClient({},this.options),this.emit("rtm_client_initialized"),this.RtmClient.start({botInfo:this.options.botInfo}),this.RtmClient.on(m.MESSAGE,j(this.onMessage,this)),this.RtmClient.on(l.RTM_CONNECTION_OPENED,j(this.onOpenWSConnection,this)))},d.prototype.logIn=function(a,b){a?(p("error in assertionFn %s",a),console.error("error in assertionFn",a&amp;&amp;a.stack)):(p("signed-in user login"),this.options=b,this.claims=b.assertion,this.WebClient=new f.KoreWebClient({},this.options),this.WebClient.claims=this.claims,this.cbErrorToClient=b.handleError||o,this.cbBotDetails=b.botDetails||o,this.cbBotChatHistory=b.chatHistory||o,this.WebClient.login.login({assertion:b.assertion,botInfo:this.options.botInfo},j(this.onLogIn,this)))},d.prototype.init=function(a,b){b=b||10,b&gt;100&amp;&amp;(b=100),"undefined"!=typeof window&amp;&amp;(window.messageHistoryLimit=b||10),a=a||{},this.options=a,this.oldestId=null,this.RtmClient=null,a.test?(p("test is true"),k(a.koreAnonymousFn)?a.koreAnonymousFn.call(this,a):(p("koreAnonymousFn is not a function"),console.error("koreAnonymousFn is not a function"))):(p("test is false"),k(a.assertionFn)?a.assertionFn(a,j(this.logIn,this)):(p("assertion is not a function"),console.error("assertion is not a function")))},b.exports.instance=function(){return r=!1,new d}},{"./index.js":1,"./jstz.js":2,debug:21,events:30,inherits:23,lodash:24}],1:[function(a,b,c){var d=a("./lib/clients/events");b.exports={KoreWebClient:a("./lib/clients/web/client"),KoreRtmClient:a("./lib/clients/rtm/client"),CLIENT_EVENTS:{WEB:d.CLIENT_EVENTS.WEB,RTM:d.CLIENT_EVENTS.RTM},RTM_EVENTS:d.RTM_EVENTS,RTM_MESSAGE_SUBTYPES:d.RTM_MESSAGE_SUBTYPES}},{"./lib/clients/events":5,"./lib/clients/rtm/client":9,"./lib/clients/web/client":18}],2:[function(a,b,c){!function(a){var b=function(){"use strict";var a="s",c=function(a){var b=-a.getTimezoneOffset();return null!==b?b:0},d=function(a,b,c){var d=new Date;return void 0!==a&amp;&amp;d.setFullYear(a),d.setDate(c),d.setMonth(b),d},e=function(a){return c(d(a,0,2))},f=function(a){return c(d(a,5,2))},g=function(a){return(a.getMonth()&gt;7?f(a.getFullYear()):e(a.getFullYear()))-c(a)!=0},h=function(){var b=e(),c=f(),d=e()-f();return d&lt;0?b+",1":d&gt;0?c+",1,"+a:b+",0"};return{determine:function(){var a=h();return new b.TimeZone(b.olson.timezones[a])},date_is_dst:g,dst_start_for:function(a){var b=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":b,"Asia/Yekaterinburg":b,"Asia/Omsk":b,"Asia/Krasnoyarsk":b,"Asia/Irkutsk":b,"Asia/Yakutsk":b,"Asia/Vladivostok":b,"Asia/Kamchatka":b,"Europe/Minsk":b,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}[a]}}}();b.TimeZone=function(a){"use strict";var c={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},d=a,e=function(){for(var a=c[d],e=a.length,f=0,g=a[0];f&lt;e;f+=1)if(g=a[f],b.date_is_dst(b.dst_start_for(g)))return void(d=g)};return function(){return void 0!==c[d]}()&amp;&amp;e(),{name:function(){return d}}},b.olson={},b.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},void 0!==c?c.jstz=b:a.jstz=b}(this)},{}],3:[function(a,b,c){function d(a,b){f.call(this),this._token=a,this.koreAPIUrl=b.koreAPIUrl||"https://app.kore.com/api/",this.reWriteSocketURL=b.reWriteSocketURL,this.transport=b.transport||n,this.userAgent,this._requestQueue=g.priorityQueue(h(this._callTransport,this),b.maxRequestConcurrency),this._createFacets()}var e,f=a("events"),g=a("async");e=a("lodash").bind?a("lodash"):_;var h=e.bind,i=a("inherits"),j=a("retry"),k=a("url-join"),l=a("./events/client").WEB,m=a("./helpers"),n=a("./transports/request").requestTransport;i(d,f),d.prototype.emit=function(){d.super_.prototype.emit.apply(this,arguments)},d.prototype._createFacets=function(){},d.prototype._callTransport=function(a,b){var c=a.args,d=a.cb,e=this,f=j.operation(this.retryConfig),g=function a(g,h,i,j){var k,m,n;if(g){if(f.retry(g))return;d(f.mainError(),null)}200!==i?429===i?(e._requestQueue.pause(),k=parseInt(h["Retry-After"],10),m=1e3*k,setTimeout(function(){e.transport(c,a),e._requestQueue.resume()},m),e.emit(l.RATE_LIMITED,k)):(n=new Error("Unable to process request, received bad "+i+" error"),d(n,j)):(j&amp;&amp;j.userInfo&amp;&amp;(window.jwtDetails=j),d(null,j)),b()};f.attempt(function(){e.transport(c,g)})},d.prototype.makeAPICall=function(a,b,c){var d=m.getAPICallArgs(this._token,b,c),e={url:k(this.koreAPIUrl,a),data:d.data,headers:{"User-Agent":this.userAgent,"content-type":"application/json"}};b&amp;&amp;b.opts&amp;&amp;b.opts.authorization&amp;&amp;(e.headers.Authorization=b.opts.authorization,delete e.data.authorization),this._requestQueue.push({args:e,cb:d.cb})},b.exports=d},{"./events/client":4,"./helpers":8,"./transports/request":10,async:19,events:30,inherits:23,lodash:24,retry:26,"url-join":29}],4:[function(a,b,c){b.exports.WEB={RATE_LIMITED:"rate_limited"},b.exports.RTM={CONNECTING:"connecting",AUTHENTICATED:"authenticated",WS_OPENING:"ws_opening",WS_OPENED:"ws_opened",RTM_CONNECTION_OPENED:"open",DISCONNECT:"disconnect",UNABLE_TO_RTM_START:"unable_to_rtm_start",WS_CLOSE:"ws_close",WS_ERROR:"ws_error",ATTEMPTING_RECONNECT:"attempting_reconnect",RAW_MESSAGE:"raw_message"}},{}],5:[function(a,b,c){b.exports={CLIENT_EVENTS:{WEB:a("./client").WEB,RTM:a("./client").RTM},RTM_EVENTS:a("./rtm").EVENTS,RTM_MESSAGE_SUBTYPES:a("./rtm").MESSAGE_SUBTYPES}},{"./client":4,"./rtm":6}],6:[function(a,b,c){b.exports.EVENTS={HELLO:"hello",MESSAGE:"message"},b.exports.MESSAGE_SUBTYPES={BOT_MESSAGE:"bot_message",ME_MESSAGE:"me_message"}},{}],7:[function(a,b,c){var d=a("./rtm").EVENTS,e=function(a,b){return[d.MESSAGE,a].join(b||"::")};b.exports.makeMessageEventWithSubtype=e},{"./rtm":6}],8:[function(a,b,c){var d;d=a("lodash").bind?a("lodash"):_;var e=d.assign,f=d.isFunction,g=d.isUndefined,h=d.isString,i=d.forEach,j=function(a,b){var c=e({},a?a.opts||{}:{});return i(a||{},function(a,b){g(a)||null===a||"opts"===b||("attachments"===b?h(a)?c[b]=a:c[b]=JSON.stringify(a):c[b]=a)}),b&amp;&amp;(c.token=b),c},k=function(a,b,c){var d,e;return 1===arguments.length?(e=noop,d=j({},a)):2===arguments.length?f(arguments[1])?(e=arguments[1],d=j({},a)):(e=noop,d=j(b,a)):3===arguments.length&amp;&amp;(e=c||noop,d=j(b,a)),{cb:e,data:d}};b.exports.getData=j,b.exports.getAPICallArgs=k},{lodash:24}],9:[function(a,b,c){function d(a,b){var c=b||{};c.maxRequestConcurrency=1,p.call(this,a,c),this._socketFn=c.socketFn||s,this.ws=void 0,this.MAX_RECONNECTION_ATTEMPTS=c.maxReconnectionAttempts||10,this.RECONNECTION_BACKOFF=c.reconnectionBackoff||3e3,this.MAX_PONG_INTERVAL=c.maxPongInterval||1e4,this.WS_PING_INTERVAL=c.wsPingInterval||5e3,this.autoReconnect=!1!==c.autoReconnect,this.connected=!1,this.authenticated=!1,this.activeUserId=void 0,this._pendingMessages={},this._connAttempts=0,this._connecting=!1,this._reconnecting=!1,c.hasOwnProperty("_reconnecting")&amp;&amp;c._reconnecting&amp;&amp;(this._reconnecting=c._reconnecting,c._reconnecting=!1),this.user={},this.user.accessToken=c.accessToken,this.botInfo=c.botInfo||{}}var e;e=a("lodash").bind?a("lodash"):_;var f=e.bind,g=e.cloneDeep,h=e.contains,i=a("inherits"),j=e.isUndefined,k=a("debug")("botsdk:KoreRTMClient"),l=a("../events/rtm").EVENTS,m=["pong",l.HELLO],n=["not_authed","invalid_auth","account_inactive","token_expired"],o=a("../events/client").RTM,p=a("../client"),q=a("../web/apis").RtmApi,r=a("../events/utils").makeMessageEventWithSubtype,s=a("../transports/ws");i(d,p),d.prototype._createFacets=function(){d.super_.prototype._createFacets.call(this),this._rtm=new q(this)},d.prototype.start=function(a){this._connecting||(this.emit(o.CONNECTING),this._connecting=!0,a=a||{botInfo:this.botInfo},a.authorization="bearer "+this.user.accessToken,this._rtm.start(a,f(this._onStart,this)))},d.prototype.nextMessageId=function(){return this._messageId=this._messageId||1,this._messageId++},d.prototype._onStart=function(a,b){var c,d=!!this._reconnecting;this._connecting=!1,this._reconnecting=!1;try{b=b}catch(a){console.log(a&amp;&amp;a.stack)}b&amp;&amp;b.errors&amp;&amp;("TOKEN_EXPIRED"===b.errors[0].code||401===b.errors[0].code||"token expired"===b.errors[0].msg)&amp;&amp;($(".reload-btn").trigger("click",{isReconnect:!0}),b.error="token_expired"),a||!b.url?(k("error or no url in response %s",a||"no url"),this.emit(o.UNABLE_TO_RTM_START,a||b.error),b&amp;&amp;h(n,b.error)?(c="unrecoverable failure connecting to the RTM API",this.disconnect(c,b.error)):(this.authenticated=!1,this.autoReconnect&amp;&amp;this.reconnect())):(d&amp;&amp;(b.url=b.url+"&amp;isReconnect=true"),this.authenticated=!0,this.emit(o.AUTHENTICATED,b),this.connect(b.url))},d.prototype._close=function(){this.autoReconnect=!1,this._safeDisconnect()},d.prototype._safeDisconnect=function(){this.ws&amp;&amp;this.ws.close(),this.authenticated=!1,this.connected=!1},d.prototype.reWriteURL=function(a){if(this.reWriteSocketURL){var b=document.createElement("a");b.href=a,this.reWriteSocketURL.protocol&amp;&amp;(b.protocol=this.reWriteSocketURL.protocol),this.reWriteSocketURL.hostname&amp;&amp;(b.hostname=this.reWriteSocketURL.hostname),this.reWriteSocketURL.port&amp;&amp;(b.port=this.reWriteSocketURL.port),a=b.href}return a},d.prototype.connect=function(a){k("connecting"),this.emit(o.WS_OPENING,{}),a=this.reWriteURL(a),this.ws=this._socketFn(a),this.ws.onopen=f(this.handleWsOpen,this),this.ws.onmessage=f(this.handleWsMessage,this),this.ws.onerror=f(this.handleWsError,this),this.ws.onclose=f(this.handleWsClose,this),this.ws.onping=f(this.handleWsPing,this)},d.prototype.disconnect=function(a,b){k("disconnecting"),this.emit(o.DISCONNECT,a,b),this.autoReconnect=!1,this._safeDisconnect()},d.prototype.reconnect=function(){if(k("reconnecting"),console.log("in reconnect"),!this._reconnecting){if(this._reconnecting=!0,this.emit(o.ATTEMPTING_RECONNECT),this._safeDisconnect(),++this._connAttempts&gt;this.MAX_RECONNECTION_ATTEMPTS)throw new Error("unable to connect to kore.ai RTM API, failed after max reconnection attempts");setTimeout(f(this.start,this),this._connAttempts*this.RECONNECTION_BACKOFF)}},d.prototype.handleWsOpen=function(){k("connected"),this.connected=!0,this.emit("open",{data:{}}),this._connAttempts=0},d.prototype.handleWsMessage=function(a){var b;this.emit("message",a);try{b=JSON.parse(a)}catch(a){return}h(m,b.type)?this._handleWsMessageInternal(b.type,b):this._handleWsMessageViaEventHandler(b.type,b)},d.prototype._handleWsMessageInternal=function(a,b){a===l.HELLO&amp;&amp;this._handleHello()},d.prototype._handleWsMessageViaEventHandler=function(a,b){var c;if(a===l.MESSAGE&amp;&amp;(c=b.reply_to)){if(!this._pendingMessages[c])return;delete this._pendingMessages[c]}this.emit(a,b),a!==l.MESSAGE||j(b.subtype)||this.emit(r(b.subtype),b)},d.prototype.handleWsError=function(a){k("web socket error::%s",a),this.emit(o.WS_ERROR,a)},d.prototype.handleWsClose=function(a,b){this.connected=!1,this.emit(o.WS_CLOSE,a,b),this.autoReconnect?this._connecting||this.reconnect():(k("websocket closed with auto-reconnect false on the RTM client"),this.disconnect("websocket closed with auto-reconnect false on the RTM client"))},d.prototype.handleWsPing=function(){this.ws.pong&amp;&amp;this.ws.pong()},d.prototype._handleHello=function(){this.connected=!0,this.emit(o.RTM_CONNECTION_OPENED)},d.prototype.sendMessage=function(a,b){this.send(a,b)},d.prototype.send=function(a,b){var c,d,e=g(a);this.connected&amp;&amp;!this._reconnecting?(e.id=e.clientMessageId||this.nextMessageId(),c=JSON.stringify(e),this._pendingMessages[e.id]=e,this.ws.send(c,void 0,function(a){j(a),j(b)||b(a)})):(d="ws not connected or reconnecting, unable to send message",k(d),j(b)||b(new Error(d)))},b.exports=d},{"../client":3,"../events/client":4,"../events/rtm":6,"../events/utils":7,"../transports/ws":11,"../web/apis":15,debug:21,inherits:23,lodash:24}],10:[function(a,b,c){var d;d=a("lodash").bind?a("lodash"):_;var e=d.has,f=d.partial,g=a("browser-request"),h=function(a,b,c,d){var e,f;b?(e=c?c.headers||{}:{},f=c?c.statusCode||null:null,a(b,e,f,d)):a(b,c.headers,c.statusCode,d)},i=function(a){var b={url:a.url,headers:a.headers};return e(a.data,"file")?b.formData=a.data:b.json=a.data,b},j=function(a,b){var c=i(a);a.data&amp;&amp;a.data.type&amp;&amp;"GET"===a.data.type?g.get(c,f(h,b)):g.post(c,f(h,b))};b.exports.requestTransport=j},{"browser-request":20,lodash:24}],11:[function(a,b,c){var d=function(a,b){return new WebSocket(a)};b.exports=d},{}],12:[function(a,b,c){function d(){}b.exports=d},{}],13:[function(a,b,c){function d(a){this.name="anonymouslogin",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.login=function(a,b){a=a||{};var c={opts:a};return this.client.makeAPICall("/oAuth/token/jwtgrant/anonymous",c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],14:[function(a,b,c){function d(a){this.name="history",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.history=function(a,b){a=a||{};var c={opts:a,type:"GET"},d="/botmessages/rtm",e=!1,f="?";return a.botInfo&amp;&amp;a.botInfo.taskBotId&amp;&amp;(!1===e?(d+=f+"botId="+a.botInfo.taskBotId,f="&amp;",e=!0):d+=f+"botId="+a.botInfo.taskBotId,delete a.botInfo),a.offset&amp;&amp;(!1===e?(d+=f+"offset="+a.offset,f="&amp;",e=!0):d+=f+"offset="+a.offset,delete a.offset),a.limit&amp;&amp;(!1===e?(d+=f+"limit="+a.limit,f="&amp;",e=!0):d+=f+"limit="+a.limit,delete a.limit),a.forward&amp;&amp;(!1===e?(d+=f+"forward="+a.forward,f="&amp;",e=!0):d+=f+"forward="+a.forward,delete a.forward),a.msgId&amp;&amp;(!1===e?(d+=f+"msgId="+a.msgId,f="&amp;",e=!0):d+=f+"msgId="+a.msgId,delete a.msgId),this.client.makeAPICall(d,c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],15:[function(a,b,c){b.exports={RtmApi:a("./rtm.js"),LogInApi:a("./login.js"),AnonymousLogin:a("./anonymouslogin.js"),HistoryApi:a("./history.js")}},{"./anonymouslogin.js":13,"./history.js":14,"./login.js":16,"./rtm.js":17}],16:[function(a,b,c){function d(a){this.name="login",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.login=function(a,b){a=a||{};var c={opts:a};return this.client.makeAPICall("/oAuth/token/jwtgrant",c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],17:[function(a,b,c){function d(a){this.name="rtm",this.client=a}var e=a("./BaseApi");a("inherits")(d,e),d.prototype.start=function(a,b){var c={opts:a};return this.client.makeAPICall("/rtm/start",c,b)},b.exports=d},{"./BaseApi":12,inherits:23}],18:[function(a,b,c){function d(a,b){var c=b||{};i.call(this,a,c),this.claims=b.claims,this.retryConfig=c.retryConfig||{retries:5,factor:3.9},this.user={}}var e;e=a("lodash").bind?a("lodash"):_;var f=e.bind,g=e.forEach,h=a("inherits"),i=a("../client"),j=a("./apis/index");h(d,i),d.prototype._createFacets=function(){var a;d.super_.prototype._createFacets.call(this),f(this.makeAPICall,this),g(j,function(b){a=new b(this),this[a.name]=a},this)},b.exports=d},{"../client":3,"./apis/index":15,inherits:23,lodash:24}],19:[function(a,b,c){(function(a,c){!function(){function d(){}function e(a){return a}function f(a){return!!a}function g(a){return!a}function h(a){return function(){if(null===a)throw new Error("Callback was already called.");a.apply(this,arguments),a=null}}function i(a){return function(){null!==a&amp;&amp;(a.apply(this,arguments),a=null)}}function j(a){return N(a)||"number"==typeof a.length&amp;&amp;a.length&gt;=0&amp;&amp;a.length%1==0}function k(a,b){for(var c=-1,d=a.length;++c&lt;d;)b(a[c],c,a)}function l(a,b){for(var c=-1,d=a.length,e=Array(d);++c&lt;d;)e[c]=b(a[c],c,a);return e}function m(a){return l(Array(a),function(a,b){return b})}function n(a,b,c){return k(a,function(a,d,e){c=b(c,a,d,e)}),c}function o(a,b){k(P(a),function(c){b(a[c],c)})}function p(a,b){for(var c=0;c&lt;a.length;c++)if(a[c]===b)return c;return-1}function q(a){var b,c,d=-1;return j(a)?(b=a.length,function(){return d++,d&lt;b?d:null}):(c=P(a),b=c.length,function(){return d++,d&lt;b?c[d]:null})}function r(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;e&lt;c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d)}}}function s(a){return function(b,c,d){return a(b,d)}}function t(a){return function(b,c,e){e=i(e||d),b=b||[];var f=q(b);if(a&lt;=0)return e(null);var g=!1,j=0,k=!1;!function d(){if(g&amp;&amp;j&lt;=0)return e(null);for(;j&lt;a&amp;&amp;!k;){var i=f();if(null===i)return g=!0,void(j&lt;=0&amp;&amp;e(null));j+=1,c(b[i],i,h(function(a){j-=1,a?(e(a),k=!0):d()}))}}()}}function u(a){return function(b,c,d){return a(K.eachOf,b,c,d)}}function v(a){return function(b,c,d,e){return a(t(c),b,d,e)}}function w(a){return function(b,c,d){return a(K.eachOfSeries,b,c,d)}}function x(a,b,c,e){e=i(e||d),b=b||[];var f=j(b)?[]:{};a(b,function(a,b,d){c(a,function(a,c){f[b]=c,d(a)})},function(a){e(a,f)})}function y(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&amp;&amp;e.push({index:b,value:a}),d()})},function(){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function z(a,b,c,d){y(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function A(a,b,c){return function(d,e,f,g){function h(){g&amp;&amp;g(c(!1,void 0))}function i(a,d,e){if(!g)return e();f(a,function(d){g&amp;&amp;b(d)&amp;&amp;(g(c(!0,a)),g=f=!1),e()})}arguments.length&gt;3?a(d,e,i,h):(g=f,f=e,a(d,i,h))}}function B(a,b){return b}function C(a,b,c){c=c||d;var e=j(b)?[]:{};a(b,function(a,b,c){a(r(function(a,d){d.length&lt;=1&amp;&amp;(d=d[0]),e[b]=d,c(a)}))},function(a){c(a,e)})}function D(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function E(a,b,c){function e(a,b,c,e){if(null!=e&amp;&amp;"function"!=typeof e)throw new Error("task callback must be a function");if(a.started=!0,N(b)||(b=[b]),0===b.length&amp;&amp;a.idle())return K.setImmediate(function(){a.drain()});k(b,function(b){var f={data:b,callback:e||d};c?a.tasks.unshift(f):a.tasks.push(f),a.tasks.length===a.concurrency&amp;&amp;a.saturated()}),K.setImmediate(a.process)}function f(a,b){return function(){g-=1;var c=!1,d=arguments;k(b,function(a){k(i,function(b,d){b!==a||c||(i.splice(d,1),c=!0)}),a.callback.apply(a,d)}),a.tasks.length+g===0&amp;&amp;a.drain(),a.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,i=[],j={tasks:[],concurrency:b,payload:c,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(a,b){e(j,a,!1,b)},kill:function(){j.drain=d,j.tasks=[]},unshift:function(a,b){e(j,a,!0,b)},process:function(){for(;!j.paused&amp;&amp;g&lt;j.concurrency&amp;&amp;j.tasks.length;){var b=j.payload?j.tasks.splice(0,j.payload):j.tasks.splice(0,j.tasks.length),c=l(b,function(a){return a.data});0===j.tasks.length&amp;&amp;j.empty(),g+=1,i.push(b[0]);var d=h(f(j,b));a(c,d)}},length:function(){return j.tasks.length},running:function(){return g},workersList:function(){return i},idle:function(){return j.tasks.length+g===0},pause:function(){j.paused=!0},resume:function(){if(!1!==j.paused){j.paused=!1;for(var a=Math.min(j.concurrency,j.tasks.length),b=1;b&lt;=a;b++)K.setImmediate(j.process)}}};return j}function F(a){return r(function(b,c){b.apply(null,c.concat([r(function(b,c){"object"==typeof console&amp;&amp;(b?console.error&amp;&amp;console.error(b):console[a]&amp;&amp;k(c,function(b){console[a](b)}))})]))})}function G(a){return function(b,c,d){a(m(b),c,d)}}function H(a){return r(function(b,c){var d=r(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function I(a){return r(function(b){var c=b.pop();b.push(function(){var a=arguments;d?K.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b),d=!1})}var J,K={},L="object"==typeof self&amp;&amp;self.self===self&amp;&amp;self||"object"==typeof c&amp;&amp;c.global===c&amp;&amp;c||this;null!=L&amp;&amp;(J=L.async),K.noConflict=function(){return L.async=J,K};var M=Object.prototype.toString,N=Array.isArray||function(a){return"[object Array]"===M.call(a)},O=function(a){var b=typeof a;return"function"===b||"object"===b&amp;&amp;!!a},P=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&amp;&amp;b.push(c);return b},Q="function"==typeof setImmediate&amp;&amp;setImmediate,R=Q?function(a){Q(a)}:function(a){setTimeout(a,0)};"object"==typeof a&amp;&amp;"function"==typeof a.nextTick?K.nextTick=a.nextTick:K.nextTick=R,K.setImmediate=Q?R:K.nextTick,K.forEach=K.each=function(a,b,c){return K.eachOf(a,s(b),c)},K.forEachSeries=K.eachSeries=function(a,b,c){return K.eachOfSeries(a,s(b),c)},K.forEachLimit=K.eachLimit=function(a,b,c,d){return t(b)(a,s(c),d)},K.forEachOf=K.eachOf=function(a,b,c){function e(a){j--,a?c(a):null===f&amp;&amp;j&lt;=0&amp;&amp;c(null)}c=i(c||d),a=a||[];for(var f,g=q(a),j=0;null!=(f=g());)j+=1,b(a[f],f,h(e));0===j&amp;&amp;c(null)},K.forEachOfSeries=K.eachOfSeries=function(a,b,c){function e(){var d=!0;if(null===g)return c(null);b(a[g],g,h(function(a){if(a)c(a);else{if(null===(g=f()))return c(null);d?K.setImmediate(e):e()}})),d=!1}c=i(c||d),a=a||[];var f=q(a),g=f();e()},K.forEachOfLimit=K.eachOfLimit=function(a,b,c,d){t(b)(a,c,d)},K.map=u(x),K.mapSeries=w(x),K.mapLimit=v(x),K.inject=K.foldl=K.reduce=function(a,b,c,d){K.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})},K.foldr=K.reduceRight=function(a,b,c,d){var f=l(a,e).reverse();K.reduce(f,b,c,d)},K.transform=function(a,b,c,d){3===arguments.length&amp;&amp;(d=c,c=b,b=N(a)?[]:{}),K.eachOf(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})},K.select=K.filter=u(y),K.selectLimit=K.filterLimit=v(y),K.selectSeries=K.filterSeries=w(y),K.reject=u(z),K.rejectLimit=v(z),K.rejectSeries=w(z),K.any=K.some=A(K.eachOf,f,e),K.someLimit=A(K.eachOfLimit,f,e),K.all=K.every=A(K.eachOf,g,g),K.everyLimit=A(K.eachOfLimit,g,g),K.detect=A(K.eachOf,e,B),K.detectSeries=A(K.eachOfSeries,e,B),K.detectLimit=A(K.eachOfLimit,e,B),K.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return c&lt;d?-1:c&gt;d?1:0}K.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);c(null,l(b.sort(d),function(a){return a.value}))})},K.auto=function(a,b,c){function e(a){s.unshift(a)}function f(a){var b=p(s,a);b&gt;=0&amp;&amp;s.splice(b,1)}function g(){j--,k(s.slice(0),function(a){a()})}"function"==typeof arguments[1]&amp;&amp;(c=b,b=null),c=i(c||d);var h=P(a),j=h.length;if(!j)return c(null);b||(b=j);var l={},m=0,q=!1,s=[];e(function(){j||c(null,l)}),k(h,function(d){function h(){return m&lt;b&amp;&amp;n(t,function(a,b){return a&amp;&amp;l.hasOwnProperty(b)},!0)&amp;&amp;!l.hasOwnProperty(d)}function i(){h()&amp;&amp;(m++,f(i),k[k.length-1](s,l))}if(!q){for(var j,k=N(a[d])?a[d]:[a[d]],s=r(function(a,b){if(m--,b.length&lt;=1&amp;&amp;(b=b[0]),a){var e={};o(l,function(a,b){e[b]=a}),e[d]=b,q=!0,c(a,e)}else l[d]=b,K.setImmediate(g)}),t=k.slice(0,k.length-1),u=t.length;u--;){if(!(j=a[t[u]]))throw new Error("Has nonexistent dependency in "+t.join(", "));if(N(j)&amp;&amp;p(j,d)&gt;=0)throw new Error("Has cyclic dependencies")}h()?(m++,k[k.length-1](s,l)):e(i)}})},K.retry=function(a,b,c){function d(a,b){if("number"==typeof b)a.times=parseInt(b,10)||f;else{if("object"!=typeof b)throw new Error("Unsupported argument type for 'times': "+typeof b);a.times=parseInt(b.times,10)||f,a.interval=parseInt(b.interval,10)||g}}function e(a,b){function c(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}function d(a){return function(b){setTimeout(function(){b(null)},a)}}for(;i.times;){var e=!(i.times-=1);h.push(c(i.task,e)),!e&amp;&amp;i.interval&gt;0&amp;&amp;h.push(d(i.interval))}K.series(h,function(b,c){c=c[c.length-1],(a||i.callback)(c.err,c.result)})}var f=5,g=0,h=[],i={times:f,interval:g},j=arguments.length;if(j&lt;1||j&gt;3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return j&lt;=2&amp;&amp;"function"==typeof a&amp;&amp;(c=b,b=a),"function"!=typeof a&amp;&amp;d(i,a),i.callback=c,i.task=b,i.callback?e():e},K.waterfall=function(a,b){function c(a){return r(function(d,e){if(d)b.apply(null,[d].concat(e));else{var f=a.next();f?e.push(c(f)):e.push(b),I(a).apply(null,e)}})}if(b=i(b||d),!N(a)){var e=new Error("First argument to waterfall must be an array of functions");return b(e)}if(!a.length)return b();c(K.iterator(a))()},K.parallel=function(a,b){C(K.eachOf,a,b)},K.parallelLimit=function(a,b,c){C(t(b),a,c)},K.series=function(a,b){C(K.eachOfSeries,a,b)},K.iterator=function(a){function b(c){function d(){return a.length&amp;&amp;a[c].apply(null,arguments),d.next()}return d.next=function(){return c&lt;a.length-1?b(c+1):null},d}return b(0)},K.apply=r(function(a,b){return r(function(c){return a.apply(null,b.concat(c))})}),K.concat=u(D),K.concatSeries=w(D),K.whilst=function(a,b,c){if(c=c||d,a()){var e=r(function(d,f){d?c(d):a.apply(this,f)?b(e):c.apply(null,[null].concat(f))});b(e)}else c(null)},K.doWhilst=function(a,b,c){var d=0;return K.whilst(function(){return++d&lt;=1||b.apply(this,arguments)},a,c)},K.until=function(a,b,c){return K.whilst(function(){return!a.apply(this,arguments)},b,c)},K.doUntil=function(a,b,c){return K.doWhilst(a,function(){return!b.apply(this,arguments)},c)},K.during=function(a,b,c){c=c||d;var e=r(function(b,d){b?c(b):(d.push(f),a.apply(this,d))}),f=function(a,d){a?c(a):d?b(e):c(null)};a(f)},K.doDuring=function(a,b,c){var d=0;K.during(function(a){d++&lt;1?a(null,!0):b.apply(this,arguments)},a,c)},K.queue=function(a,b){return E(function(b,c){a(b[0],c)},b,1)},K.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,e=a.length-1;d&lt;e;){var f=d+(e-d+1&gt;&gt;&gt;1);c(b,a[f])&gt;=0?d=f:e=f-1}return d}function f(a,b,f,g){if(null!=g&amp;&amp;"function"!=typeof g)throw new Error("task callback must be a function");if(a.started=!0,N(b)||(b=[b]),0===b.length)return K.setImmediate(function(){a.drain()});k(b,function(b){var h={data:b,priority:f,callback:"function"==typeof g?g:d};a.tasks.splice(e(a.tasks,h,c)+1,0,h),a.tasks.length===a.concurrency&amp;&amp;a.saturated(),K.setImmediate(a.process)})}var g=K.queue(a,b);return g.push=function(a,b,c){f(g,a,b,c)},delete g.unshift,g},K.cargo=function(a,b){return E(a,1,b)},K.log=F("log"),K.dir=F("dir"),K.memoize=function(a,b){var c={},d={},f=Object.prototype.hasOwnProperty;b=b||e;var g=r(function(e){var g=e.pop(),h=b.apply(null,e);f.call(c,h)?K.setImmediate(function(){g.apply(null,c[h])}):f.call(d,h)?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([r(function(a){c[h]=a;var b=d[h];delete d[h];for(var e=0,f=b.length;e&lt;f;e++)b[e].apply(null,a)})])))});return g.memo=c,g.unmemoized=a,g},K.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},K.times=G(K.map),K.timesSeries=G(K.mapSeries),K.timesLimit=function(a,b,c,d){return K.mapLimit(m(a),b,c,d)},K.seq=function(){var a=arguments;return r(function(b){var c=this,e=b[b.length-1];"function"==typeof e?b.pop():e=d,K.reduce(a,b,function(a,b,d){b.apply(c,a.concat([r(function(a,b){d(a,b)})]))},function(a,b){e.apply(c,[a].concat(b))})})},K.compose=function(){return K.seq.apply(null,Array.prototype.reverse.call(arguments))},K.applyEach=H(K.eachOf),K.applyEachSeries=H(K.eachOfSeries),K.forever=function(a,b){function c(a){if(a)return e(a);f(c)}var e=h(b||d),f=I(a);c()},K.ensureAsync=I,K.constant=r(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}}),K.wrapSync=K.asyncify=function(a){return r(function(b){var c,d=b.pop();try{c=a.apply(this,b)}catch(a){return d(a)}O(c)&amp;&amp;"function"==typeof c.then?c.then(function(a){d(null,a)}).catch(function(a){d(a.message?a:new Error(a))}):d(null,c)})},"object"==typeof b&amp;&amp;b.exports?b.exports=K:"function"==typeof define&amp;&amp;define.amd?define([],function(){return K}):L.async=K}()}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:31}],20:[function(a,b,c){!function(a,d){"function"==typeof define&amp;&amp;define.amd?b.exports=d():"object"==typeof c?b.exports=d():a.returnExports=d()}(this,function(){function a(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var h=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=h,e.verbose&amp;&amp;(a.log=d()),e.url&amp;&amp;(e.uri=e.url,delete e.url),!e.uri&amp;&amp;""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],j=0;j&lt;i.length;j++)if(e[i[j]])throw new Error("options."+i[j]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||a.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");e.json&amp;&amp;(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&amp;&amp;(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&amp;&amp;(e.body=JSON.stringify(e.body)));var k=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&amp;&amp;b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&amp;")};if(e.qs){var l="string"==typeof e.qs?e.qs:k(e.qs);-1!==e.uri.indexOf("?")?e.uri=e.uri+"&amp;"+l:e.uri=e.uri+"?"+l}var m=function(a){var b={};b.boundry="-------------------------------"+Math.floor(1e9*Math.random());var c=[];for(var d in a)a.hasOwnProperty(d)&amp;&amp;c.push("--"+b.boundry+'\nContent-Disposition: form-data; name="'+d+'"\n\n'+a[d]+"\n");return c.push("--"+b.boundry+"--"),b.body=c.join(""),b.length=b.body.length,b.type="multipart/form-data; boundary="+b.boundry,b};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var n=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(e.headers["content-type"]=n,n){case"application/x-www-form-urlencoded":e.body=k(e.form).replace(/%20/g,"+");break;case"multipart/form-data":var o=m(e.form);e.body=o.body,e.headers["content-type"]=o.type;break;default:throw new Error("unsupported encoding:"+n)}}}return e.onResponse=e.onResponse||c,!0===e.onResponse&amp;&amp;(e.onResponse=f,e.callback=c),!e.headers.authorization&amp;&amp;e.auth&amp;&amp;(e.headers.authorization="Basic "+g(e.auth.username+":"+e.auth.password)),b(e)}function b(b){function c(){l=!0;var c=new Error("ETIMEDOUT");return c.code="ETIMEDOUT",c.duration=b.timeout,a.log.error("Timeout",{id:k._id,milliseconds:b.timeout}),b.callback(c,k)}function d(b){if(l)return a.log.debug("Ignoring timed out state change",{state:k.readyState,id:k.id});a.log.debug("State change",{state:k.readyState,id:k.id,timed_out:l}),k.readyState===h.OPENED?a.log.debug("Request started",{id:k.id}):k.readyState===h.HEADERS_RECEIVED?e():k.readyState===h.LOADING?(e(),g()):k.readyState===h.DONE&amp;&amp;(e(),g(),j())}function e(){if(!p.response){if(p.response=!0,a.log.debug("Got response",{id:k.id,status:k.status}),clearTimeout(k.timeoutTimer),k.statusCode=k.status,m&amp;&amp;0==k.statusCode){var c=new Error("CORS request rejected: "+b.uri);return c.cors="rejected",p.loading=!0,p.end=!0,b.callback(c,k)}b.onResponse(null,k)}}function g(){p.loading||(p.loading=!0,a.log.debug("Response body loading",{id:k.id}))}function j(){if(!p.end){if(p.end=!0,a.log.debug("Request done",{id:k.id}),k.body=k.responseText,b.json)try{k.body=JSON.parse(k.responseText)}catch(a){return b.callback(a,k)}b.callback(null,k,k.body)}}var k=new h,l=!1,m=f(b.uri),n="withCredentials"in k;if(i+=1,k.seq_id=i,k.id=i+": "+b.method+" "+b.uri,k._id=k.id,m&amp;&amp;!n){var o=new Error("Browser does not support cross-origin request: "+b.uri);return o.cors="unsupported",b.callback(o,k)}k.timeoutTimer=setTimeout(c,b.timeout);var p={response:!1,loading:!1,end:!1};k.onreadystatechange=d,k.open(b.method,b.uri,!0);for(var q in b.headers)k.setRequestHeader(q,b.headers[q]);return m&amp;&amp;(k.withCredentials=!!b.withCredentials),k.send(b.body),k}function c(){}function d(){var a,b,d={},f=["trace","debug","info","warn","error"];for(b=0;b&lt;f.length;b++)a=f[b],d[a]=c,"undefined"!=typeof console&amp;&amp;console&amp;&amp;console[a]&amp;&amp;(d[a]=e(console,a));return d}function e(a,b){function c(c,d){return"object"==typeof d&amp;&amp;(c+=" "+JSON.stringify(d)),a[b].call(a,c)}return c}function f(a){var b,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{b=location.href}catch(a){b=document.createElement("a"),b.href="",b=b.href}var d=c.exec(b.toLowerCase())||[],e=c.exec(a.toLowerCase());return!(!e||e[1]==d[1]&amp;&amp;e[2]==d[2]&amp;&amp;(e[3]||("http:"===e[1]?80:443))==(d[3]||("http:"===d[1]?80:443)))}function g(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do{b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b&lt;&lt;16|c&lt;&lt;8|d,e=i&gt;&gt;18&amp;63,f=i&gt;&gt;12&amp;63,g=i&gt;&gt;6&amp;63,h=63&amp;i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h)}while(k&lt;a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");a.log={trace:c,debug:c,info:c,warn:c,error:c};var i=0;return a.withCredentials=!1,a.DEFAULT_TIMEOUT=12e4,a.defaults=function(b,c){var d=function(a){return function(c,d){c="string"==typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in b)void 0===c[e]&amp;&amp;(c[e]=b[e]);return a(c,d)}},e=d(a);return e.get=d(a.get),e.post=d(a.post),e.put=d(a.put),e.head=d(a.head),e},["get","put","post","head"].forEach(function(b){var c=b.toUpperCase();a[b.toLowerCase()]=function(b){"string"==typeof b?b={method:c,uri:b}:(b=JSON.parse(JSON.stringify(b)),b.method=c);var d=[b].concat(Array.prototype.slice.apply(arguments,[1]));return a.apply(this,d)}}),a.couch=function(b,d){function e(a,b,c){if(a)return d(a,b,c);if((b.statusCode&lt;200||b.statusCode&gt;299)&amp;&amp;c.error){a=new Error("CouchDB error: "+(c.error.reason||c.error.error));for(var e in c)a[e]=c[e];return d(a,b,c)}return d(a,b,c)}return"string"==typeof b&amp;&amp;(b={uri:b}),b.json=!0,b.body&amp;&amp;(b.json=b.body),delete b.body,d=d||c,a(b,e)},a})},{}],21:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&amp;&amp;(console.firebug||console.exception&amp;&amp;console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&amp;&amp;parseInt(RegExp.$1,10)&gt;=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&amp;&amp;(e++,"%c"===a&amp;&amp;(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&amp;&amp;console.log&amp;&amp;Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function h(){var a;try{a=c.storage.debug}catch(a){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&amp;&amp;void 0!==chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":22}],22:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&amp;&amp;(a.useColors=c.useColors()),null==a.color&amp;&amp;a.useColors&amp;&amp;(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&amp;&amp;(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&amp;&amp;(g=c.formatArgs.apply(a,g)),(e.log||c.log||console.log.bind(console)).apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e&lt;d;e++)b[e]&amp;&amp;(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b&lt;d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b&lt;d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:25}],23:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],24:[function(a,b,c){(function(a){(function(){function d(a,b){if(a!==b){var c=null===a,d=a===z,e=a===a,f=null===b,g=b===z,h=b===b;if(a&gt;b&amp;&amp;!f||!e||c&amp;&amp;!g&amp;&amp;h||d&amp;&amp;h)return 1;if(a&lt;b&amp;&amp;!c||!h||f&amp;&amp;!d&amp;&amp;e||g&amp;&amp;e)return-1}return 0}function e(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e&lt;d;)if(b(a[e],e,a))return e;return-1}function f(a,b,c){if(b!==b)return q(a,c);for(var d=c-1,e=a.length;++d&lt;e;)if(a[d]===b)return d;return-1}function g(a){return"function"==typeof a||!1}function h(a){return null==a?"":a+""}function i(a,b){for(var c=-1,d=a.length;++c&lt;d&amp;&amp;b.indexOf(a.charAt(c))&gt;-1;);return c}function j(a,b){for(var c=a.length;c--&amp;&amp;b.indexOf(a.charAt(c))&gt;-1;);return c}function k(a,b){return d(a.criteria,b.criteria)||a.index-b.index}function l(a,b,c){for(var e=-1,f=a.criteria,g=b.criteria,h=f.length,i=c.length;++e&lt;h;){var j=d(f[e],g[e]);if(j){if(e&gt;=i)return j;var k=c[e];return j*("asc"===k||!0===k?1:-1)}}return a.index-b.index}function m(a){return Sa[a]}function n(a){return Ta[a]}function o(a,b,c){return b?a=Wa[a]:c&amp;&amp;(a=Xa[a]),"\\"+a}function p(a){return"\\"+Xa[a]}function q(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e&lt;d;){var f=a[e];if(f!==f)return e}return-1}function r(a){return!!a&amp;&amp;"object"==typeof a}function s(a){return a&lt;=160&amp;&amp;a&gt;=9&amp;&amp;a&lt;=13||32==a||160==a||5760==a||6158==a||a&gt;=8192&amp;&amp;(a&lt;=8202||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function t(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c&lt;d;)a[c]===b&amp;&amp;(a[c]=S,f[++e]=c);return f}function u(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d&lt;e;){var h=a[d],i=b?b(h,d,a):h;d&amp;&amp;c===i||(c=i,g[++f]=h)}return g}function v(a){for(var b=-1,c=a.length;++b&lt;c&amp;&amp;s(a.charCodeAt(b)););return b}function w(a){for(var b=a.length;b--&amp;&amp;s(a.charCodeAt(b)););return b}function x(a){return Ua[a]}function y(a){function b(a){if(r(a)&amp;&amp;!Ch(a)&amp;&amp;!(a instanceof Z)){if(a instanceof s)return a;if(ag.call(a,"__chain__")&amp;&amp;ag.call(a,"__wrapped__"))return md(a)}return new s(a)}function c(){}function s(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Z(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bg,this.__views__=[]}function ba(){var a=new Z(this.__wrapped__);return a.__actions__=ab(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ab(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ab(this.__views__),a}function da(){if(this.__filtered__){var a=new Z(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Sa(){var a=this.__wrapped__.value(),b=this.__dir__,c=Ch(a),d=b&lt;0,e=c?a.length:0,f=Tc(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=wg(i,this.__takeCount__);if(!c||e&lt;O||e==i&amp;&amp;n==i)return cc(d&amp;&amp;c?a.reverse():a,this.__actions__);var o=[];a:for(;i--&amp;&amp;m&lt;n;){j+=b;for(var p=-1,q=a[j];++p&lt;l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==Q)q=u;else if(!u){if(t==P)continue a;break a}}o[m++]=q}return o}function Ta(){this.__data__={}}function Ua(a){return this.has(a)&amp;&amp;delete this.__data__[a]}function Va(a){return"__proto__"==a?z:this.__data__[a]}function Wa(a){return"__proto__"!=a&amp;&amp;ag.call(this.__data__,a)}function Xa(a,b){return"__proto__"!=a&amp;&amp;(this.__data__[a]=b),this}function Ya(a){var b=a?a.length:0;for(this.data={hash:qg(null),set:new kg};b--;)this.push(a[b])}function Za(a,b){var c=a.data;return("string"==typeof b||He(b)?c.set.has(b):c.hash[b])?0:-1}function $a(a){var b=this.data;"string"==typeof a||He(a)?b.set.add(a):b.hash[a]=!0}function _a(a,b){for(var c=-1,d=a.length,e=-1,f=b.length,g=Of(d+f);++c&lt;d;)g[c]=a[c];for(;++e&lt;f;)g[c++]=b[e];return g}function ab(a,b){var c=-1,d=a.length;for(b||(b=Of(d));++c&lt;d;)b[c]=a[c];return b}function bb(a,b){for(var c=-1,d=a.length;++c&lt;d&amp;&amp;!1!==b(a[c],c,a););return a}function eb(a,b){for(var c=a.length;c--&amp;&amp;!1!==b(a[c],c,a););return a}function fb(a,b){for(var c=-1,d=a.length;++c&lt;d;)if(!b(a[c],c,a))return!1;return!0}function gb(a,b,c,d){for(var e=-1,f=a.length,g=d,h=g;++e&lt;f;){var i=a[e],j=+b(i);c(j,g)&amp;&amp;(g=j,h=i)}return h}function hb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c&lt;d;){var g=a[c];b(g,c,a)&amp;&amp;(f[++e]=g)}return f}function ib(a,b){for(var c=-1,d=a.length,e=Of(d);++c&lt;d;)e[c]=b(a[c],c,a);return e}function jb(a,b){for(var c=-1,d=b.length,e=a.length;++c&lt;d;)a[e+c]=b[c];return a}function kb(a,b,c,d){var e=-1,f=a.length;for(d&amp;&amp;f&amp;&amp;(c=a[++e]);++e&lt;f;)c=b(c,a[e],e,a);return c}function lb(a,b,c,d){var e=a.length;for(d&amp;&amp;e&amp;&amp;(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function mb(a,b){for(var c=-1,d=a.length;++c&lt;d;)if(b(a[c],c,a))return!0;return!1}function nb(a,b){for(var c=a.length,d=0;c--;)d+=+b(a[c])||0;return d}function ob(a,b){return a===z?b:a}function pb(a,b,c,d){return a!==z&amp;&amp;ag.call(d,c)?a:b}function qb(a,b,c){for(var d=-1,e=Nh(b),f=e.length;++d&lt;f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&amp;&amp;(h!==z||g in a)||(a[g]=i)}return a}function rb(a,b){return null==b?a:tb(b,Nh(b),a)}function sb(a,b){for(var c=-1,d=null==a,e=!d&amp;&amp;Yc(a),f=e?a.length:0,g=b.length,h=Of(g);++c&lt;g;){var i=b[c];h[c]=e?Zc(i,f)?a[i]:z:d?z:a[i]}return h}function tb(a,b,c){c||(c={});for(var d=-1,e=b.length;++d&lt;e;){var f=b[d];c[f]=a[f]}return c}function ub(a,b,c){var d=typeof a;return"function"==d?b===z?a:fc(a,b,c):null==a?Bf:"object"==d?Nb(a):b===z?Hf(a):Ob(a,b)}function vb(a,b,c,d,e,f,g){var h;if(c&amp;&amp;(h=e?c(a,d,e):c(a)),h!==z)return h;if(!He(a))return a;var i=Ch(a);if(i){if(h=Uc(a),!b)return ab(a,h)}else{var j=cg.call(a),k=j==Y;if(j!=_&amp;&amp;j!=T&amp;&amp;(!k||e))return Ra[j]?Wc(a,j,b):e?a:{};if(h=Vc(k?{}:a),!b)return rb(h,a)}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?bb:Fb)(a,function(d,e){h[e]=vb(d,b,c,e,a,f,g)}),h}function wb(a,b,c){if("function"!=typeof a)throw new Xf(R);return lg(function(){a.apply(z,c)},b)}function xb(a,b){var c=a?a.length:0,d=[];if(!c)return d;var e=-1,g=Qc(),h=g==f,i=h&amp;&amp;b.length&gt;=O?oc(b):null,j=b.length;i&amp;&amp;(g=Za,h=!1,b=i);a:for(;++e&lt;c;){var k=a[e];if(h&amp;&amp;k===k){for(var l=j;l--;)if(b[l]===k)continue a;d.push(k)}else g(b,k,0)&lt;0&amp;&amp;d.push(k)}return d}function yb(a,b){var c=!0;return Jg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function zb(a,b,c,d){var e=d,f=e;return Jg(a,function(a,g,h){var i=+b(a,g,h);(c(i,e)||i===d&amp;&amp;i===f)&amp;&amp;(e=i,f=a)}),f}function Ab(a,b,c,d){var e=a.length;for(c=null==c?0:+c||0,c&lt;0&amp;&amp;(c=-c&gt;e?0:e+c),d=d===z||d&gt;e?e:+d||0,d&lt;0&amp;&amp;(d+=e),e=c&gt;d?0:d&gt;&gt;&gt;0,c&gt;&gt;&gt;=0;c&lt;e;)a[c++]=b;return a}function Bb(a,b){var c=[];return Jg(a,function(a,d,e){b(a,d,e)&amp;&amp;c.push(a)}),c}function Cb(a,b,c,d){var e;return c(a,function(a,c,f){if(b(a,c,f))return e=d?c:a,!1}),e}function Db(a,b,c,d){d||(d=[]);for(var e=-1,f=a.length;++e&lt;f;){var g=a[e];r(g)&amp;&amp;Yc(g)&amp;&amp;(c||Ch(g)||ye(g))?b?Db(g,b,c,d):jb(d,g):c||(d[d.length]=g)}return d}function Eb(a,b){return Lg(a,b,_e)}function Fb(a,b){return Lg(a,b,Nh)}function Gb(a,b){return Mg(a,b,Nh)}function Hb(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c&lt;d;){var g=b[c];Ge(a[g])&amp;&amp;(f[++e]=g)}return f}function Ib(a,b,c){if(null!=a){c!==z&amp;&amp;c in kd(a)&amp;&amp;(b=[c]);for(var d=0,e=b.length;null!=a&amp;&amp;d&lt;e;)a=a[b[d++]];return d&amp;&amp;d==e?a:z}}function Jb(a,b,c,d,e,f){return a===b||(null==a||null==b||!He(a)&amp;&amp;!r(b)?a!==a&amp;&amp;b!==b:Kb(a,b,Jb,c,d,e,f))}function Kb(a,b,c,d,e,f,g){var h=Ch(a),i=Ch(b),j=U,k=U;h||(j=cg.call(a),j==T?j=_:j!=_&amp;&amp;(h=Qe(a))),i||(k=cg.call(b),k==T?k=_:k!=_&amp;&amp;(i=Qe(b)));var l=j==_,m=k==_,n=j==k;if(n&amp;&amp;!h&amp;&amp;!l)return Mc(a,b,j);if(!e){var o=l&amp;&amp;ag.call(a,"__wrapped__"),p=m&amp;&amp;ag.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Lc:Nc)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Lb(a,b,c){var d=b.length,e=d,f=!c;if(null==a)return!e;for(a=kd(a);d--;){var g=b[d];if(f&amp;&amp;g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d&lt;e;){g=b[d];var h=g[0],i=a[h],j=g[1];if(f&amp;&amp;g[2]){if(i===z&amp;&amp;!(h in a))return!1}else{var k=c?c(i,j,h):z;if(!(k===z?Jb(j,i,c,!0):k))return!1}}return!0}function Mb(a,b){var c=-1,d=Yc(a)?Of(a.length):[];return Jg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Nb(a){var b=Rc(a);if(1==b.length&amp;&amp;b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null!=a&amp;&amp;(a[c]===d&amp;&amp;(d!==z||c in kd(a)))}}return function(a){return Lb(a,b)}}function Ob(a,b){var c=Ch(a),d=_c(a)&amp;&amp;cd(b),e=a+"";return a=ld(a),function(f){if(null==f)return!1;var g=e;if(f=kd(f),(c||!d)&amp;&amp;!(g in f)){if(null==(f=1==a.length?f:Ib(f,Wb(a,0,-1))))return!1;g=zd(a),f=kd(f)}return f[g]===b?b!==z||g in f:Jb(b,f[g],z,!0)}}function Pb(a,b,c,d,e){if(!He(a))return a;var f=Yc(b)&amp;&amp;(Ch(b)||Qe(b)),g=f?z:Nh(b);return bb(g||b,function(h,i){if(g&amp;&amp;(i=h,h=b[i]),r(h))d||(d=[]),e||(e=[]),Qb(a,b,i,Pb,c,d,e);else{var j=a[i],k=c?c(j,h,i,a,b):z,l=k===z;l&amp;&amp;(k=h),k===z&amp;&amp;(!f||i in a)||!l&amp;&amp;(k===k?k===j:j!==j)||(a[i]=k)}}),a}function Qb(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):z,l=k===z;l&amp;&amp;(k=i,Yc(i)&amp;&amp;(Ch(i)||Qe(i))?k=Ch(j)?j:Yc(j)?ab(j):[]:Ne(i)||ye(i)?k=ye(j)?Ve(j):Ne(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&amp;&amp;(a[c]=k)}function Rb(a){return function(b){return null==b?z:b[a]}}function Sb(a){var b=a+"";return a=ld(a),function(c){return Ib(c,a,b)}}function Tb(a,b){for(var c=a?b.length:0;c--;){var d=b[c];if(d!=e&amp;&amp;Zc(d)){var e=d;mg.call(a,d,1)}}return a}function Ub(a,b){return a+rg(zg()*(b-a+1))}function Vb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Wb(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,b&lt;0&amp;&amp;(b=-b&gt;e?0:e+b),c=c===z||c&gt;e?e:+c||0,c&lt;0&amp;&amp;(c+=e),e=b&gt;c?0:c-b&gt;&gt;&gt;0,b&gt;&gt;&gt;=0;for(var f=Of(e);++d&lt;e;)f[d]=a[d+b];return f}function Xb(a,b){var c;return Jg(a,function(a,d,e){return!(c=b(a,d,e))}),!!c}function Yb(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function Zb(a,b,c){var d=Oc(),e=-1;return b=ib(b,function(a){return d(a)}),Yb(Mb(a,function(a){return{criteria:ib(b,function(b){return b(a)}),index:++e,value:a}}),function(a,b){return l(a,b,c)})}function $b(a,b){var c=0;return Jg(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function _b(a,b){var c=-1,d=Qc(),e=a.length,g=d==f,h=g&amp;&amp;e&gt;=O,i=h?oc():null,j=[];i?(d=Za,g=!1):(h=!1,i=b?[]:j);a:for(;++c&lt;e;){var k=a[c],l=b?b(k,c,a):k;if(g&amp;&amp;k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&amp;&amp;i.push(l),j.push(k)}else d(i,l,0)&lt;0&amp;&amp;((b||h)&amp;&amp;i.push(l),j.push(k))}return j}function ac(a,b){for(var c=-1,d=b.length,e=Of(d);++c&lt;d;)e[c]=a[b[c]];return e}function bc(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f&lt;e)&amp;&amp;b(a[f],f,a););return c?Wb(a,d?0:f,d?f+1:e):Wb(a,d?f+1:0,d?e:f)}function cc(a,b){var c=a;c instanceof Z&amp;&amp;(c=c.value());for(var d=-1,e=b.length;++d&lt;e;){var f=b[d];c=f.func.apply(f.thisArg,jb([c],f.args))}return c}function dc(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&amp;&amp;b===b&amp;&amp;e&lt;=Eg){for(;d&lt;e;){var f=d+e&gt;&gt;&gt;1,g=a[f];(c?g&lt;=b:g&lt;b)&amp;&amp;null!==g?d=f+1:e=f}return e}return ec(a,b,Bf,c)}function ec(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=b===z;e&lt;f;){var j=rg((e+f)/2),k=c(a[j]),l=k!==z,m=k===k;if(g)var n=m||d;else n=h?m&amp;&amp;l&amp;&amp;(d||null!=k):i?m&amp;&amp;(d||l):null!=k&amp;&amp;(d?k&lt;=b:k&lt;b);n?e=j+1:f=j}return wg(f,Dg)}function fc(a,b,c){if("function"!=typeof a)return Bf;if(b===z)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function gc(a){var b=new fg(a.byteLength);return new ng(b).set(new ng(a)),b}function hc(a,b,c){for(var d=c.length,e=-1,f=vg(a.length-d,0),g=-1,h=b.length,i=Of(h+f);++g&lt;h;)i[g]=b[g];for(;++e&lt;d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function ic(a,b,c){for(var d=-1,e=c.length,f=-1,g=vg(a.length-e,0),h=-1,i=b.length,j=Of(g+i);++f&lt;g;)j[f]=a[f];for(var k=f;++h&lt;i;)j[k+h]=b[h];for(;++d&lt;e;)j[k+c[d]]=a[f++];return j}function jc(a,b){return function(c,d,e){var f=b?b():{};if(d=Oc(d,e,3),Ch(c))for(var g=-1,h=c.length;++g&lt;h;){var i=c[g];a(f,i,d(i,g,c),c)}else Jg(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function kc(a){return qe(function(b,c){var d=-1,e=null==b?0:c.length,f=e&gt;2?c[e-2]:z,g=e&gt;2?c[2]:z,h=e&gt;1?c[e-1]:z;for("function"==typeof f?(f=fc(f,h,5),e-=2):(f="function"==typeof h?h:z,e-=f?1:0),g&amp;&amp;$c(c[0],c[1],g)&amp;&amp;(f=e&lt;3?z:f,e=1);++d&lt;e;){var i=c[d];i&amp;&amp;a(b,i,f)}return b})}function lc(a,b){return function(c,d){var e=c?Pg(c):0;if(!bd(e))return a(c,d);for(var f=b?e:-1,g=kd(c);(b?f--:++f&lt;e)&amp;&amp;!1!==d(g[f],f,g););return c}}function mc(a){return function(b,c,d){for(var e=kd(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h&lt;g;){var i=f[h];if(!1===c(e[i],i,e))break}return b}}function nc(a,b){function c(){return(this&amp;&amp;this!==cb&amp;&amp;this instanceof c?d:a).apply(b,arguments)}var d=qc(a);return c}function oc(a){return qg&amp;&amp;kg?new Ya(a):null}function pc(a){return function(b){for(var c=-1,d=yf(kf(b)),e=d.length,f="";++c&lt;e;)f=a(f,d[c],c);return f}}function qc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Ig(a.prototype),d=a.apply(c,b);return He(d)?d:c}}function rc(a){function b(c,d,e){e&amp;&amp;$c(c,d,e)&amp;&amp;(d=z);var f=Kc(c,a,z,z,z,z,z,d);return f.placeholder=b.placeholder,f}return b}function sc(a,b){return qe(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(z,c))})}function tc(a,b){return function(c,d,e){if(e&amp;&amp;$c(c,d,e)&amp;&amp;(d=z),d=Oc(d,e,3),1==d.length){c=Ch(c)?c:jd(c);var f=gb(c,d,a,b);if(!c.length||f!==b)return f}return zb(c,d,a,b)}}function uc(a,b){return function(c,d,f){if(d=Oc(d,f,3),Ch(c)){var g=e(c,d,b);return g&gt;-1?c[g]:z}return Cb(c,d,a)}}function vc(a){return function(b,c,d){return b&amp;&amp;b.length?(c=Oc(c,d,3),e(b,c,a)):-1}}function wc(a){return function(b,c,d){return c=Oc(c,d,3),Cb(b,c,a,!0)}}function xc(a){return function(){for(var b,c=arguments.length,d=a?c:-1,e=0,f=Of(c);a?d--:++d&lt;c;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Xf(R);!b&amp;&amp;s.prototype.thru&amp;&amp;"wrapper"==Pc(g)&amp;&amp;(b=new s([],!0))}for(d=b?-1:c;++d&lt;c;){g=f[d];var h=Pc(g),i="wrapper"==h?Og(g):z;b=i&amp;&amp;ad(i[0])&amp;&amp;i[1]==(I|E|G|J)&amp;&amp;!i[4].length&amp;&amp;1==i[9]?b[Pc(i[0])].apply(b,i[3]):1==g.length&amp;&amp;ad(g)?b[h]():b.thru(g)}return function(){var a=arguments,d=a[0];if(b&amp;&amp;1==a.length&amp;&amp;Ch(d)&amp;&amp;d.length&gt;=O)return b.plant(d).value();for(var e=0,g=c?f[e].apply(this,a):d;++e&lt;c;)g=f[e].call(this,g);return g}}}function yc(a,b){return function(c,d,e){return"function"==typeof d&amp;&amp;e===z&amp;&amp;Ch(c)?a(c,d):b(c,fc(d,e,3))}}function zc(a){return function(b,c,d){return"function"==typeof c&amp;&amp;d===z||(c=fc(c,d,3)),a(b,c,_e)}}function Ac(a){return function(b,c,d){return"function"==typeof c&amp;&amp;d===z||(c=fc(c,d,3)),a(b,c)}}function Bc(a){return function(b,c,d){var e={};return c=Oc(c,d,3),Fb(b,function(b,d,f){var g=c(b,d,f);d=a?g:d,b=a?b:g,e[d]=b}),e}}function Cc(a){return function(b,c,d){return b=h(b),(a?b:"")+Gc(b,c,d)+(a?"":b)}}function Dc(a){var b=qe(function(c,d){var e=t(d,b.placeholder);return Kc(c,a,z,d,e)});return b}function Ec(a,b){return function(c,d,e,f){var g=arguments.length&lt;3;return"function"==typeof d&amp;&amp;f===z&amp;&amp;Ch(c)?a(c,d,e,g):Vb(c,Oc(d,f,4),e,g,b)}}function Fc(a,b,c,d,e,f,g,h,i,j){function k(){for(var s=arguments.length,u=s,v=Of(s);u--;)v[u]=arguments[u];if(d&amp;&amp;(v=hc(v,d,e)),f&amp;&amp;(v=ic(v,f,g)),o||q){var w=k.placeholder,x=t(v,w);if((s-=x.length)&lt;j){var y=h?ab(h):z,A=vg(j-s,0),D=o?x:z,E=o?z:x,F=o?v:z,I=o?z:v;b|=o?G:H,b&amp;=~(o?H:G),p||(b&amp;=~(B|C));var J=[a,b,c,F,D,I,E,y,i,A],K=Fc.apply(z,J);return ad(a)&amp;&amp;Qg(K,J),K.placeholder=w,K}}var L=m?c:this,M=n?L[a]:a;return h&amp;&amp;(v=hd(v,h)),l&amp;&amp;i&lt;v.length&amp;&amp;(v.length=i),this&amp;&amp;this!==cb&amp;&amp;this instanceof k&amp;&amp;(M=r||qc(a)),M.apply(L,v)}var l=b&amp;I,m=b&amp;B,n=b&amp;C,o=b&amp;E,p=b&amp;D,q=b&amp;F,r=n?z:qc(a);return k}function Gc(a,b,c){var d=a.length;if(b=+b,d&gt;=b||!tg(b))return"";var e=b-d;return c=null==c?" ":c+"",qf(c,pg(e/c.length)).slice(0,e)}function Hc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Of(j+h);++i&lt;j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this&amp;&amp;this!==cb&amp;&amp;this instanceof e?g:a).apply(f?c:this,k)}var f=b&amp;B,g=qc(a);return e}function Ic(a){var b=Sf[a];return function(a,c){return c=c===z?0:+c||0,c?(c=ig(10,c),b(a*c)/c):b(a)}}function Jc(a){return function(b,c,d,e){var f=Oc(d);return null==d&amp;&amp;f===ub?dc(b,c,a):ec(b,c,f(d,e,1),a)}}function Kc(a,b,c,d,e,f,g,h){var i=b&amp;C;if(!i&amp;&amp;"function"!=typeof a)throw new Xf(R);var j=d?d.length:0;if(j||(b&amp;=~(G|H),d=e=z),j-=e?e.length:0,b&amp;H){var k=d,l=e;d=e=z}var m=i?z:Og(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&amp;&amp;(dd(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:vg(h-j,0)||0,b==B)var o=nc(n[0],n[2]);else o=b!=G&amp;&amp;b!=(B|G)||n[4].length?Fc.apply(z,n):Hc.apply(z,n);return(m?Ng:Qg)(o,n)}function Lc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length;if(i!=j&amp;&amp;!(e&amp;&amp;j&gt;i))return!1;for(;++h&lt;i;){var k=a[h],l=b[h],m=d?d(e?l:k,e?k:l,h):z;if(m!==z){if(m)continue;return!1}if(e){if(!mb(b,function(a){return k===a||c(k,a,d,e,f,g)}))return!1}else if(k!==l&amp;&amp;!c(k,l,d,e,f,g))return!1}return!0}function Mc(a,b,c){switch(c){case V:case W:return+a==+b;case X:return a.name==b.name&amp;&amp;a.message==b.message;case $:return a!=+a?b!=+b:a==+b;case aa:case ca:return a==b+""}return!1}function Nc(a,b,c,d,e,f,g){var h=Nh(a),i=h.length;if(i!=Nh(b).length&amp;&amp;!e)return!1;for(var j=i;j--;){var k=h[j];if(!(e?k in b:ag.call(b,k)))return!1}for(var l=e;++j&lt;i;){k=h[j];var m=a[k],n=b[k],o=d?d(e?n:m,e?m:n,k):z;if(!(o===z?c(m,n,d,e,f,g):o))return!1;l||(l="constructor"==k)}if(!l){var p=a.constructor,q=b.constructor;if(p!=q&amp;&amp;"constructor"in a&amp;&amp;"constructor"in b&amp;&amp;!("function"==typeof p&amp;&amp;p instanceof p&amp;&amp;"function"==typeof q&amp;&amp;q instanceof q))return!1}return!0}function Oc(a,c,d){var e=b.callback||zf;return e=e===zf?ub:e,d?e(a,c,d):e}function Pc(a){for(var b=a.name,c=Hg[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function Qc(a,c,d){var e=b.indexOf||xd;return e=e===xd?f:e,a?e(a,c,d):e}function Rc(a){for(var b=af(a),c=b.length;c--;)b[c][2]=cd(b[c][1]);return b}function Sc(a,b){var c=null==a?z:a[b];return Ke(c)?c:z}function Tc(a,b,c){for(var d=-1,e=c.length;++d&lt;e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=wg(b,a+g);break;case"takeRight":a=vg(a,b-g)}}return{start:a,end:b}}function Uc(a){var b=a.length,c=new a.constructor(b);return b&amp;&amp;"string"==typeof a[0]&amp;&amp;ag.call(a,"index")&amp;&amp;(c.index=a.index,c.input=a.input),c}function Vc(a){var b=a.constructor;return"function"==typeof b&amp;&amp;b instanceof b||(b=Uf),new b}function Wc(a,b,c){var d=a.constructor;switch(b){case ea:return gc(a);case V:case W:return new d(+a);case fa:case ga:case ha:case ia:case ja:case ka:case la:case ma:case na:var e=a.buffer;return new d(c?gc(e):e,a.byteOffset,a.length);case $:case ca:return new d(a);case aa:var f=new d(a.source,Ga.exec(a));f.lastIndex=a.lastIndex}return f}function Xc(a,b,c){null==a||_c(b,a)||(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),b=zd(b));var d=null==a?a:a[b];return null==d?z:d.apply(a,c)}function Yc(a){return null!=a&amp;&amp;bd(Pg(a))}function Zc(a,b){return a="number"==typeof a||Ja.test(a)?+a:-1,b=null==b?Fg:b,a&gt;-1&amp;&amp;a%1==0&amp;&amp;a&lt;b}function $c(a,b,c){if(!He(c))return!1;var d=typeof b;if("number"==d?Yc(c)&amp;&amp;Zc(b,c.length):"string"==d&amp;&amp;b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function _c(a,b){var c=typeof a;return!!("string"==c&amp;&amp;za.test(a)||"number"==c)||!Ch(a)&amp;&amp;(!ya.test(a)||null!=b&amp;&amp;a in kd(b))}function ad(a){var c=Pc(a);if(!(c in Z.prototype))return!1;var d=b[c];if(a===d)return!0;var e=Og(d);return!!e&amp;&amp;a===e[0]}function bd(a){return"number"==typeof a&amp;&amp;a&gt;-1&amp;&amp;a%1==0&amp;&amp;a&lt;=Fg}function cd(a){return a===a&amp;&amp;!He(a)}function dd(a,b){var c=a[1],d=b[1],e=c|d,f=e&lt;I,g=d==I&amp;&amp;c==E||d==I&amp;&amp;c==J&amp;&amp;a[7].length&lt;=b[8]||d==(I|J)&amp;&amp;c==E;if(!f&amp;&amp;!g)return a;d&amp;B&amp;&amp;(a[2]=b[2],e|=c&amp;B?0:D);var h=b[3];if(h){var i=a[3];a[3]=i?hc(i,h,b[4]):ab(h),a[4]=i?t(a[3],S):ab(b[4])}return h=b[5],h&amp;&amp;(i=a[5],a[5]=i?ic(i,h,b[6]):ab(h),a[6]=i?t(a[5],S):ab(b[6])),h=b[7],h&amp;&amp;(a[7]=ab(h)),d&amp;I&amp;&amp;(a[8]=null==a[8]?b[8]:wg(a[8],b[8])),null==a[9]&amp;&amp;(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function ed(a,b){return a===z?b:Dh(a,b,ed)}function fd(a,b){a=kd(a);for(var c=-1,d=b.length,e={};++c&lt;d;){var f=b[c];f in a&amp;&amp;(e[f]=a[f])}return e}function gd(a,b){var c={};return Eb(a,function(a,d,e){b(a,d,e)&amp;&amp;(c[d]=a)}),c}function hd(a,b){for(var c=a.length,d=wg(b.length,c),e=ab(a);d--;){var f=b[d];a[d]=Zc(f,c)?e[f]:z}return a}function id(a){for(var b=_e(a),c=b.length,d=c&amp;&amp;a.length,e=!!d&amp;&amp;bd(d)&amp;&amp;(Ch(a)||ye(a)),f=-1,g=[];++f&lt;c;){var h=b[f];(e&amp;&amp;Zc(h,d)||ag.call(a,h))&amp;&amp;g.push(h)}return g}function jd(a){return null==a?[]:Yc(a)?He(a)?a:Uf(a):ef(a)}function kd(a){return He(a)?a:Uf(a)}function ld(a){if(Ch(a))return a;var b=[];return h(a).replace(Aa,function(a,c,d,e){b.push(d?e.replace(Ea,"$1"):c||a)}),b}function md(a){return a instanceof Z?a.clone():new s(a.__wrapped__,a.__chain__,ab(a.__actions__))}function nd(a,b,c){b=(c?$c(a,b,c):null==b)?1:vg(rg(b)||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Of(pg(e/b));d&lt;e;)g[++f]=Wb(a,d,d+=b);return g}function od(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b&lt;c;){var f=a[b];f&amp;&amp;(e[++d]=f)}return e}function pd(a,b,c){return(a?a.length:0)?((c?$c(a,b,c):null==b)&amp;&amp;(b=1),Wb(a,b&lt;0?0:b)):[]}function qd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&amp;&amp;(b=1),b=d-(+b||0),Wb(a,0,b&lt;0?0:b)):[]}function rd(a,b,c){return a&amp;&amp;a.length?bc(a,Oc(b,c,3),!0,!0):[]}function sd(a,b,c){return a&amp;&amp;a.length?bc(a,Oc(b,c,3),!0):[]}function td(a,b,c,d){var e=a?a.length:0;return e?(c&amp;&amp;"number"!=typeof c&amp;&amp;$c(a,b,c)&amp;&amp;(c=0,d=e),Ab(a,b,c,d)):[]}function ud(a){return a?a[0]:z}function vd(a,b,c){var d=a?a.length:0;return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=!1),d?Db(a,b):[]}function wd(a){return(a?a.length:0)?Db(a,!0):[]}function xd(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=c&lt;0?vg(d+c,0):c;else if(c){var e=dc(a,b);return e&lt;d&amp;&amp;(b===b?b===a[e]:a[e]!==a[e])?e:-1}return f(a,b,c||0)}function yd(a){return qd(a,1)}function zd(a){var b=a?a.length:0;return b?a[b-1]:z}function Ad(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(c&lt;0?vg(d+c,0):wg(c||0,d-1))+1;else if(c){e=dc(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return q(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Bd(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Qc(),e=a.length;++c&lt;e;)for(var f=0,g=a[c];(f=d(b,g,f))&gt;-1;)mg.call(b,f,1);return b}function Cd(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Oc(b,c,3);++e&lt;g;){var h=a[e];b(h,e,a)&amp;&amp;(d.push(h),f.push(e))}return Tb(a,f),d}function Dd(a){return pd(a,1)}function Ed(a,b,c){var d=a?a.length:0;return d?(c&amp;&amp;"number"!=typeof c&amp;&amp;$c(a,b,c)&amp;&amp;(b=0,c=d),Wb(a,b,c)):[]}function Fd(a,b,c){return(a?a.length:0)?((c?$c(a,b,c):null==b)&amp;&amp;(b=1),Wb(a,0,b&lt;0?0:b)):[]}function Gd(a,b,c){var d=a?a.length:0;return d?((c?$c(a,b,c):null==b)&amp;&amp;(b=1),b=d-(+b||0),Wb(a,b&lt;0?0:b)):[]}function Hd(a,b,c){return a&amp;&amp;a.length?bc(a,Oc(b,c,3),!1,!0):[]}function Id(a,b,c){return a&amp;&amp;a.length?bc(a,Oc(b,c,3)):[]}function Jd(a,b,c,d){if(!(a?a.length:0))return[];null!=b&amp;&amp;"boolean"!=typeof b&amp;&amp;(d=c,c=$c(a,b,d)?z:b,b=!1);var e=Oc();return null==c&amp;&amp;e===ub||(c=e(c,d,3)),b&amp;&amp;Qc()==f?u(a,c):_b(a,c)}function Kd(a){if(!a||!a.length)return[];var b=-1,c=0;a=hb(a,function(a){if(Yc(a))return c=vg(a.length,c),!0});for(var d=Of(c);++b&lt;c;)d[b]=ib(a,Rb(b));return d}function Ld(a,b,c){if(!(a?a.length:0))return[];var d=Kd(a);return null==b?d:(b=fc(b,c,4),ib(d,function(a){return kb(a,b,z,!0)}))}function Md(){for(var a=-1,b=arguments.length;++a&lt;b;){var c=arguments[a];if(Yc(c))var d=d?jb(xb(d,c),xb(c,d)):c}return d?_b(d):[]}function Nd(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Ch(a[0])||(b=[]);++c&lt;d;){var f=a[c];b?e[f]=b[c]:f&amp;&amp;(e[f[0]]=f[1])}return e}function Od(a){var c=b(a);return c.__chain__=!0,c}function Pd(a,b,c){return b.call(c,a),a}function Qd(a,b,c){return b.call(c,a)}function Rd(){return Od(this)}function Sd(){return new s(this.value(),this.__chain__)}function Td(a){for(var b,d=this;d instanceof c;){var e=md(d);b?f.__wrapped__=e:b=e;var f=e;d=d.__wrapped__}return f.__wrapped__=a,b}function Ud(){var a=this.__wrapped__,b=function(a){return c&amp;&amp;c.__dir__&lt;0?a:a.reverse()};if(a instanceof Z){var c=a;return this.__actions__.length&amp;&amp;(c=new Z(this)),c=c.reverse(),c.__actions__.push({func:Qd,args:[b],thisArg:z}),new s(c,this.__chain__)}return this.thru(b)}function Vd(){return this.value()+""}function Wd(){return cc(this.__wrapped__,this.__actions__)}function Xd(a,b,c){var d=Ch(a)?fb:yb;return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),"function"==typeof b&amp;&amp;c===z||(b=Oc(b,c,3)),d(a,b)}function Yd(a,b,c){var d=Ch(a)?hb:Bb;return b=Oc(b,c,3),d(a,b)}function Zd(a,b){return dh(a,Nb(b))}function $d(a,b,c,d){var e=a?Pg(a):0;return bd(e)||(a=ef(a),e=a.length),c="number"!=typeof c||d&amp;&amp;$c(b,c,d)?0:c&lt;0?vg(e+c,0):c||0,"string"==typeof a||!Ch(a)&amp;&amp;Pe(a)?c&lt;=e&amp;&amp;a.indexOf(b,c)&gt;-1:!!e&amp;&amp;Qc(a,b,c)&gt;-1}function _d(a,b,c){var d=Ch(a)?ib:Mb;return b=Oc(b,c,3),d(a,b)}function ae(a,b){return _d(a,Hf(b))}function be(a,b,c){var d=Ch(a)?hb:Bb;return b=Oc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function ce(a,b,c){if(c?$c(a,b,c):null==b){a=jd(a);var d=a.length;return d&gt;0?a[Ub(0,d-1)]:z}var e=-1,f=Ue(a),d=f.length,g=d-1;for(b=wg(b&lt;0?0:+b||0,d);++e&lt;b;){var h=Ub(e,g),i=f[h];f[h]=f[e],f[e]=i}return f.length=b,f}function de(a){return ce(a,Bg)}function ee(a){var b=a?Pg(a):0;return bd(b)?b:Nh(a).length}function fe(a,b,c){var d=Ch(a)?mb:Xb;return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),"function"==typeof b&amp;&amp;c===z||(b=Oc(b,c,3)),d(a,b)}function ge(a,b,c){if(null==a)return[];c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z);var d=-1;return b=Oc(b,c,3),Yb(Mb(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}}),k)}function he(a,b,c,d){return null==a?[]:(d&amp;&amp;$c(b,c,d)&amp;&amp;(c=z),Ch(b)||(b=null==b?[]:[b]),Ch(c)||(c=null==c?[]:[c]),Zb(a,b,c))}function ie(a,b){return Yd(a,Nb(b))}function je(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Xf(R);var c=a;a=b,b=c}return a=tg(a=+a)?a:0,function(){if(--a&lt;1)return b.apply(this,arguments)}}function ke(a,b,c){return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),b=a&amp;&amp;null==b?a.length:vg(+b||0,0),Kc(a,I,z,z,z,z,b)}function le(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Xf(R);var d=a;a=b,b=d}return function(){return--a&gt;0&amp;&amp;(c=b.apply(this,arguments)),a&lt;=1&amp;&amp;(b=z),c}}function me(a,b,c){function d(){n&amp;&amp;gg(n),j&amp;&amp;gg(j),p=0,j=n=o=z}function e(b,c){c&amp;&amp;gg(c),j=n=o=z,b&amp;&amp;(p=oh(),k=a.apply(m,i),n||j||(i=m=z))}function f(){var a=b-(oh()-l);a&lt;=0||a&gt;b?e(o,j):n=lg(f,a)}function g(){e(r,n)}function h(){if(i=arguments,l=oh(),m=this,o=r&amp;&amp;(n||!s),!1===q)var c=s&amp;&amp;!n;else{j||s||(p=l);var d=q-(l-p),e=d&lt;=0||d&gt;q;e?(j&amp;&amp;(j=gg(j)),p=l,k=a.apply(m,i)):j||(j=lg(g,d))}return e&amp;&amp;n?n=gg(n):n||b===q||(n=lg(f,b)),c&amp;&amp;(e=!0,k=a.apply(m,i)),!e||n||j||(i=m=z),k}var i,j,k,l,m,n,o,p=0,q=!1,r=!0;if("function"!=typeof a)throw new Xf(R);if(b=b&lt;0?0:+b||0,!0===c){var s=!0;r=!1}else He(c)&amp;&amp;(s=!!c.leading,q="maxWait"in c&amp;&amp;vg(+c.maxWait||0,b),r="trailing"in c?!!c.trailing:r);return h.cancel=d,h}function ne(a,b){if("function"!=typeof a||b&amp;&amp;"function"!=typeof b)throw new Xf(R);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new ne.Cache,c}function oe(a){if("function"!=typeof a)throw new Xf(R);return function(){return!a.apply(this,arguments)}}function pe(a){return le(2,a)}function qe(a,b){if("function"!=typeof a)throw new Xf(R);return b=vg(b===z?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=vg(c.length-b,0),f=Of(e);++d&lt;e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Of(b+1);for(d=-1;++d&lt;b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function re(a){if("function"!=typeof a)throw new Xf(R);return function(b){return a.apply(this,b)}}function se(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Xf(R);return!1===c?d=!1:He(c)&amp;&amp;(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),me(a,b,{leading:d,maxWait:+b,trailing:e})}function te(a,b){return b=null==b?Bf:b,Kc(b,G,z,[a],[])}function ue(a,b,c,d){return b&amp;&amp;"boolean"!=typeof b&amp;&amp;$c(a,b,c)?b=!1:"function"==typeof b&amp;&amp;(d=c,c=b,b=!1),"function"==typeof c?vb(a,b,fc(c,d,1)):vb(a,b)}function ve(a,b,c){return"function"==typeof b?vb(a,!0,fc(b,c,1)):vb(a,!0)}function we(a,b){return a&gt;b}function xe(a,b){return a&gt;=b}function ye(a){return r(a)&amp;&amp;Yc(a)&amp;&amp;ag.call(a,"callee")&amp;&amp;!jg.call(a,"callee")}function ze(a){return!0===a||!1===a||r(a)&amp;&amp;cg.call(a)==V}function Ae(a){return r(a)&amp;&amp;cg.call(a)==W}function Be(a){return!!a&amp;&amp;1===a.nodeType&amp;&amp;r(a)&amp;&amp;!Ne(a)}function Ce(a){return null==a||(Yc(a)&amp;&amp;(Ch(a)||Pe(a)||ye(a)||r(a)&amp;&amp;Ge(a.splice))?!a.length:!Nh(a).length)}function De(a,b,c,d){c="function"==typeof c?fc(c,d,3):z;var e=c?c(a,b):z;return e===z?Jb(a,b,c):!!e}function Ee(a){return r(a)&amp;&amp;"string"==typeof a.message&amp;&amp;cg.call(a)==X}function Fe(a){return"number"==typeof a&amp;&amp;tg(a)}function Ge(a){return He(a)&amp;&amp;cg.call(a)==Y}function He(a){var b=typeof a;return!!a&amp;&amp;("object"==b||"function"==b)}function Ie(a,b,c,d){return c="function"==typeof c?fc(c,d,3):z,Lb(a,Rc(b),c)}function Je(a){return Me(a)&amp;&amp;a!=+a}function Ke(a){return null!=a&amp;&amp;(Ge(a)?eg.test(_f.call(a)):r(a)&amp;&amp;Ia.test(a))}function Le(a){return null===a}function Me(a){return"number"==typeof a||r(a)&amp;&amp;cg.call(a)==$}function Ne(a){var b;if(!r(a)||cg.call(a)!=_||ye(a)||!ag.call(a,"constructor")&amp;&amp;"function"==typeof(b=a.constructor)&amp;&amp;!(b instanceof b))return!1;var c;return Eb(a,function(a,b){c=b}),c===z||ag.call(a,c)}function Oe(a){return He(a)&amp;&amp;cg.call(a)==aa}function Pe(a){return"string"==typeof a||r(a)&amp;&amp;cg.call(a)==ca}function Qe(a){return r(a)&amp;&amp;bd(a.length)&amp;&amp;!!Qa[cg.call(a)]}function Re(a){return a===z}function Se(a,b){return a&lt;b}function Te(a,b){return a&lt;=b}function Ue(a){var b=a?Pg(a):0;return bd(b)?b?ab(a):[]:ef(a)}function Ve(a){return tb(a,_e(a))}function We(a,b,c){var d=Ig(a);return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),b?rb(d,b):d}function Xe(a){return Hb(a,_e(a))}function Ye(a,b,c){var d=null==a?z:Ib(a,ld(b),b+"");return d===z?c:d}function Ze(a,b){if(null==a)return!1;var c=ag.call(a,b);if(!c&amp;&amp;!_c(b)){if(b=ld(b),null==(a=1==b.length?a:Ib(a,Wb(b,0,-1))))return!1;b=zd(b),c=ag.call(a,b)}return c||bd(a.length)&amp;&amp;Zc(b,a.length)&amp;&amp;(Ch(a)||ye(a))}function $e(a,b,c){c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z);for(var d=-1,e=Nh(a),f=e.length,g={};++d&lt;f;){var h=e[d],i=a[h];b?ag.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function _e(a){if(null==a)return[];He(a)||(a=Uf(a));var b=a.length;b=b&amp;&amp;bd(b)&amp;&amp;(Ch(a)||ye(a))&amp;&amp;b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&amp;&amp;c.prototype===a,f=Of(b),g=b&gt;0;++d&lt;b;)f[d]=d+"";for(var h in a)g&amp;&amp;Zc(h,b)||"constructor"==h&amp;&amp;(e||!ag.call(a,h))||f.push(h);return f}function af(a){a=kd(a);for(var b=-1,c=Nh(a),d=c.length,e=Of(d);++b&lt;d;){var f=c[b];e[b]=[f,a[f]]}return e}function bf(a,b,c){var d=null==a?z:a[b];return d===z&amp;&amp;(null==a||_c(b,a)||(b=ld(b),a=1==b.length?a:Ib(a,Wb(b,0,-1)),d=null==a?z:a[zd(b)]),d=d===z?c:d),Ge(d)?d.call(a):d}function cf(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||_c(b,a)?[d]:ld(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&amp;&amp;++e&lt;f;){var i=b[e];He(h)&amp;&amp;(e==g?h[i]=c:null==h[i]&amp;&amp;(h[i]=Zc(b[e+1])?[]:{})),h=h[i]}return a}function df(a,b,c,d){var e=Ch(a)||Qe(a);if(b=Oc(b,d,4),null==c)if(e||He(a)){var f=a.constructor;c=e?Ch(a)?new f:[]:Ig(Ge(f)?f.prototype:z)}else c={};return(e?bb:Fb)(a,function(a,d,e){return b(c,a,d,e)}),c}function ef(a){return ac(a,Nh(a))}function ff(a){return ac(a,_e(a))}function gf(a,b,c){return b=+b||0,c===z?(c=b,b=0):c=+c||0,a&gt;=wg(b,c)&amp;&amp;a&lt;vg(b,c)}function hf(a,b,c){c&amp;&amp;$c(a,b,c)&amp;&amp;(b=c=z);var d=null==a,e=null==b;if(null==c&amp;&amp;(e&amp;&amp;"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&amp;&amp;(c=b,e=!0)),d&amp;&amp;e&amp;&amp;(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=zg();return wg(a+f*(b-a+hg("1e-"+((f+"").length-1))),b)}return Ub(a,b)}function jf(a){return(a=h(a))&amp;&amp;a.charAt(0).toUpperCase()+a.slice(1)}function kf(a){return(a=h(a))&amp;&amp;a.replace(Ka,m).replace(Da,"")}function lf(a,b,c){a=h(a),b+="";var d=a.length;return c=c===z?d:wg(c&lt;0?0:+c||0,d),(c-=b.length)&gt;=0&amp;&amp;a.indexOf(b,c)==c}function mf(a){return a=h(a),a&amp;&amp;ua.test(a)?a.replace(sa,n):a}function nf(a){return a=h(a),a&amp;&amp;Ca.test(a)?a.replace(Ba,o):a||"(?:)"}function of(a,b,c){a=h(a),b=+b;var d=a.length;if(d&gt;=b||!tg(b))return a;var e=(b-d)/2,f=rg(e);return c=Gc("",pg(e),c),c.slice(0,f)+a+c}function pf(a,b,c){return(c?$c(a,b,c):null==b)?b=0:b&amp;&amp;(b=+b),a=tf(a),yg(a,b||(Ha.test(a)?16:10))}function qf(a,b){var c="";if(a=h(a),(b=+b)&lt;1||!a||!tg(b))return c;do{b%2&amp;&amp;(c+=a),b=rg(b/2),a+=a}while(b);return c}function rf(a,b,c){return a=h(a),c=null==c?0:wg(c&lt;0?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function sf(a,c,d){var e=b.templateSettings;d&amp;&amp;$c(a,c,d)&amp;&amp;(c=d=z),a=h(a),c=qb(rb({},d||c),e,pb);var f,g,i=qb(rb({},c.imports),e.imports,pb),j=Nh(i),k=ac(i,j),l=0,m=c.interpolate||La,n="__p += '",o=Vf((c.escape||La).source+"|"+m.source+"|"+(m===xa?Fa:La).source+"|"+(c.evaluate||La).source+"|$","g"),q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Pa+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(l,i).replace(Ma,p),c&amp;&amp;(f=!0,n+="' +\n__e("+c+") +\n'"),h&amp;&amp;(g=!0,n+="';\n"+h+";\n__p += '"),d&amp;&amp;(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),l=i+b.length,b}),n+="';\n";var r=c.variable;r||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(oa,""):n).replace(pa,"$1").replace(qa,"$1;"),n="function("+(r||"obj")+") {\n"+(r?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var s=Yh(function(){return Rf(j,q+"return "+n).apply(z,k)});if(s.source=n,Ee(s))throw s;return s}function tf(a,b,c){var d=a;return(a=h(a))?(c?$c(d,b,c):null==b)?a.slice(v(a),w(a)+1):(b+="",a.slice(i(a,b),j(a,b)+1)):a}function uf(a,b,c){var d=a;return a=h(a),a?(c?$c(d,b,c):null==b)?a.slice(v(a)):a.slice(i(a,b+"")):a}function vf(a,b,c){var d=a;return a=h(a),a?(c?$c(d,b,c):null==b)?a.slice(0,w(a)+1):a.slice(0,j(a,b+"")+1):a}function wf(a,b,c){c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z);var d=K,e=L;if(null!=b)if(He(b)){var f="separator"in b?b.separator:f;d="length"in b?+b.length||0:d,e="omission"in b?h(b.omission):e}else d=+b||0;if(a=h(a),d&gt;=a.length)return a;var g=d-e.length;if(g&lt;1)return e;var i=a.slice(0,g);if(null==f)return i+e;if(Oe(f)){if(a.slice(g).search(f)){var j,k,l=a.slice(0,g);for(f.global||(f=Vf(f.source,(Ga.exec(f)||"")+"g")),f.lastIndex=0;j=f.exec(l);)k=j.index;i=i.slice(0,null==k?g:k)}}else if(a.indexOf(f,g)!=g){var m=i.lastIndexOf(f);m&gt;-1&amp;&amp;(i=i.slice(0,m))}return i+e}function xf(a){return a=h(a),a&amp;&amp;ta.test(a)?a.replace(ra,x):a}function yf(a,b,c){return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),a=h(a),a.match(b||Na)||[]}function zf(a,b,c){return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),r(a)?Cf(a):ub(a,b)}function Af(a){return function(){return a}}function Bf(a){return a}function Cf(a){return Nb(vb(a,!0))}function Df(a,b){return Ob(a,vb(b,!0))}function Ef(a,b,c){if(null==c){var d=He(b),e=d?Nh(b):z,f=e&amp;&amp;e.length?Hb(b,e):z;(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Hb(b,Nh(b)));var g=!0,h=-1,i=Ge(a),j=f.length;!1===c?g=!1:He(c)&amp;&amp;"chain"in c&amp;&amp;(g=c.chain);for(;++h&lt;j;){var k=f[h],l=b[k];a[k]=l,i&amp;&amp;(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__);return(d.__actions__=ab(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}return b.apply(a,jb([this.value()],arguments))}}(l))}return a}function Ff(){return cb._=dg,this}function Gf(){}function Hf(a){return _c(a)?Rb(a):Sb(a)}function If(a){return function(b){return Ib(a,ld(b),b+"")}}function Jf(a,b,c){c&amp;&amp;$c(a,b,c)&amp;&amp;(b=c=z),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=vg(pg((b-a)/(c||1)),0),f=Of(e);++d&lt;e;)f[d]=a,a+=c;return f}function Kf(a,b,c){if((a=rg(a))&lt;1||!tg(a))return[];var d=-1,e=Of(wg(a,Cg));for(b=fc(b,c,1);++d&lt;a;)d&lt;Cg?e[d]=b(d):b(d);return e}function Lf(a){var b=++bg;return h(a)+b}function Mf(a,b){return(+a||0)+(+b||0)}function Nf(a,b,c){return c&amp;&amp;$c(a,b,c)&amp;&amp;(b=z),b=Oc(b,c,3),1==b.length?nb(Ch(a)?a:jd(a),b):$b(a,b)}a=a?db.defaults(cb.Object(),a,db.pick(cb,Oa)):cb;var Of=a.Array,Pf=a.Date,Qf=a.Error,Rf=a.Function,Sf=a.Math,Tf=a.Number,Uf=a.Object,Vf=a.RegExp,Wf=a.String,Xf=a.TypeError,Yf=Of.prototype,Zf=Uf.prototype,$f=Wf.prototype,_f=Rf.prototype.toString,ag=Zf.hasOwnProperty,bg=0,cg=Zf.toString,dg=cb._,eg=Vf("^"+_f.call(ag).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&amp;").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fg=a.ArrayBuffer,gg=a.clearTimeout,hg=a.parseFloat,ig=Sf.pow,jg=Zf.propertyIsEnumerable,kg=Sc(a,"Set"),lg=a.setTimeout,mg=Yf.splice,ng=a.Uint8Array,og=Sc(a,"WeakMap"),pg=Sf.ceil,qg=Sc(Uf,"create"),rg=Sf.floor,sg=Sc(Of,"isArray"),tg=a.isFinite,ug=Sc(Uf,"keys"),vg=Sf.max,wg=Sf.min,xg=Sc(Pf,"now"),yg=a.parseInt,zg=Sf.random,Ag=Tf.NEGATIVE_INFINITY,Bg=Tf.POSITIVE_INFINITY,Cg=4294967295,Dg=Cg-1,Eg=Cg&gt;&gt;&gt;1,Fg=9007199254740991,Gg=og&amp;&amp;new og,Hg={};b.support={};b.templateSettings={escape:va,evaluate:wa,interpolate:xa,variable:"",imports:{_:b}};var Ig=function(){function a(){}return function(b){if(He(b)){a.prototype=b;var c=new a;a.prototype=z}return c||{}}}(),Jg=lc(Fb),Kg=lc(Gb,!0),Lg=mc(),Mg=mc(!0),Ng=Gg?function(a,b){return Gg.set(a,b),a}:Bf,Og=Gg?function(a){return Gg.get(a)}:Gf,Pg=Rb("length"),Qg=function(){var a=0,b=0;return function(c,d){var e=oh(),f=N-(e-b);if(b=e,f&gt;0){if(++a&gt;=M)return c}else a=0;return Ng(c,d)}}(),Rg=qe(function(a,b){return r(a)&amp;&amp;Yc(a)?xb(a,Db(b,!1,!0)):[]}),Sg=vc(),Tg=vc(!0),Ug=qe(function(a){for(var b=a.length,c=b,d=Of(l),e=Qc(),g=e==f,h=[];c--;){var i=a[c]=Yc(i=a[c])?i:[];d[c]=g&amp;&amp;i.length&gt;=120?oc(c&amp;&amp;i):null}var j=a[0],k=-1,l=j?j.length:0,m=d[0];a:for(;++k&lt;l;)if(i=j[k],(m?Za(m,i):e(h,i,0))&lt;0){for(var c=b;--c;){var n=d[c];if((n?Za(n,i):e(a[c],i,0))&lt;0)continue a}m&amp;&amp;m.push(i),h.push(i)}return h}),Vg=qe(function(a,b){b=Db(b);var c=sb(a,b);return Tb(a,b.sort(d)),c}),Wg=Jc(),Xg=Jc(!0),Yg=qe(function(a){return _b(Db(a,!1,!0))}),Zg=qe(function(a,b){return Yc(a)?xb(a,b):[]}),$g=qe(Kd),_g=qe(function(a){var b=a.length,c=b&gt;2?a[b-2]:z,d=b&gt;1?a[b-1]:z;return b&gt;2&amp;&amp;"function"==typeof c?b-=2:(c=b&gt;1&amp;&amp;"function"==typeof d?(--b,d):z,d=z),a.length=b,Ld(a,c,d)}),ah=qe(function(a){return a=Db(a),this.thru(function(b){return _a(Ch(b)?b:[kd(b)],a)})}),bh=qe(function(a,b){return sb(a,Db(b))}),ch=jc(function(a,b,c){ag.call(a,c)?++a[c]:a[c]=1}),dh=uc(Jg),eh=uc(Kg,!0),fh=yc(bb,Jg),gh=yc(eb,Kg),hh=jc(function(a,b,c){ag.call(a,c)?a[c].push(b):a[c]=[b]}),ih=jc(function(a,b,c){a[c]=b}),jh=qe(function(a,b,c){var d=-1,e="function"==typeof b,f=_c(b),g=Yc(a)?Of(a.length):[];return Jg(a,function(a){var h=e?b:f&amp;&amp;null!=a?a[b]:z;g[++d]=h?h.apply(a,c):Xc(a,b,c)}),g}),kh=jc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),lh=Ec(kb,Jg),mh=Ec(lb,Kg),nh=qe(function(a,b){if(null==a)return[];var c=b[2];return c&amp;&amp;$c(b[0],b[1],c)&amp;&amp;(b.length=1),Zb(a,Db(b),[])}),oh=xg||function(){return(new Pf).getTime()},ph=qe(function(a,b,c){var d=B;if(c.length){var e=t(c,ph.placeholder);d|=G}return Kc(a,d,b,c,e)}),qh=qe(function(a,b){b=b.length?Db(b):Xe(a);for(var c=-1,d=b.length;++c&lt;d;){var e=b[c];a[e]=Kc(a[e],B,a)}return a}),rh=qe(function(a,b,c){var d=B|C;if(c.length){var e=t(c,rh.placeholder);d|=G}return Kc(b,d,a,c,e)}),sh=rc(E),th=rc(F),uh=qe(function(a,b){return wb(a,1,b)}),vh=qe(function(a,b,c){return wb(a,b,c)}),wh=xc(),xh=xc(!0),yh=qe(function(a,b){if(b=Db(b),"function"!=typeof a||!fb(b,g))throw new Xf(R);var c=b.length;return qe(function(d){for(var e=wg(d.length,c);e--;)d[e]=b[e](d[e]);return a.apply(this,d)})}),zh=Dc(G),Ah=Dc(H),Bh=qe(function(a,b){return Kc(a,J,z,z,z,Db(b))}),Ch=sg||function(a){return r(a)&amp;&amp;bd(a.length)&amp;&amp;cg.call(a)==U},Dh=kc(Pb),Eh=kc(function(a,b,c){return c?qb(a,b,c):rb(a,b)}),Fh=sc(Eh,ob),Gh=sc(Dh,ed),Hh=wc(Fb),Ih=wc(Gb),Jh=zc(Lg),Kh=zc(Mg),Lh=Ac(Fb),Mh=Ac(Gb),Nh=ug?function(a){var b=null==a?z:a.constructor;return"function"==typeof b&amp;&amp;b.prototype===a||"function"!=typeof a&amp;&amp;Yc(a)?id(a):He(a)?ug(a):[]}:id,Oh=Bc(!0),Ph=Bc(),Qh=qe(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=ib(Db(b),Wf);return fd(a,xb(_e(a),b))}var c=fc(b[0],b[1],3);return gd(a,function(a,b,d){return!c(a,b,d)})}),Rh=qe(function(a,b){return null==a?{}:"function"==typeof b[0]?gd(a,fc(b[0],b[1],3)):fd(a,Db(b))}),Sh=pc(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Th=pc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Uh=Cc(),Vh=Cc(!0),Wh=pc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Xh=pc(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Yh=qe(function(a,b){try{return a.apply(z,b)}catch(a){return Ee(a)?a:new Qf(a)}}),Zh=qe(function(a,b){return function(c){return Xc(c,a,b)}}),$h=qe(function(a,b){return function(c){return Xc(a,c,b)}}),_h=Ic("ceil"),ai=Ic("floor"),bi=tc(we,Ag),ci=tc(Se,Bg),di=Ic("round");return b.prototype=c.prototype,s.prototype=Ig(c.prototype),s.prototype.constructor=s,Z.prototype=Ig(c.prototype),Z.prototype.constructor=Z,Ta.prototype.delete=Ua,Ta.prototype.get=Va,Ta.prototype.has=Wa,Ta.prototype.set=Xa,Ya.prototype.push=$a,ne.Cache=Ta,b.after=je,b.ary=ke,b.assign=Eh,b.at=bh,b.before=le,b.bind=ph,b.bindAll=qh,b.bindKey=rh,b.callback=zf,b.chain=Od,b.chunk=nd,b.compact=od,b.constant=Af,b.countBy=ch,b.create=We,b.curry=sh,b.curryRight=th,b.debounce=me,b.defaults=Fh,b.defaultsDeep=Gh,b.defer=uh,b.delay=vh,b.difference=Rg,b.drop=pd,b.dropRight=qd,b.dropRightWhile=rd,b.dropWhile=sd,b.fill=td,b.filter=Yd,b.flatten=vd,b.flattenDeep=wd,b.flow=wh,b.flowRight=xh,b.forEach=fh,b.forEachRight=gh,b.forIn=Jh,b.forInRight=Kh,b.forOwn=Lh,b.forOwnRight=Mh,b.functions=Xe,b.groupBy=hh,b.indexBy=ih,b.initial=yd,b.intersection=Ug,b.invert=$e,b.invoke=jh,b.keys=Nh,b.keysIn=_e,b.map=_d,b.mapKeys=Oh,b.mapValues=Ph,b.matches=Cf,b.matchesProperty=Df,b.memoize=ne,b.merge=Dh,b.method=Zh,b.methodOf=$h,b.mixin=Ef,b.modArgs=yh,b.negate=oe,b.omit=Qh,b.once=pe,b.pairs=af,b.partial=zh,b.partialRight=Ah,b.partition=kh,b.pick=Rh,b.pluck=ae,b.property=Hf,b.propertyOf=If,b.pull=Bd,b.pullAt=Vg,b.range=Jf,b.rearg=Bh,b.reject=be,b.remove=Cd,b.rest=Dd,b.restParam=qe,b.set=cf,b.shuffle=de,b.slice=Ed,b.sortBy=ge,b.sortByAll=nh,b.sortByOrder=he,b.spread=re,b.take=Fd,b.takeRight=Gd,b.takeRightWhile=Hd,b.takeWhile=Id,b.tap=Pd,b.throttle=se,b.thru=Qd,b.times=Kf,b.toArray=Ue,b.toPlainObject=Ve,b.transform=df,b.union=Yg,b.uniq=Jd,b.unzip=Kd,b.unzipWith=Ld,b.values=ef,b.valuesIn=ff,b.where=ie,b.without=Zg,b.wrap=te,b.xor=Md,b.zip=$g,b.zipObject=Nd,b.zipWith=_g,b.backflow=xh,b.collect=_d,b.compose=xh,b.each=fh,b.eachRight=gh,b.extend=Eh,b.iteratee=zf,b.methods=Xe,b.object=Nd,b.select=Yd,b.tail=Dd,b.unique=Jd,Ef(b,b),b.add=Mf,b.attempt=Yh,b.camelCase=Sh,b.capitalize=jf,b.ceil=_h,b.clone=ue,b.cloneDeep=ve,b.deburr=kf,b.endsWith=lf,b.escape=mf,b.escapeRegExp=nf,b.every=Xd,b.find=dh,b.findIndex=Sg,b.findKey=Hh,b.findLast=eh,b.findLastIndex=Tg,b.findLastKey=Ih,b.findWhere=Zd,b.first=ud,b.floor=ai,b.get=Ye,b.gt=we,b.gte=xe,b.has=Ze,b.identity=Bf,b.includes=$d,b.indexOf=xd,b.inRange=gf,b.isArguments=ye,b.isArray=Ch,b.isBoolean=ze,b.isDate=Ae,b.isElement=Be,b.isEmpty=Ce,b.isEqual=De,b.isError=Ee,b.isFinite=Fe,b.isFunction=Ge,b.isMatch=Ie,b.isNaN=Je,b.isNative=Ke,b.isNull=Le,b.isNumber=Me,b.isObject=He,b.isPlainObject=Ne,b.isRegExp=Oe,b.isString=Pe,b.isTypedArray=Qe,b.isUndefined=Re,b.kebabCase=Th,b.last=zd,b.lastIndexOf=Ad,b.lt=Se,b.lte=Te,b.max=bi,b.min=ci,b.noConflict=Ff,b.noop=Gf,b.now=oh,b.pad=of,b.padLeft=Uh,b.padRight=Vh,b.parseInt=pf,b.random=hf,b.reduce=lh,b.reduceRight=mh,b.repeat=qf,b.result=bf,b.round=di,b.runInContext=y,b.size=ee,b.snakeCase=Wh,b.some=fe,b.sortedIndex=Wg,b.sortedLastIndex=Xg,b.startCase=Xh,b.startsWith=rf,b.sum=Nf,b.template=sf,b.trim=tf,b.trimLeft=uf,b.trimRight=vf,b.trunc=wf,b.unescape=xf,b.uniqueId=Lf,b.words=yf,b.all=Xd,b.any=fe,b.contains=$d,b.eq=De,b.detect=dh,b.foldl=lh,b.foldr=mh,b.head=ud,b.include=$d,b.inject=lh,Ef(b,function(){var a={};return Fb(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.sample=ce,b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return ce(b,a)}):ce(this.value())},b.VERSION=A,bb(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){b[a].placeholder=b}),bb(["drop","take"],function(a,b){Z.prototype[a]=function(c){var d=this.__filtered__;if(d&amp;&amp;!b)return new Z(this);c=null==c?1:vg(rg(c)||0,0);var e=this.clone();return d?e.__takeCount__=wg(e.__takeCount__,c):e.__views__.push({size:c,type:a+(e.__dir__&lt;0?"Right":"")}),e},Z.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),bb(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c!=Q;Z.prototype[a]=function(a,b){var e=this.clone();return e.__iteratees__.push({iteratee:Oc(a,b,1),type:c}),e.__filtered__=e.__filtered__||d,e}}),bb(["first","last"],function(a,b){var c="take"+(b?"Right":"");Z.prototype[a]=function(){return this[c](1).value()[0]}}),bb(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Z.prototype[a]=function(){return this.__filtered__?new Z(this):this[c](1)}}),bb(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Nb:Hf;Z.prototype[a]=function(a){return this[c](d(a))}}),Z.prototype.compact=function(){return this.filter(Bf)},Z.prototype.reject=function(a,b){return a=Oc(a,b,1),this.filter(function(b){return!a(b)})},Z.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return c.__filtered__&amp;&amp;(a&gt;0||b&lt;0)?new Z(c):(a&lt;0?c=c.takeRight(-a):a&amp;&amp;(c=c.drop(a)),b!==z&amp;&amp;(b=+b||0,c=b&lt;0?c.dropRight(-b):c.take(b-a)),c)},Z.prototype.takeRightWhile=function(a,b){return this.reverse().takeWhile(a,b).reverse()},Z.prototype.toArray=function(){return this.take(Bg)},Fb(Z.prototype,function(a,c){var d=/^(?:filter|map|reject)|While$/.test(c),e=/^(?:first|last)$/.test(c),f=b[e?"take"+("last"==c?"Right":""):c];f&amp;&amp;(b.prototype[c]=function(){var b=e?[1]:arguments,c=this.__chain__,g=this.__wrapped__,h=!!this.__actions__.length,i=g instanceof Z,j=b[0],k=i||Ch(g);k&amp;&amp;d&amp;&amp;"function"==typeof j&amp;&amp;1!=j.length&amp;&amp;(i=k=!1);var l=function(a){return e&amp;&amp;c?f(a,1)[0]:f.apply(z,jb([a],b))},m={func:Qd,args:[l],thisArg:z},n=i&amp;&amp;!h;if(e&amp;&amp;!c)return n?(g=g.clone(),g.__actions__.push(m),a.call(g)):f.call(z,this.value())[0];if(!e&amp;&amp;k){g=n?g:new Z(this);var o=a.apply(g,b);return o.__actions__.push(m),new s(o,c)}return this.thru(l)})}),bb(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(a){var c=(/^(?:replace|split)$/.test(a)?$f:Yf)[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&amp;&amp;!this.__chain__?c.apply(this.value(),a):this[d](function(b){return c.apply(b,a)})}}),Fb(Z.prototype,function(a,c){var d=b[c];if(d){var e=d.name;(Hg[e]||(Hg[e]=[])).push({name:c,func:d})}}),Hg[Fc(z,C).name]=[{name:"wrapper",func:z}],Z.prototype.clone=ba,Z.prototype.reverse=da,Z.prototype.value=Sa,b.prototype.chain=Rd,b.prototype.commit=Sd,b.prototype.concat=ah,b.prototype.plant=Td,b.prototype.reverse=Ud,b.prototype.toString=Vd,b.prototype.run=b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=Wd,b.prototype.collect=b.prototype.map,b.prototype.head=b.prototype.first,b.prototype.select=b.prototype.filter,b.prototype.tail=b.prototype.rest,b}var z,A="3.10.1",B=1,C=2,D=4,E=8,F=16,G=32,H=64,I=128,J=256,K=30,L="...",M=150,N=16,O=200,P=1,Q=2,R="Expected a function",S="__lodash_placeholder__",T="[object Arguments]",U="[object Array]",V="[object Boolean]",W="[object Date]",X="[object Error]",Y="[object Function]",Z="[object Map]",$="[object Number]",_="[object Object]",aa="[object RegExp]",ba="[object Set]",ca="[object String]",da="[object WeakMap]",ea="[object ArrayBuffer]",fa="[object Float32Array]",ga="[object Float64Array]",ha="[object Int8Array]",ia="[object Int16Array]",ja="[object Int32Array]",ka="[object Uint8Array]",la="[object Uint8ClampedArray]",ma="[object Uint16Array]",na="[object Uint32Array]",oa=/\b__p \+= '';/g,pa=/\b(__p \+=) '' \+/g,qa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ra=/&amp;(?:amp|lt|gt|quot|#39|#96);/g,sa=/[&amp;&lt;&gt;"'`]/g,ta=RegExp(ra.source),ua=RegExp(sa.source),va=/&lt;%-([\s\S]+?)%&gt;/g,wa=/&lt;%([\s\S]+?)%&gt;/g,xa=/&lt;%=([\s\S]+?)%&gt;/g,ya=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,za=/^\w*$/,Aa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ba=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ca=RegExp(Ba.source),Da=/[\u0300-\u036f\ufe20-\ufe23]/g,Ea=/\\(\\)?/g,Fa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ga=/\w*$/,Ha=/^0[xX]/,Ia=/^\[object .+?Constructor\]$/,Ja=/^\d+$/,Ka=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,La=/($^)/,Ma=/['\n\r\u2028\u2029\\]/g,Na=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Oa=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Pa=-1,Qa={};Qa[fa]=Qa[ga]=Qa[ha]=Qa[ia]=Qa[ja]=Qa[ka]=Qa[la]=Qa[ma]=Qa[na]=!0,Qa[T]=Qa[U]=Qa[ea]=Qa[V]=Qa[W]=Qa[X]=Qa[Y]=Qa[Z]=Qa[$]=Qa[_]=Qa[aa]=Qa[ba]=Qa[ca]=Qa[da]=!1;var Ra={};Ra[T]=Ra[U]=Ra[ea]=Ra[V]=Ra[W]=Ra[fa]=Ra[ga]=Ra[ha]=Ra[ia]=Ra[ja]=Ra[$]=Ra[_]=Ra[aa]=Ra[ca]=Ra[ka]=Ra[la]=Ra[ma]=Ra[na]=!0,Ra[X]=Ra[Y]=Ra[Z]=Ra[ba]=Ra[da]=!1;var Sa={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ta={"&amp;":"&amp;amp;","&lt;":"&amp;lt;","&gt;":"&amp;gt;",'"':"&amp;quot;","'":"&amp;#39;","`":"&amp;#96;"},Ua={"&amp;amp;":"&amp;","&amp;lt;":"&lt;","&amp;gt;":"&gt;","&amp;quot;":'"',"&amp;#39;":"'","&amp;#96;":"`"},Va={function:!0,object:!0},Wa={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Xa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ya=Va[typeof c]&amp;&amp;c&amp;&amp;!c.nodeType&amp;&amp;c,Za=Va[typeof b]&amp;&amp;b&amp;&amp;!b.nodeType&amp;&amp;b,$a=Ya&amp;&amp;Za&amp;&amp;"object"==typeof a&amp;&amp;a&amp;&amp;a.Object&amp;&amp;a,_a=Va[typeof self]&amp;&amp;self&amp;&amp;self.Object&amp;&amp;self,ab=Va[typeof window]&amp;&amp;window&amp;&amp;window.Object&amp;&amp;window,bb=Za&amp;&amp;Za.exports===Ya&amp;&amp;Ya,cb=$a||ab!==(this&amp;&amp;this.window)&amp;&amp;ab||_a||this,db=y();"function"==typeof define&amp;&amp;"object"==typeof define.amd&amp;&amp;define.amd?cb._=db:Ya&amp;&amp;Za?bb?(Za.exports=db)._=db:Ya._=db:cb._=db}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){function d(a){if(a=""+a,!(a.length&gt;1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a&gt;=k?Math.round(a/k)+"d":a&gt;=j?Math.round(a/j)+"h":a&gt;=i?Math.round(a/i)+"m":a&gt;=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a&lt;b))return a&lt;1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b.long?f(a):e(a)}},{}],26:[function(a,b,c){b.exports=a("./lib/retry")},{"./lib/retry":27}],27:[function(a,b,c){var d=a("./retry_operation");c.operation=function(a){var b=!1;a&amp;&amp;!0===a.forever&amp;&amp;(b=!0);var e=c.timeouts(a);return new d(e,b)},c.timeouts=function(a){if(a instanceof Array)return[].concat(a);var b={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var c in a)b[c]=a[c];if(b.minTimeout&gt;b.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var d=[],e=0;e&lt;b.retries;e++)d.push(this.createTimeout(e,b));return d.sort(function(a,b){return a-b}),d},c.createTimeout=function(a,b){var c=b.randomize?Math.random()+1:1,d=Math.round(c*b.minTimeout*Math.pow(b.factor,a));return d=Math.min(d,b.maxTimeout)},c.wrap=function(a,b,d){if(b instanceof Array&amp;&amp;(d=b,b=null),!d){d=[];for(var e in a)"function"==typeof a[e]&amp;&amp;d.push(e)}for(var f=0;f&lt;d.length;f++){var g=d[f],h=a[g];a[g]=function(){var d=c.operation(b),e=Array.prototype.slice.call(arguments),f=e.pop();e.push(function(a){d.retry(a)||(a&amp;&amp;(arguments[0]=d.mainError()),f.apply(this,arguments))}),d.attempt(function(){h.apply(a,e)})},a[g].options=b}}},{"./retry_operation":28}],28:[function(a,b,c){function d(a,b){this._timeouts=a,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,b&amp;&amp;(this._cachedTimeouts=this._timeouts.slice(0))}b.exports=d,d.prototype.retry=function(a){if(this._timeout&amp;&amp;clearTimeout(this._timeout),!a)return!1;this._errors.push(a);var b=this._timeouts.shift();if(void 0===b){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),b=this._timeouts.shift()}var c=this;return setTimeout(function(){c._attempts++,c._operationTimeoutCb&amp;&amp;(c._timeout=setTimeout(function(){c._operationTimeoutCb(c._attempts)},c._operationTimeout)),c._fn(c._attempts)},b),!0},d.prototype.attempt=function(a,b){this._fn=a,b&amp;&amp;(b.timeout&amp;&amp;(this._operationTimeout=b.timeout),b.cb&amp;&amp;(this._operationTimeoutCb=b.cb));var c=this;this._operationTimeoutCb&amp;&amp;(this._timeout=setTimeout(function(){c._operationTimeoutCb()},c._operationTimeout)),this._fn(this._attempts)},d.prototype.try=function(a){console.log("Using RetryOperation.try() is deprecated"),this.attempt(a)},d.prototype.start=function(a){console.log("Using RetryOperation.start() is deprecated"),this.attempt(a)},d.prototype.start=d.prototype.try,d.prototype.errors=function(){return this._errors},d.prototype.attempts=function(){return this._attempts},d.prototype.mainError=function(){if(0===this._errors.length)return null;for(var a={},b=null,c=0,d=0;d&lt;this._errors.length;d++){var e=this._errors[d],f=e.message,g=(a[f]||0)+1;a[f]=g,g&gt;=c&amp;&amp;(b=e,c=g)}return b}},{}],29:[function(a,b,c){function d(a){return a.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}b.exports=function(){return d([].slice.call(arguments,0).join("/"))}},{}],30:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&amp;&amp;null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a&lt;0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&amp;&amp;(!this._events.error||g(this._events.error)&amp;&amp;!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i&lt;d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&amp;&amp;!this._events[a].warned&amp;&amp;(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners)&amp;&amp;c&gt;0&amp;&amp;this._events[a].length&gt;c&amp;&amp;(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&amp;&amp;console.trace()),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&amp;&amp;c.listener===b)delete this._events[a],this._events.removeListener&amp;&amp;this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- &gt;0;)if(c[h]===b||c[h].listener&amp;&amp;c[h].listener===b){d=h;break}if(d&lt;0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&amp;&amp;this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&amp;&amp;delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&amp;&amp;this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&amp;&amp;this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],31:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&amp;&amp;e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l&lt;b;)h&amp;&amp;h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length&gt;1)for(var c=1;c&lt;arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}]},{},[]);]]&gt;&lt;/script&gt;&lt;script_name&gt;kore-ai-sdk3.min.js&lt;/script_name&gt;&lt;sys_class_name&gt;sys_ui_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-01-02 07:16:42&lt;/sys_created_on&gt;&lt;sys_id&gt;190a0224972b75109b137076f053afbc&lt;/sys_id&gt;&lt;sys_mod_count&gt;7&lt;/sys_mod_count&gt;&lt;sys_name&gt;x_831378_kore_ai_0.kore-ai-sdk3.min.js&lt;/sys_name&gt;&lt;sys_package display_value="IT Assist" source="x_831378_kore_ai_0"&gt;5db40dbc2f21111051c859a72799b60c&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="IT Assist"&gt;5db40dbc2f21111051c859a72799b60c&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_script_190a0224972b75109b137076f053afbc&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-02-19 13:08:06&lt;/sys_updated_on&gt;&lt;ui_type&gt;1&lt;/ui_type&gt;&lt;use_scoped_format&gt;false&lt;/use_scoped_format&gt;&lt;/sys_ui_script&gt;&lt;/record_update&gt;</payload>
        <payload_hash>-590768292</payload_hash>
        <record_name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</record_name>
        <reverted_from/>
        <source>79b20a47970231109b137076f053af13</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-02-19 13:08:06</sys_created_on>
        <sys_id>97d6eac097e402109b137076f053afc6</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>18dc17b19120000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-02-19 13:08:06</sys_updated_on>
        <type>UI Script</type>
        <update_guid>9fd6eac060e40210e589f6eeab37cbc5</update_guid>
        <update_guid_history>9fd6eac060e40210e589f6eeab37cbc5:-590768292,4ca990220750c210275222e79dc86c32:-1989626265,45cd9908c9800210502d9b94a50709a1:-590768292,f93c154464800210424c6812542a0b06:-1989626265,43dc1e2126273110cd8d04b0af114bb7:-590768292,101e63fc34efb5106e51b0c8b4b65c00:-1989626265,9a496b7489efb510c9097f485a48227b:-1341623779,eb1ac2e02c2b7510def97812fe75f351:-1989626265</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-05 08:14:56</sys_created_on>
        <sys_db_object display_value="" name="sys_ui_script">sys_ui_script</sys_db_object>
        <sys_id>081c6c7dfcdf4cc2866709dddf48d859</sys_id>
        <sys_metadata>190a0224972b75109b137076f053afbc</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>x_831378_kore_ai_0.kore-ai-sdk3.min.js</sys_name>
        <sys_package display_value="IT Assist" source="x_831378_kore_ai_0">5db40dbc2f21111051c859a72799b60c</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</sys_scope>
        <sys_scope_delete/>
        <sys_update_name>sys_ui_script_190a0224972b75109b137076f053afbc</sys_update_name>
        <sys_update_version display_value="sys_ui_script_190a0224972b75109b137076f053afbc">97d6eac097e402109b137076f053afc6</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-05 08:14:56</sys_updated_on>
    </sys_metadata_delete>
</record_update>
