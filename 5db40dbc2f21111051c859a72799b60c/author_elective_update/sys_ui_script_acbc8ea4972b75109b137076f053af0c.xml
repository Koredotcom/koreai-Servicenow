<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="DELETE">
        <active>true</active>
        <description/>
        <global>false</global>
        <ignore_in_now_experience>false</ignore_in_now_experience>
        <name>x_831378_kore_ai_0.kore-ai-sdk4.min.js</name>
        <script><![CDATA[!function(a){window.koreBotChat=a()}(function(){return function(){var a;return a=window&&window.KoreSDK&&window.KoreSDK.dependencies&&window.KoreSDK.dependencies.jQuery?window.KoreSDK.dependencies.jQuery:window.jQuery,function(a){function b(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function c(a){var b;return a&&(b=a.isNotAllowedHTMLTags()),b&&!b.isValid&&(a=a.escapeHTML()),a}function d(a){return 0===(a=Number(a))||!(!a||a%2)}function e(){for(var a=function(b){var c={};if("object"==typeof b){for(var d in b)b.hasOwnProperty(d)&&("object"==typeof b[d]?c[d]=a(b[d]):c[d]=b[d]);return c}return b},b=1;b<arguments.length;b++)for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&("object"==typeof arguments[b][c]?arguments[0][c]=a(arguments[b][c]):arguments[0][c]=arguments[b][c]);return arguments[0]}function f(a){Na=!1,a.botOptions.test=!1,this.config={chatTitle:"Kore.ai Bot Chat",container:"body",allowIframe:!1,botOptions:a.botOptions},qa=a.botOptions.koreAPIUrl,Ha=a.botOptions.bearer,Pa=a.botOptions.koreSpeechAPIUrl,db=a.botOptions.ttsSocketUrl,La=a.botOptions.userIdentity,a.botOptions.recorderWorkerPath&&a.botOptions.recorderWorkerPath.trim().length>0&&(Ya=a.botOptions.recorderWorkerPath.trim()),a&&a.chatContainer&&delete a.chatContainer,this.config=e(this.config,a),window._chatHistoryLoaded=!1,this.init(),l(),k(),window.addEventListener("online",l),window.addEventListener("offline",l),g()}function g(){var a=window.addEventListener?"addEventListener":"attachEvent";(0,window[a])("attachEvent"==a?"onmessage":"message",function(a){if(a.data&&a.data.event)switch(a.data.event){case"formEvent":j(a.data)}},!1)}function h(a,b){a&&a.length&&a[0]&&a[0].contentWindow&&b&&a[0].contentWindow.postMessage(b,"*")}function i(b,c){var d=a("#chatBodyModal");document.getElementsByClassName("closeChatBodyModal")[0].onclick=function(){var a={payload:{},event:"formEvent",action:"formCancel",metaData:{}};h(d.find("iframe"),a),d.hide()},b?(d.find(".closeChatBodyModal").css("display","none"),d.find(".loading_form").css("z-index",999),d&&d.length&&(d.find("#chatBodyModalContent").empty(),d.find("#chatBodyModalContent").append(b),d.show()),setTimeout(function(){d.find(".loading_form").css("z-index",0),c?d.find(".closeChatBodyModal").css("display","block"):d.find(".closeChatBodyModal").css("display","none")},1500)):(d.find(".closeChatBodyModal").css("display","none"),setTimeout(function(){d.find("#chatBodyModalContent").empty()},1e3),d.hide())}function j(b){b&&"formSubmit"===b.action?(i(),a(".kore-chat-body .uiformComponent").length&&a(".kore-chat-body .uiformComponent").closest(".inlineIframeContainer").css("display","none")):"formCancel"===b.action?a(".kore-chat-body .uiformComponent").length&&a(".kore-chat-body .uiformComponent").closest(".inlineIframeContainer").css("display","none"):"formClose"===b.action&&(i(),a(".kore-chat-body .uiformComponent").length&&a(".kore-chat-body .uiformComponent").closest(".inlineIframeContainer").css("display","none"))}function k(){a(".kore-chat-window").remove(".kore-action-sheet"),a(".kore-chat-window").append('<div class="kore-action-sheet hide">                <div class="actionSheetContainer"></div>                </div>')}function l(){"boolean"==typeof Ua.onLine&&(Ua.onLine?(this.hideError(),Aa&&Aa.RtmClient&&Aa.getHistory({forHistorySync:!0,limit:30})):this.showError("You are currently offline"))}function m(){clearTimeout(ya),ya=setTimeout(function(){var a={};a.type="ping",Aa.sendMessage(a,function(){}),m()},$a)}function n(){var a=document.getElementById("myModal"),b=(document.getElementById("myImg"),document.getElementById("img01")),c=document.getElementById("caption");if(document.querySelectorAll(".messageBubble img").length>0)for(var d=0;d<document.querySelectorAll(".messageBubble img").length;d++){var e=document.querySelectorAll(".messageBubble img")[d];e.addEventListener("click",function(d){d.stopPropagation(),d.stopImmediatePropagation(),a.style.display="block",b.src=this.src,c.innerHTML=this.alt})}document.getElementsByClassName("closeImagePreview")[0].onclick=function(){a.style.display="none"}}function o(){try{return/iphone|ipod|android|blackberry|fennec/.test(Ua.userAgent.toLowerCase())||window.screen.width<=480}catch(a){return!1}}function p(){}function q(a,b){var c=a;if(sel=window.getSelection(),sel.rangeCount>0&&(range=sel.getRangeAt(0),range.deleteContents()),oa=oa||range){node=document.createElement("span"),oa.insertNode(node);var d=document.createElement("span");d.innerHTML=b,oa.insertNode(d),oa.setEndAfter(node),oa.setStartAfter(node),oa.collapse(!1),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(oa);var e=document.activeElement;return e&&"chatInputBox"==!e.className&&c.focus(),c}c.appendChild(html)}function r(a){if(a&&a.item(0)&&a.item(0).innerText.length){var b=document.createRange();b.selectNodeContents(a[0]),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b),oa=b}else oa=!1,a&&a[0]&&a[0].focus()}function s(a){return a.split(".")}function t(){var a=window.chrome,b=window.navigator,c=b.vendor,d=b.userAgent.indexOf("OPR")>-1,e=b.userAgent.indexOf("Edge")>-1;return!!b.userAgent.match("CriOS")||null!==a&&void 0!==a&&"Google Inc."===c&&!1===d&&!1===e}function u(){setTimeout(function(){Ta&&(a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1)},2e4)}function v(a){return a.replace(Ab,"<p></p>").replace(Bb,"<br>")}function w(a){return a.replace(a.substr(0,1),function(a){return a.toUpperCase()})}function x(){if(xb)return void yb.stop();wb="",yb.lang="en-US",yb.start()}function y(){ua&&(ua.record(),a(".recordingMicrophone").css("display","block"),a(".notRecordingMicrophone").css("display","none"),console.log("recording..."),wa=setInterval(function(){ua.export16kMono(function(a){console.log(new Date),ab?sendBlobToSpeech(a,"LINEAR16",16e3):E(a),ua.clear()},"audio/x-raw")},1e3))}function z(){if(ab)yb?x():A();else{if(!Pa)return console.warn("Please provide speech socket url"),!1;a.ajax({url:Pa+"asr/wss/start?email="+La,type:"post",headers:{Authorization:Ha||Ia},dataType:"json",success:function(a){Qa=a.link,A()},error:function(a){console.log(a)}})}}function A(){Na||(Ua.getUserMedia||(Ua.getUserMedia=Ua.getUserMedia||Ua.webkitGetUserMedia||Ua.mozGetUserMedia||Ua.msGetUserMedia),Ua.getUserMedia?(Na=!0,Ua.getUserMedia({audio:!0},C,function(a){Na=!1,alert("Please enable the microphone permission for this page")})):(Na=!1,alert("getUserMedia is not supported in this browser.")))}function B(){if(Ua.getUserMedia){if(!ua)return Na=!1,void console.error("Recorder undefined");va&&D();try{va=F()}catch(a){Na=!1,console.log(a),console.error("Web socket not supported in the browser")}}}function C(a){if(Ma=!0,sa=a,!xa){var b=window.AudioContext||window.webkitAudioContext;xa=new b}ta=xa.createMediaStreamSource(sa),window.userSpeechAnalyser=xa.createAnalyser(),ta.connect(window.userSpeechAnalyser),console.log("Mediastream created"),va&&(va.close(),va=null),ua&&(ua.stop(),ua.clear(),ua=null),ua=new Recorder(ta,{workerPath:Ya}),console.log("Recorder Initialized"),Va=!0,ab?y():B(),setTimeout(function(){r(document.getElementsByClassName("chatInputBox"))},600)}function D(){if(clearInterval(wa),Na=!1,a(".recordingMicrophone")&&a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone")&&a(".notRecordingMicrophone").css("display","block"),null!==sa&&sa&&sa.getTracks()[0].enabled){sa.getTracks()[0].stop()}va&&(va.close(),va=null),ua&&(ua.stop(),ua.clear()),Qa=""}function E(a){if(va){var b=va.readyState;1===b?a instanceof Blob?a.size>0&&va.send(a):(console.log(a),va.send(a)):(Na=!1,console.error("Web Socket readyState != 1: ",b,"failed to send :"+a.type+", "+a.size),D())}else Na=!1,console.error("No web socket connection: failed to send: ",a)}function F(){window.ENABLE_MICROPHONE=!0,temp,window.SPEECH_SERVER_SOCKET_URL=Qa;var b=window.SPEECH_SERVER_SOCKET_URL,c=La;window.WebSocket=window.WebSocket||window.MozWebSocket;var d=b+"&"+Xa+"&email="+c,e=new WebSocket(d);return e.onopen=function(b){console.log("User connected"),Wa=!0,ua.record(),a(".recordingMicrophone").css("display","block"),a(".notRecordingMicrophone").css("display","none"),console.log("recording..."),zb="",wa=setInterval(function(){ua.export16kMono(function(a){E(a),ua.clear()},"audio/x-raw")},Za)},e.onmessage=function(b){var c=b.data,d="";if(c instanceof Object&&!(c instanceof Blob))console.log("Got object that is not a blob");else if(c instanceof Blob)console.log("Got Blob");else{var e=JSON.parse(c);Ma&&0===e.status?(d=e.result.hypotheses[0].transcript,e.result.final&&(zb+=e.result.hypotheses[0].transcript+" ",d=""),console.log("Interm: ",d),console.log("final: ",zb),a(".chatInputBox").html(zb+""+d),setTimeout(function(){r(document.getElementsByClassName("chatInputBox")),document.getElementsByClassName("chatInputBox")[0].scrollTop=document.getElementsByClassName("chatInputBox")[0].scrollHeight},350)):console.log("Server error : ",e.status)}},e.onclose=function(b){if(""!==a(".chatInputBox").text()&&ib){window.chatContainerConfig.sendMessage(a(".chatInputBox"))}Na=!1,console.log("Server is closed"),console.log(b),D()},e.onerror=function(a){console.log("Error : ",a)},e}function G(){if(""!==a(".chatInputBox").text()&&ib){window.chatContainerConfig.sendMessage(a(".chatInputBox"))}clearInterval(wa),a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone").css("display","block"),ua?(ua.stop(),Ma=!1,console.log("stopped recording.."),setTimeout(function(){va&&(va.close(),va=null)},1e3),ua.export16kMono(function(a){E(a),ua.clear(),va&&va.close(),sa.getTracks()[0].stop(),ua.destroy(),Na=!1},"audio/x-raw")):console.error("Recorder undefined"),xb&&(yb.stop(),xb=!1)}function H(a){if("speechSynthesis"in window){window.speechSynthesis.cancel();var b=new SpeechSynthesisUtterance;b.text=a,window.speechSynthesis.speak(b)}else console.warn("KORE:Your browser doesn't support TTS(Speech Synthesiser)")}function I(){if(!db)return console.warn("Please provide tts socket url"),!1;window.TTS_SOCKET_URL=db;var a=window.TTS_SOCKET_URL;window.WebSocket=window.WebSocket||window.MozWebSocket;var b=new WebSocket(a);return b.binaryType="arraybuffer",b.onopen=function(a){K(fb)},b.onmessage=function(a){if(fb="","string"==typeof a.data);else{var b=a.data;gb&&M(b)}},b.onclose=function(a){},b.onerror=function(a){console.log("Error : ",a)},b}function J(){cb&&(cb.close(),cb=null)}function K(a){if(cb){var b=cb.readyState;if(1===b){var c=Ha||Ia,d={message:a,user:Ca.name,authorization:c};cb.send(JSON.stringify(d))}else console.error("Web Socket readyState != 1: ",b),J()}else console.error("No web socket connection: failed to send")}function L(){if(!bb){if(!window.AudioContext){if(!window.webkitAudioContext)return void console.error("Your browser does not support any AudioContext and cannot play back this audio.");window.AudioContext=window.webkitAudioContext}bb=new AudioContext}}function M(b){bb.decodeAudioData(b,function(b){if(!b)return void console.error("failed to decode:","buffer null");try{eb&&eb.stop(),eb=bb.createBufferSource(),eb.buffer=b,eb.connect(bb.destination),eb.start(0),eb.addEventListener("ended",function(){setTimeout(function(){gb&&ib&&a(".notRecordingMicrophone").trigger("click")},350)})}catch(a){}},function(a){console.error("failed to decode:",a)})}function N(a,b){function c(a){var c;a.dataTransfer?c=a.dataTransfer.files:a.target&&(c=a.target.files),b.call(null,c)}var d=document.createElement("input");d.setAttribute("type","file"),d.setAttribute("multiple",!1),d.style.display="none",d.addEventListener("change",c),a.appendChild(d),a.addEventListener("dragover",function(b){b.preventDefault(),b.stopPropagation(),a.classList.add("dragover")}),a.addEventListener("dragleave",function(b){b.preventDefault(),b.stopPropagation(),a.classList.remove("dragover")}),a.addEventListener("drop",function(b){b.preventDefault(),b.stopPropagation(),a.classList.remove("dragover"),c(b)})}function O(a,b,c){var d={};if(b&&b.size&&b.size>mb.file.limit.size)return void alert(mb.file.limit.msg);if(b&&c&&(b.name=c),b&&(b.name||c)){var e=c||b.name,f=e.split(".").pop().toLowerCase();d.name=e,d.mediaName=P(),d.fileType=e.split(".").pop().toLowerCase();if(mb.image.indexOf(d.fileType)>-1?(d.type="image",d.uploadFn="acceptFileRecording"):mb.video.indexOf(d.fileType)>-1?(d.type="video",d.uploadFn="acceptVideoRecording"):mb.audio.indexOf(d.fileType)>-1?(d.type="audio",d.uploadFn="acceptFile"):(d.type="attachment",d.componentSize=b.size,d.uploadFn="acceptFile"),lb&&-1!==lb.indexOf(f))if("audio"===d.type||"video"===d.type){var g=new FileReader;g.onload=function(c){var e=new Blob([c.target.result],{type:b.type}),f=(URL||webkitURL).createObjectURL(e),g=document.createElement(d.type);g.preload="metadata",0===g.readyState?(g.addEventListener("loadedmetadata",function(c){Math.round(c.target.duration);"audio"===d.type&&((URL||webkitURL).revokeObjectURL(f),S(a,b,d))}),"video"===d.type&&g.addEventListener("loadeddata",function(c){d.resulttype=Q(g),(URL||webkitURL).revokeObjectURL(f),S(a,b,d)}),g.src=f):((URL||webkitURL).revokeObjectURL(f),S(a,b,d))},g.readAsArrayBuffer(b)}else if(-1!==b.type.indexOf("image")){var h=new FileReader;h.onload=function(c){var e=new Blob([c.target.result],{type:b.type}),f=(URL||webkitURL).createObjectURL(e),g=new Image;g.src=f,g.onload=function(){d.resulttype=Q(g),S(a,b,d)}},h.readAsArrayBuffer(b)}else S(a,b,d);else alert("SDK not supported this type of file")}}function P(a){var b=a||"xxxxyx";return b=b.replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})}function Q(a){var b=document.createElement("canvas");return b.height=180,b.width=320,b.getContext("2d").drawImage(a,0,0,b.width,b.height),b.toDataURL()}function R(b,c,d){var e,f=b,g=T(d);if(g.chunkUpload=c.size>jb.CHUNK_SIZE,g.chunkSize=jb.CHUNK_SIZE,g.file=c,g.chunkUpload)U(f,d),e=a(".chatInputBox"),V(d,e),e.uploader(g);else{var h=new FileReader;h.onloadend=function(a){if(a.target.readyState===FileReader.DONE){var b=h.result.replace(/^.*;base64,/,""),c=(h.result,b);d.resulttype=c,$(f,d,e)}},h.readAsDataURL(c)}}function S(b,c,d){var e="bearer "+window.jwtDetails.authorization.accessToken;a.ajax({type:"POST",url:qa+"1.1/attachment/file/token",dataType:"json",headers:{Authorization:e},success:function(a){ra=a.fileToken,R(b,c,d)},error:function(b){rb.config.botOptions._reconnecting=!0,showError("Failed to upload file.Please try again"),b.responseJSON&&b.responseJSON.errors&&b.responseJSON.errors.length&&"401"===b.responseJSON.errors[0].httpStatus&&(setTimeout(function(){hideError()},5e3),a(".kore-chat-window .reload-btn").trigger("click")),console.log("Oops, something went horribly wrong")}})}function T(a){return jb.UPLOAD={FILE_ENDPOINT:qa+"1.1/attachment/file",FILE_TOKEN_ENDPOINT:qa+"1.1/attachment/file/token",FILE_CHUNK_ENDPOINT:qa+"1.1/attachment/file/:fileID/chunk"},_accessToke="bearer "+pa,_uploadConfg={},_uploadConfg.url=jb.UPLOAD.FILE_ENDPOINT.replace(":fileID",ra),_uploadConfg.tokenUrl=jb.UPLOAD.FILE_TOKEN_ENDPOINT,_uploadConfg.chunkUrl=jb.UPLOAD.FILE_CHUNK_ENDPOINT.replace(":fileID",ra),_uploadConfg.fieldName="file",_uploadConfg.data={fileExtension:a.fileType,fileContext:"workflows",thumbnailUpload:!1,filename:a.name},_uploadConfg.headers={Authorization:_accessToke},_uploadConfg}function U(a,b,c){var a=a,d={};d.meta={thumbNail:b.resulttype?b.resulttype:void 0},d.values={componentId:b.mediaName,componentType:b.type,componentFileId:c,componentData:{filename:b.name}},b.componentSize&&(d.values.componentSize=b.componentSize),Z(a,d)}function V(a,b){var c=this;b=b||c.ele,b.on("success.ke.uploader",function(b){W(c,b,a)}),b.on("error.ke.uploader",X)}function W(a,b,c){var a=a,d=b.params;if(!d||!d.fileId)return void Y();if(c.mediaName){_(a,c,d.fileId)}}function X(a,b,c){var d=a;_recfileLisnr.onError({code:"UPLOAD_FAILED"}),d.removeCmpt(c)}function Y(){alert("Failed to upload content. Try again"),kb={},a(".attachment").html(""),a(".sendButton").addClass("disabled"),Ga=0}function Z(b,c){var d;if(!d){if(d=a("<div/>").attr({class:"msgCmpt "+c.values.componentType+" "+c.values.componentId}),d.data("value",c.values),c.values.componentFileId||"contact"===c.values.componentType||"location"===c.values.componentType||"filelink"===c.values.componentType||"alert"===c.values.componentType||"email"===c.values.componentType||d.append('<div class="upldIndc"></div>'),"attachment"===c.values.componentType){var e;e=c.values.componentDescription?c.values.componentDescription.split(".").pop().toLowerCase():c.values.componentData.filename.split(".").pop().toLowerCase(),"xls"===e||"xlsx"===e?(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_excel"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")):"docx"===e||"doc"===e?(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_word"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")):"pdf"===e?(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_pdf"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")):"ppsx"===e||"pptx"===e||"ppt"===e?(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_ppt"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")):"zip"===e||"rar"===e?(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_zip"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")):(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_other_doc"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>"))}"image"===c.values.componentType&&(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-photos_active"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")),"audio"===c.values.componentType&&(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-files_audio"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>")),"video"===c.values.componentType&&(d.append('<div class="uploadedFileIcon"><span class="icon cf-icon icon-video_active"></span></div>'),d.append('<div class="uploadedFileName">'+c.values.componentData.filename+"</div>"))}d.append('<div class="removeAttachment"><span>&times;</span></div>'),a(".footerContainer").find(".attachment").html(d),a(".chatInputBox").focus(),kb.fileName=c.values.componentData.filename,kb.fileType=c.values.componentType,a(".sendButton").removeClass("disabled")}function $(b,c,d){var e=b,f=T(c),g=c.resulttype;_(e,c),f.data[f.fieldName]={fileName:c.name,data:g,type:"image/png"},f.data.thumbnail={fileName:c.name+"_thumb",data:g,type:"image/png"},d=a(".chatInputBox"),V(c,d),d.uploader(f)}function _(a,b,c){var a=a,d={};d.meta={thumbNail:b.resulttype},d.values={componentId:b.mediaName,componentType:b.type,componentFileId:c,componentData:{filename:b.name}},Z(a,d)}function aa(){this.boundary="--------MultipartData"+Math.random(),this._fields=[]}function ba(a,b){this.options=b,this.$element=a,this.options.chunkUpload?ka(this):la(this)}function ca(a){return new qb.net.HttpRequest}function da(b,c){a(".upldIndc").is(":visible")&&(b.events.success.params=a.parseJSON(c.target.response),kb.fileId=b.events.success.params.fileId,a(".sendButton").removeClass("disabled"),a(".kore-chat-window").addClass("kore-chat-attachment"),a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),Ga=1,a(".upldIndc").remove(),b.$element.trigger(b.events.success))}function ea(a,b){a.events.error.params=b,a.$element.trigger(a.events.error)}function fa(a,b){}function ga(a,b){return a.options=b,a}function ha(a){var b=a,c=ca(a),d=new aa;if(c.addEventListener("load",function(a){200===a.target.status?b.$element.parent().length&&da(b,a):ea(b,a)},!1),c.addEventListener("error",function(a){ea(b,a)},!1),c.withCredentials=!1,c.open("PUT",a.options.chunkUrl.replace(/\/chunk/,"")),a.options.headers)for(var e in a.options.headers)c.setRequestHeader(e,a.options.headers[e]);if(d.append("totalChunks",b.totalChunks),d.append("messageToken",b.messageToken),a.options.data)for(var f in a.options.data)d.append(f,a.options.data[f]);c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d.boundary),c.send(d.toString())}function ia(a){var b=a,c=ca(a),d=new aa;if(c.addEventListener("load",function(a){if(200===a.target.status){if(b.currChunk++,!b.$element.parent().length)return;b.currChunk===b.totalChunks?ha(b):ja(b)}else ea(b,a)},!1),c.addEventListener("error",function(a){ea(b,a)},!1),c.withCredentials=!1,c.open("POST",a.options.chunkUrl),a.options.headers)for(var e in a.options.headers)c.setRequestHeader(e,a.options.headers[e]);d.append("chunkNo",b.currChunk),d.append("messageToken",b.messageToken),d.append("chunk",{data:b.chunk,fileName:b.options.file.name}),c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d.boundary),c.send(d.toString())}function ja(a){var b=a,c=b.options.file,d=b.options.chunkSize*b.currChunk,e=b.currChunk===b.totalChunks-1?c.size:(b.currChunk+1)*b.options.chunkSize,f=new FileReader,g=c.slice(d,e);f.onloadend=function(a){a.target.readyState===FileReader.DONE&&b.$element.parent().length?(b.chunk=a.target.result,b.chunk=b.chunk.replace(/data:;base64,/,""),b.currChunk<b.totalChunks&&b.$element.parent().length&&ia(b)):ea(b,a)},f.readAsDataURL(g)}function ka(a){var b=a,c=ca(a);if(c.addEventListener("error",function(a){ea(b,a)},!1),c.addEventListener("load",function(a){200===a.target.status?(b.messageToken=JSON.parse(a.target.response).fileToken,b.totalChunks=Math.floor(b.options.file.size/b.options.chunkSize)+1,b.currChunk=0,b.options.chunkUrl=b.options.chunkUrl.replace(":token",b.messageToken),b.$element.parent().length&&ja(b)):ea(b,a)},!1),c.withCredentials=!1,c.open("POST",a.options.tokenUrl),a.options.headers)for(var d in a.options.headers)c.setRequestHeader(d,a.options.headers[d]);c.send()}function la(a){var b=a;if(_conc=ca(a),_mdat=new aa,_conc.upload&&_conc.upload.addEventListener&&_conc.upload.addEventListener("progress",function(a){fa(b,a)},!1),_conc.addEventListener("load",function(a){b.$element.parent().length&&da(b,a)},!1),_conc.addEventListener("error",function(a){ea(b,a)},!1),_conc.withCredentials=!1,_conc.open("POST",a.options.url),a.options.headers)for(var c in a.options.headers)_conc.setRequestHeader(c,a.options.headers[c]);if(a.options.data)for(var d in a.options.data)_mdat.append(d,a.options.data[d]);_conc.setRequestHeader("Content-Type","multipart/form-data; boundary="+_mdat.boundary),_conc.send(_mdat.toString())}function ma(){var b=document.getElementById("myPreviewModal");a(".largePreviewContent").empty(),a(".largePreviewContent").addClass("addheight"),a(".largePreviewContent").html("<div class='chartContainerDiv'></div>"),b.style.display="block",document.getElementsByClassName("closeElePreview")[0].onclick=function(){b.style.display="none",a(".largePreviewContent").removeClass("addheight")}}function na(){a(".piechartDiv,.barchartDiv, .linechartDiv").click(function(b){function c(){g=document.getElementsByClassName("chartContainerDiv"),e=new google.visualization.PieChart(g[0])}function c(){g=document.getElementsByClassName("chartContainerDiv"),e=new google.visualization.LineChart(g[0])}function c(){g=document.getElementsByClassName("chartContainerDiv"),e="vertical"===f.direction?new google.visualization.ColumnChart(g[0]):new google.visualization.BarChart(g[0])}for(var d=b.currentTarget.firstElementChild.getAttribute("id"),e=null,f=null,g=null,h=0;h<sb.length;h++)if(sb[h].id==d){f=jQuery.extend({},sb[h]),ma();break}if("d3"===graphLibGlob){if(ma(),void 0===f.data.message[0].component.payload.pie_type&&(f.data.message[0].component.payload.pie_type="regular"),"linechart"!==f.data.message[0].component.payload.template_type&&"piechart"!==f.data.message[0].component.payload.template_type){var i={};i.outerWidth=650,i.outerHeight=460,i.innerWidth=450,i.innerHeight=350,i.legendRectSize=15,i.legendSpacing=4,a(".chartContainerDiv").html(""),"barchart"===f.data.message[0].component.payload.template_type&&"vertical"===f.data.message[0].component.payload.direction&&"barchart"===f.type?(i.innerWidth=500,KoreGraphAdapter.drawD3barChart(f.data,i,".chartContainerDiv",12)):"barchart"===f.data.message[0].component.payload.template_type&&"horizontal"===f.data.message[0].component.payload.direction&&"stackedBarchart"===f.type?KoreGraphAdapter.drawD3barStackedChart(f.data,i,".chartContainerDiv",12):"barchart"===f.data.message[0].component.payload.template_type&&"vertical"===f.data.message[0].component.payload.direction&&"stackedBarchart"===f.type?(i.innerWidth=550,KoreGraphAdapter.drawD3barVerticalStackedChart(f.data,i,".chartContainerDiv",12)):"barchart"===f.data.message[0].component.payload.template_type&&"horizontal"===f.data.message[0].component.payload.direction&&"barchart"===f.type&&(i.outerWidth=650,i.outerHeight=350,i.innerWidth=450,i.innerHeight=310,KoreGraphAdapter.drawD3barHorizontalbarChart(f.data,i,".chartContainerDiv",12))}else if("linechart"===f.data.message[0].component.payload.template_type){var i={};i.outerWidth=650,i.outerHeight=450,i.innerWidth=480,i.innerHeight=350,i.legendRectSize=15,i.legendSpacing=4,a(".chartContainerDiv").html(""),KoreGraphAdapter.drawD3lineChartV2(f.data,i,".chartContainerDiv",12)}else if(f.data.message[0].component.payload.pie_type){var i={};i.width=600,i.height=400,i.legendRectSize=15,i.legendSpacing=4,a("chartContainerDiv").html(""),"regular"===f.data.message[0].component.payload.pie_type?KoreGraphAdapter.drawD3Pie(f.data,i,".chartContainerDiv",16):"donut"===f.data.message[0].component.payload.pie_type?KoreGraphAdapter.drawD3PieDonut(f.data,i,".chartContainerDiv",16,"donut"):"donut_legend"===f.data.message[0].component.payload.pie_type&&(a("chartContainerDiv").html(""),KoreGraphAdapter.drawD3PieDonut(f.data,i,".chartContainerDiv",16,"donut_legend"))}}else"google"===graphLibGlob&&("piechart"===f.type?(google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(c)):"linechart"===f.type?(google.charts.load("current",{packages:["corechart","line"]}),google.charts.setOnLoadCallback(c)):"barchart"===f.type&&(google.charts.load("current",{packages:["corechart","bar"]}),google.charts.setOnLoadCallback(c)),setTimeout(function(){var b={height:"85%",width:"85%"};f.options.chartArea=b,google.visualization.events.addListener(e,"ready",function(){setTimeout(function(){a(".largePreviewContent .chartContainerDiv").css("height","91%")})}),e.draw(f.data,f.options)},200))})}var oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=requireKr("/KoreBot.js").instance(),Ba={message:"Message...",connecting:"Connecting...",reconnecting:"Reconnecting..."},Ca={},Da=/<script\b[^>]*>([\s\S]*?)/gm,Ea={},Fa=[],Ga=0,Ha="",Ia="",Ja=[],Ka=!1,La="",Ma=!1,Na=!1,Oa=!1,Pa="",Qa="",Ra=0,Sa=!1,Ta=!1,Ua=window.navigator,Va=!1,Wa=!1,Xa="content-type=audio/x-raw,+layout=(string)interleaved,+rate=(int)16000,+format=(string)S16LE,+channels=(int)1",Ya="../libs/recorderWorker.js",Za=250,$a=3e4,_a=!1,ab=!1,bb=null,cb=null,db="",eb=null,fb="",gb=!1,hb=!1,ib=!1,jb={},kb={},lb=["m4a","amr","aac","wav","mp3","mp4","mov","3gp","flv","png","jpg","jpeg","gif","bmp","csv","txt","json","pdf","doc","dot","docx","docm","dotx","dotm","xls","xlt","xlm","xlsx","xlsm","xltx","xltm","xlsb","xla","xlam","xll","xlw","ppt","pot","pps","pptx","pptm","potx","potm","ppam","ppsx","ppsm","sldx","sldm","zip","rar","tar","wpd","wps","rtf","msg","dat","sdf","vcf","xml","3ds","3dm","max","obj","ai","eps","ps","svg","indd","pct","accdb","db","dbf","mdb","pdb","sql","apk","cgi","cfm","csr","css","htm","html","jsp","php","xhtml","rss","fnt","fon","otf","ttf","cab","cur","dll","dmp","drv","7z","cbr","deb","gz","pkg","rpm","zipx","bak","avi","m4v","mpg","rm","swf","vob","wmv","3gp2","3g2","asf","asx","srt","wma","mid","aif","iff","m3u","mpa","ra","aiff","tiff"];jb.CHUNK_SIZE=1048576;var mb={},nb=["m4a","amr","wav","aac","mp3"],ob=["mp4","mov","3gp","flv"],pb=["png","jpg","jpeg"];mb.audio=nb,mb.video=ob,mb.image=pb,mb.file={limit:{size:26214400,msg:"Please limit the individual file upload size to 25 MB or lower"}},mb.determineFileType=function(a){return a=a.toLowerCase(),mb.image.indexOf(a)>-1?"image":mb.video.indexOf(a)>-1?"video":mb.audio.indexOf(a)>-1?"audio":"attachment"};var qb={};qb.net={},window.PieChartCount=0,window.barchartCount=0,window.linechartCount=0;var rb,sb=[],tb={};window.chartColors=["#75b0fe","#f78083","#99ed9e","#fde296","#26344a","#5f6bf7","#b3bac8","#99a1fd","#9cebf9","#f7c7f4"];var ub=0;String.prototype.isNotAllowedHTMLTags=function(){var b=document.createElement("div");b.innerHTML=this;var c={isValid:!0,key:""};try{return(a(b).find("script").length||a(b).find("video").length||a(b).find("audio").length)&&(c.isValid=!1),a(b).find("link").length&&-1!==a(b).find("link").attr("href").indexOf("script")&&(Da.test(a(b).find("link").attr("href"))?c.isValid=!1:c.isValid=!0),a(b).find("a").length&&-1!==a(b).find("a").attr("href").indexOf("script")&&(Da.test(a(b).find("a").attr("href"))?c.isValid=!1:c.isValid=!0),a(b).find("img").length&&-1!==a(b).find("img").attr("src").indexOf("script")&&(Da.test(a(b).find("img").attr("href"))?c.isValid=!1:c.isValid=!0),a(b).find("object").length&&(c.isValid=!1),c}catch(a){return c}},String.prototype.escapeHTML=function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return(""+this).replace(/[<>"']/g,function(b){return a[b]})},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)};var vb={nl2br:function(a,b){return b&&(a=window.emojione.shortnameToImage(a)),a=a.replace(/(?:\r\n|\r|\n)/g,"<br />")},br2nl:function(a){return a=a.replace(/<br \/>/g,"\n")},formatAMPM:function(a){var b=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),e=b>=12?"pm":"am";return b%=12,b=b||12,c=c<10?"0"+c:c,b+":"+c+":"+d+" "+e},formatDate:function(a){var b=new Date(a);if(isNaN(b.getTime())){var c=(new Date).getTime();b=new Date(c)}return b.toDateString()+" at "+vb.formatAMPM(b)},convertMDtoHTML:function(b,d,e){function f(a,b){for(var c,d=[];null!==(c=a.exec(b));){var e={};if(e.index=c.index,e.matchexp=c[0],c.length>1)for(var f=1;f<c.length;f++){var g="matchval"+f.toString();e[g]=c[f]}d.push(e)}return d}function g(a){return a.toUpperCase()}function h(a){return["onclick","onmouse","onblur","onscroll","onStart"].forEach(function(b){var c=new RegExp(b,"ig");a=a.replace(c,"")}),a}function i(a,b,c,d){var e=d.replace(o,"[]");if(e=h(e),-1!==e.indexOf(a)){var f,g=b.indexOf("http")<0?"http://"+a:a;if(target="target='underscoreblank'",j){var i="korerandom://"+Object.keys(j).length;j[i]=g,g=i}return"<span class='isLink'><a id='linkEvent'"+f+' href="'+g+'">'+a+"</a></span>"}return a}if("object"==typeof b)try{b=JSON.stringify(b)}catch(a){b=""}var j={},k={};if(e&&e.cInfo&&e.cInfo.ignoreCheckMark)var l=e.cInfo.ignoreCheckMark;k.date=new RegExp(/\\d\(\s*(.{10})\s*(?:,\s*["'](.+?)["']\s*)?\)/g),k.time=new RegExp(/\\t\(\s*(.{8}\.\d{0,3})\s*\)/g),k.datetime=new RegExp(/\\(d|dt|t)\(\s*([-0-9]{10}[T][0-9:.]{12})([z]|[Z]|[+-]\d{4})[\s]*,[\s]*["']([a-zA-Z\W]+)["']\s*\)/g),k.num=new RegExp(/\\#\(\s*(\d*.\d*)\s*\)/g),k.curr=new RegExp(/\\\$\((\d*.\d*)[,](\s*[\"\']\s*\w{3}\s*[\"\']\s*)\)|\\\$\((\d*.\d*)[,](\s*\w{3}\s*)\)/g);var m={};m.SPECIAL_CHARS=/[\=\`\~\!@#\$\%\^&\*\(\)_\-\+\{\}\:"\[\];\',\.\/<>\?\|\\]+/,m.EMAIL=/^[-a-z0-9~!$%^&*_=+}{\']+(\.[-a-z0-9~!$%^&*_=+}{\']+)*@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,255})+$/i,m.MENTION=/(^|\s|\\n|")@([^\s]*)(?:[\s]\[([^\]]*)\])?["]?/gi,m.HASHTAG=/(^|\s|\\n)#(\S+)/g,m.NEWLINE=/\n/g;var n=/((?:http\:\/\/|https\:\/\/|www\.)+\S*\.(?:(?:\.\S)*[^\,\s\.])*\/?)/gi,o=/\[([^\]]+)\](|\s)\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)?/g,p=b||"",q={};q.sd=new RegExp(/^(d{1})[^d]|[^d](d{1})[^d]/g),q.dd=new RegExp(/^(d{2})[^d]|[^d](d{2})[^d]/g),q.fy=new RegExp(/(y{4})|y{2}/g);for(var r=Object.keys(k),s=0;s<r.length;s++){var t;switch(r[s]){case"date":var u=p,v=f(k.date,u);if(v.length)for(t=0;t<v.length;t++){var w=new Date(v[t].matchval1).toLocaleDateString();w=" "+w.toString()+" ",p=p.replace(v[t].matchexp.toString(),w)}break;case"time":var x=p,y=f(k.time,x);if(y.length)for(t=0;t<y.length;t++){var z=new Date(y[t].matchval1).toLocaleTimeString();z=" "+z.toString()+" ",p=p.replace(y[t].matchexp.toString(),z)}break;case"datetime":var A=p,B=f(k.datetime,A);if(B.length)for(t=0;t<B.length;t++){for(var C="",D=Object.keys(B[t]).length-2,E=2;E<D;E++){var F="matchval"+E.toString();C+=B[t][F]}var G="matchval"+D.toString(),H=B[t][G];H=H.replace(q.fy,g),H=H.replace(q.dd,g),H=H.replace(q.sd,g);var I=moment(C).format(H);I=" "+I.toString()+" ",p=p.replace(B[t].matchexp.toString(),I)}break;case"num":var J=p,K=f(k.num,J);if(K.length)for(t=0;t<K.length;t++){var L=Number(K[t].matchval1).toLocaleString();L=" "+L.toString()+" ",p=p.replace(K[t].matchexp.toString(),L)}break;case"curr":var M=p,N=f(k.curr,M),O=window.navigator.language||window.navigator.browserLanguage,P=new RegExp(/\w{3}/);if(N.length)for(t=0;t<N.length;t++){var Q,R={};R.style="currency",N[t].matchval2&&(Q=P.exec(N[t].matchval2)),R.currency=Q[0].toString();var S=Number(N[t].matchval1).toLocaleString(O,R);S=N[t].matchval1.toString()===S.toString()?" "+S.toString()+" "+R.currency:" "+S.toString()+" ",p=p.replace(N[t].matchexp.toString(),S)}}}m.NEWLINE;"number"==typeof p&&(p=p.toString()),p=p||"";var T,U="";if("user"===d)p=p.replace(/onerror=/gi,"abc-error="),T=document.createElement("div"),U=p.replace(/“/g,'"').replace(/”/g,'"'),U=U.replace(/</g,"&lt;").replace(/>/g,"&gt;"),T.innerHTML=c(U),p=a(T).find("a").attr("href")?U:U.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(n,i);else if(T=document.createElement("div"),T.innerHTML=c(p),a(T).find("a").attr("href"))for(var V=p.match(/<a[^>]*>([^<]+)<\/a>/g),W=0;W<V.length;W++){var X=document.createElement("div"),Y=V[W];X.innerHTML=V[W],(Y.indexOf("href='mailto:")>-1||Y.indexOf('href="mailto:')>-1)&&(Y=Y.split("\n").join("%0A"));var Z="korerandom://"+Object.keys(j).length;X.innerHTML=Y;var $=X.getElementsByTagName("a");$&&$[0]&&$[0].href&&(j[Z]=$[0].href,$[0].href=Z),a(X).find("a").attr("target","underscoreblank"),p=p.replace(V[W],X.innerHTML)}else p=T.innerHTML.replace(n,i);p=l?b:vb.checkMarkdowns(p,j);var _=Object.keys(j);return _&&_.length&&_.forEach(function(a){function b(){return j[a]}p=p.replace(a,b)}),p=p.replaceAll('target="underscoreblank"','target="_blank"'),p=p.replaceAll("target='underscoreblank'",'target="_blank"'),"user"===d&&(p=p.replace(/abc-error=/gi,"onerror=")),vb.nl2br(p,!0)},checkMarkdowns:function(a,b){if(""===a)return a;for(var c=a.split(/\r?\n/),e=0;e<c.length;e++){var f=!1;0===c[e].indexOf("#h6")||0===c[e].indexOf("#H6")?(c[e]="<h6>"+c[e].substring(3)+"</h6>",f=!0):0===c[e].indexOf("#h5")||0===c[e].indexOf("#H5")?(c[e]="<h5>"+c[e].substring(3)+"</h5>",f=!0):0===c[e].indexOf("#h4")||0===c[e].indexOf("#H4")?(c[e]="<h4>"+c[e].substring(3)+"</h4>",f=!0):0===c[e].indexOf("#h3")||0===c[e].indexOf("#H3")?(c[e]="<h3>"+c[e].substring(3)+"</h3>",f=!0):0===c[e].indexOf("#h2")||0===c[e].indexOf("#H2")?(c[e]="<h2>"+c[e].substring(3)+"</h2>",f=!0):0===c[e].indexOf("#h1")||0===c[e].indexOf("#H1")?(c[e]="<h1>"+c[e].substring(3)+"</h1>",f=!0):0===c[e].length?(c[e]="\r\n",f=!0):0===c[e].indexOf("*")?d(c[e].split("*").length-1)||(c[e]="\r\n&#9679; "+c[e].substring(1),f=!0):0===c[e].indexOf(">>")?(c[e]='<p class="indent">'+c[e].substring(2)+"</p>",f=!0):0===c[e].indexOf("&gt;&gt;")?(c[e]='<p class="indent">'+c[e].substring(8)+"</p>",f=!0):0!==c[e].indexOf("---")&&0!==c[e].indexOf("___")||(c[e]="<hr/>"+c[e].substring(3),f=!0);var g;-1===c[e].indexOf(" ![")&&(c[e]=c[e].replace("!["," !["));var h=c[e].match(/\!\[([^\]]+)\](|\s)+\(([^\)])+\)/g);if(h&&h.length>0)for(g=0;g<h.length;g++){var i=h[g].substring(2,h[g].indexOf("]")),j=h[g].substring(h[g].indexOf("]")+1).trim(),k=j.substring(1,j.indexOf(")"));if(b){var l="korerandom://"+Object.keys(b).length;b[l]=k,k=l}k='<img src="'+k+'" alt="'+i+'">';for(var m=c[e].split(" "),n=0;n<m.length;n++)m[n]===h[g]&&(m[n]=k);c[e]=m.join(" "),c[e]=c[e].replace(h[g],k)}var o=c[e].match(/\[([^\]]+)\](|\s)\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)/g);if(o&&o.length>0)for(g=0;g<o.length;g++){var p=o[g].substring(1,o[g].indexOf("]")),j=o[g].substring(o[g].indexOf("]")+1).trim(),q=j.substring(1,j.lastIndexOf(")"));if(q=q.replace(/\\n/g,"%0A"),b){var l="korerandom://"+Object.keys(b).length;b[l]=q,q=l}q='<span class="isLink"><a id="linkEvent" href="'+q+'" target="underscoreblank">'+vb.checkMarkdowns(p)+"</a></span>",c[e]=c[e].replace(o[g],q)}var r=c[e].match(/\*\S([^*]*?)\*/g);if(r&&r.length>0)for(g=0;g<r.length;g++){var s=r[g],t=!0;if(s.includes("*")){var u=s.replace(/\*/g,""),v=/^[0-9a-zA-Z!@#$%^&()_ +\-=\[\]{};':"\\|,.<>\/?]+$/;u.match(v)||(t=!1)}t&&(s=s.substring(1,s.length-1),s="<b>"+s.trim()+"</b>",c[e]=c[e].replace(r[g],s))}var w=c[e].match(/\~\S([^*]*?)\S\~/g);if(w&&w.length>0)for(g=0;g<w.length;g++){var x=w[g];0!==c[e].indexOf(x)&&" "!==c[e][c[e].indexOf(x)-1]&&-1===c[e].indexOf(x)||(x=x.substring(1,x.length-1),x='<i class="markdownItalic">'+x+"</i>",c[e]=c[e].replace(w[g],x))}var w=c[e].match(/\_\S([^*]*?)\S\_/g);if(w&&w.length>0)for(g=0;g<w.length;g++){var x=w[g];0!==c[e].indexOf(x)&&" "!==c[e][c[e].indexOf(x)-1]&&-1===c[e].indexOf(x)||(x=x.substring(1,x.length-1),x='<i class="markdownItalic">'+x+"</i>",c[e]=c[e].replace(w[g],x))}var w=c[e].match(/\~\S([^*]*?)\S\~/g);if(w&&w.length>0)for(g=0;g<w.length;g++){var x=w[g];0!==c[e].indexOf(x)&&" "!==c[e][c[e].indexOf(x)-1]&&-1===c[e].indexOf(x)||(x=x.substring(1,x.length-1),x='<i class="markdownItalic">'+x+"</i>",c[e]=c[e].replace(w[g],x))}var y=c[e].match(/\`\`\`\S([^*]*?)\S\`\`\`/g),z=c[e].match(/\'\'\'\S([^*]*?)\S\'\'\'/g);if(y&&y.length>0){for(g=0;g<y.length;g++){var A=y[g];A=A.substring(3,A.length-3),A="<pre>"+A+"</pre>",c[e]=c[e].replace(y[g],A)}f=!0}if(z&&z.length>0){for(g=0;g<z.length;g++){var A=z[g];A=A.substring(3,A.length-3),A="<pre>"+A+"</pre>",c[e]=c[e].replace(z[g],A)}f=!0}!f&&e>0&&(c[e]="\r\n"+c[e])}return a=c.join("")},getInnerText:function(b){return""===b?b:a("<div>"+this.convertMDtoHTML(b,"bot")+"</div>").text()}};f.prototype.renderWebForm=function(b,c){if(b.message&&b.message[0].component&&b.message[0].component.payload&&b.message[0].component.payload.formData)if(b.renderType=b.message[0].component.payload.formData.renderType,b.message[0].component.payload.template_type="iframe",c||"inline"!==b.renderType){var d=a(this.getChatTemplate("iframe")).tmpl({msgData:b,helpers:vb,link_url:b.message[0].component.payload.formData.formLink});if(c)return d;i(d[0],!0)}else this.renderMessage(b)},window.onresize=function(b){if(b.target==window){a("#chatContainer").width()}if(a(".kore-chat-window").width()>400||document.getElementsByClassName("kore-chat-window").length&&document.getElementsByClassName("kore-chat-window")[0].classList.contains("expanded")){var c=a(".kore-chat-window").width();a(".carousel").attr("style","width: "+(c-85)+"px !important")}else a(".carousel").attr("style","width: 300px !important");for(var d=0;d<Fa.length;d++)Fa[d].computeResize();for(var e=document.querySelectorAll(".quickReplies"),d=0;d<e.length;d++){var f=e[d].querySelectorAll(".quick_replies_btn_parent"),g=e[d].querySelectorAll(".quickreplyLeftIcon"),h=e[d].querySelectorAll(".quickreplyRightIcon");f[0].hasChildNodes()&&(f[0].scrollLeft>0?g[0].classList.remove("hide"):g.length&&g[0].classList.add("hide"),f[0].offsetWidth<f[0].scrollWidth?h[0].classList.remove("hide"):h&&h[0]&&h[0].classList.add("hide"))}a(".kore-chat-window").width()>460?(a(".accordionTable").each(function(){a(this).hasClass("responsive")&&a(this).addClass("hide")}),a(".tablechartDiv").each(function(){a(this).hasClass("regular")||a(this).removeClass("hide")})):(a(".accordionTable").each(function(){a(this).hasClass("responsive")&&a(this).removeClass("hide")}),a(".tablechartDiv").each(function(){a(this).hasClass("regular")||a(this).addClass("hide")}))},f.prototype.init=function(){var b=this;window.chatContainerConfig=b,b.config.botOptions.botInfo.name=b.config.botOptions.botInfo.name.escapeHTML(),Ca=b.config.botOptions.botInfo,b.config.botOptions.botInfo={chatBot:Ca.name,taskBotId:Ca._id,customData:Ca.customData,tenanturl:Ca.tenanturl};var c=Ca.name;b.config.botMessages=Ba,b.config.chatTitle=b.config.botMessages.connecting,b.config.userAgentIE=-1!==Ua.userAgent.indexOf("Trident/"),o()&&(b.config.isSendButton=!0),_a=b.config.isSendButton,hb=b.config.isTTSEnabled||!1,za=b.config.ttsInterface||"webapi",ab=b.config.allowGoogleSpeech||!1,Oa=b.config.isSpeechEnabled||!1,Ta=b.config.loadHistory||!1,Ka=!!Ta,b.config.botOptions.loadHistory=b.config.loadHistory,b.config.botOptions.chatHistory=b.config.chatHistory,b.config.botOptions.handleError=b.config.handleError,b.config.botOptions.googleMapsAPIKey=b.config.googleMapsAPIKey,ib=b.config.autoEnableSpeechAndTTS||!1,hb&&(Oa||ab)&&ib&&(gb=!0,setTimeout(function(){a(".ttspeakerDiv").removeClass("ttsOff")},350));var d=a(b.getChatTemplate()).tmpl(b.config);a(d).off("click",".drpdown_theme").on("click",".drpdown_theme",function(a){b.showDropdown(this)}),a(d).off("click",".themeName").on("click",".themeName",function(b){"shopping_theme"==a(this).attr("id")?a(".kore-chat-window").removeClass("logo_theme").addClass("shopping_theme"):a(".kore-chat-window").removeClass("shopping_theme").addClass("logo_theme")}),b.config.chatContainer=d,b.config.chatTitle=c,b.config.minimizeMode?(d.addClass("minimize"),d.find(".minimized-title").html("Talk to "+b.config.chatTitle),b.skipedInit=!0):Aa.init(b.config.botOptions,b.config.messageHistoryLimit),b.config.allowLocation&&Aa.fetchUserLocation(),b.render(d),u()},f.prototype.destroy=function(){var b=this;a(".kore-chat-overlay").hide(),Aa.close(),b.config.minimizeMode||Aa.destroy(),Ja=[],b.config&&b.config.chatContainer&&(b.config.minimizeMode?(b.config.chatContainer.find(".kore-chat-header .header-title").html(b.config.botMessages.reconnecting),b.config.chatContainer.addClass("minimize"),b.skipedInit=!0):b.config.chatContainer.remove()),eb&&eb.stop(),gb=!1,bb&&(bb.close(),bb=null)},f.prototype.resetWindow=function(){var a=this;a.config.chatContainer.find(".kore-chat-header .header-title").html(a.config.botMessages.reconnecting),Aa.close(),Aa.init(a.config.botOptions)},f.prototype.bindEvents=function(){function b(a){if(1==Ga)return void alert("You can upload only one file");O(this,a[0]),a.length>1&&alert("You can upload only one file")}var c=this,d=c.config.chatContainer;if(d.draggable({handle:d.find(".kore-chat-header .header-title"),containment:"document"}).resizable({handles:"n, e, w, s",containment:"document",minWidth:400}),d.off("keyup",".chatInputBox").on("keyup",".chatInputBox",function(b){var e=a(c.config.container).find(".kore-chat-footer");a(c.config.container).find(".kore-chat-body").css("bottom",e.outerHeight()),prevComposeSelection=window.getSelection(),oa=prevComposeSelection.rangeCount>0&&prevComposeSelection.getRangeAt(0),this.innerText.length>0?(d.find(".chatInputBoxPlaceholder").css("display","none"),d.find(".sendButton").removeClass("disabled")):(d.find(".chatInputBoxPlaceholder").css("display","block"),d.find(".sendButton").addClass("disabled"))}),d.on("click",".chatInputBoxPlaceholder",function(a){d.find(".chatInputBox").trigger("click"),d.find(".chatInputBox").trigger("focus")}),d.on("click",".chatInputBox",function(a){prevComposeSelection=window.getSelection(),oa=prevComposeSelection.rangeCount>0&&prevComposeSelection.getRangeAt(0)}),d.on("blur",".chatInputBox",function(a){ub=0}),d.off("click",".botResponseAttachments").on("click",".botResponseAttachments",function(b){window.open(a(this).attr("fileid"),"_blank")}),d.off("keydown",".chatInputBox").on("keydown",".chatInputBox",function(b){var d=a(this),e=a(c.config.container).find(".kore-chat-footer");if(a(c.config.container).find(".kore-chat-body").css("bottom",e.outerHeight()),13===b.keyCode){if(b.shiftKey)return;return a(".upldIndc").is(":visible")?void alert("Wait until file upload is not completed"):(a(".recordingMicrophone").is(":visible")&&a(".recordingMicrophone").trigger("click"),b.preventDefault(),void c.sendMessage(d,kb))}27===b.keyCode&&++ub>1&&(ub=0,G(),this.innerText="",a(".attachment").empty(),Ga=0,setTimeout(function(){r(document.getElementsByClassName("chatInputBox"))},100))}),d.off("click",".sendButton").on("click",".sendButton",function(b){var d=a(".chatInputBox");if(a(".upldIndc").is(":visible"))return void alert("Wait until file upload is not completed");a(".recordingMicrophone").is(":visible")&&a(".recordingMicrophone").trigger("click"),b.preventDefault(),c.sendMessage(d,kb)}),d.off("click",".notRecordingMicrophone").on("click",".notRecordingMicrophone",function(a){eb&&eb.stop(),Oa&&z()}),d.off("click",".recordingMicrophone").on("click",".recordingMicrophone",function(a){G(),setTimeout(function(){r(document.getElementsByClassName("chatInputBox"))},350)}),d.off("click",".attachmentBtn").on("click",".attachmentBtn",function(b){return 1==Ga?void alert("You can upload only one file"):a(".upldIndc").is(":visible")?void alert("Wait until file upload is not completed"):void a("#captureAttachmnts").trigger("click")}),d.off("click",".removeAttachment").on("click",".removeAttachment",function(b){a(this).parents(".msgCmpt").remove(),a(".kore-chat-window").removeClass("kore-chat-attachment"),Ga=0,kb={},a(".sendButton").addClass("disabled"),document.getElementById("captureAttachmnts").value=""}),d.off("change","#captureAttachmnts").on("change","#captureAttachmnts",function(b){var c=a("#captureAttachmnts").prop("files")[0];if(c&&c.size&&c.size>mb.file.limit.size)return void alert(mb.file.limit.msg);O(this,c)}),d.off("paste",".chatInputBox").on("paste",".chatInputBox",function(a){a.preventDefault();var b=document.getElementsByClassName("chatInputBox"),c=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData||window.clipboardData,d="";c&&(d=vb.nl2br(c.getData("text").escapeHTML(),!1))&&q(b,d),setTimeout(function(){r(b)},100)}),d.off("click",".sendChat").on("click",".sendChat",function(b){var d=a(c.config.container).find(".kore-chat-footer");c.sendMessage(d.find(".chatInputBox"))}),d.off("click",".notificationTemplate .btn-notification .link").on("click",".notificationTemplate .btn-notification .link",function(b){var d=a(this).attr("data-value");a(".chatInputBox").text(d),c.sendMessage(a(".chatInputBox"),d)}),d.off("click","li a").on("click","li a",function(b){b.preventDefault();var d,e=a(this).attr("href"),f=a(this).attr("target"),g=a(event.currentTarget).closest("span.simpleMsg").attr("msgData")||"";if(g)try{d=JSON.parse(g)}catch(a){}if(d&&d.message&&d.message[0].component&&d.message[0].component.payload&&d.message[0].component.payload.formData)c.renderWebForm(d);else if("_self"===f)return void callListener("provideVal",{link:e});if(!0===c.config.allowIframe){var h=a(c.getChatTemplate("iframe")).tmpl({msgData:d,helpers:vb,link_url:url});h[0].onload=function(a){console.log(a)},i(h[0],!0)}else window.open(e,"_blank")}),d.off("click",".buttonTmplContentBox li,.listTmplContentChild .buyBtn,.viewMoreList .viewMore,.listItemPath,.quickReply,.carouselImageContent,.listRightContent,.checkboxBtn,.likeDislikeDiv,.buttonQuickReply").on("click",".buttonTmplContentBox li,.listTmplContentChild .buyBtn, .viewMoreList .viewMore,.listItemPath,.quickReply,.carouselImageContent,.listRightContent,.checkboxBtn,.likeDislikeDiv,.buttonQuickReply",function(b){b.preventDefault(),b.stopPropagation();var e=a(this).attr("type");if(e&&(e=e.toLowerCase()),"postback"==e||"text"==e){a(".chatInputBox").text(a(this).attr("value")||a(this).attr("actual-value"));var f=b.currentTarget.classList,g=!1;if(f&&f.length)for(var h=0;h<f.length;h++)f[h]&&"quickReply"===f[h]&&(g=!0);if(g)var i=a(this).attr("actual-value");else var i=a(this)[0]&&a(this)[0].innerText?a(this)[0].innerText.trim():a(this)&&a(this).attr("data-value")?a(this).attr("data-value").trim():"";c.sendMessage(a(".chatInputBox"),i)}else if("url"==e||"web_url"==e){if(void 0!==a(this).attr("msgData")){var j;try{j=JSON.parse(a(this).attr("msgData"))}catch(a){}if(j&&j.message&&j.message[0].component&&(j.message[0].component.formData||j.message[0].component.payload&&j.message[0].component.payload.formData))return j.message[0].component.formData&&(j.message[0].component.payload.formData=j.message[0].component.formData),void c.renderWebForm(j)}var k=a(this).attr("url");k.indexOf("http:")<0&&k.indexOf("https:")<0&&(k="http:////"+k),c.openExternalLink(k)}if(b.currentTarget.classList&&b.currentTarget.classList.length>0&&"likeDiv"===b.currentTarget.classList[1]&&(a(".likeImg").addClass("hide"),a(".likedImg").removeClass("hide"),a(".likeDislikeDiv").addClass("dummy")),b.currentTarget.classList&&b.currentTarget.classList.length>0&&"disLikeDiv"===b.currentTarget.classList[1]&&(a(".disLikeImg").addClass("hide"),a(".disLikedImg").removeClass("hide"),a(".likeDislikeDiv").addClass("dummy")),b.currentTarget.classList&&b.currentTarget.classList.length>0&&"checkboxBtn"===b.currentTarget.classList[0]){for(var l=a(b.currentTarget.parentElement.parentElement).find(".checkInput:checked"),m=[],n=[],o=0;o<l.length;o++)m.push(a(l[o]).attr("value")),n.push(a(l[o]).attr("text"));a(".chatInputBox").text(a(this).attr("title")+": "+m.toString()),c.sendMessage(a(".chatInputBox"),n.toString())}if(b.currentTarget.classList&&b.currentTarget.classList.length>0&&"quickReply"===b.currentTarget.classList[0]){var p=b.currentTarget.parentElement.parentElement,q=p.parentElement.parentElement.querySelectorAll(".quickreplyLeftIcon"),r=p.parentElement.parentElement.querySelectorAll(".quickreplyRightIcon");setTimeout(function(){p.parentElement.parentElement.getElementsByClassName("user-account")[0].classList.remove("marginT50"),(q&&q.length||r&&r.length)&&(p.parentElement.parentElement.removeChild(q[0]),p.parentElement.parentElement.removeChild(r[0])),p.parentElement.removeChild(p)},50)}setTimeout(function(){d.find(".kore-chat-footer .chatInputBox").focus()},600)}),d.off("click",".close-btn").on("click",".close-btn",function(b){a(".recordingMicrophone").trigger("click"),eb&&eb.stop(),gb=!1,c.destroy(),bb&&(bb.close(),bb=null)}),d.off("click",".minimize-btn").on("click",".minimize-btn",function(b){!0===c.minimized?(d.removeClass("minimize"),c.minimized=!1,c.expanded):(d.addClass("minimize"),!1===c.expanded&&d.hasClass("ui-draggable"),d.find(".minimized-title").html("Talk to "+c.config.chatTitle),c.minimized=!0,!0===c.expanded&&a(".kore-chat-overlay").hide()),a(".recordingMicrophone").trigger("click"),eb&&eb.stop()}),d.off("click",".expand-btn").on("click",".expand-btn",function(b){0===a(".kore-chat-overlay").length&&a(c.config.container).append('<div class="kore-chat-overlay"></div>'),!0===c.expanded?(p(),a(".kore-chat-overlay").hide(),a(this).attr("title","Expand"),d.removeClass("expanded"),a(".expand-btn-span").removeClass("fa-compress"),a(".expand-btn-span").addClass("fa-expand"),c.expanded=!1):(a(".kore-chat-overlay").show(),a(this).attr("title","Collapse"),d.addClass("expanded"),a(".expand-btn-span").addClass("fa-compress"),a(".expand-btn-span").removeClass("fa-expand"),c.expanded=!0);var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e);var f=d.position().left+d.width();f>a(window).width()&&d.css("left",d.position().left-(f-a(window).width()+10)+"px")}),window.KorePickers){var e={chatWindowInstance:c,chatConfig:c.config},f=new KorePickers(e);f.init()}a(document).on("keyup",function(b){27==b.keyCode&&(a(".closeImagePreview").trigger("click"),a(".closeElePreview").trigger("click"))}),d.off("click",".quickreplyLeftIcon").on("click",".quickreplyLeftIcon",function(b){var c=b.currentTarget.parentElement.getElementsByClassName("buttonTmplContentChild");if(c.length)for(var d=b.target.parentElement.getElementsByClassName("quick_replies_btn_parent"),e=d[0].scrollLeft,f=0,g=0;g<c.length;g++)if((f+=c[g].offsetWidth+10)>e){a(d).animate({scrollLeft:e-c[g].offsetWidth-50},"slow",function(){(d[0].parentElement.querySelectorAll(".quickreplyRightIcon")[0].classList.remove("hide"),d[0].scrollLeft<=0)&&d[0].parentElement.querySelectorAll(".quickreplyLeftIcon")[0].classList.add("hide")});break}}),d.off("click",".quickreplyRightIcon").on("click",".quickreplyRightIcon",function(b){var c=b.currentTarget.parentElement.getElementsByClassName("buttonTmplContentChild");if(c.length)for(var d=b.target.parentElement.getElementsByClassName("quick_replies_btn_parent"),e=b.target.parentElement.offsetWidth,f=0,g=0;g<c.length;g++)if((f+=c[g].offsetWidth+10)>e){a(d).animate({scrollLeft:d[0].scrollLeft+c[g].offsetWidth+20},"slow",function(){(d[0].parentElement.querySelectorAll(".quickreplyLeftIcon")[0].classList.remove("hide"),d[0].scrollLeft+e+10>=d[0].scrollWidth)&&d[0].parentElement.querySelectorAll(".quickreplyRightIcon")[0].classList.add("hide")});break}}),d.off("click",".minimized").on("click",".minimized,.minimized-title",function(b){d.removeClass("minimize"),c.minimized=!1,c.skipedInit&&(Aa.init(c.config.botOptions,c.config.messageHistoryLimit),c.skipedInit=!1),!0===c.expanded&&a(".kore-chat-overlay").show(),document.createEvent("HTMLEvents").initEvent("resize",!0,!1),a(".chat-container").animate({scrollTop:a(".chat-container").prop("scrollHeight")},100)}),d.off("click",".reload-btn").on("click",".reload-btn",function(b){a(this).addClass("disabled").prop("disabled",!0),a(".close-btn").addClass("disabled").prop("disabled",!0),setTimeout(function(){customData&&customData.isReconnect?c.resetWindow(!0):c.resetWindow()}),a(".recordingMicrophone").trigger("click"),eb&&eb.stop()}),d.off("click",".ttspeaker").on("click",".ttspeaker",function(b){if(hb)if(gb){if(eb&&eb.stop(),J(),gb=!1,a("#ttspeaker")[0].pause(),za&&"webapi"===za){var c=window.speechSynthesis;c.pause()}else"awspolly"===za&&!1===gb&&(gainNode.gain.value=0,a(".ttspeakerDiv").addClass("ttsOff"));a(".ttspeakerDiv").addClass("ttsOff")}else za&&"webapi"===za?cb=H():za&&"awspolly"===za?gainNode.gain.value=1:cb=I(),gb=!0,a(".ttspeakerDiv").removeClass("ttsOff")}),Aa.on("open",function(b){pa=c.config.botOptions.accessToken;d.find(".kore-chat-footer .chatInputBox");d.find(".kore-chat-header .header-title").html(c.config.chatTitle).attr("title",c.config.chatTitle),d.find(".kore-chat-header .disabled").prop("disabled",!1).removeClass("disabled"),Ta||setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter")}),c.config.botOptions._reconnecting}),Aa.on("message",function(b){!0===c.popupOpened&&a(".kore-auth-popup .close-popup").trigger("click");var d=JSON.parse(b.data);if("bot"===d.from&&"bot_response"===d.type){if(d&&d.message&&d.message[0]){if(d.message[0].cInfo||(d.message[0].cInfo={}),d.message[0].component&&!d.message[0].component.payload.text)try{d.message[0].component=JSON.parse(d.message[0].component.payload)}catch(a){d.message[0].component=d.message[0].component.payload}d.message[0].component&&d.message[0].component.payload&&d.message[0].component.payload.text&&(d.message[0].cInfo.body=d.message[0].component.payload.text),d.message[0].component&&d.message[0].component.payload&&(d.message[0].component.payload.videoUrl||d.message[0].component.payload.audioUrl)&&(d.message[0].cInfo.body=d.message[0].component.payload.text||"")}if(d.message[0].component&&d.message[0].component.payload&&d.message[0].component.payload.text){if(d.message[0].cInfo.body=d.message[0].component.payload.text,d.message[0].cInfo.body.indexOf("###show_account_values###")>-1){console.log("11111111111",d.message[0].component.payload.buttons);var e={radioOptions:d.message[0].component.payload.buttons};f.showradioOptionsPicker(e)}"daterange"==d.message[0].component.payload.template_type&&(d.message[0].cInfo.body=d.message[0].component.payload.text_message,f.pickerSubconfig.dateRangeConfig.format=d.message[0].component.payload.format,f.pickerSubconfig.dateRangeConfig.startDate=d.message[0].component.payload.startDate,f.pickerSubconfig.dateRangeConfig.endDate=d.message[0].component.payload.endDate,d.message[0].component.payload.title&&(f.pickerSubconfig.daterangepicker.title=d.message[0].component.payload.title),d.message[0].component.payload.dateSeperator&&(f.pickerSubconfig.dateRangeConfig.dateSeperator=d.message[0].component.payload.dateSeperator),d.message[0].component.payload.expectedFormat&&(f.pickerSubconfig.dateRangeConfig.expectedFormat=d.message[0].component.payload.expectedFormat),a(".typingIndicatorContent").css("display","block"),f.showDateRangePicker(f.mainConfig)),"dateTemplate"==d.message[0].component.payload.template_type&&(d.message[0].cInfo.body=d.message[0].component.payload.text_message,f.pickerSubconfig.dateConfig.format=d.message[0].component.payload.format,f.pickerSubconfig.dateConfig.startDate=d.message[0].component.payload.startDate,f.pickerSubconfig.dateConfig.showdueDate=d.message[0].component.payload.showdueDate,f.pickerSubconfig.dateConfig.endDate=d.message[0].component.payload.endDate,f.pickerSubconfig.dateConfig.selectedDate="Selected Date",d.message[0].component.payload.showdueDate&&(f.pickerSubconfig.dateConfig.paymentDue="Payment Due Date",f.pickerSubconfig.dateConfig.paymentDue=d.message[0].component.payload.paymentDue),d.message[0].component.payload.title&&(f.pickerSubconfig.datepicker.title=d.message[0].component.payload.title),a(".typingIndicatorContent").css("display","block"),f.showDatePicker(f.mainConfig)),d.message[0].cInfo.body.indexOf("clockPicker")>-1&&f.showClockPicker(f.mainConfig)}Ta&&Ka?Ja.push(d):c.config.supportDelayedMessages?c.pushTorenderMessagesQueue(d):c.renderMessage(d)}else if("self"===d.from&&"user_message"===d.type){var g=d.message,h={};h=g&&g.attachments&&g.attachments[0]&&g.attachments[0].fileId?{type:"currentUser",message:[{type:"text",cInfo:{body:g.body,attachments:g.attachments},clientMessageId:d.id}],createdOn:d.id}:{type:"currentUser",message:[{type:"text",cInfo:{body:g.body},clientMessageId:d.id}],createdOn:d.id},c.renderMessage(h)}"appInvalidNotification"===d.type&&setTimeout(function(){a(".trainWarningDiv").addClass("showMsg")},2e3)}),N(document.querySelector(".droppable"),b)},f.prototype.bindIframeEvents=function(b){var c=this;b.on("click",".close-popup",function(){a(this).closest(".kore-auth-popup").remove(),a(".kore-auth-layover").remove(),c.popupOpened=!1}),b.find("iframe")[0].addEventListener("onload",function(){console.log(this)},!0)},f.prototype.openExternalLink=function(a){var b=document.createElement("a");b.href=a,b.target="_blank",b.rel="noopener noreferrer",b.click()},f.prototype.render=function(b){var c=this;a(c.config.container).append(b),"body"!==c.config.container&&(a(c.config.container).addClass("pos-relative"),a(c.config.chatContainer).addClass("pos-absolute")),p(),c.bindEvents()},f.prototype.defaultWelcomeMsg=function(b,c){var d=this;d.config.botOptions._reconnecting=!0;var e=(a(d.config.chatContainer).find(".kore-chat-body"),a(d.config.chatContainer).find(".kore-chat-footer"),(new Date).getTime());var f={};f.clientMessageId=e,Object.keys(kb).length>0&&chatInput.text().trim().length?f.message={body:chatInput.text().trim(),attachments:[kb]}:Object.keys(kb).length>0?f.message={attachments:[kb]}:f.message={body:"BotNotifications"},f.resourceid="/bot.message",b&&"string"==typeof b&&(f.message.renderMsg=b),c&&c.customdata&&(f.message.customdata=c.customdata),c&&c.nlmeta&&(f.message.nlmeta=c.nlmeta),a(".isDebugConsolePanelOpen").length>0?f.isDebugging=!0:f.isDebugging=!1,kb={},Aa.sendMessage(f,function(b){b&&b.message&&setTimeout(function(){a("#msg_"+e).find(".messageBubble").append('<div class="errorMsg">'+i18n.i18nString("sendFailed_please_resend")+"</div>")},350)})},f.prototype.sendMessage=function(b,c,d){var e=this;if(""!==b.text().trim()||0!=a(".attachment").html().trim().length){if(d&&d.message&&d.message.length&&d.message[0]&&d.message[0].component&&d.message[0].component.payload&&d.message[0].component.payload.ignoreCheckMark)var f=d.message[0].component.payload.ignoreCheckMark;e.config.allowLocation&&Aa.fetchUserLocation();var g=a(e.config.chatContainer).find(".kore-chat-body"),h=a(e.config.chatContainer).find(".kore-chat-footer"),i=(new Date).getTime(),j={};Ga=0,b.html(b.html().replaceAll("<br>","\n")),kb&&Object.keys(kb).length?(j={type:"currentUser",message:[{type:"text",cInfo:{body:b.text(),attachments:[kb]},clientMessageId:i}],createdOn:i},a(".attachment").html(""),a(".kore-chat-window").removeClass("kore-chat-attachment"),document.getElementById("captureAttachmnts").value=""):(kb={},j={type:"currentUser",message:[{type:"text",cInfo:{body:b.text()},clientMessageId:i}],createdOn:i});var k={};k.clientMessageId=i,Object.keys(kb).length>0&&b.text().trim().length?k.message={body:b.text().trim(),attachments:[kb]}:Object.keys(kb).length>0?k.message={attachments:[kb]}:k.message={body:b.text().trim()},k.resourceid="/bot.message",c&&"string"==typeof c&&(k.message.renderMsg=c),d&&d.customdata&&(k.message.customdata=d.customdata),d&&d.nlmeta&&(k.message.nlmeta=d.nlmeta),kb={},Aa.sendMessage(k,function(b){b&&b.message&&setTimeout(function(){a('.kore-chat-window [data-time="'+i+'"]').find(".messageBubble").append('<div class="errorMsg">Send Failed. Please resend.</div>')},350)}),b.html(""),a(".sendButton").addClass("disabled"),g.css("bottom",h.outerHeight()),m(),a(".typingIndicatorContent").css("display","block"),setTimeout(function(){a(".typingIndicatorContent").css("display","none")},1e4),c&&"string"==typeof c&&(j.message[0].cInfo.body=c),j.message[0].cInfo.ignoreCheckMark=f,e.renderMessage(j)}},f.prototype.renderMessage=function(c){var d=this,e="",f="",g="";c.createdOnTimemillis=new Date(c.createdOn).valueOf(),tb.helpers=vb,tb.extension=f,graphLibGlob=d.config.graphLib||"d3","bot_response"===c.type?(Sa=!1,setTimeout(function(){a(".typingIndicator").css("background-image","url("+c.icon+")")},500),setTimeout(function(){Sa||a(".typingIndicatorContent").css("display","none")},500)):Sa=!1;var h=a(d.config.chatContainer).find(".chat-container");if(c.message&&c.message[0]&&c.message[0].cInfo&&c.message[0].cInfo.attachments&&(f=s(c.message[0].cInfo.attachments[0].fileName)),c.message&&c.message[0]&&c.message[0].component&&c.message[0].component.payload&&c.message[0].component.payload.url&&(f=s(c.message[0].component.payload.url),g=c.message[0].component.payload.url.replace(/^.*[\\\/]/,"")),console.log("msgData under renderMessage",c),""===(e=tb.renderMessage(c))&&c&&c.message&&c.message[0])if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"button"==c.message[0].component.payload.template_type){console.log("templatequickreply:::",d.getChatTemplate("templatequickreply"));try{e=a(d.getChatTemplate("templatequickreply")).tmpl({msgData:c,helpers:vb,extension:f})}catch(a){console.log(a)}setTimeout(console.log("messageHtml:::",e),1e3)}else{if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"wait_for_response"==c.message[0].component.payload.template_type)return Sa=!0,void a(".typingIndicatorContent").css("display","block");if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"list"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("templatelist")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"quick_replies"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("templatequickreply")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){var a=document.createEvent("HTMLEvents");a.initEvent("resize",!0,!1),window.dispatchEvent(a)},150);else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"carousel"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("carouselTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){if(a(".carousel:last").addClass("carousel"+Ra),a(".carousel"+Ra).children().length>1){var b=new PureJSCarousel({carousel:".carousel"+Ra,slide:".slide",oneByOne:!0});a(".carousel"+Ra).parent().show(),a(".carousel"+Ra).attr("style","height: 100% !important"),Fa.push(b)}var c=document.createEvent("HTMLEvents");c.initEvent("resize",!0,!1),window.dispatchEvent(c),Ra+=1,h.animate({scrollTop:h.prop("scrollHeight")},0)});else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&("image"==c.message[0].component.type||"audio"==c.message[0].component.type||"video"==c.message[0].component.type||"link"==c.message[0].component.type))e=a(d.getChatTemplate("templateAttachment")).tmpl({msgData:c,helpers:vb,extension:f,extractedFileName:g});else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"Notification"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("NotificationTmpl")).tmpl({msgData:c,helpers:vb,extension:f}),a(e).data(c);else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"table"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("tableChartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){for(var b=document.getElementsByClassName("accordionRow"),c=0;c<b.length;c++)b[c].onclick=function(){this.classList.toggle("open")};for(var d=document.getElementsByClassName("showMore"),c=0;c<d.length;c++)d[c].onclick=function(){var b=this.parentNode.parentElement;a("#dialog").empty(),a("#dialog").html(a(b).find(".tablechartDiv").html()),a(".hello").clone().appendTo(".goodbye");var c=document.getElementById("myPreviewModal");a(".largePreviewContent").empty(),a(b).find(".tablechartDiv").clone().appendTo(".largePreviewContent"),c.style.display="block",document.getElementsByClassName("closeElePreview")[0].onclick=function(){c.style.display="none",a(".largePreviewContent").removeClass("addheight")}}},350);else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"mini_table"==c.message[0].component.payload.template_type)"horizontal"==c.message[0].component.payload.layout?(e=a(d.getChatTemplate("miniTableHorizontalTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){if(a(".carousel:last").addClass("carousel"+Ra),a(".carousel"+Ra).children().length>1){var b=new PureJSCarousel({carousel:".carousel"+Ra,slide:".slide",oneByOne:!0});a(".carousel"+Ra).parent().show(),a(".carousel"+Ra).attr("style","height: 100% !important"),Fa.push(b)}var c=document.createEvent("HTMLEvents");c.initEvent("resize",!0,!1),window.dispatchEvent(c),Ra+=1,h.animate({scrollTop:h.prop("scrollHeight")},0)})):e=a(d.getChatTemplate("miniTableChartTemplate")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"multi_select"==c.message[0].component.payload.template_type)e=a(this.getChatTemplate("checkBoxesTemplate")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"like_dislike"==c.message[0].component.payload.template_type)e=a(this.getChatTemplate("likeDislikeTemplate")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"piechart"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("pieChartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),"google"===d.config.graphLib?setTimeout(function(){function a(){var a=new google.visualization.DataTable;a.addColumn("string","Task"),a.addColumn("number","Hours per Day"),c.message[0].component.payload.elements&&c.message[0].component.payload.elements[0].displayValue&&a.addColumn({type:"string",role:"tooltip"});for(var b=[],d=c.message[0].component.payload.elements,e=0;e<d.length;e++){var f=[d[e].title+" \n"+d[e].value];f.push(parseFloat(d[e].value)),d[e].displayValue&&f.push(d[e].displayValue),b.push(f)}a.addRows(b);var g={chartArea:{left:"3%",top:"3%",height:"94%",width:"94%"},pieSliceTextStyle:{},colors:window.chartColors,legend:{textStyle:{color:"#b3bac8"}}};1===d.length&&(g.pieHole=.5,g.pieSliceTextStyle.color="black"),c.message[0].component.payload.pie_type&&("donut"===c.message[0].component.payload.pie_type?(g.pieHole=.6,g.pieSliceTextStyle.color="black",g.legend.position="none"):"donut_legend"===c.message[0].component.payload.pie_type&&(g.pieHole=.6,g.pieSliceTextStyle.color="black"));var h={id:"piechart"+c.messageId,data:a,options:g,type:"piechart"};sb.push(h);var i=document.getElementById("piechart"+c.messageId);new google.visualization.PieChart(i).draw(a,g)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},150):"d3"===graphLibGlob&&(void 0===c.message[0].component.payload.pie_type&&(c.message[0].component.payload.pie_type="regular"),c.message[0].component.payload.pie_type&&(j={},j.width=300,j.height=200,j.legendRectSize=10,j.legendSpacing=2.4,"regular"===c.message[0].component.payload.pie_type?setTimeout(function(){var a={id:"piechart"+c.messageId,data:c,type:"regular"};sb.push(a),KoreGraphAdapter.drawD3Pie(c,j,"#piechart"+c.messageId,12)},150):"donut"===c.message[0].component.payload.pie_type?setTimeout(function(){var a={id:"piechart"+c.messageId,data:c,type:"donut"};sb.push(a),KoreGraphAdapter.drawD3PieDonut(c,j,"#piechart"+c.messageId,12,"donut")},150):"donut_legend"===c.message[0].component.payload.pie_type&&setTimeout(function(){var a={id:"piechart"+c.messageId,data:c,type:"donut_legend"};sb.push(a),KoreGraphAdapter.drawD3PieDonut(c,j,"#piechart"+c.messageId,12,"donut_legend")},150))),setTimeout(function(){a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),na()},200);else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"barchart"==c.message[0].component.payload.template_type){if(e=a(d.getChatTemplate("barchartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),"google"===graphLibGlob)setTimeout(function(){function a(){var a=!1,b=new google.visualization.DataTable;b.addColumn("string","y");for(var d=0;d<c.message[0].component.payload.elements.length;d++){var e=c.message[0].component.payload.elements[d];b.addColumn("number",e.title),e.displayValues&&e.displayValues.length&&(b.addColumn({type:"string",role:"tooltip"}),a=!0)}for(var f=c.message[0].component.payload.elements.length,d=0;d<c.message[0].component.payload.X_axis.length;d++){var g=[];g.push(c.message[0].component.payload.X_axis[d]);for(var h=0;h<f;h++)g.push(parseFloat(c.message[0].component.payload.elements[h].values[d])),a&&g.push(c.message[0].component.payload.elements[h].displayValues[d]);b.addRow(g)}var i={chartArea:{height:"70%",width:"80%"},legend:{position:"top",alignment:"end",maxLines:3,textStyle:{color:"#b3bac8"}},hAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"}},vAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"},baselineColor:"transparent"},animation:{duration:500,easing:"out",startup:!0},bar:{groupWidth:"25%"},colors:window.chartColors};"vertical"!==c.message[0].component.payload.direction&&(i.bar.groupWidth="45%",i.hAxis.baselineColor="#b3bac8"),c.message[0].component.payload.stacked&&(i.isStacked=!0,i.bar.groupWidth="25%");var j={id:"barchart"+c.messageId,direction:c.message[0].component.payload.direction,data:b,options:i,type:"barchart"};sb.push(j);var k=document.getElementById("barchart"+c.messageId),l=null;l="vertical"===c.message[0].component.payload.direction?new google.visualization.ColumnChart(k):new google.visualization.BarChart(k),l.draw(b,i)}google.charts.load("current",{packages:["corechart","bar"]}),google.charts.setOnLoadCallback(a)},150);else if("d3"===graphLibGlob){var j={};j.outerWidth=350,j.outerHeight=300,j.innerHeight=200,j.legendRectSize=15,j.legendSpacing=4,void 0===c.message[0].component.payload.direction&&(c.message[0].component.payload.direction="horizontal"),"horizontal"!==c.message[0].component.payload.direction||c.message[0].component.payload.stacked?"vertical"===c.message[0].component.payload.direction&&c.message[0].component.payload.stacked?setTimeout(function(){j.outerWidth=350,j.innerWidth=270;var a={id:"barchart"+c.messageId,data:c,type:"stackedBarchart"};sb.push(a),KoreGraphAdapter.drawD3barVerticalStackedChart(c,j,"#barchart"+c.messageId,12)},250):"horizontal"===c.message[0].component.payload.direction&&c.message[0].component.payload.stacked?setTimeout(function(){j.innerWidth=180;var a={id:"barchart"+c.messageId,data:c,type:"stackedBarchart"};sb.push(a),KoreGraphAdapter.drawD3barStackedChart(c,j,"#barchart"+c.messageId,12)},250):"vertical"!==c.message[0].component.payload.direction||c.message[0].component.payload.stacked||setTimeout(function(){j.innerWidth=240;var a={id:"barchart"+c.messageId,data:c,type:"barchart"};sb.push(a),KoreGraphAdapter.drawD3barChart(c,j,"#barchart"+c.messageId,12)},250):setTimeout(function(){j.innerWidth=180;var a={id:"Legend_barchart"+c.messageId,data:c,type:"barchart"};sb.push(a),KoreGraphAdapter.drawD3barHorizontalbarChart(c,j,"#barchart"+c.messageId,12)},250)}setTimeout(function(){a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),na()},300)}else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"linechart"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("linechartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),"google"===graphLibGlob?setTimeout(function(){function a(){var a=!1,b=new google.visualization.DataTable;b.addColumn("string","y");for(var d=0;d<c.message[0].component.payload.elements.length;d++){var e=c.message[0].component.payload.elements[d];b.addColumn("number",e.title),e.displayValues&&e.displayValues.length&&(b.addColumn({type:"string",role:"tooltip"}),a=!0)}for(var f=c.message[0].component.payload.elements.length,d=0;d<c.message[0].component.payload.X_axis.length;d++){var g=[];g.push(c.message[0].component.payload.X_axis[d]);for(var h=0;h<f;h++)g.push(parseFloat(c.message[0].component.payload.elements[h].values[d])),a&&g.push(c.message[0].component.payload.elements[h].displayValues[d]);b.addRow(g)}var i={curveType:"function",chartArea:{height:"70%",width:"80%"},legend:{position:"top",alignment:"end",maxLines:3,textStyle:{color:"#b3bac8"}},hAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"}},vAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"},baselineColor:"transparent"},lineWidth:3,animation:{duration:500,easing:"out",startup:!0},colors:window.chartColors},j={id:"linechart"+c.messageId,data:b,options:i,type:"linechart"};sb.push(j);var k=document.getElementById("linechart"+c.messageId);new google.visualization.LineChart(k).draw(b,i)}google.charts.load("current",{packages:["corechart","line"]}),google.charts.setOnLoadCallback(a)},150):"d3"===graphLibGlob&&setTimeout(function(){var a={};a.outerWidth=380,a.outerHeight=350,a.innerWidth=230,a.innerHeight=250,a.legendRectSize=15,a.legendSpacing=4;var b={id:"linechart"+c.messageId,data:c,type:"linechart"};sb.push(b),KoreGraphAdapter.drawD3lineChartV2(c,a,"#linechart"+c.messageId,12)},250),setTimeout(function(){a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),na()},200);else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&c.message[0].component.payload.formData&&"inline"===c.message[0].component.payload.formData.renderType)c.renderType="inline",e=d.renderWebForm(c,!0);else if(c.message[0]&&c.message[0].component&&c.message[0].component.payload&&"iframe"==c.message[0].component.payload.template_type){var k=a(d.getChatTemplate("iframe")).tmpl({msgData:c,helpers:vb,link_url:c.message[0].component.link_url});k[0].onload=function(a){console.log(a)},i(k[0],!0),setTimeout(function(){document.getElementById("iframeModal").contentWindow.document.getElementsByClassName("x-unblu-launcher-button")[0].click()},7e3)}else e=a(d.getChatTemplate("message")).tmpl({msgData:c,helpers:vb,extension:f})}if(console.log("messageHtml is ",e),h.find("li").attr("aria-live","off"),h.find("li").attr("aria-hidden","true"),c&&c.message[0]&&c.message[0].component&&c.message[0].component.payload&&c.message[0].component.payload.sliderView&&!c.message[0].component.payload.fromHistory)bottomSliderAction("show",e);else if(a(".kore-chat-window .chat-container li#"+c.messageId).length<1)if("bot_response"===c.type&&c.fromHistorySync){var l=[],m=a(".kore-chat-window .chat-container>li");if(m.length){m.each(function(b,c){l.push(parseInt(a(c).attr("data-time")))});var o=b(l,c.createdOnTimemillis);if(o>0){var p=m[o];p?a(e).insertBefore(p):h.append(e)}else h.prepend(e)}else h.append(e)}else h.append(e);if(n(),h.animate({scrollTop:h.prop("scrollHeight")},100),"bot_response"===c.type&&gb&&hb&&!d.minimized&&!Ka){if(c.message[0]&&c.message[0].component&&"template"===c.message[0].component.type)fb="";else try{fb=c.message[0].component.payload.text?c.message[0].component.payload.text.replace(/\r?\n/g,". ."):"",fb=vb.checkMarkdowns(fb),fb=fb.replace("___","<hr/>"),fb=fb.replace("---","<hr/>")}catch(a){fb=""}if(c.message[0].component&&c.message[0].component.payload.speech_hint&&(fb=c.message[0].component.payload.speech_hint),za&&"webapi"===za)cb=H(fb);else if(za&&"awspolly"===za)window.speakTextWithAWSPolly?speakTextWithAWSPolly(fb):console.warn("Please uncomment amazon polly files 'plugins/aws-sdk-2.668.0.min.js' and'plugins/kore-aws-polly.js' in index.html");else if(!cb||cb.readyState&&1!==cb.readyState)try{cb=I()}catch(a){console.log(a)}else K(fb)}},f.prototype.pushTorenderMessagesQueue=function(a){var b=this;b.renderMessagesQueue||(b.renderMessagesQueue=[]),b.renderMessagesQueue.push(a),b.renderEventLoop||b.startRenderEventLoop()},f.prototype.startRenderEventLoop=function(){var a=this;a.msgRenderingProgress=!1,a.renderEventLoop=setInterval(function(){console.log("Running Event loop"),a.checkForMsgQueue()},500)},f.prototype.checkForMsgQueue=function(){var a=this;if(a.renderMessagesQueue.length&&!a.msgRenderingProgress){var b=a.renderMessagesQueue.shift(),c=0;b.message&&b.message.length&&b.message[0]&&b.message[0].component&&b.message[0].component.payload&&b.message[0].component.payload.renderDelay&&(c=b.message[0].component.payload.renderDelay||0),a.msgRenderingProgress=!0,setTimeout(function(){a.renderMessage(b),a.msgRenderingProgress=!1},c)}a.renderMessagesQueue.length||a.msgRenderingProgress||!a.renderEventLoop||(clearTimeout(a.renderEventLoop),a.renderEventLoop=!1)},f.prototype.formatMessages=function(b){a(b).find("a").attr("target","_blank")},f.prototype.openPopup=function(b){var c=this,d=a(c.getChatTemplate("popup")).tmpl({link_url:b});a(c.config.container).append(d),c.popupOpened=!0,c.bindIframeEvents(a(d))},f.prototype.showDropdown=function(b){a(b).next().hasClass("dropdown-contentWidgt")&&a(b).next().toggleClass("show"),a(".dropdown-contentWidgt.show").not(a(b).next()).removeClass("show")},function(){window.onclick=function(a){if(!a.target.matches(".dropbtnWidgt")){var b,c=document.getElementsByClassName("dropdown-contentWidgt");for(b=0;b<c.length;b++){var d=c[b];d.classList.contains("show")&&d.classList.remove("show")}}}}(),f.prototype.getChatTemplate=function(a){var b='<div class="footerContainer pos-relative">                         {{if userAgentIE}}                         <div role="textbox" class="chatInputBox inputCursor" aria-label="Message"aria-label="Message" contenteditable="true" placeholder="${botMessages.message}"></div>                         {{else}}                         <div role="textbox" class="chatInputBox" contenteditable="true" placeholder="${botMessages.message}"></div>                         {{/if}}                     <div class="footerIonsContainer">                    {{if isTTSEnabled}}                         <div class="sdkFooterIcon ttspeakerDiv ttsOff">                             <button class="ttspeaker" title="Text to Speech">                                 <span class="ttsSpeakerEnable"></span>                                 <span class="ttsSpeakerDisable"></span>                                 <span style="display:none;"><audio id="ttspeaker" controls="" autoplay="" name="media"><source src="" type="audio/wav"></audio></span>                            </button>                         </div>                     {{/if}}                     {{if isSpeechEnabled}}                    <div class="sdkFooterIcon microphoneBtn">                         <button class="notRecordingMicrophone" title="Microphone On">                             <i class="microphone"></i>                         </button>                         <button class="recordingMicrophone" title="Microphone Off" >                             <i class="microphone"></i>                             <span class="recordingGif"></span>                         </button>                         <div id="textFromServer"></div>                     </div>                     {{/if}}                    <div class="sdkFooterIcon">                         <button class="sdkAttachment attachmentBtn" title="Attachment">                             <div class="attachmentIcon"></div>                         </button>                         <input type="file" name="Attachment" class="filety" id="captureAttachmnts" title="Upload attachment">                     </div>                     {{if !(isSendButton)}}<div class="chatSendMsg">Press enter to send</div>{{/if}}                     </div>                    <div class="attachment"></div>                 </div>',c='<script id="chat_window_tmpl" type="text/x-jqury-tmpl">                     <div class="kore-chat-window droppable liteTheme-one">                     <div class="kr-wiz-menu-chat defaultTheme-kore">                    </div>\t                        <div class="minimized-title"></div>                         <div class="minimized"><span class="messages"></span></div>                         <div class="kore-chat-header">                         <div class="header-profile-icon"> <div class="header-profile-avtar"></div> </div>                             <div id="botHeaderTitle" aria-labelledby="botHeaderTitle" class="header-title" title="${chatTitle}">${chatTitle}</div>                             <div class="chat-box-controls">                                 <button class="reload-btn" title="Reconnect"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTNweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTMgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5yZWxvYWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zNTcuMDAwMDAwLCAtMjQxLjAwMDAwMCkiIGZpbGw9IiM4QTk1OUYiIHN0cm9rZT0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJyZWxvYWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM1OC4wMDAwMDAsIDI0Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMC44LDUuMjczNTc2NTggQzEwLjgsMi4zNjU3MTQyIDguMzc3NTg1NzEsMCA1LjQwMDAyMzg3LDAgQzIuNDIyNDYyMDMsMCAwLDIuMzY1NzE0MiAwLDUuMjczNTc2NTggQzAsNS40NDYzMTE0MiAwLjE0MzQwNjM1Myw1LjU4NjM1OTc2IDAuMzIwMjgyOTQyLDUuNTg2MzU5NzYgQzAuNDk3MTU5NTMsNS41ODYzNTk3NiAwLjY0MDU2NTg4Myw1LjQ0NjI4ODEgMC42NDA1NjU4ODMsNS4yNzM1NzY1OCBDMC42NDA1NjU4ODMsMi43MTA2NDc2NSAyLjc3NTY0MjI2LDAuNjI1NTg5NjY4IDUuNCwwLjYyNTU4OTY2OCBDOC4wMjQzNTc3NCwwLjYyNTU4OTY2OCAxMC4xNTk0MzQxLDIuNzEwNjcwOTYgMTAuMTU5NDM0MSw1LjI3MzU3NjU4IEMxMC4xNTk0MzQxLDcuODM2NDU4ODkgOC4wMjQzNTc3NCw5LjkyMTU0MDE4IDUuNCw5LjkyMTU0MDE4IEw0Ljg0NDMyNzI0LDkuOTIxNTQwMTggTDUuNjM4ODc1MzEsOS4wNTI5NzAwMyBDNS43NTY3MzczMyw4LjkyNDE1OTEyIDUuNzQ1MzAyMDYsOC43MjY0MDgxNiA1LjYxMzQwMjYsOC42MTEzMDYgQzUuNDgxNTAzMTMsOC40OTYyMDM4NSA1LjI3ODk4NjcyLDguNTA3Mzk0NjYgNS4xNjExNDg1Nyw4LjYzNjIwNTU2IEw0LjAyNTM1Njg4LDkuODc3ODAyNzYgQzMuODM5NDMyMzUsMTAuMDgxMDU1OSAzLjgzOTQzMjM1LDEwLjM4NzU5MDggNC4wMjUzNTY4OCwxMC41OTA4NDQgTDUuMTYxMTQ4NTcsMTEuODMyNDQxMiBDNS4yMjQ0MzY0NCwxMS45MDE2Mzc3IDUuMzEyMDc0OTgsMTEuOTM2ODQyMSA1LjQwMDExOTM3LDExLjkzNjg0MjEgQzUuNDc2MDYwMDQsMTEuOTM2ODQyMSA1LjU1MjMxMTA2LDExLjkxMDU5MDMgNS42MTM0MDI2LDExLjg1NzM0MDcgQzUuNzQ1MzI1OTQsMTEuNzQyMjM4NiA1Ljc1NjczNzMzLDExLjU0NDQ4NzYgNS42Mzg4NzUzMSwxMS40MTU2NzY3IEw0Ljg0NDMyNzI0LDEwLjU0NzEwNjUgTDUuNCwxMC41NDcxMDY1IEM4LjM3NzU4NTcxLDEwLjU0NzEwNjUgMTAuOCw4LjE4MTM5MjM0IDEwLjgsNS4yNzM1NzY1OCBaIiBpZD0iUGF0aCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="></button>                                 <button class="minimize-btn" title="Minimize"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIycHgiIHZpZXdCb3g9IjAgMCAxNCAyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi4zICg2NzI5NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+bWluaW1pemU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMjYuMDAwMDAwLCAtMjMzLjAwMDAwMCkiIGZpbGw9IiM4QTk1OUYiPgogICAgICAgICAgICA8ZyBpZD0ibWluaW1pemUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyNi4wMDAwMDAsIDIzMy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJQYXRoIiBwb2ludHM9IjAgMCAxMy45Mzk5OTk2IDAgMTMuOTM5OTk5NiAxLjk5OTk5OTk0IDAgMS45OTk5OTk5NCI+PC9wb2x5Z29uPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="></button>                                 <button class="expand-btn" title="Expand"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5leHBhbmQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDUuMDAwMDAwLCAtMjUyLjAwMDAwMCkiIGZpbGw9IiM4QTk1OUYiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIGlkPSJleHBhbmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwNS4wMDAwMDAsIDI1Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjg2NjY2NjY3LDkuMzMzMzMzMzMgTDAsOS4zMzMzMzMzMyBMMCwxNCBMNC42NjY2NjY2NywxNCBMNC42NjY2NjY2NywxMi4xMzMzMzMzIEwxLjg2NjY2NjY3LDEyLjEzMzMzMzMgTDEuODY2NjY2NjcsOS4zMzMzMzMzMyBaIE0wLDQuNjY2NjY2NjcgTDEuODY2NjY2NjcsNC42NjY2NjY2NyBMMS44NjY2NjY2NywxLjg2NjY2NjY3IEw0LjY2NjY2NjY3LDEuODY2NjY2NjcgTDQuNjY2NjY2NjcsMCBMMCwwIEwwLDQuNjY2NjY2NjcgWiBNMTIuMTMzMzMzMywxMi4xMzMzMzMzIEw5LjMzMzMzMzMzLDEyLjEzMzMzMzMgTDkuMzMzMzMzMzMsMTQgTDE0LDE0IEwxNCw5LjMzMzMzMzMzIEwxMi4xMzMzMzMzLDkuMzMzMzMzMzMgTDEyLjEzMzMzMzMsMTIuMTMzMzMzMyBaIE05LjMzMzMzMzMzLDAgTDkuMzMzMzMzMzMsMS44NjY2NjY2NyBMMTIuMTMzMzMzMywxLjg2NjY2NjY3IEwxMi4xMzMzMzMzLDQuNjY2NjY2NjcgTDE0LDQuNjY2NjY2NjcgTDE0LDAgTDkuMzMzMzMzMzMsMCBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>                                <button class="close-btn" title="Close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>                             </div>                             <div class="logo-icon"></div>                            <div class="sdkThemeContainer" title="Themes">                                <i class="icon-More dropbtnWidgt sdkThemeIcon drpdown_theme"></i>                                <ul class="dropdown-contentWidgt rmpmW themeContent" style="list-style:none;">                                    <li class="themeName" id="logo_theme">Logo theme<span class="checkMarkIcon checkMarkIcon-1"></span></li>                                    <li class="action themeName" id="shopping_theme">Shopping theme<span class="checkMarkIcon checkMarkIcon-2"></span></li>                                </ul>                            </div>                        </div>                         <div class="kore-chat-header historyLoadingDiv">                             <div class="historyWarningTextDiv displayTable">                                 <span><img class = "loadingHistory" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAYZJREFUOBGtVLFKA0EQfbMiiERQEgjpRQt/wULB/opIFCuJvb1iKdprbbASDaa4L9DCX7BQ7CVwQcEggph13t7t3RlivMKBsDsz701mZ9+eYNjaNyX0e9saDmCxZJv1mrQ6zxDcayxEqXyOxmo/TzN5B2fXDbxFT7D2VH9rgK3FeV3pM848cTnLirQ6e0q60lw1lx+11bziHD5Oi1tcZVfAkyIYOYRM3GF69gHvr4uwX8sY2AMFVDwIkA3srLcFnAFb9B2I3GJqchNbQTcDJ7uLsIqPz0s91koS6WKmMm+SIfojRL8WIIuF+QdAlBSpks+ZBEkA7gijOkgBumGeR80sMLzG1OcMilgep3wDseWUxyEWsTnzmMKUr51ILw3wForYy2AhhSlfO3FKjGO8xiKWxymfgw1THnXAaxxnzMd68ajQuLcAeE1UnA5+K+R1kgmuS/4/KdY3xbdgB0fe/XMVs49m/Zi4uBPPiN/Qibrj5qJHl12+GU/7WYTRoe+J0xFlMOZ78g1n4achujvX7QAAAABJRU5ErkJggg=="></span>                                 <p class="headerTip warningTip">Loading chat history..</p>                             </div>                         </div>                         <div class="kore-chat-header trainWarningDiv">                             <div class="trainWarningTextDiv displayTable">                                 <span class="exclamation-circle"><i class="fa fa-exclamation-circle" aria-hidden="true"></i></span>                                 <p class="headerTip warningTip">Something went wrong.Please try again later.</p>                             </div>                         </div>                         <div role="log" aria-live="polite" aria-atomic="true" class="kore-chat-body">                             <div class="errorMsgBlock">                             </div>                             <ul class="chat-container"></ul>                         </div>                         <div class="typingIndicatorContent"><div class="typingIndicator"></div><div class="movingDots"></div></div>                         <div class="kore-chat-footer disableFooter">'+b+'{{if isSendButton}}<div class="sendBtnCnt"><button class="sendButton disabled" type="button">Send</button></div>{{/if}}</div>                          <div id="myModal" class="modalImagePreview">                              <span class="closeImagePreview">&times;</span>                              <img class="modal-content-imagePreview" id="img01">                              <div id="caption"></div>                        </div>                        <div id="chatBodyModal" class="chatBodyModal animate-bottom">                        <span class="closeChatBodyModal "></span>                        <div id="closeInlineModel" class="loading_form iframeLoader"></div>                        <div id="chatBodyModalContent"></div>                        </div>                        <div id="myPreviewModal" class="modalImagePreview">                              <span class="closeElePreview">&times;</span>                              <div class="largePreviewContent"></div>                        </div>                        <div class="kr-wiz-content-chat defaultTheme-kore">                        </div>                    </div>                 <\/script>';return console.log("tempType is ",a),"message"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         {{each(key, msgItem) msgData.message}}                             {{if msgItem.cInfo && msgItem.type === "text"}}                                 <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                                     class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} {{if msgData.icon}}with-icon{{/if}}">                                     {{if msgData.createdOn}}<div aria-hidden="true" aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                                     {{if msgData.icon}}<div aria-hidden="true"  aria-live="off" class="profile-photo"> <div class="user-account avtar" style="background-image:url(${msgData.icon})" title="User Avatar"></div> </div> {{/if}}                                     <div class="messageBubble">                                        <div>                                             {{if msgData.type === "bot_response"}}                                                 {{if msgItem.component  && msgItem.component.type =="error"}}                                                     <span style="color:${msgItem.component.payload.color}">{{html helpers.convertMDtoHTML(msgItem.component.payload.text, "bot",msgItem)}} </span>                                                 {{else}}                                                     <span class="simpleMsg" {{if msgData}}msgData="${JSON.stringify(msgData)}" {{/if}}>{{html helpers.convertMDtoHTML(msgItem.cInfo.body, "bot",msgItem)}}</span>                                                     {{if msgItem.component && msgItem.component.payload && msgItem.component.payload.videoUrl}}                                                        <div class="videoEle"><video width="300" controls><source src="${msgItem.component.payload.videoUrl}" type="video/mp4"></video></div>                                                    {{/if}}                                                    {{if msgItem.component && msgItem.component.payload && msgItem.component.payload.audioUrl}}                                                        <div class="audioEle"><audio width="180" controls><source src="${msgItem.component.payload.audioUrl}"></audio></div>                                                    {{/if}}                                                {{/if}}                                             {{else}}                                                 {{if msgItem.cInfo.renderMsg && msgItem.cInfo.renderMsg !== ""}}                                                    {{html helpers.convertMDtoHTML(msgItem.cInfo.renderMsg, "user",msgItem)}}                                                 {{else}}                                                    {{html helpers.convertMDtoHTML(msgItem.cInfo.body, "user",msgItem)}}                                                 {{/if}}                                            {{/if}}                                         </div>                                        {{if msgItem.cInfo && msgItem.cInfo.emoji}}                                             <span class="emojione emojione-${msgItem.cInfo.emoji[0].code}">${msgItem.cInfo.emoji[0].title}</span>                                         {{/if}}                                         {{if msgItem.cInfo.attachments}}                                             <div class="msgCmpt attachments" fileid="${msgItem.cInfo.attachments[0].fileId}">                                                 <div class="uploadedFileIcon">                                                     {{if msgItem.cInfo.attachments[0].fileType == "image"}}                                                         <span class="icon cf-icon icon-photos_active"></span>                                                     {{else msgItem.cInfo.attachments[0].fileType == "audio"}}                                                        <span class="icon cf-icon icon-files_audio"></span>                                                     {{else msgItem.cInfo.attachments[0].fileType == "video"}}                                                         <span class="icon cf-icon icon-video_active"></span>                                                     {{else}}                                                         {{if extension[1]=="xlsx" || extension[1]=="xls" || extension[1]=="docx" || extension[1]=="doc" || extension[1]=="pdf" || extension[1]=="ppsx" || extension[1]=="pptx" || extension[1]=="ppt" || extension[1]=="zip" || extension[1]=="rar"}}                                                            <span class="icon cf-icon icon-files_${extension[1]}"></span>                                                         {{else extension[1]}}                                                            <span class="icon cf-icon icon-files_other_doc"></span>                                                         {{/if}}                                                    {{/if}}                                                </div>                                                 <div class="curUseruploadedFileName">${msgItem.cInfo.attachments[0].fileName}</div>                                             </div>                                         {{/if}}                                         {{if msgData.isError}}                                             <div class="errorMsg">Send Failed. Please resend.</div>                                         {{/if}}                                     </div>                                 </li>                             {{/if}}                         {{/each}}                     {{/if}}                 </scipt>':"popup"===a?'<script id="kore_popup_tmpl" type="text/x-jquery-tmpl">                     <div class="kore-auth-layover">                        <div class="kore-auth-popup">                             <div class="popup_controls"><span class="close-popup" title="Close">&times;</span></div>                             <iframe id="authIframe" src="${link_url}"></iframe>                         </div>                     </div>                <\/script>':"templatebutton"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon">                             <div class="buttonTmplContent">                                 {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                                 {{if msgData.icon}}<div aria-live="off" class="profile-photo"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                                 <ul class="buttonTmplContentBox">                                    <li class="buttonTmplContentHeading">                                         {{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "user")}} {{/if}}                                         {{if msgData.message[0].cInfo && msgData.message[0].cInfo.emoji}}                                             <span class="emojione emojione-${msgData.message[0].cInfo.emoji[0].code}">${msgData.message[0].cInfo.emoji[0].title}</span>                                         {{/if}}                                     </li>                                    {{each(key, msgItem) msgData.message[0].component.payload.buttons}}                                         <a href=""#>                                            <li {{if msgData}}msgData="${JSON.stringify(msgData)}"{{/if}} {{if msgItem.payload}}value="${msgItem.payload}"{{/if}} {{if msgItem.payload}}actual-value="${msgItem.payload}"{{/if}} {{if msgItem.url}}url="${msgItem.url}"{{/if}} class="buttonTmplContentChild" data-value="${msgItem.value}" type="${msgItem.type}">                                                ${msgItem.title}                                            </li>                                         </a>                                     {{/each}}                                 </ul>                            </div>                        </li>                     {{/if}}                 </scipt>':"templatelist"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon">                             <div class="listTmplContent">                                 {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                                 {{if msgData.icon}}<div aria-live="off" class="profile-photo"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                                 <ul class="listTmplContentBox">                                     {{if msgData.message[0].component.payload.text || msgData.message[0].component.payload.heading}}                                         <li class="listTmplContentHeading">                                             {{if msgData.type === "bot_response" && msgData.message[0].component.payload.heading}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.heading, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "user")}} {{/if}}                                             {{if msgData.message[0].cInfo && msgData.message[0].cInfo.emoji}}                                                 <span class="emojione emojione-${msgData.message[0].cInfo.emoji[0].code}">${msgData.message[0].cInfo.emoji[0].title}</span>                                             {{/if}}                                         </li>                                     {{/if}}                                     {{each(key, msgItem) msgData.message[0].component.payload.elements}}                                         {{if msgData.message[0].component.payload.buttons}}                                             {{if key<= 2 }}                                                <li class="listTmplContentChild">                                                     {{if msgItem.image_url}}                                                         <div class="listRightContent" {{if msgItem.default_action && msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action && msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action && msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action && msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}>                                                             <img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';"/>                                                         </div>                                                     {{/if}}                                                     <div class="listLeftContent">                                                         <div class="listItemTitle">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}</div>                                                         {{if msgItem.subtitle}}<div class="listItemSubtitle">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}</div>{{/if}}                                                         {{if msgItem.default_action && msgItem.default_action.url}}<div class="listItemPath" type="url" url="${msgItem.default_action.url}">${msgItem.default_action.url}</div>{{/if}}                                                         {{if msgItem.buttons}}                                                        <div>                                                             <span class="buyBtn" {{if msgItem.buttons[0].type}}type="${msgItem.buttons[0].type}"{{/if}} {{if msgItem.buttons[0].url}}url="${msgItem.buttons[0].url}"{{/if}} {{if msgItem.buttons[0].payload}}value="${msgItem.buttons[0].payload}"{{/if}}>{{if msgItem.buttons[0].title}}${msgItem.buttons[0].title}{{else}}Buy{{/if}}</span>                                                         </div>                                                         {{/if}}                                                    </div>                                                </li>                                             {{/if}}                                        {{else}}                                             <li class="listTmplContentChild">                                                 {{if msgItem.image_url}}                                                     <div class="listRightContent" {{if msgItem.default_action && msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action && msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action && msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action && msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}>                                                         <img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';" />                                                     </div>                                                 {{/if}}                                                 <div class="listLeftContent">                                                     <div class="listItemTitle">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}</div>                                                     {{if msgItem.subtitle}}<div class="listItemSubtitle">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}</div>{{/if}}                                                     {{if msgItem.default_action && msgItem.default_action.url}}<div class="listItemPath" type="url" url="${msgItem.default_action.url}">${msgItem.default_action.url}</div>{{/if}}                                                     {{if msgItem.buttons}}                                                    <div>                                                         <span class="buyBtn" {{if msgItem.buttons[0].type}}type="${msgItem.buttons[0].type}"{{/if}} {{if msgItem.buttons[0].url}}url="${msgItem.buttons[0].url}"{{/if}} {{if msgItem.buttons[0].payload}}value="${msgItem.buttons[0].payload}"{{/if}}>{{if msgItem.buttons[0].title}}${msgItem.buttons[0].title}{{else}}Buy{{/if}}</span>                                                     </div>                                                     {{/if}}                                                </div>                                            </li>                                         {{/if}}                                     {{/each}}                                     </li>                                     {{if msgData.message[0].component.AlwaysShowGlobalButtons || (msgData.message[0].component.payload.elements.length > 3 && msgData.message[0].component.payload.buttons)}}                                    <li class="viewMoreList">                                         <span class="viewMore" url="{{if msgData.message[0].component.payload.buttons[0].url}}${msgData.message[0].component.payload.buttons[0].url}{{/if}}" type="${msgData.message[0].component.payload.buttons[0].type}" value="{{if msgData.message[0].component.payload.buttons[0].payload}}${msgData.message[0].component.payload.buttons[0].payload}{{else}}${msgData.message[0].component.payload.buttons[0].title}{{/if}}">${msgData.message[0].component.payload.buttons[0].title}</span>                                     </li>                                     {{/if}}                                </ul>                             </div>                         </li>                     {{/if}}                 </scipt>':"templatequickreply"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li {{if msgData.type !== "bot_response"}}id="msg_${msgItem.clientMessageId}"{{/if}} class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon quickReplies">                             <div class="buttonTmplContent">                                 {{if msgData.createdOn}}<div class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                                 {{if msgData.icon}}<div class="profile-photo"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                                 {{if msgData.message[0].component.payload.text}}                                     <div class="buttonTmplContentHeading quickReply">                                         {{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "user")}} {{/if}}                                         {{if msgData.message[0].cInfo && msgData.message[0].cInfo.emoji}}                                             <span class="emojione emojione-${msgData.message[0].cInfo.emoji[0].code}">${msgData.message[0].cInfo.emoji[0].title}</span>                                         {{/if}}                                     </div>                                {{/if}}                                 <div class="fa fa-chevron-left quickreplyLeftIcon hide"></div><div class="fa fa-chevron-right quickreplyRightIcon hide"></div>                                    <div class="quick_replies_btn_parent"><div class="autoWidth">                                        {{if msgData.message[0].component.payload.quick_replies && msgData.message[0].component.payload.quick_replies.length}}                                             {{each(key, msgItem) msgData.message[0].component.payload.quick_replies}}                                         <div class="buttonTmplContentChild quickReplyDiv displayInline"> <span  actual-value="${msgItem.title}" {{if msgItem.payload}}value="${msgItem.payload}"{{/if}} class="quickReply {{if msgItem.image_url}}with-img{{/if}}" type="${msgItem.content_type}">                                            {{if msgItem.image_url}}<img src="${msgItem.image_url}">{{/if}} <span class="quickreplyText {{if msgItem.image_url}}with-img{{/if}}">${msgItem.title}</span></span>                                        </div>                                     {{/each}}                                         {{/if}}                                         {{if msgData.message[0].component.payload.buttons && msgData.message[0].component.payload.buttons.length}}                                         message data:${JSON.stringify(msgData)}                                        {{each(key, msgItem) msgData.message[0].component.payload.buttons}}                                         button ${JSON.stringify(msgItem)}                                                <div class="buttonTmplContentChild quickReplyDiv displayInline"> <span actual-value="${msgItem.title}" {{if msgData}}msgData="${JSON.stringify(msgData)}"{{/if}} {{if msgItem.payload}}value="${msgItem.payload}"{{/if}} class="buttonQuickReply {{if msgItem.image_url}}with-img{{/if}}" type="${msgItem.type}" {{if msgItem.url}}url="${msgItem.url}"{{/if}}>                                                    {{if msgItem.image_url}}<img src="${msgItem.image_url}">{{/if}} <span class="quickreplyText {{if msgItem.image_url}}with-img{{/if}}">${msgItem.title}</span></span>                                                </div>                                             {{/each}}                                         {{/if}}                                     </div>                                </div>                            </div>                        </li>                     {{/if}}                 </scipt>':"templateAttachment"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         {{each(key, msgItem) msgData.message}}                             {{if msgItem.component && msgItem.component.payload.url}}                                 <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                                    class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} {{if msgData.icon}}with-icon{{/if}}">                                     {{if msgData.createdOn}}<div class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                                     {{if msgData.icon}}<div class="profile-photo"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                                     <div class="messageBubble">                                        {{if msgItem.component.payload.url}}                                             <div class="msgCmpt botResponseAttachments" fileid="${msgItem.component.payload.url}">                                                 <div class="uploadedFileIcon">                                                     {{if msgItem.component.type == "image"}}                                                         <span class="icon cf-icon icon-photos_active"></span>                                                     {{else msgItem.component.type == "audio"}}                                                        <span class="icon cf-icon icon-files_audio"></span>                                                     {{else msgItem.component.type == "video"}}                                                         <span class="icon cf-icon icon-video_active"></span>                                                     {{else}}                                                         {{if extension[1]=="xlsx" || extension[1]=="xls" || extension[1]=="docx" || extension[1]=="doc" || extension[1]=="pdf" || extension[1]=="ppsx" || extension[1]=="pptx" || extension[1]=="ppt" || extension[1]=="zip" || extension[1]=="rar"}}                                                            <span class="icon cf-icon icon-files_${extension[1]}"></span>                                                         {{else extension[1]}}                                                            <span class="icon cf-icon icon-files_other_doc"></span>                                                         {{/if}}                                                    {{/if}}                                                </div>                                                 <div class="botuploadedFileName">${extractedFileName}</div>                                             </div>                                         {{/if}}                                     </div>                                 </li>                             {{/if}}                         {{/each}}                     {{/if}}                 </scipt>':"carouselTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon">                             {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div aria-live="off" class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble tableChart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            <div class="carousel" id="carousel-one-by-one" style="height: 0px;">                                {{each(key, msgItem) msgData.message[0].component.payload.elements}}                                     <div class="slide">                                        {{if msgItem.image_url}}                                             <div class="carouselImageContent" {{if msgItem.default_action && msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action && msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action && msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action && msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}>                                                 <img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';"/>                                             </div>                                         {{/if}}                                         <div class="carouselTitleBox">                                             <p class="carouselTitle">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}</p>                                             {{if msgItem.subtitle}}<p class="carouselDescription">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}</p>{{/if}}                                             {{if msgItem.default_action && msgItem.default_action.type === "web_url"}}<div class="listItemPath carouselDefaultAction" type="url" url="${msgItem.default_action.url}">${msgItem.default_action.url}</div>{{/if}}                                             {{if msgItem.buttons}}                                                 {{each(key, msgBtn) msgItem.buttons}}                                                 <div {{if msgBtn.payload}} value="${msgBtn.payload}"{{/if}} {{if msgBtn.url}} url="${msgBtn.url}"{{/if}} class="listItemPath carouselButton" actual-value="${msgBtn.payload}" type="${msgBtn.type}">                                                        ${msgBtn.title}                                                    </div>                                                 {{/each}}                                             {{/if}}                                         </div>                                    </div>                                {{/each}}                             </div>                        </li>                     {{/if}}                </scipt>':"pieChartTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon piechart">                             {{if msgData.createdOn}}<div class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble pieChart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            <div id="d3Pie">                            </div>                            <div class="piechartDiv">                                <div class="lineChartChildDiv" id="piechart${msgData.messageId}"></div>                            </div>                        </li>                     {{/if}}                 </scipt>':"tableChartTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon tablechart">                             {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div aria-live="off" class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble tableChart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            <div class="tablechartDiv {{if msgData.message[0].component.payload.table_design && msgData.message[0].component.payload.table_design == "regular"}}regular{{else}}hide{{/if}}">                                <div style="overflow-x:auto; padding: 0 8px;">                                    <table cellspacing="0" cellpadding="0">                                        <tr class="headerTitle">                                            {{each(key, tableHeader) msgData.message[0].component.payload.columns}}                                                 <th {{if tableHeader[1]}}style="text-align:${tableHeader[1]};"{{/if}}>{{html helpers.convertMDtoHTML(tableHeader[0], "bot")}}</th>                                            {{/each}}                                         </tr>                                        {{each(key, tableRow) msgData.message[0].component.payload.elements}}                                             {{if tableRow.Values.length>1}}                                                <tr {{if key > 4}}class="hide"{{/if}}>                                                    {{each(cellkey, cellValue) tableRow.Values}}                                                         <td  {{if cellkey === tableRow.Values.length-1}}colspan="2"{{/if}} class=" {{if key == 0}} addTopBorder {{/if}}" {{if msgData.message[0].component.payload.columns[cellkey][1]}}style="text-align:${msgData.message[0].component.payload.columns[cellkey][1]};" {{/if}} title="{{html helpers.getInnerText(cellValue, "bot")}}">{{html helpers.convertMDtoHTML(cellValue, "bot")}}</td>                                                    {{/each}}                                                 </tr>                                            {{/if}}                                        {{/each}}                                     </table>                                </div>                                {{if msgData.message[0].component.payload.elements.length > 5 && msgData.message[0].component.payload.table_design && msgData.message[0].component.payload.table_design == "regular"}}<div class="showMore">Show more</div>{{/if}}                            </div>                             <div class="accordionTable {{if msgData.message[0].component.payload.table_design && msgData.message[0].component.payload.table_design == "regular"}}hide{{else}}responsive{{/if}}">                                {{each(key, tableRow) msgData.message[0].component.payload.elements}}                                     {{if key < 4}}                                        <div class="accordionRow">                                            {{each(cellkey, cellValue) tableRow.Values}}                                                 {{if cellkey < 2}}                                                    <div class="accordionCol">                                                        <div class="colTitle hideSdkEle">{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.columns[cellkey][0], "bot")}}</div>                                                        <div class="colVal">{{html helpers.convertMDtoHTML(cellValue, "bot")}}</div>                                                    </div>                                                {{else}}                                                    <div class="accordionCol hideSdkEle">                                                        <div class="colTitle">{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.columns[cellkey][0], "bot")}}</div>                                                        <div class="colVal">{{html helpers.convertMDtoHTML(cellValue, "bot")}}</div>                                                    </div>                                                {{/if}}                                            {{/each}}                                             <span class="fa fa-caret-right tableBtn"></span>                                        </div>                                    {{/if}}                                {{/each}}                                 <div class="showMore">Show more</div>                            </div>                        </li>                     {{/if}}                 </scipt>':"miniTableChartTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon tablechart">                             {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div aria-live="off" class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble tableChart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            {{each(key, table) msgData.message[0].component.payload.elements}}                                <div class="minitableDiv">                                    <div style="overflow-x:auto; padding: 0 8px;">                                        <table cellspacing="0" cellpadding="0">                                            <tr class="headerTitle">                                                {{each(key, tableHeader) table.primary}}                                                     <th {{if tableHeader[1]}}style="text-align:${tableHeader[1]};" {{/if}}>${tableHeader[0]}</th>                                                {{/each}}                                             </tr>                                            {{each(key, additional) table.additional}}                                                 <tr>                                                    {{each(cellkey, cellValue) additional}}                                                         <td  {{if cellkey === additional.length-1}}colspan="2"{{/if}}  {{if table.primary[cellkey][1]}}style="text-align:${table.primary[cellkey][1]};" {{/if}} title="${cellValue}">${cellValue}</td>                                                    {{/each}}                                                 </tr>                                            {{/each}}                                         </table>                                    </div>                                </div>                            {{/each}}                        </li>                     {{/if}}                 </scipt>':"miniTableHorizontalTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon tablechart">                             {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div aria-live="off" class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble tableChart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            <div class="carousel" id="carousel-one-by-one" style="height: 0px;">                                {{each(key, table) msgData.message[0].component.payload.elements}}                                    <div class="slide">                                        <div class="minitableDiv">                                            <div style="overflow-x:auto; padding: 0 8px;">                                                <table cellspacing="0" cellpadding="0">                                                    <tr class="headerTitle">                                                        {{each(key, tableHeader) table.primary}}                                                             <th {{if tableHeader[1]}}style="text-align:${tableHeader[1]};" {{/if}}>${tableHeader[0]}</th>                                                        {{/each}}                                                     </tr>                                                    {{each(key, additional) table.additional}}                                                         <tr>                                                            {{each(cellkey, cellValue) additional}}                                                                 <td  {{if cellkey === additional.length-1}}colspan="2"{{/if}}  {{if table.primary[cellkey][1]}}style="text-align:${table.primary[cellkey][1]};" {{/if}} title="${cellValue}">${cellValue}</td>                                                            {{/each}}                                                         </tr>                                                    {{/each}}                                                 </table>                                            </div>                                        </div>                                    </div>                                {{/each}}                            </div>                        </li>                     {{/if}}                 </scipt>':"barchartTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon barchart">                             {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div aria-live="off" class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble barchart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            <div class="barchartDiv">                                <div class="lineChartChildDiv" id="barchart${msgData.messageId}"></div>                            </div>                        </li>                     {{/if}}                 </scipt>':"linechartTemplate"===a?'<script id="chat_message_tmpl" type="text/x-jqury-tmpl">                     {{if msgData.message}}                         <li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon linechart">                             {{if msgData.createdOn}}<div aria-live="off" class="extra-info">${helpers.formatDate(msgData.createdOn)}</div>{{/if}}                             {{if msgData.icon}}<div aria-live="off" class="profile-photo extraBottom"> <div class="user-account avtar" style="background-image:url(${msgData.icon})"></div> </div> {{/if}}                             {{if msgData.message[0].component.payload.text}}<div class="messageBubble linechart">                                <span>{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}</span>                            </div>{{/if}}                            <div class="linechartDiv">                                <div class="lineChartChildDiv" id="linechart${msgData.messageId}"></div>                            </div>                        </li>                     {{/if}}                 </scipt>':"actionSheetTemplate"===a?'<script id="chat-window-listTemplate" type="text/x-jqury-tmpl">                    <div class="list-template-sheet hide">                        {{if msgData.message}}                             <div class="sheetHeader">                                <span class="choose">${msgData.message[0].component.payload.heading}</span>                                <button class="close-button" title="Close"><img src="data:image/svg+xml;base64,           PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>                            </div>                            <div class="listTemplateContainer" >                                <div class="displayMonth">                                    {{each(key, tab) tabs}}                                         <span class="tabs" data-tabid="${tab}"><span class="btnBG">${tab}</span></span>                                    {{/each}}                                </div>                                <ul class="displayListValues">                                    {{each(key, msgItem) dataItems}}                                         <li class="listViewTmplContentChild">                                                 {{if msgItem.image_url}}                                                     <div class="listViewRightContent" {{if msgItem.default_action && msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action && msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action && msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action && msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}>                                                         <img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';"/>                                                     </div>                                                 {{/if}}                                                     <div {{if msgItem.image_url}}class="listViewLeftContent pl-60"{{else}}class="listViewLeftContent"{{/if}} data-url="${msgItem.default_action.url}" data-title="${msgItem.default_action.title}" data-value="${msgItem.default_action.title}">                                                     <span class="titleDesc">                                                        <div class="listViewItemTitle" title="${msgItem.title}">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}</div>                                                             {{if msgItem.subtitle}}<div class="listViewItemSubtitle" title="${msgItem.subtitle}">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}</div>{{/if}}                                                         </span>                                                            {{if msgItem.value}}<div class="listViewItemValue" title="${msgItem.value}">{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.value, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.value, "user")}} {{/if}}</div>{{/if}}                                                     </div>                                            </li>                                     {{/each}}                                 </ul>                             </div>                        {{/if}}                    </div>                <\/script>':"iframe"===a?'<script id="chat_message_tmpl" type="text/x-jquery-tmpl">                     {{if link_url}}                        {{if (msgData && msgData.renderType ==="inline")}}                            <li class="inlineIframeContainer">                                 <div class="iframeBubble">                                         <div class="uiformComponent">                                        <div id="closeInlineModel" class="loading_form iframeLoader"></div>                                        <iframe id="inlineIframeModal" src="${link_url}"></iframe>                                         </div>                                </div>                            </li>                         {{else}}                            <iframe id="iframeModal" src="${link_url}"></iframe>                         {{/if}}                    {{else}}                        <div class="failedIframe">Failed to load iFrame</div>                    {{/if}}                <\/script>':"NotificationTmpl"===a?'<script id="notification_tmpl" type="tet/x-jqury-tmpl">                    {{if msgData.message}}                        <li {{if msgData.type !== "bot_response"}}id="msg_${msgItem.clientMessageId}"{{/if}} class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon notification">                             <div class="notificationTemplate">                                <div class="setLeftHeight"></div>                                <div class="setRightHeight"></div>                                <div title="${msgData.message[0].component.payload.text}" class="notificationHeader">${msgData.message[0].component.payload.text}                                </div>                                <div class="notificationDescp">                                    <div class="notificationImg">                                    {{if msgData.message[0].component.payload.image_url}} <div class="notificationImg">                                    <img alt="image" src="${msgData.message[0].component.payload.image_url}">                                    </div>{{/if}}                           </div>                                    <div class="titleDescp">                                        <div class="notificationTitle">${msgData.message[0].component.payload.title}                                        </div>                                        <div class="notificationSubtitle">${msgData.message[0].component.payload.subtitle}                                        </div>                                    </div>                                    <div class="btn-notification">                                    {{each(key, msgItem) msgData.message[0].component.payload.buttons}}                                    <div class="link" data-value="${msgItem.postback.value}">${msgItem.name}</div>                                    {{/each}}                                    </div>                                </div>                            </div>                        </li>                    {{/if}}                <\/script>':c},window.onbeforeunload=function(){rb&&a(rb.config.chatContainer).length>0&&rb.destroy()},this.addListener=function(a,b){Ea||(Ea={}),a&&a.trim().length>0&&(Ea[a]||(Ea[a]=[]),"function"==typeof b&&Ea[a].push(b))},this.removeListener=function(a){Ea&&Ea[a]&&delete Ea[a]},this.callListener=function(a,b){if(Ea&&Ea[a])for(var c=0;c<Ea[a].length;c++)"function"==typeof Ea[a][c]&&Ea[a][c].call(this,b)},this.show=function(a){return console.log("Show function executed."),console.log("Show function configurations.",a),a.chatHistory=this.chatHistory,a.handleError=this.showError,a.widgetSDKInstace&&this.addWidgetEvents(a),rb=new f(a),tb=new customTemplate(a,rb),this},this.addWidgetEvents=function(b){if(b){b.widgetSDKInstace.events.onPostback=function(b){a(".chatInputBox").text(b.payload),rb.sendMessage(a(".chatInputBox"),b.utterance,b)}}},this.setWidgetInstance=function(a){a&&(rb.config.widgetSDKInstace=a,this.addWidgetEvents(rb.config))},this.destroy=function(){rb&&rb.destroy&&(Ea={},rb.destroy()),bb&&(bb.close(),bb=null),window.removeEventListener("online",l),window.removeEventListener("offline",l)},this.initToken=function(a){Ia="bearer "+a.accessToken},this.hideError=function(){a(".errorMsgBlock").removeClass("showError")},this.showError=function(b){try{b=JSON.parse(b),b.errors&&b.errors[0]&&(a(".errorMsgBlock").text(b.errors[0].msg),a(".errorMsgBlock").addClass("showError"))}catch(c){a(".errorMsgBlock").text(b),a(".errorMsgBlock").addClass("showError")}},this.botDetails=function(b,c){if(b){""!==b.botName?(chatContainerConfig.config.chatTitle=b.botName,a(".kore-chat-header .header-title").html(chatContainerConfig.config.chatTitle).attr("title",chatContainerConfig.config.chatTitle)):(chatContainerConfig.config.chatTitle=chatContainerConfig.config.botOptions.botInfo.chatBot,a(".kore-chat-header .header-title").html(chatContainerConfig.config.chatTitle).attr("title",chatContainerConfig.config.chatTitle));var d={botchatBgColor:"bot-chat-bubble-background-color",botchatTextColor:"bot-chat-bubble-text-color",buttonActiveBgColor:"button-active-background-color",buttonActiveTextColor:"button-active-text-color",buttonInactiveBgColor:"button-inactive-background-color",buttonInactiveTextColor:"button-inactive-text-color",userchatBgColor:"user-chat-bubble-background-color",userchatTextColor:"user-chat-bubble-text-color",widgetBodyColor:"widget-body-color",widgetFooterColor:"widget-footer-color",widgetHeaderColor:"widget-header-color",widgetTextColor:"widget-text-color",widgetBorderColor:"widget-border-color",widgetDividerColor:"widget-divider-color"},e="";for(var f in b)"bankLogo"==f&&""!==b[f]||("theme"!==f&&"widgetBgImage"!==f&&"assistantLogo"!==f?(e="--custom-"+d[f],document.documentElement.style.setProperty(e,b[f])):"widgetBgImage"==f&&""!==b[f]?(a(".kore-chat-body").css("background-image","url("+b.widgetBgImage+")"),a(".kore-chat-body").css("background-repeat","no-repeat"),a(".kore-chat-body").css("background-position","center")):"widgetBgImage"==f&&""==b[f]?(a(".kore-chat-body").css("background-image","url("+b.widgetBgImage+")"),a(".kore-chat-body").css("background-repeat","no-repeat"),a(".kore-chat-body").css("background-position","center")):"assistantLogo"==f&&""!==b[f]&&setTimeout(function(){a(".kore-chat-window .kore-chat-header .header-profile-avtar").css("background-image","url("+b.assistantLogo+")"),a(".kore-chat-window .kore-chat-header .header-profile-avtar").css("background-repeat","no-repeat"),a(".kore-chat-window .kore-chat-header .header-profile-avtar").css("background-position","center")},1e3));a(".kore-chat-window").addClass("customBranding-theme")}},this.chatHistory=function(b){var c=window.chatContainerConfig;"historysync"===b[2]?b&&b[1]&&b[1].messages.length>0&&b[1].messages.forEach(function(a,d){setTimeout(function(){if("outgoing"===a.type||"bot_response"===a.type){a.fromHistorySync=!0;try{a.message[0].cInfo.body=JSON.parse(a.message[0].cInfo.body),a.message[0].cInfo.body&&a.message[0].cInfo.body.text&&(a.message[0].cInfo.body=a.message[0].cInfo.body.text),a.message[0].component=a.message[0].cInfo.body,"dropdown_template"===a.message[0].component.payload.template_type&&(a.message[0].component.selectedValue=b[1].messages[d+1].message[0].cInfo.body),"feedbackTemplate"===a.message[0].component.payload.template_type&&(a.message[0].cInfo.body="Rate this chat session"),a.message[0].component&&a.message[0].component.payload&&(a.message[0].component.payload.videoUrl||a.message[0].component.payload.audioUrl)&&(a.message[0].cInfo.body=""),c.renderMessage(a)}catch(b){c.renderMessage(a)}}},100*d)}):Ta&&(Ka=!0,b&&b[1]&&b[1].messages.length>0?(a(".chat-container").hide(),a(".historyLoadingDiv").addClass("showMsg"),b[1].messages.forEach(function(d,e){setTimeout(function(f){if(!f.filter(function(a){return a.messageId===d.messageId}).length)try{d.message[0].cInfo.body=JSON.parse(d.message[0].cInfo.body),d.message[0].cInfo.body&&d.message[0].cInfo.body.text&&(d.message[0].cInfo.body=d.message[0].cInfo.body.text),d.message[0].component=d.message[0].cInfo.body,"dropdown_template"===d.message[0].component.payload.template_type&&(d.message[0].component.payload.fromHistory=!0,d.message[0].component.selectedValue=b[1].messages[e+1].message[0].cInfo.body),"multi_select"!==d.message[0].component.payload.template_type&&"advanced_multi_select"!==d.message[0].component.payload.template_type||(d.message[0].component.payload.fromHistory=!0),"form_template"===d.message[0].component.payload.template_type&&(d.message[0].component.payload.fromHistory=!0),"tableList"===d.message[0].component.payload.template_type&&(d.message[0].component.payload.fromHistory=!0),"listView"===d.message[0].component.payload.template_type&&(d.message[0].component.payload.fromHistory=!0),"feedbackTemplate"===d.message[0].component.payload.template_type&&(d.message[0].component.payload.fromHistory=!0,d.message[0].cInfo.body="Rate this chat session"),d.message[0].component&&d.message[0].component.payload&&(d.message[0].component.payload.videoUrl||d.message[0].component.payload.audioUrl)&&(d.message[0].cInfo.body=""),c.renderMessage(d)}catch(a){c.renderMessage(d)}e===b[1].messages.length-1&&setTimeout(function(b){a(".chat-container").show(),a(".chat-container").animate({scrollTop:a(".chat-container").prop("scrollHeight")},2500),a(".historyLoadingDiv").removeClass("showMsg"),a(".chat-container").append("<div class='endChatContainer' aria-live='off' aria-hidden='true' ><span class='endChatContainerText'>End of chat history</span></div>"),b.length?b.forEach(function(d,e){c.renderMessage(d),b.length-1===e&&(b=[],setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1}))}):setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1})},500,f)},100*e,Ja)})):setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1}))};var wb="",xb=!1,yb=null,zb="";setTimeout(function(){ab&&(window.initGapi?initGapi():console.warn("Please uncomment Google Speech files('speech/app.js','speech/key.js' and 'client_api.js' in index.html"))},2e3),"webkitSpeechRecognition"in window&&t()&&(yb=new window.webkitSpeechRecognition,wb="",yb.continuous=!0,yb.interimResults=!0,yb.onstart=function(){zb="",xb=!0,a(".recordingMicrophone").css("display","block"),a(".notRecordingMicrophone").css("display","none")},yb.onerror=function(b){console.log(b.error),a(".recordingMicrophone").trigger("click"),a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone").css("display","block")},yb.onend=function(){xb=!1,a(".recordingMicrophone").trigger("click"),a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone").css("display","block")},yb.onresult=function(b){wb="";for(var c="",d=b.resultIndex;d<b.results.length;++d)b.results[d].isFinal?wb+=b.results[d][0].transcript:c+=b.results[d][0].transcript;wb=w(wb),wb=v(wb),c=v(c),""!==wb&&(zb+=wb),xb&&(a(".chatInputBox").html(zb+""+c),a(".sendButton").removeClass("disabled")),setTimeout(function(){r(document.getElementsByClassName("chatInputBox")),document.getElementsByClassName("chatInputBox")[0].scrollTop=document.getElementsByClassName("chatInputBox")[0].scrollHeight},350)});var Ab=/\n\n/g,Bb=/\n/g;a(window).on("beforeunload",function(){D()}),L(),aa.prototype.append=function(a,b){this._fields.push([a,b])},aa.prototype.toString=function(){var a=this.boundary,b="";return this._fields.forEach(function(c){if(b+="--"+a+"\r\n",c[1].data){var d=c[1];d.fileName?b+='Content-Disposition: form-data; name="'+c[0]+'"; filename="'+d.fileName+'"':b+='Content-Disposition: form-data; name="'+c[0]+'"',b+="\r\n",d.type&&(b+="Content-Type: UTF-8; charset=ISO-8859-1\r\n"),b+="Content-Transfer-Encoding: base64\r\n",b+="\r\n"+d.data+"\r\n"}else b+='Content-Disposition: form-data; name="'+c[0]+'";\r\n\r\n',b+=c[1]+"\r\n"}),b+="--"+a+"--"},ba.prototype.events={error:a.Event("error.ke.uploader"),progressChange:a.Event("progress.ke.uploader"),success:a.Event("success.ke.uploader")};var Cb=a.fn.uploader;return a.fn.uploader=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e="";return options="object"==typeof b&&b,e?b&&("string"==typeof b&&e[b]?e[b].apply(e,c):options&&la(ga(e,options))):d.data("ke.uploader",e=new ba(d,options)),b&&e[b]&&e[b].apply(e,c)})},a.fn.uploader.Constructor=ba,a.fn.uploader.noConflict=function(){return a.fn.uploader=Cb,this},function(){function a(){var a=!1;return(a=new XMLHttpRequest)||("undefined"!=typeof XDomainRequest?new XDomainRequest:a)}function b(){var b=a();if(!b)throw"Unsupported HTTP Connection";try{b.withCredentials=!0}catch(a){}return b.onreadystatechange=function(){return b.onReadyStateChange&&b.onReadyStateChange.call(b)},b}qb.net.HttpRequest=b}(),{initToken:initToken,addListener:addListener,removeListener:removeListener,show:show,destroy:destroy,showError:showError,botDetails:botDetails,chatHistory:chatHistory,addWidgetEvents:addWidgetEvents,setWidgetInstance:setWidgetInstance}}(a)}}),function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){"use strict";a.dateRangePickerLanguages={default:{selected:"Selected:",day:"Day",days:"Days",apply:"Close","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W","month-name":["january","february","march","april","may","june","july","august","september","october","november","december"],shortcuts:"Shortcuts","custom-values":"Custom Values",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range",time:"Time",hour:"Hour",minute:"Minute"},id:{selected:"Terpilih:",day:"Hari",days:"Hari",apply:"Tutup","week-1":"sen","week-2":"sel","week-3":"rab","week-4":"kam","week-5":"jum","week-6":"sab","week-7":"min","week-number":"W","month-name":["januari","februari","maret","april","mei","juni","juli","agustus","september","oktober","november","desember"],shortcuts:"Pintas","custom-values":"Nilai yang ditentukan",past:"Yang Lalu",following:"Mengikuti",previous:"Sebelumnya","prev-week":"Minggu","prev-month":"Bulan","prev-year":"Tahun",next:"Selanjutnya","next-week":"Minggu","next-month":"Bulan","next-year":"Tahun","less-than":"Tanggal harus lebih dari %d hari","more-than":"Tanggal harus kurang dari %d hari","default-more":"Jarak tanggal harus lebih lama dari %d hari","default-single":"Silakan pilih tanggal","default-less":"Jarak rentang tanggal tidak boleh lebih lama dari %d hari","default-range":"Rentang tanggal harus antara %d dan %d hari","default-default":"Silakan pilih rentang tanggal",time:"Waktu",hour:"Jam",minute:"Menit"},az:{selected:"Seçildi:",day:" gün",days:" gün",apply:"tətbiq","week-1":"1","week-2":"2","week-3":"3","week-4":"4","week-5":"5","week-6":"6","week-7":"7","month-name":["yanvar","fevral","mart","aprel","may","iyun","iyul","avqust","sentyabr","oktyabr","noyabr","dekabr"],shortcuts:"Qısayollar",past:"Keçmiş",following:"Növbəti",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"Öncəki həftə","prev-month":"Öncəki ay","prev-year":"Öncəki il",next:"&nbsp;&nbsp;&nbsp;","next-week":"Növbəti həftə","next-month":"Növbəti ay","next-year":"Növbəti il","less-than":"Tarix aralığı %d gündən çox olmamalıdır","more-than":"Tarix aralığı %d gündən az olmamalıdır","default-more":"%d gündən çox bir tarix seçin","default-single":"Tarix seçin","default-less":"%d gündən az bir tarix seçin","default-range":"%d və %d gün aralığında tarixlər seçin","default-default":"Tarix aralığı seçin"},bg:{selected:"Избрано:",day:"Ден",days:"Дни",apply:"Затвори","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"нд","week-number":"С","month-name":["януари","февруари","март","април","май","юни","юли","август","септември","октомври","ноември","декември"],shortcuts:"Преки пътища","custom-values":"Персонализирани стойности",past:"Минал",following:"Следващ",previous:"Предишен","prev-week":"Седмица","prev-month":"Месец","prev-year":"Година",next:"Следващ","next-week":"Седмица","next-month":"Месец","next-year":"Година","less-than":"Периодът от време не трябва да е повече от %d дни","more-than":"Периодът от време не трябва да е по-малко от %d дни","default-more":"Моля изберете период по-дълъг от %d дни","default-single":"Моля изберете дата","default-less":"Моля изберете период по-къс от %d дни","default-range":"Моля изберете период между %d и %d дни","default-default":"Моля изберете период",time:"Време",hour:"Час",minute:"Минута"},cn:{selected:"已选择:",day:"天",days:"天",apply:"确定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","week-number":"周","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortcuts:"快捷选择",past:"过去",following:"将来",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"上周","prev-month":"上个月","prev-year":"去年",next:"&nbsp;&nbsp;&nbsp;","next-week":"下周","next-month":"下个月","next-year":"明年","less-than":"所选日期范围不能大于%d天","more-than":"所选日期范围不能小于%d天","default-more":"请选择大于%d天的日期范围","default-less":"请选择小于%d天的日期范围","default-range":"请选择%d天到%d天的日期范围","default-single":"请选择一个日期","default-default":"请选择一个日期范围",time:"时间",hour:"小时",minute:"分钟"},cz:{selected:"Vybráno:",day:"Den",days:"Dny",apply:"Zavřít","week-1":"po","week-2":"út","week-3":"st","week-4":"čt","week-5":"pá","week-6":"so","week-7":"ne","month-name":["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],shortcuts:"Zkratky",past:"po",following:"následující",previous:"předchozí","prev-week":"týden","prev-month":"měsíc","prev-year":"rok",next:"další","next-week":"týden","next-month":"měsíc","next-year":"rok","less-than":"Rozsah data by neměl být větší než %d dnů","more-than":"Rozsah data by neměl být menší než %d dnů","default-more":"Prosím zvolte rozsah data větší než %d dnů","default-single":"Prosím zvolte datum","default-less":"Prosím zvolte rozsah data menší než %d dnů","default-range":"Prosím zvolte rozsah data mezi %d a %d dny","default-default":"Prosím zvolte rozsah data"},de:{selected:"Auswahl:",day:"Tag",days:"Tage",apply:"Schließen","week-1":"mo","week-2":"di","week-3":"mi","week-4":"do","week-5":"fr","week-6":"sa","week-7":"so","month-name":["januar","februar","märz","april","mai","juni","juli","august","september","oktober","november","dezember"],shortcuts:"Schnellwahl",past:"Vorherige",following:"Folgende",previous:"Vorherige","prev-week":"Woche","prev-month":"Monat","prev-year":"Jahr",next:"Nächste","next-week":"Woche","next-month":"Monat","next-year":"Jahr","less-than":"Datumsbereich darf nicht größer sein als %d Tage","more-than":"Datumsbereich darf nicht kleiner sein als %d Tage","default-more":"Bitte mindestens %d Tage auswählen","default-single":"Bitte ein Datum auswählen","default-less":"Bitte weniger als %d Tage auswählen","default-range":"Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen","default-default":"Bitte ein Start- und Enddatum auswählen",Time:"Zeit",hour:"Stunde",minute:"Minute"},es:{selected:"Seleccionado:",day:"Día",days:"Días",apply:"Cerrar","week-1":"lu","week-2":"ma","week-3":"mi","week-4":"ju","week-5":"vi","week-6":"sa","week-7":"do","month-name":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortcuts:"Accesos directos",past:"Pasado",following:"Siguiente",previous:"Anterior","prev-week":"Semana","prev-month":"Mes","prev-year":"Año",next:"Siguiente","next-week":"Semana","next-month":"Mes","next-year":"Año","less-than":"El rango no debería ser mayor de %d días","more-than":"El rango no debería ser menor de %d días","default-more":"Por favor selecciona un rango mayor a %d días","default-single":"Por favor selecciona un día","default-less":"Por favor selecciona un rango menor a %d días","default-range":"Por favor selecciona un rango entre %d y %d días","default-default":"Por favor selecciona un rango de fechas."},fr:{selected:"Sélection:",day:"Jour",days:"Jours",apply:"Fermer","week-1":"lu","week-2":"ma","week-3":"me","week-4":"je","week-5":"ve","week-6":"sa","week-7":"di","month-name":["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortcuts:"Raccourcis",past:"Passé",following:"Suivant",previous:"Précédent","prev-week":"Semaine","prev-month":"Mois","prev-year":"Année",next:"Suivant","next-week":"Semaine","next-month":"Mois","next-year":"Année","less-than":"L'intervalle ne doit pas être supérieure à %d jours","more-than":"L'intervalle ne doit pas être inférieure à %d jours","default-more":"Merci de choisir une intervalle supérieure à %d jours","default-single":"Merci de choisir une date","default-less":"Merci de choisir une intervalle inférieure %d jours","default-range":"Merci de choisir une intervalle comprise entre %d et %d jours","default-default":"Merci de choisir une date"},hu:{selected:"Kiválasztva:",day:"Nap",days:"Nap",apply:"Ok","week-1":"h","week-2":"k","week-3":"sz","week-4":"cs","week-5":"p","week-6":"sz","week-7":"v","month-name":["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortcuts:"Gyorsválasztó",past:"Múlt",following:"Következő",previous:"Előző","prev-week":"Hét","prev-month":"Hónap","prev-year":"Év",next:"Következő","next-week":"Hét","next-month":"Hónap","next-year":"Év","less-than":"A kiválasztás nem lehet több %d napnál","more-than":"A kiválasztás nem lehet több %d napnál","default-more":"Válassz ki egy időszakot ami hosszabb mint %d nap","default-single":"Válassz egy napot","default-less":"Válassz ki egy időszakot ami rövidebb mint %d nap","default-range":"Válassz ki egy %d - %d nap hosszú időszakot","default-default":"Válassz ki egy időszakot"},it:{selected:"Selezionati:",day:"Giorno",days:"Giorni",apply:"Chiudi","week-1":"lu","week-2":"ma","week-3":"me","week-4":"gi","week-5":"ve","week-6":"sa","week-7":"do","month-name":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortcuts:"Scorciatoie",past:"Scorso",following:"Successivo",previous:"Precedente","prev-week":"Settimana","prev-month":"Mese","prev-year":"Anno",next:"Prossimo","next-week":"Settimana","next-month":"Mese","next-year":"Anno","less-than":"L'intervallo non dev'essere maggiore di %d giorni","more-than":"L'intervallo non dev'essere minore di %d giorni","default-more":"Seleziona un intervallo maggiore di %d giorni","default-single":"Seleziona una data","default-less":"Seleziona un intervallo minore di %d giorni","default-range":"Seleziona un intervallo compreso tra i %d e i %d giorni","default-default":"Seleziona un intervallo di date"},ko:{selected:"기간:",day:"일",days:"일간",apply:"닫기","week-1":"월","week-2":"화","week-3":"수","week-4":"목","week-5":"금","week-6":"토","week-7":"일","week-number":"주","month-name":["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortcuts:"단축키들",past:"지난(오늘기준)",following:"이후(오늘기준)",previous:"이전","prev-week":"1주","prev-month":"1달","prev-year":"1년",next:"다음","next-week":"1주","next-month":"1달","next-year":"1년","less-than":"날짜 범위는 %d 일보다 많을 수 없습니다","more-than":"날짜 범위는 %d 일보다 작을 수 없습니다","default-more":"날짜 범위를 %d 일보다 길게 선택해 주세요","default-single":"날짜를 선택해 주세요","default-less":"%d 일보다 작은 날짜를 선택해 주세요","default-range":"%d와 %d 일 사이의 날짜 범위를 선택해 주세요","default-default":"날짜 범위를 선택해 주세요",time:"시각",hour:"시",minute:"분"},no:{selected:"Valgt:",day:"Dag",days:"Dager",apply:"Lukk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lø","week-7":"sø","month-name":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],shortcuts:"Snarveier","custom-values":"Egendefinerte Verdier",past:"Over",following:"Følger",previous:"Forrige","prev-week":"Uke","prev-month":"Måned","prev-year":"År",next:"Neste","next-week":"Uke","next-month":"Måned","next-year":"År","less-than":"Datoperioden skal ikkje være lengre enn %d dager","more-than":"Datoperioden skal ikkje være kortere enn %d dager","default-more":"Vennligst velg ein datoperiode lengre enn %d dager","default-single":"Vennligst velg ein dato","default-less":"Vennligst velg ein datoperiode mindre enn %d dager","default-range":"Vennligst velg ein datoperiode mellom %d og %d dager","default-default":"Vennligst velg ein datoperiode",time:"Tid",hour:"Time",minute:"Minutter"},nl:{selected:"Geselecteerd:",day:"Dag",days:"Dagen",apply:"Ok","week-1":"ma","week-2":"di","week-3":"wo","week-4":"do","week-5":"vr","week-6":"za","week-7":"zo","month-name":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortcuts:"Snelkoppelingen","custom-values":"Aangepaste waarden",past:"Verleden",following:"Komend",previous:"Vorige","prev-week":"Week","prev-month":"Maand","prev-year":"Jaar",next:"Volgende","next-week":"Week","next-month":"Maand","next-year":"Jaar","less-than":"Interval moet langer dan %d dagen zijn","more-than":"Interval mag niet minder dan %d dagen zijn","default-more":"Selecteer een interval langer dan %dagen","default-single":"Selecteer een datum","default-less":"Selecteer een interval minder dan %d dagen","default-range":"Selecteer een interval tussen %d en %d dagen","default-default":"Selecteer een interval",time:"Tijd",hour:"Uur",minute:"Minuut"},ru:{selected:"Выбрано:",day:"День",days:"Дней",apply:"Применить","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"вс","month-name":["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],shortcuts:"Быстрый выбор","custom-values":"Пользовательские значения",past:"Прошедшие",following:"Следующие",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"Неделя","prev-month":"Месяц","prev-year":"Год",next:"&nbsp;&nbsp;&nbsp;","next-week":"Неделя","next-month":"Месяц","next-year":"Год","less-than":"Диапазон не может быть больше %d дней","more-than":"Диапазон не может быть меньше %d дней","default-more":"Пожалуйста выберите диапазон больше %d дней","default-single":"Пожалуйста выберите дату","default-less":"Пожалуйста выберите диапазон меньше %d дней","default-range":"Пожалуйста выберите диапазон между %d и %d днями","default-default":"Пожалуйста выберите диапазон",time:"Время",hour:"Часы",minute:"Минуты"},uk:{selected:"Вибрано:",day:"День",days:"Днів",apply:"Застосувати","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"нд","month-name":["січень","лютий","березень","квітень","травень","червень","липень","серпень","вересень","жовтень","листопад","грудень"],shortcuts:"Швидкий вибір","custom-values":"Значення користувача",past:"Минулі",following:"Наступні",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"Тиждень","prev-month":"Місяць","prev-year":"Рік",next:"&nbsp;&nbsp;&nbsp;","next-week":"Тиждень","next-month":"Місяць","next-year":"Рік","less-than":"Діапазон не може бути більш ніж %d днів","more-than":"Діапазон не може бути меньш ніж %d днів","default-more":"Будь ласка виберіть діапазон більше %d днів","default-single":"Будь ласка виберіть дату","default-less":"Будь ласка виберіть діапазон менше %d днів","default-range":"Будь ласка виберіть діапазон між %d та %d днями","default-default":"Будь ласка виберіть діапазон",time:"Час",hour:"Години",minute:"Хвилини"},pl:{selected:"Wybrany:",day:"Dzień",days:"Dni",apply:"Zamknij","week-1":"pon","week-2":"wt","week-3":"śr","week-4":"czw","week-5":"pt","week-6":"so","week-7":"nd","month-name":["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],shortcuts:"Skróty","custom-values":"Niestandardowe wartości",past:"Przeszłe",following:"Następne",previous:"Poprzednie","prev-week":"tydzień","prev-month":"miesiąc","prev-year":"rok",next:"Następny","next-week":"tydzień","next-month":"miesiąc","next-year":"rok","less-than":"Okres nie powinien być dłuższy niż %d dni","more-than":"Okres nie powinien być krótszy niż  %d ni","default-more":"Wybierz okres dłuższy niż %d dni","default-single":"Wybierz datę","default-less":"Wybierz okres krótszy niż %d dni","default-range":"Wybierz okres trwający od %d do %d dni","default-default":"Wybierz okres",time:"Czas",hour:"Godzina",minute:"Minuta"},se:{selected:"Vald:",day:"dag",days:"dagar",apply:"godkänn","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lö","week-7":"sö","month-name":["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],shortcuts:"genvägar","custom-values":"Anpassade värden",past:"över",following:"följande",previous:"förra","prev-week":"vecka","prev-month":"månad","prev-year":"år",next:"nästa","next-week":"vecka","next-month":"måned","next-year":"år","less-than":"Datumintervall bör inte vara mindre än %d dagar","more-than":"Datumintervall bör inte vara mer än %d dagar","default-more":"Välj ett datumintervall längre än %d dagar","default-single":"Välj ett datum","default-less":"Välj ett datumintervall mindre än %d dagar","default-range":"Välj ett datumintervall mellan %d och %d dagar","default-default":"Välj ett datumintervall",time:"tid",hour:"timme",minute:"minut"},pt:{selected:"Selecionado:",day:"Dia",days:"Dias",apply:"Fechar","week-1":"seg","week-2":"ter","week-3":"qua","week-4":"qui","week-5":"sex","week-6":"sab","week-7":"dom","week-number":"N","month-name":["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortcuts:"Atalhos","custom-values":"Valores Personalizados",past:"Passado",following:"Seguinte",previous:"Anterior","prev-week":"Semana","prev-month":"Mês","prev-year":"Ano",next:"Próximo","next-week":"Próxima Semana","next-month":"Próximo Mês","next-year":"Próximo Ano","less-than":"O período selecionado não deve ser maior que %d dias","more-than":"O período selecionado não deve ser menor que %d dias","default-more":"Selecione um período superior a %d dias","default-single":"Selecione uma data","default-less":"Selecione um período inferior a %d dias","default-range":"Selecione um período de %d a %d dias","default-default":"Selecione um período",time:"Tempo",hour:"Hora",minute:"Minuto"},tc:{selected:"已選擇:",day:"天",days:"天",apply:"確定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","week-number":"周","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortcuts:"快速選擇",past:"過去",following:"將來",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"上週","prev-month":"上個月","prev-year":"去年",next:"&nbsp;&nbsp;&nbsp;","next-week":"下周","next-month":"下個月","next-year":"明年","less-than":"所選日期範圍不能大於%d天","more-than":"所選日期範圍不能小於%d天","default-more":"請選擇大於%d天的日期範圍","default-less":"請選擇小於%d天的日期範圍","default-range":"請選擇%d天到%d天的日期範圍","default-single":"請選擇一個日期","default-default":"請選擇一個日期範圍",time:"日期",hour:"小時",minute:"分鐘"},ja:{selected:"選択しました:",day:"日",days:"日々",apply:"閉じる","week-1":"月","week-2":"火","week-3":"水","week-4":"木","week-5":"金","week-6":"土","week-7":"日","month-name":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],shortcuts:"クイック選択",past:"過去",following:"将来",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"先週、","prev-month":"先月","prev-year":"昨年",next:"&nbsp;&nbsp;&nbsp;","next-week":"来週","next-month":"来月","next-year":"来年","less-than":"日付の範囲は ％d 日以上にすべきではありません","more-than":"日付の範囲は ％d 日を下回ってはいけません","default-more":"％d 日よりも長い期間を選択してください","default-less":"％d 日未満の期間を選択してください","default-range":"％d と％ d日の間の日付範囲を選択してください","default-single":"日付を選択してください","default-default":"日付範囲を選択してください",time:"時間",hour:"時間",minute:"分"},da:{selected:"Valgt:",day:"Dag",days:"Dage",apply:"Luk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lö","week-7":"sö","month-name":["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],shortcuts:"genveje","custom-values":"Brugerdefinerede værdier",past:"Forbi",following:"Følgende",previous:"Forrige","prev-week":"uge","prev-month":"månad","prev-year":"år",next:"Næste","next-week":"Næste uge","next-month":"Næste måned","next-year":"Næste år","less-than":"Dato interval bør ikke være med end %d dage","more-than":"Dato interval bør ikke være mindre end %d dage","default-more":"Vælg datointerval længere end %d dage","default-single":"Vælg dato","default-less":"Vælg datointerval mindre end %d dage","default-range":"Vælg datointerval mellem %d og %d dage","default-default":"Vælg datointerval",time:"tid",hour:"time",minute:"minut"},fi:{selected:"Valittu:",day:"Päivä",days:"Päivää",apply:"Sulje","week-1":"ma","week-2":"ti","week-3":"ke","week-4":"to","week-5":"pe","week-6":"la","week-7":"su","week-number":"V","month-name":["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortcuts:"Pikavalinnat","custom-values":"Mukautetut Arvot",past:"Menneet",following:"Tulevat",previous:"Edellinen","prev-week":"Viikko","prev-month":"Kuukausi","prev-year":"Vuosi",next:"Seuraava","next-week":"Viikko","next-month":"Kuukausi","next-year":"Vuosi","less-than":"Aikajakson tulisi olla vähemmän kuin %d päivää","more-than":"Aikajakson ei tulisi olla vähempää kuin %d päivää","default-more":"Valitse pidempi aikajakso kuin %d päivää","default-single":"Valitse päivä","default-less":"Valitse lyhyempi aikajakso kuin %d päivää","default-range":"Valitse aikajakso %d ja %d päivän väliltä","default-default":"Valitse aikajakso",time:"Aika",hour:"Tunti",minute:"Minuutti"},cat:{selected:"Seleccionats:",day:"Dia",days:"Dies",apply:"Tanca","week-1":"Dl","week-2":"Dm","week-3":"Dc","week-4":"Dj","week-5":"Dv","week-6":"Ds","week-7":"Dg","week-number":"S","month-name":["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortcuts:"Dreçeres","custom-values":"Valors personalitzats",past:"Passat",following:"Futur",previous:"Anterior","prev-week":"Setmana","prev-month":"Mes","prev-year":"Any",next:"Següent","next-week":"Setmana","next-month":"Mes","next-year":"Any","less-than":"El període no hauria de ser de més de %d dies","more-than":"El període no hauria de ser de menys de %d dies","default-more":"Perfavor selecciona un període més gran de %d dies","default-single":"Perfavor selecciona una data","default-less":"Perfavor selecciona un període de menys de %d dies","default-range":"Perfavor selecciona un període d'entre %d i %d dies","default-default":"Perfavor selecciona un període",time:"Temps",hour:"Hora",minute:"Minut"}},a.fn.dateRangePicker=function(c){function d(b,c){return c.contains(b.target)||b.target==c||void 0!=c.childNodes&&a.inArray(b.target,c.childNodes)>=0}function e(){function d(b){var d=a(b).parents("table").hasClass("month2"),e=d?c.month2:c.month1;e=U(e),!c.singleMonth&&!c.singleDate&&!d&&S(e,c.month2)>=0||$(e)||(G(e,d?"month2":"month1"),P())}function e(a){var b=U(c.month1),d=U(c.month2);$(d)||!c.singleDate&&S(b,d)>=0||(G(b,"month1"),G(d,"month2"),F())}function g(b){var d=a(b).parents("table").hasClass("month2"),e=d?c.month2:c.month1;e=V(e),d&&S(e,c.month1)<=0||$(e)||(G(e,d?"month2":"month1"),P())}function h(a){var b=V(c.month1),d=V(c.month2);$(b)||!c.singleDate&&S(d,b)<=0||(G(d,"month2"),G(b,"month1"),F())}var i=this;if(a(this).data("date-picker-opened"))return void Q();a(this).data("date-picker-opened",!0),ja=X().hide(),ja.append('<div class="date-range-length-tip"></div>'),a(c.container).append(ja),c.inline?ja.addClass("inline-wrapper"):f(),c.alwaysOpen&&ja.find(".apply-btn").hide();var j=ga();if(ha(j),c.time.enabled)if(c.startDate&&c.endDate||c.start&&c.end)M(b(c.start||c.startDate).toDate(),"time1"),M(b(c.end||c.endDate).toDate(),"time2");else{var l=c.defaultEndTime?c.defaultEndTime:j;M(j,"time1"),M(l,"time2")}var m="";m=fa(c.singleDate?"default-single":c.minDays&&c.maxDays?"default-range":c.minDays?"default-more":c.maxDays?"default-less":"default-default"),ja.find(".default-top").html(m.replace(/\%d/,c.minDays).replace(/\%d/,c.maxDays)),c.singleMonth?ja.addClass("single-month"):ja.addClass("two-months"),setTimeout(function(){k(),ma=!0},0),ja.click(function(a){a.stopPropagation()}),a(document).on("click.datepicker",ia),ja.find(".next").click(function(){c.stickyMonths?e(this):d(this)}),ja.find(".prev").click(function(){c.stickyMonths?h(this):g(this)}),ja.attr("unselectable","on").css("user-select","none").on("selectstart",function(a){return a.preventDefault(),!1}),ja.find(".apply-btn").click(function(){Q();var b=O(new Date(c.start))+c.separator+O(new Date(c.end));a(i).trigger("datepicker-apply",{value:b,date1:new Date(c.start),date2:new Date(c.end)})}),ja.find("[custom]").click(function(){var b=a(this).attr("custom");c.start=!1,c.end=!1,ja.find(".day.checked").removeClass("checked"),c.setValue.call(oa,b),A(),B(!0),F(),c.autoClose&&Q()}),ja.find("[shortcut]").click(function(){var b,d=a(this).attr("shortcut"),e=new Date,f=!1;if(-1!=d.indexOf("day")){var g=parseInt(d.split(",",2)[1],10);f=new Date((new Date).getTime()+864e5*g),e=new Date(e.getTime()+864e5*(g>0?1:-1))}else if(-1!=d.indexOf("week")){b=-1!=d.indexOf("prev,")?-1:1;var h;for(h=1==b?"monday"==c.startOfWeek?1:0:"monday"==c.startOfWeek?0:6,e=new Date(e.getTime()-864e5);e.getDay()!=h;)e=new Date(e.getTime()+864e5*b);f=new Date(e.getTime()+864e5*b*6)}else if(-1!=d.indexOf("month"))b=-1!=d.indexOf("prev,")?-1:1,f=1==b?U(e):V(e),f.setDate(1),e=U(f),e.setDate(1),e=new Date(e.getTime()-864e5);else if(-1!=d.indexOf("year"))b=-1!=d.indexOf("prev,")?-1:1,f=new Date,f.setFullYear(e.getFullYear()+b),f.setMonth(0),f.setDate(1),e.setFullYear(e.getFullYear()+b),e.setMonth(11),e.setDate(31);else if("custom"==d){var i=a(this).html();if(c.customShortcuts&&c.customShortcuts.length>0)for(var j=0;j<c.customShortcuts.length;j++){var k=c.customShortcuts[j];if(k.name==i){var l=[];if(l=k.dates.call(),l&&2==l.length&&(f=l[0],e=l[1]),l&&1==l.length){var m=l[0];G(m,"month1"),G(U(m),"month2"),P()}break}}}f&&e&&(D(f,e),A())}),ja.find(".time1 input[type=range]").on("change touchmove",function(b){var c=b.target;o("time1","hour"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0,"minute"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0)}),ja.find(".time2 input[type=range]").on("change touchmove",function(b){var c=b.target;o("time2","hour"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0,"minute"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0)})}function f(){if(!c.inline){var b=a(na).offset();if("relative"==a(c.container).css("position")){var d=a(c.container).offset(),e=Math.max(0,b.left+ja.outerWidth()-a("body").width()+16);ja.css({top:b.top-d.top+a(na).outerHeight()+4,left:b.left-d.left-e})}else b.left<460?ja.css({top:b.top+a(na).outerHeight()+parseInt(a("body").css("border-top")||0,10),left:b.left}):ja.css({top:b.top+a(na).outerHeight()+parseInt(a("body").css("border-top")||0,10),left:b.left+a(na).width()-ja.width()-16})}}function g(){return ja}function h(b){R(),i(),c.customOpenAnimation?c.customOpenAnimation.call(ja.get(0),function(){a(na).trigger("datepicker-opened",{relatedTarget:ja})}):ja.slideDown(b,function(){a(na).trigger("datepicker-opened",{relatedTarget:ja})}),a(na).trigger("datepicker-open",{relatedTarget:ja}),P(),k(),f()}function i(){var a=c.getValue.call(oa),d=a?a.split(c.separator):"";if(d&&(1==d.length&&c.singleDate||d.length>=2)){var e=c.format;e.match(/Do/)&&(e=e.replace(/Do/,"D"),d[0]=d[0].replace(/(\d+)(th|nd|st)/,"$1"),d.length>=2&&(d[1]=d[1].replace(/(\d+)(th|nd|st)/,"$1"))),ma=!1,d.length>=2?D(j(d[0],e,b.locale(c.language)),j(d[1],e,b.locale(c.language))):1==d.length&&c.singleDate&&E(j(d[0],e,b.locale(c.language))),ma=!0}}function j(a,c,d){return b(a,c,d).isValid()?b(a,c,d).toDate():b().toDate()}function k(){var a=ja.find(".gap").css("margin-left");a&&(a=parseInt(a));var b=ja.find(".month1").width(),c=ja.find(".gap").width()+(a?2*a:0),d=ja.find(".month2").width();ja.find(".month-wrapper").width(b+c+d)}function l(a,c){ja.find("."+a+" input[type=range].hour-range").val(b(c).hours()),ja.find("."+a+" input[type=range].minute-range").val(b(c).minutes()),o(a,b(c).format("HH"),b(c).format("mm"))}function m(a,d){c[a]=parseInt(b(parseInt(d)).startOf("day").add(b(c[a+"Time"]).format("HH"),"h").add(b(c[a+"Time"]).format("mm"),"m").valueOf())}function n(){l("time1",c.start),l("time2",c.end)}function o(a,d,e){function f(a,b){var f=b.format("HH"),g=b.format("mm");c[a]=b.startOf("day").add(d||f,"h").add(e||g,"m").valueOf()}switch(d&&ja.find("."+a+" .hour-val").text(d),e&&ja.find("."+a+" .minute-val").text(e),a){case"time1":c.start&&f("start",b(c.start)),f("startTime",b(c.startTime||b().valueOf()));break;case"time2":c.end&&f("end",b(c.end)),f("endTime",b(c.endTime||b().valueOf()))}A(),B(),F()}function p(){c.start=!1,c.end=!1,ja.find(".day.checked").removeClass("checked"),ja.find(".day.last-date-selected").removeClass("last-date-selected"),ja.find(".day.first-date-selected").removeClass("first-date-selected"),c.setValue.call(oa,""),A(),B(),F()}function q(a){var d=a;return"week-range"===c.batchMode?d="monday"===c.startOfWeek?b(parseInt(a)).startOf("isoweek").valueOf():b(parseInt(a)).startOf("week").valueOf():"month-range"===c.batchMode&&(d=b(parseInt(a)).startOf("month").valueOf()),d}function r(a){var d=a;return"week-range"===c.batchMode?d="monday"===c.startOfWeek?b(parseInt(a)).endOf("isoweek").valueOf():b(parseInt(a)).endOf("week").valueOf():"month-range"===c.batchMode&&(d=b(parseInt(a)).endOf("month").valueOf()),d}function s(d){if(!d.hasClass("invalid")){var e=d.attr("time");if(d.addClass("checked"),c.singleDate?(c.start=e,c.end=!1):"week"===c.batchMode?"monday"===c.startOfWeek?(c.start=b(parseInt(e)).startOf("isoweek").valueOf(),c.end=b(parseInt(e)).endOf("isoweek").valueOf()):(c.end=b(parseInt(e)).endOf("week").valueOf(),c.start=b(parseInt(e)).startOf("week").valueOf()):"workweek"===c.batchMode?(c.start=b(parseInt(e)).day(1).valueOf(),c.end=b(parseInt(e)).day(5).valueOf()):"weekend"===c.batchMode?(c.start=b(parseInt(e)).day(6).valueOf(),c.end=b(parseInt(e)).day(7).valueOf()):"month"===c.batchMode?(c.start=b(parseInt(e)).startOf("month").valueOf(),c.end=b(parseInt(e)).endOf("month").valueOf()):c.start&&c.end||!c.start&&!c.end?(c.start=q(e),c.end=!1):c.start&&(c.end=r(e),c.time.enabled&&m("end",c.end)),c.time.enabled&&(c.start&&m("start",c.start),c.end&&m("end",c.end)),!c.singleDate&&c.start&&c.end&&c.start>c.end){var f=c.end;c.end=r(c.start),c.start=q(f),c.time.enabled&&c.swapTime&&n()}c.start=parseInt(c.start),c.end=parseInt(c.end),x(),c.start&&!c.end&&(a(na).trigger("datepicker-first-date-selected",{date1:new Date(c.start)}),w(d)),v(e),A(),B(),F(),z()}}function t(a){var d,e,f=parseInt(a.attr("data-start-time"),10);c.startWeek?(ja.find(".week-number-selected").removeClass("week-number-selected"),d=new Date(f<c.startWeek?f:c.startWeek),e=new Date(f<c.startWeek?c.startWeek:f),c.startWeek=!1,c.start=b(d).day("monday"==c.startOfWeek?1:0).valueOf(),c.end=b(e).day("monday"==c.startOfWeek?7:6).valueOf()):(c.startWeek=f,a.addClass("week-number-selected"),d=new Date(f),c.start=b(d).day("monday"==c.startOfWeek?1:0).valueOf(),c.end=b(d).day("monday"==c.startOfWeek?7:6).valueOf()),v(),A(),B(),F(),z()}function u(a){if(a=parseInt(a,10),c.startDate&&T(a,c.startDate)<0)return!1;if(c.endDate&&T(a,c.endDate)>0)return!1;if(c.start&&!c.end&&!c.singleDate){if(c.maxDays>0&&C(a,c.start)>c.maxDays)return!1;if(c.minDays>0&&C(a,c.start)<c.minDays)return!1;if(c.selectForward&&a<c.start)return!1;if(c.selectBackward&&a>c.start)return!1;if(c.beforeShowDay&&"function"==typeof c.beforeShowDay){for(var b=!0,d=a;C(d,c.start)>1;){if(!c.beforeShowDay(new Date(d))[0]){b=!1;break}if(Math.abs(d-c.start)<864e5)break;d>c.start&&(d-=864e5),d<c.start&&(d+=864e5)}if(!b)return!1}}return!0}function v(){return ja.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),c.start&&!c.end&&ja.find(".day.toMonth.valid").each(function(){u(parseInt(a(this).attr("time"),10))?a(this).addClass("valid tmp").removeClass("invalid"):a(this).addClass("invalid tmp").removeClass("valid")}),!0}function w(b){var d=parseInt(b.attr("time")),e="";if(b.hasClass("has-tooltip")&&b.attr("data-tooltip"))e='<span class="tooltip-content">'+b.attr("data-tooltip")+"</span>";else if(!b.hasClass("invalid"))if(c.singleDate)ja.find(".day.hovering").removeClass("hovering"),b.addClass("hovering");else if(ja.find(".day").each(function(){var b=parseInt(a(this).attr("time"));c.start,c.end;b==d?a(this).addClass("hovering"):a(this).removeClass("hovering"),c.start&&!c.end&&(c.start<b&&d>=b||c.start>b&&d<=b)?a(this).addClass("hovering"):a(this).removeClass("hovering")}),c.start&&!c.end){var f=C(d,c.start);c.hoveringTooltip&&("function"==typeof c.hoveringTooltip?e=c.hoveringTooltip(f,c.start,d):!0===c.hoveringTooltip&&f>1&&(e=f+" "+fa("days")))}if(e){var g=b.offset(),h=ja.offset(),i=g.left-h.left,j=g.top-h.top;i+=b.width()/2;var k=ja.find(".date-range-length-tip"),l=k.css({visibility:"hidden",display:"none"}).html(e).width(),m=k.height();i-=l/2,j-=m,setTimeout(function(){k.css({left:i,top:j,display:"block",visibility:"visible"})},10)}else ja.find(".date-range-length-tip").hide()}function x(){ja.find(".day.hovering").removeClass("hovering"),ja.find(".date-range-length-tip").hide()}function y(a){var d=a.val(),e=a.attr("name"),f=a.parents("table").hasClass("month1")?"month1":"month2",g="month1"===f?"month2":"month1",h=!!c.startDate&&b(c.startDate),i=!!c.endDate&&b(c.endDate),j=b(c[f])[e](d);h&&j.isSameOrBefore(h)&&(j=h.add("month2"===f?1:0,"month")),i&&j.isSameOrAfter(i)&&(j=i.add(c.singleMonth||"month1"!==f?0:-1,"month")),G(j,f),"month1"===f?(c.stickyMonths||b(j).isSameOrAfter(c[g],"month"))&&G(b(j).add(1,"month"),g):(c.stickyMonths||b(j).isSameOrBefore(c[g],"month"))&&G(b(j).add(-1,"month"),g),P()}function z(){!0===c.singleDate?ma&&c.start&&c.autoClose&&Q():ma&&c.start&&c.end&&c.autoClose&&Q()}function A(){var a=Math.ceil((c.end-c.start)/864e5)+1;c.singleDate?c.start&&!c.end?ja.find(".drp_top-bar").removeClass("error").addClass("normal"):ja.find(".drp_top-bar").removeClass("error").removeClass("normal"):c.maxDays&&a>c.maxDays?(c.start=!1,c.end=!1,ja.find(".day").removeClass("checked"),ja.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(fa("less-than").replace("%d",c.maxDays))):c.minDays&&a<c.minDays?(c.start=!1,c.end=!1,ja.find(".day").removeClass("checked"),ja.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(fa("more-than").replace("%d",c.minDays))):c.start||c.end?ja.find(".drp_top-bar").removeClass("error").addClass("normal"):ja.find(".drp_top-bar").removeClass("error").removeClass("normal"),c.singleDate&&c.start&&!c.end||!c.singleDate&&c.start&&c.end?ja.find(".apply-btn").removeClass("disabled"):ja.find(".apply-btn").addClass("disabled"),c.batchMode&&(c.start&&c.startDate&&T(c.start,c.startDate)<0||c.end&&c.endDate&&T(c.end,c.endDate)>0)&&(c.start=!1,c.end=!1,ja.find(".day").removeClass("checked"))}function B(b,d){ja.find(".start-day").html("..."),ja.find(".end-day").html("..."),ja.find(".selected-days").hide(),c.start&&ja.find(".start-day").html(O(new Date(parseInt(c.start)))),c.end&&ja.find(".end-day").html(O(new Date(parseInt(c.end))));var e;c.start&&c.singleDate?(ja.find(".apply-btn").removeClass("disabled"),e=O(new Date(c.start)),c.setValue.call(oa,e,O(new Date(c.start)),O(new Date(c.end))),ma&&!d&&a(na).trigger("datepicker-change",{value:e,date1:new Date(c.start)})):c.start&&c.end?(ja.find(".selected-days").show().find(".selected-days-num").html(C(c.end,c.start)),ja.find(".apply-btn").removeClass("disabled"),e=O(new Date(c.start))+c.separator+O(new Date(c.end)),c.setValue.call(oa,e,O(new Date(c.start)),O(new Date(c.end))),ma&&!d&&a(na).trigger("datepicker-change",{value:e,date1:new Date(c.start),date2:new Date(c.end)})):b?ja.find(".apply-btn").removeClass("disabled"):ja.find(".apply-btn").addClass("disabled")}function C(a,c){return Math.abs(b(a).diff(b(c),"d"))+1}function D(a,b,d){if(a.getTime()>b.getTime()){var e=b;b=a,a=e,e=null}var f=!0;if(c.startDate&&T(a,c.startDate)<0&&(f=!1),c.endDate&&T(b,c.endDate)>0&&(f=!1),!f)return G(c.startDate,"month1"),G(U(c.startDate),"month2"),void P();c.start=a.getTime(),c.end=b.getTime(),c.time.enabled&&(l("time1",a),l("time2",b)),(c.stickyMonths||T(a,b)>0&&0===S(a,b))&&(c.lookBehind?a=V(b):b=U(a)),c.stickyMonths&&!1!==c.endDate&&S(b,c.endDate)>0&&(a=V(a),b=V(b)),c.stickyMonths||0===S(a,b)&&(c.lookBehind?a=V(b):b=U(a)),G(a,"month1"),G(b,"month2"),P(),A(),B(!1,d),z()}function E(a){var b=!0;if(c.startDate&&T(a,c.startDate)<0&&(b=!1),c.endDate&&T(a,c.endDate)>0&&(b=!1),!b)return void G(c.startDate,"month1");if(c.start=a.getTime(),c.time.enabled&&l("time1",a),G(a,"month1"),!0!==c.singleMonth){G(U(a),"month2")}P(),B(),z()}function F(){(c.start||c.end)&&(ja.find(".day").each(function(){var d=parseInt(a(this).attr("time")),e=c.start,f=c.end;c.time.enabled&&(d=b(d).startOf("day").valueOf(),e=b(e||b().valueOf()).startOf("day").valueOf(),f=b(f||b().valueOf()).startOf("day").valueOf()),c.start&&c.end&&f>=d&&e<=d||c.start&&!c.end&&b(e).format("YYYY-MM-DD")==b(d).format("YYYY-MM-DD")?a(this).addClass("checked"):a(this).removeClass("checked"),c.start&&b(e).format("YYYY-MM-DD")==b(d).format("YYYY-MM-DD")?a(this).addClass("first-date-selected"):a(this).removeClass("first-date-selected"),c.end&&b(f).format("YYYY-MM-DD")==b(d).format("YYYY-MM-DD")?a(this).addClass("last-date-selected"):a(this).removeClass("last-date-selected")}),ja.find(".week-number").each(function(){a(this).attr("data-start-time")==c.startWeek&&a(this).addClass("week-number-selected")}))}function G(a,d){a=b(a).toDate();var e=H(a,d),f=I(a,d);ja.find("."+d+" .month-name").html(e+" "+f),ja.find("."+d+" tbody").html(ca(a)),c[d]=a,v(),L()}function H(a,d){a=b(a);var e=a.get("month"),f=N(e),g='<div class="month-element">'+f+"</div>";if(!c.monthSelect)return g;var h=!!c.startDate&&b(c.startDate).add(c.singleMonth||"month2"!==d?0:1,"month"),i=!!c.endDate&&b(c.endDate).add(c.singleMonth||"month1"!==d?0:-1,"month"),j=h&&a.isSame(h,"year")?h.get("month"):0,k=i&&a.isSame(i,"year")?i.get("month"):11,l=Math.min(j,e),m=Math.max(k,e);return l===m?g:K("month",J({minSelectable:j,maxSelectable:k,minVisible:l,maxVisible:m},e,function(a){return N(a)}))}function I(a,d){a=b(a);var e=a.get("year"),f='<div class="month-element">'+e+"</div>";if(!c.yearSelect)return f;var g=c.yearSelect&&"function"==typeof c.yearSelect,h=!!c.startDate&&b(c.startDate).add(c.singleMonth||"month2"!==d?0:1,"month"),i=!!c.endDate&&b(c.endDate).add(c.singleMonth||"month1"!==d?0:-1,"month"),j=g?c.yearSelect(e):c.yearSelect.slice(),k=h?Math.max(j[0],h.get("year")):Math.min(j[0],e),l=i?Math.min(j[1],i.get("year")):Math.max(j[1],e),m=Math.min(k,e),n=Math.max(l,e);return m===n?f:K("year",J({minSelectable:k,maxSelectable:l,minVisible:m,maxVisible:n},e))}function J(a,b,c){var d=[];c=c||function(a){return a};for(var e=a.minVisible;e<=a.maxVisible;e++)d.push({value:e,text:c(e),selected:e===b,disabled:e<a.minSelectable||e>a.maxSelectable});return d}function K(a,b){for(var c,d='<div class="select-wrapper"><select class="'+a+'" name="'+a+'">',e=0,f=b.length;e<f;e++){var g=b[e];d+='<option value="'+g.value+'"'+(g.selected?" selected":"")+(g.disabled?" disabled":"")+">"+g.text+"</option>",g.selected&&(c=g.text)}return d+="</select>"+c+"</div>"}function L(){ja.find(".day").off("click").click(function(b){s(a(this))}),ja.find(".day").off("mouseenter").mouseenter(function(b){w(a(this))}),ja.find(".day").off("mouseleave").mouseleave(function(a){ja.find(".date-range-length-tip").hide(),c.singleDate&&x()}),ja.find(".week-number").off("click").click(function(b){t(a(this))}),ja.find(".month").off("change").change(function(b){y(a(this))}),ja.find(".year").off("change").change(function(b){y(a(this))})}function M(a,b){ja.find("."+b).append(W()),l(b,a)}function N(a){return fa("month-name")[a]}function O(a){return b(a).format(c.format)}function P(){F();var a=parseInt(b(c.month1).format("YYYYMM")),d=parseInt(b(c.month2).format("YYYYMM")),e=Math.abs(a-d);e>1&&89!=e?ja.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):ja.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var f=ja.find("table.month1").height(),g=ja.find("table.month2").height();ja.find(".gap").height(Math.max(f,g)+10)}function Q(){if(!c.alwaysOpen){var b=function(){a(na).data("date-picker-opened",!1),a(na).trigger("datepicker-closed",{relatedTarget:ja})};c.customCloseAnimation?c.customCloseAnimation.call(ja.get(0),b):a(ja).slideUp(c.duration,b),a(na).trigger("datepicker-close",{relatedTarget:ja})}}function R(){G(c.month1,"month1"),G(c.month2,"month2")}function S(a,c){var d=parseInt(b(a).format("YYYYMM"))-parseInt(b(c).format("YYYYMM"));return d>0?1:0===d?0:-1}function T(a,c){var d=parseInt(b(a).format("YYYYMMDD"))-parseInt(b(c).format("YYYYMMDD"));return d>0?1:0===d?0:-1}function U(a){return b(a).add(1,"months").toDate()}function V(a){return b(a).add(-1,"months").toDate()}function W(){return"<div><span>"+fa("Time")+': <span class="hour-val">00</span>:<span class="minute-val">00</span></span></div><div class="hour"><label>'+fa("Hour")+': <input type="range" class="hour-range" name="hour" min="0" max="23"></label></div><div class="minute"><label>'+fa("Minute")+': <input type="range" class="minute-range" name="minute" min="0" max="59"></label></div>'}function X(){var b='<div class="date-picker-wrapper';c.extraClass&&(b+=" "+c.extraClass+" "),c.singleDate&&(b+=" single-date "),c.showShortcuts||(b+=" no-shortcuts "),c.showTopbar||(b+=" no-topbar "),c.customTopBar&&(b+=" custom-topbar "),b+='">',c.showTopbar&&(b+='<div class="drp_top-bar">',c.customTopBar?("function"==typeof c.customTopBar&&(c.customTopBar=c.customTopBar()),b+='<div class="custom-top">'+c.customTopBar+"</div>"):(b+='<div class="normal-top"><span class="selection-top">'+fa("selected")+' </span> <b class="start-day">...</b>',c.singleDate||(b+=' <span class="separator-day">'+c.separator+'</span> <b class="end-day">...</b> <i class="selected-days">(<span class="selected-days-num">3</span> '+fa("days")+")</i>"),b+="</div>",b+='<div class="error-top">error</div><div class="default-top">default</div>'),b+='<input type="button" class="apply-btn disabled'+Y()+'" value="'+fa("apply")+'" />',b+="</div>");var d=c.showWeekNumbers?6:5,e="&lt;";c.customArrowPrevSymbol&&(e=c.customArrowPrevSymbol);var f="&gt;";if(c.customArrowNextSymbol&&(f=c.customArrowNextSymbol),b+='<div class="month-wrapper">   <table class="month1" cellspacing="0" border="0" cellpadding="0">       <thead>           <tr class="caption">               <th>                   <span class="prev">'+e+'                   </span>               </th>               <th colspan="'+d+'" class="month-name">               </th>               <th>'+(c.singleDate||!c.stickyMonths?'<span class="next">'+f+"</span>":"")+'               </th>           </tr>           <tr class="week-name">'+Z()+"       </thead>       <tbody></tbody>   </table>",aa()&&(b+='<div class="gap">'+_()+'</div><table class="month2" cellspacing="0" border="0" cellpadding="0">   <thead>   <tr class="caption">       <th>'+(c.stickyMonths?"":'<span class="prev">'+e+"</span>")+'       </th>       <th colspan="'+d+'" class="month-name">       </th>       <th>           <span class="next">'+f+'</span>       </th>   </tr>   <tr class="week-name">'+Z()+"   </thead>   <tbody></tbody></table>"),b+='<div class="dp-clearfix"></div><div class="time"><div class="time1"></div>',c.singleDate||(b+='<div class="time2"></div>'),b+='</div><div class="dp-clearfix"></div></div>',b+='<div class="footer">',c.showShortcuts){b+='<div class="shortcuts"><b>'+fa("shortcuts")+"</b>";var g=c.shortcuts;if(g){var h;if(g["prev-days"]&&g["prev-days"].length>0){b+='&nbsp;<span class="prev-days">'+fa("past");for(var i=0;i<g["prev-days"].length;i++)h=g["prev-days"][i],h+=fa(g["prev-days"][i]>1?"days":"day"),b+=' <a href="javascript:;" shortcut="day,-'+g["prev-days"][i]+'">'+h+"</a>";b+="</span>"}if(g["next-days"]&&g["next-days"].length>0){b+='&nbsp;<span class="next-days">'+fa("following");for(var i=0;i<g["next-days"].length;i++)h=g["next-days"][i],h+=fa(g["next-days"][i]>1?"days":"day"),b+=' <a href="javascript:;" shortcut="day,'+g["next-days"][i]+'">'+h+"</a>";b+="</span>"}if(g.prev&&g.prev.length>0){b+='&nbsp;<span class="prev-buttons">'+fa("previous");for(var i=0;i<g.prev.length;i++)h=fa("prev-"+g.prev[i]),b+=' <a href="javascript:;" shortcut="prev,'+g.prev[i]+'">'+h+"</a>";b+="</span>"}if(g.next&&g.next.length>0){b+='&nbsp;<span class="next-buttons">'+fa("next");for(var i=0;i<g.next.length;i++)h=fa("next-"+g.next[i]),b+=' <a href="javascript:;" shortcut="next,'+g.next[i]+'">'+h+"</a>";b+="</span>"}}if(c.customShortcuts)for(var i=0;i<c.customShortcuts.length;i++){var j=c.customShortcuts[i];b+='&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+j.name+"</a></span>"}b+="</div>"}if(c.showCustomValues&&(b+='<div class="customValues"><b>'+(c.customValueLabel||fa("custom-values"))+"</b>",c.customValues))for(var i=0;i<c.customValues.length;i++){var k=c.customValues[i];b+='&nbsp;<span class="custom-value"><a href="javascript:;" custom="'+k.value+'">'+k.name+"</a></span>"}return b+="</div></div>",a(b)}function Y(){var a="";return!0===c.autoClose&&(a+=" hide"),""!==c.applyBtnClass&&(a+=" "+c.applyBtnClass),a}function Z(){var a=c.showWeekNumbers?"<th>"+fa("week-number")+"</th>":"";return"monday"==c.startOfWeek?a+"<th>"+fa("week-1")+"</th><th>"+fa("week-2")+"</th><th>"+fa("week-3")+"</th><th>"+fa("week-4")+"</th><th>"+fa("week-5")+"</th><th>"+fa("week-6")+"</th><th>"+fa("week-7")+"</th>":a+"<th>"+fa("week-7")+"</th><th>"+fa("week-1")+"</th><th>"+fa("week-2")+"</th><th>"+fa("week-3")+"</th><th>"+fa("week-4")+"</th><th>"+fa("week-5")+"</th><th>"+fa("week-6")+"</th>"}function $(a){return a=b(a),!(!c.startDate||!a.endOf("month").isBefore(c.startDate))||!(!c.endDate||!a.startOf("month").isAfter(c.endDate))}function _(){for(var a=['<div class="gap-top-mask"></div><div class="gap-bottom-mask"></div><div class="gap-lines">'],b=0;b<20;b++)a.push('<div class="gap-line"><div class="gap-1"></div><div class="gap-2"></div><div class="gap-3"></div></div>');return a.push("</div>"),a.join("")}function aa(){return!c.singleMonth}function ba(b,c,d){var e=a.extend(!0,{},b);a.each(c,function(a,b){var c=b(d);for(var f in c)e.hasOwnProperty(f)?e[f]+=c[f]:e[f]=c[f]});var f="";for(var g in e)e.hasOwnProperty(g)&&(f+=g+'="'+e[g]+'" ');return f}function ca(a){var d=[];a.setDate(1);var e=(new Date(a.getTime()-864e5),new Date),f=a.getDay();0===f&&"monday"===c.startOfWeek&&(f=7);var g,h;if(f>0)for(var i=f;i>0;i--){var j=new Date(a.getTime()-864e5*i);h=u(j.getTime()),c.startDate&&T(j,c.startDate)<0&&(h=!1),c.endDate&&T(j,c.endDate)>0&&(h=!1),d.push({date:j,type:"lastMonth",day:j.getDate(),time:j.getTime(),valid:h})}for(var k=a.getMonth(),i=0;i<40;i++)g=b(a).add(i,"days").toDate(),h=u(g.getTime()),c.startDate&&T(g,c.startDate)<0&&(h=!1),c.endDate&&T(g,c.endDate)>0&&(h=!1),d.push({date:g,type:g.getMonth()==k?"toMonth":"nextMonth",day:g.getDate(),time:g.getTime(),valid:h});for(var l=[],m=0;m<6&&"nextMonth"!=d[7*m].type;m++){l.push("<tr>");for(var j=0;j<7;j++){g=d[7*m+("monday"==c.startOfWeek?j+1:j)];var n=b(g.time).format("L")==b(e).format("L");if(g.extraClass="",g.tooltip="",g.valid&&c.beforeShowDay&&"function"==typeof c.beforeShowDay){var o=c.beforeShowDay(b(g.time).toDate());g.valid=o[0],g.extraClass=o[1]||"",g.tooltip=o[2]||"",""!==g.tooltip&&(g.extraClass+=" has-tooltip ")}var p={time:g.time,"data-tooltip":g.tooltip,class:"day "+g.type+" "+g.extraClass+" "+(g.valid?"valid":"invalid")+" "+(n?"real-today":"")};0===j&&c.showWeekNumbers&&l.push('<td><div class="week-number" data-start-time="'+g.time+'">'+c.getWeekNumber(g.date)+"</div></td>"),l.push("<td "+ba({},c.dayTdAttrs,g)+"><div "+ba(p,c.dayDivAttrs,g)+">"+da(g.time,g.day)+"</div></td>")}l.push("</tr>")}return l.join("")}function da(a,b){return c.showDateFilter&&"function"==typeof c.showDateFilter?c.showDateFilter(a,b):b}function ea(){if("auto"==c.language){var b=navigator.language?navigator.language:navigator.browserLanguage;return b?(b=b.toLowerCase(),b in a.dateRangePickerLanguages?a.dateRangePickerLanguages[b]:a.dateRangePickerLanguages.default):a.dateRangePickerLanguages.default}return c.language&&c.language in a.dateRangePickerLanguages?a.dateRangePickerLanguages[c.language]:a.dateRangePickerLanguages.default}function fa(b){var c=b.toLowerCase(),d=b in la?la[b]:c in la?la[c]:null,e=a.dateRangePickerLanguages.default;return null==d&&(d=b in e?e[b]:c in e?e[c]:""),d}function ga(){var a=c.defaultTime?c.defaultTime:new Date;return c.lookBehind?(c.startDate&&S(a,c.startDate)<0&&(a=U(b(c.startDate).toDate())),c.endDate&&S(a,c.endDate)>0&&(a=b(c.endDate).toDate())):(c.startDate&&S(a,c.startDate)<0&&(a=b(c.startDate).toDate()),c.endDate&&S(U(a),c.endDate)>0&&(a=V(b(c.endDate).toDate()))),c.singleDate&&(c.startDate&&S(a,c.startDate)<0&&(a=b(c.startDate).toDate()),c.endDate&&S(a,c.endDate)>0&&(a=b(c.endDate).toDate())),a}function ha(a){a||(a=ga()),c.lookBehind?(G(V(a),"month1"),G(a,"month2")):(G(a,"month1"),G(U(a),"month2")),c.singleDate&&G(a,"month1"),F(),P()}function ia(a){d(a,na[0])||ja.is(":visible")&&Q()}c||(c={}),c=a.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:"auto",startOfWeek:"sunday",getValue:function(){return a(this).val()},setValue:function(b){a(this).attr("readonly")||a(this).is(":disabled")||b==a(this).val()||a(this).val(b)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,showShortcuts:!1,shortcuts:{},customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:"auto",hoveringTooltip:function(a,b,c){return a>1?a+" "+fa("days"):""},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function(a){return b(a).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null,monthSelect:!1,yearSelect:!1},c),c.start=!1,c.end=!1,c.startWeek=!1,c.isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints,c.isTouchDevice&&(c.hoveringTooltip=!1),"auto"==c.singleMonth&&(c.singleMonth=a(window).width()<480),c.singleMonth&&(c.stickyMonths=!1),c.showTopbar||(c.autoClose=!0),c.startDate&&"string"==typeof c.startDate&&(c.startDate=b(c.startDate,c.format).toDate()),c.endDate&&"string"==typeof c.endDate&&(c.endDate=b(c.endDate,c.format).toDate()),c.yearSelect&&"boolean"==typeof c.yearSelect&&(c.yearSelect=function(a){return[a-5,a+5]});var ja,ka,la=ea(),ma=!1,na=this,oa=a(na).get(0);return a(this).off(".datepicker").on("click.datepicker",function(a){ja.is(":visible")||h(c.duration)}).on("change.datepicker",function(a){i()}).on("keyup.datepicker",function(){try{clearTimeout(ka)}catch(a){}ka=setTimeout(function(){i()},2e3)}),e.call(this),c.alwaysOpen&&h(0),a(this).data("dateRangePicker",{setStart:function(a){return"string"==typeof a&&(a=b(a,c.format).toDate()),c.end=!1,E(a),this},setEnd:function(a,d){var e=new Date;return e.setTime(c.start),"string"==typeof a&&(a=b(a,c.format).toDate()),D(e,a,d),this},setDateRange:function(a,d,e){"string"==typeof a&&"string"==typeof d&&(a=b(a,c.format).toDate(),d=b(d,c.format).toDate()),D(a,d,e)},clear:p,close:Q,open:h,redraw:R,getDatePicker:g,resetMonthsView:ha,destroy:function(){a(na).off(".datepicker"),a(na).data("dateRangePicker",""),a(na).data("date-picker-opened",null),ja.remove(),a(window).off("resize.datepicker",f),a(document).off("click.datepicker",ia)}}),a(window).on("resize.datepicker",f),this}}),function(){function a(a){return document.createElementNS(j,a)}function b(a){return(a<10?"0":"")+a}function c(a){var b=++r+"";return a?a+b:b}function d(d,h){function j(a,b){var c=m.offset(),d=/^touch/.test(a.type),e=c.left+s,g=c.top+s,j=(d?a.originalEvent.touches[0]:a).pageX-e,l=(d?a.originalEvent.touches[0]:a).pageY-g,n=Math.sqrt(j*j+l*l),q=!1;if(!b||!(n<t-v||n>t+v)){a.preventDefault();var r=setTimeout(function(){f.addClass("clockpicker-moving")},200);k&&m.append(D.canvas),D.setHand(j,l,!b,!0),i.off(o).on(o,function(a){a.preventDefault();var b=/^touch/.test(a.type),c=(b?a.originalEvent.touches[0]:a).pageX-e,d=(b?a.originalEvent.touches[0]:a).pageY-g;(q||c!==j||d!==l)&&(q=!0,D.setHand(c,d,!1,!0))}),i.off(p).on(p,function(a){i.off(p),a.preventDefault();var c=/^touch/.test(a.type),d=(c?a.originalEvent.changedTouches[0]:a).pageX-e,k=(c?a.originalEvent.changedTouches[0]:a).pageY-g;(b||q)&&d===j&&k===l&&D.setHand(d,k),"hours"===D.currentView?D.toggleView("minutes",x/2):h.autoclose&&(D.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){D.done()},x/2)),m.prepend(L),clearTimeout(r),f.removeClass("clockpicker-moving"),i.off(o)})}}var l=g(y),m=l.find(".clockpicker-plate"),q=l.find(".clockpicker-hours"),r=l.find(".clockpicker-minutes"),z=l.find(".clockpicker-am-pm-block"),A="INPUT"===d.prop("tagName"),B=A?d:d.find("input"),C=d.find(".input-group-addon"),D=this;if(this.id=c("cp"),this.element=d,this.options=h,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=A,this.input=B,this.addon=C,this.popover=l,this.plate=m,this.hoursView=q,this.minutesView=r,this.amPmBlock=z,this.spanHours=l.find(".clockpicker-span-hours"),this.spanMinutes=l.find(".clockpicker-span-minutes"),this.spanAmPm=l.find(".clockpicker-span-am-pm"),this.amOrPm="PM",h.twelvehour){var E=['<div class="clockpicker-am-pm-block">','<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">',"AM</button>",'<button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">',"PM</button>","</div>"].join("");g(E);g('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){D.amOrPm="AM",g(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),g('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){D.amOrPm="PM",g(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}h.autoclose||g('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+h.donetext+"</button>").click(g.proxy(this.done,this)).appendTo(l),"top"!==h.placement&&"bottom"!==h.placement||"top"!==h.align&&"bottom"!==h.align||(h.align="left"),"left"!==h.placement&&"right"!==h.placement||"left"!==h.align&&"right"!==h.align||(h.align="top"),l.addClass(h.placement),l.addClass("clockpicker-align-"+h.align),this.spanHours.click(g.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(g.proxy(this.toggleView,this,"minutes")),B.on("focus.clockpicker click.clockpicker",g.proxy(this.show,this)),C.on("click.clockpicker",g.proxy(this.toggle,this));var F,G,H,I,J=g('<div class="clockpicker-tick"></div>');if(h.twelvehour)for(F=1;F<13;F+=1)G=J.clone(),H=F/6*Math.PI,I=t,G.css("font-size","120%"),G.css({left:s+Math.sin(H)*I-v,top:s-Math.cos(H)*I-v}),G.html(0===F?"00":F),q.append(G),G.on(n,j);else for(F=0;F<24;F+=1){G=J.clone(),H=F/6*Math.PI;var K=F>0&&F<13;I=K?u:t,G.css({left:s+Math.sin(H)*I-v,top:s-Math.cos(H)*I-v}),K&&G.css("font-size","120%"),G.html(0===F?"00":F),q.append(G),G.on(n,j)}for(F=0;F<60;F+=5)G=J.clone(),H=F/30*Math.PI,G.css({left:s+Math.sin(H)*t-v,top:s-Math.cos(H)*t-v}),G.css("font-size","120%"),G.html(b(F)),r.append(G),G.on(n,j);if(m.on(n,function(a){0===g(a.target).closest(".clockpicker-tick").length&&j(a,!0)}),k){var L=l.find(".clockpicker-canvas"),M=a("svg");M.setAttribute("class","clockpicker-svg"),M.setAttribute("width",w),M.setAttribute("height",w);var N=a("g");N.setAttribute("transform","translate("+s+","+s+")");var O=a("circle");O.setAttribute("class","clockpicker-canvas-bearing"),O.setAttribute("cx",0),O.setAttribute("cy",0),O.setAttribute("r",2);var P=a("line");P.setAttribute("x1",0),P.setAttribute("y1",0);var Q=a("circle");Q.setAttribute("class","clockpicker-canvas-bg"),Q.setAttribute("r",v);var R=a("circle");R.setAttribute("class","clockpicker-canvas-fg"),R.setAttribute("r",3.5),N.appendChild(P),N.appendChild(Q),N.appendChild(R),N.appendChild(O),M.appendChild(N),L.append(M),this.hand=P,this.bg=Q,this.fg=R,this.bearing=O,this.g=N,this.canvas=L}e(this.options.init,this)}function e(a,b){a&&"function"==typeof a&&a(b)}var f,g=window.jQuery,h=g(window),i=g(document),j="http://www.w3.org/2000/svg",k="SVGAngle"in window&&function(){var a,b=document.createElement("div");return b.innerHTML="<svg/>",a=(b.firstChild&&b.firstChild.namespaceURI)==j,b.innerHTML="",a}(),l=function(){var a=document.createElement("div").style;return"transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a}(),m="ontouchstart"in window,n="mousedown"+(m?" touchstart":""),o="mousemove.clockpicker"+(m?" touchmove.clockpicker":""),p="mouseup.clockpicker"+(m?" touchend.clockpicker":""),q=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,r=0,s=100,t=80,u=54,v=13,w=2*s,x=l?350:1,y=['<div class="popover clockpicker-popover">','<div class="arrow"></div>','<div class="popover-title">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");d.DEFAULTS={default:"",fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:!1,twelvehour:!1,vibrate:!0},d.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},d.prototype.locate=function(){var a=this.element,b=this.popover,c=a.offset(),d=a.outerWidth(),e=a.outerHeight(),f=this.options.placement,g=this.options.align,h={};switch(b.show(),f){case"bottom":h.top=c.top+e;break;case"right":h.left=c.left+d;break;case"top":h.top=c.top-b.outerHeight();break;case"left":h.left=c.left-b.outerWidth()}switch(g){case"left":h.left=c.left;break;case"right":h.left=c.left+d-b.outerWidth();break;case"top":h.top=c.top;break;case"bottom":h.top=c.top+e-b.outerHeight()}b.css(h)},d.prototype.show=function(a){if(!this.isShown){e(this.options.beforeShow);var c=this;this.isAppended||(f=this.options.parentEl?g(this.options.parentEl).append(this.popover):g(document.body).append(this.popover),h.on("resize.clockpicker"+this.id,function(){c.isShown&&c.locate()}),this.isAppended=!0);var d=((this.input.prop("value")||this.options.default||"")+"").split(":");if("now"===d[0]){var j=new Date(+new Date+this.options.fromnow);d=[j.getHours(),j.getMinutes()]}this.hours=+d[0]||0,this.minutes=+d[1]||0,this.spanHours.html(b(this.hours)),this.spanMinutes.html(b(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,i.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(a){var b=g(a.target);(b.hasClass("closeButton")||b.hasClass("confirmBTN"))&&0===b.closest(c.popover).length&&0===b.closest(c.addon).length&&0===b.closest(c.input).length&&(g(".kore-action-sheet").animate({height:"toggle"}),g(".kore-action-sheet").addClass("hide"),c.hide())}),i.on("keyup.clockpicker."+this.id,function(a){27===a.keyCode&&c.hide()}),e(this.options.afterShow)}},d.prototype.hide=function(){e(this.options.beforeHide),this.isShown=!1,i.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),i.off("keyup.clockpicker."+this.id),this.popover.hide(),e(this.options.afterHide)},d.prototype.toggleView=function(a,b){var c=!1;"minutes"===a&&"visible"===g(this.hoursView).css("visibility")&&(e(this.options.beforeHourSelect),c=!0);var d="hours"===a,f=d?this.hoursView:this.minutesView,h=d?this.minutesView:this.hoursView;this.currentView=a,this.spanHours.toggleClass("text-primary",d),this.spanMinutes.toggleClass("text-primary",!d),h.addClass("clockpicker-dial-out"),f.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(b),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){h.css("visibility","hidden")},x),c&&e(this.options.afterHourSelect)},d.prototype.resetClock=function(a){var b=this.currentView,c=this[b],d="hours"===b,e=Math.PI/(d?6:30),f=c*e,g=d&&c>0&&c<13?u:t,h=Math.sin(f)*g,i=-Math.cos(f)*g,j=this;k&&a?(j.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){j.canvas.removeClass("clockpicker-canvas-out"),j.setHand(h,i)},a)):this.setHand(h,i)},d.prototype.setHand=function(a,c,d,e){var f,h=Math.atan2(a,-c),i="hours"===this.currentView,j=Math.PI/(i||d?6:30),l=Math.sqrt(a*a+c*c),m=this.options,n=i&&l<(t+u)/2,o=n?u:t;if(m.twelvehour&&(o=t),h<0&&(h=2*Math.PI+h),f=Math.round(h/j),h=f*j,m.twelvehour?i?0===f&&(f=12):(d&&(f*=5),60===f&&(f=0)):i?(12===f&&(f=0),f=n?0===f?12:f:0===f?0:f+12):(d&&(f*=5),60===f&&(f=0)),this[this.currentView]!==f&&q&&this.options.vibrate&&(this.vibrateTimer||(navigator[q](10),this.vibrateTimer=setTimeout(g.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=f,this[i?"spanHours":"spanMinutes"].html(b(f)),!k)return void this[i?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var a=g(this);a.toggleClass("active",f===+a.html())});e||!i&&f%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var p=Math.sin(h)*o,r=-Math.cos(h)*o;this.hand.setAttribute("x2",p),this.hand.setAttribute("y2",r),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",r),this.fg.setAttribute("cx",p),this.fg.setAttribute("cy",r)},d.prototype.done=function(){e(this.options.beforeDone,this),this.hide();var a=this.input.prop("value"),c=b(this.hours)+":"+b(this.minutes);this.options.twelvehour&&(c+=this.amOrPm),this.input.prop("value",c),c!==a&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),e(this.options.afterDone,this)},d.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(h.off("resize.clockpicker"+this.id),this.popover.remove())},g.fn.clockpicker=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=g(this),e=c.data("clockpicker");if(e)"function"==typeof e[a]&&e[a].apply(e,b);else{var f=g.extend({},d.DEFAULTS,c.data(),"object"==typeof a&&a);c.data("clockpicker",new d(c,f))}})}}(),function(a){function b(a){var b={dateRangeConfig:{alwaysOpen:!0,singleMonth:!0,showShortcuts:!1,showTopbar:!1,format:"DD-MM-YYYY",startDate:"",endDate:"",inline:!0,selectForward:!0},daterangepicker:{title:"Please Choose"},dateConfig:{alwaysOpen:!0,singleMonth:!0,singleDate:!0,showShortcuts:!1,showTopbar:!1,format:"MM-DD-YYYY",startDate:"",endDate:"",inline:!0},datepicker:{title:"Please Choose"},clockPicker:{title:""}},c=[];c.push(a),c.push(b),this.mainConfig=c,this.pickerSubconfig=b,this.chatWindowInstance=c[0].chatWindowInstance,this.chatConfig=c[1];var d=c[0].chatConfig.chatContainer;this._korePickers=d}function c(a){return new Date(a).getMonth()}function d(b){var d=["January","February","March","April","May","June","July","August","September","October","November","December"],e=a(".date-picker-wrapper .month-wrapper .month1 .month-name .month-element")[0].innerText,f=c(b.dateConfig.endDate);b.dateConfig.showdueDate&&d[f].toLowerCase()===e.toLowerCase()&&(a(".month-wrapper .day.toMonth.valid").last().css({"background-color":"#e94848"}),a(".month-wrapper .day.toMonth.valid.tmp").last().css({"background-color":"#e94848"}))}b.prototype.showTaskMenuItems=function(a){return a},b.prototype.showRadioOptionMenuItems=function(a){return{radioOptions:[{title:"Shanmuga",value:"1234 4567 5678 6789",postback:{title:"Transaction Successful",value:"Payment Successful"}},{title:"Madhu",value:"1234 4567 5678 9876",postback:{title:"radioOptionDetails",value:"AccountData"}},{title:"Santhosh",value:"4678 1234 5678 9876",postback:{title:"Get my leave balance",value:"leaveintent"}},{title:"Manjula",value:"9876 1234 4567 5678",postback:{title:"Transaction Successful",value:"leaveintent"}},{title:"Ravi Kiran",value:"8976 5677 7946 2345",postback:{title:"radioOptionDetails",value:"leaveintent"}}]}},b.prototype.init=function(a){a=this.mainConfig,chatWindowInstance=this.chatWindowInstance,chatWindowInstance.config.pickersConfig.showDateRangePickerIcon&&(this.showDateRangeIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkRangeCalender.calenderBtn",function(c){b.prototype.showDateRangePicker(a)})),chatWindowInstance.config.pickersConfig.showDatePickerIcon&&(this.showDateIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkCalender.calenderBtn",function(c){b.prototype.showDatePicker(a)})),chatWindowInstance.config.pickersConfig.showClockPickerIcon&&(this.showClockIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkClock.clockBtn",function(c){b.prototype.showClockPicker(a)})),chatWindowInstance.config.pickersConfig.showradioOptionMenuPickerIcon&&(this.showAccountIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkAccount.accountBtn",function(c){b.prototype.showradioOptionsPicker(a)})),chatWindowInstance.config.pickersConfig.showTaskMenuPickerIcon&&(this.addTaskIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkMenu.menuBtn",function(c){b.prototype.showTaskPicker(a)}))},b.prototype.addSlider=function(){a(".kore-chat-window").remove(".kore-action-sheet"),a(".kore-chat-window").append('<div class="kore-action-sheet hide">    <div class="actionSheetContainer"></div>    </div>')},b.prototype.bottomSlider=function(b,c){a(".kore-action-sheet").animate({height:"toggle"}),"hide"==b?(a(".kore-action-sheet").innerHTML="",a(".kore-action-sheet").addClass("hide")):(a(".kore-action-sheet").removeClass("hide"),a(".kore-action-sheet .actionSheetContainer").empty(),setTimeout(function(){a(".kore-action-sheet .actionSheetContainer").append(c)},200))},b.prototype.showradioOptionsPicker=function(a){_korePickers.find(".kore-action-sheet").length&&(_korePickers.find(".radioOptionsPickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),accountData=this.showRadioOptionMenuItems(),_korePickers.find(".kore-action-sheet").append(this.getradioOptionsPickerContainer()),this.addAccountIconToFooter(),_korePickers.find(".radioOptionsPickerContainer").append(this.getradioOptionsPickerTemplate(accountData)),this.addradioOptionsMenuListener(a)},b.prototype.getradioOptionsPickerTemplate=function(b){var c=a('<div class="radioOptionMenuPicker"></div>');return b.radioOptions.forEach(function(b){var d=a('<label class="radioButton"><div class="btnAccount">      <div class="radioValue">         <input type="radio" id="selectedValue" name="radio">         <span class="checkmark"></span>         </div>         <span class="radioOptionDetails">            <span class="radioOptionName" title="'+b.title+'" data-value="'+b.postback.value+'" data-title="'+b.postback.title+'">'+b.title+'</span>            <div class="radioOptionValue" title="'+b.value+'">'+b.value+"</div>         </span>    </div> </label>");c.append(d)}),c},b.prototype.addradioOptionsMenuListener=function(b){var c,d=this;_korePickers.find(".radioOptionsPickerContainer").removeClass("hide"),_korePickers.find(".TaskPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".clockPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find(".kore-action-sheet  .datePickerContainer").addClass("hide"),_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"none"}),d.bottomSlider("show",_korePickers.find(".radioOptionsPickerContainer")),setTimeout(function(){_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"block"})},300),_korePickers.find(".btnAccount").click(function(b){c=a(b.currentTarget),c.find(".checkmark").addClass("selected")}),_korePickers.find(".radioOptionsPickerContainer .confirmBTN").click(function(e){var f=c.find(".radioOptionName").attr("data-value"),g=c.find(".radioOptionName").attr("data-title");b[0].chatWindowInstance.sendMessage(a(".chatInputBox").text(f),g),_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"block"}),d.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".radioOptionsPickerContainer .closePicker").click(function(){_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"none"}),d.bottomSlider("hide"),setTimeout(function(){_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"block"})},100),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.getAccountIconTemplate=function(){return'<div class="sdkFooterIcon account">     <button type="button"  class="sdkAccount accountBtn" title="AccountMenu">          <i class="accountIcon"></i>     </button>     </div>'},b.prototype.addAccountIconToFooter=function(){_korePickers.find(".radioOptionsPickerContainer").append(this.getAccountIconTemplate)},b.prototype.getradioOptionsPickerContainer=function(){return'<div class="radioOptionsPickerContainer hide">    <div class="radioOptionMenuHeader">       <button class="closePicker" title="Close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>       <label class="radioOptionHeading">Select an Account</label>    </div>    <div class="confirmBTN">Confirm</div>    </div>'},b.prototype.showAccountIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getAccountIconTemplate)},b.prototype.showTaskPicker=function(a){actionsData=this.showTaskMenuItems(window.KoreSDK.chatConfig.botOptions.hamburgermenuData),_korePickers.find(".kore-action-sheet").length&&(_korePickers.find(".TaskPickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getTaskPickerContainer(actionsData)),_korePickers.find(".TaskPickerContainer").append(this.getTaskPickerTemplate(actionsData)),this.addTaskMenuListener(a)},b.prototype.getTaskPickerTemplate=function(b){var c=a('<div class="taskMenuPicker"></div>');if(b&&b.tasks){b.tasks.forEach(function(b){var d=a('<div class="btnTask">            <span class="taskName" data-title-response="'+b.postback.buttonResponse+'" data-value="'+b.postback.value+'" data-title="'+b.postback.title+'" title="'+b.title+'">'+b.title+'</span>            <div class="imageIcon"> <img src="'+b.icon+'" class="displayIcon"></div>            </div>');c.append(d)})}return c},b.prototype.addTaskMenuListener=function(b){var c=this;_korePickers.find(".TaskPickerContainer .searchInput").hide(),_korePickers.find(".TaskPickerContainer").removeClass("hide"),_korePickers.find(".radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".clockPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find(".kore-action-sheet  .datePickerContainer").addClass("hide"),c.bottomSlider("show",_korePickers.find(".TaskPickerContainer")),_korePickers.find(".TaskPickerContainer .btnTask").click(function(d){var e=a(d.currentTarget).find(".taskName").text();_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(e);var f=a(d.currentTarget).find(".taskName").attr("data-value"),g=(a(d.currentTarget).find(".taskName").attr("data-title"),a(d.currentTarget).find(".taskName").attr("data-title-response"));b[0].chatWindowInstance.sendMessage(a(".chatInputBox").text(f),g),c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".TaskPickerContainer .closeSheet").click(function(){c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.getTaskIconTemplate=function(){return'<div class="sdkFooterIcon menu">     <button type="button"  class="sdkMenu menuBtn" title="TaskMenu">          <i class="menuIcon"></i>     </button>     </div>'},b.prototype.addTaskIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getTaskIconTemplate)},b.prototype.getTaskPickerContainer=function(a){return'<div class="TaskPickerContainer hide">    <div class="taskMenuHeader">         <button class="closeSheet" title="Close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>          <input class="searchInput" placeholder="Write a reply">       <label class="taskHeading"> '+a.heading+" </label>    </div>"},b.prototype.showDateRangePicker=function(b){_korePickers.find(".kore-action-sheet").length&&(_korePickers.find(".kore-action-sheet .dateRangePickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getdateRangePickerContainer),this.addDateRangeIconToFooter();var c={alwaysOpen:!0,singleMonth:!0,showShortcuts:!1,showTopbar:!1,format:b[1].dateRangeConfig.format,startDate:b[1].dateRangeConfig.startDate,endDate:b[1].dateRangeConfig.endDate,inline:!0,container:_korePickers.find(".kore-action-sheet .dateRangePickerContainer")};a.extend(b[1].dateRangeConfig,c),daterangeInput=_korePickers.find(".kore-action-sheet .dateRangePickerContainer #rangeCalenderBtn").dateRangePicker(c),this.addDateRangeListener(b)},b.prototype.addDateRangeListener=function(b){var c=this;this.addClickEventRangeCalender(b);var d,e,f=null,g=null,h=null,i=null;daterangeInput.bind("datepicker-first-date-selected",function(b,c){a(".day.toMonth.valid").removeClass("selectedDefault");var e=null;d=c.date1;var e=moment(d).format("YYYY"),g=moment(d).format("ddd,MMM DD");h=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartYear").html(e),f=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartMonth").html(g),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html("Select"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").css({opacity:"0"})}),daterangeInput.bind("datepicker-change",function(a,b){var c=null;_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").css({opacity:"1"}),e=b.date2;var c=moment(e).format("YYYY");i=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").html(c);var d=moment(e).format("ddd,MMM DD");g=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html(d)}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .confirmBTN").click(function(){if(null!==f&&null==g)_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html("Select");else if(null!==f&&null!==g){if(b[1].dateRangeConfig.expectedFormat)var h=b[1].dateRangeConfig.expectedFormat;else var h="MM-DD-YYYY";if(b[1].dateRangeConfig.dateSeperator)var i=b[1].dateRangeConfig.dateSeperator;else var i="to";var j=moment(d).format(h)||moment(),k=moment(e).format(h)||moment(),l=j+" "+i+" "+k;_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(l);var m=a.Event("keydown");m.keyCode=13,_korePickers.find(".footerContainer.pos-relative .chatInputBox").trigger(m),c.bottomSlider("hide"),daterangeInput.data("dateRangePicker").clear(),daterangeInput.data("dateRangePicker").resetMonthsView(),_korePickers.find(".kore-action-sheet").remove()}}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .close-button").click(function(){c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.addClickEventRangeCalender=function(a){var b=this;_korePickers.find(".kore-action-sheet .datePickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .clockPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .TaskPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find(".kore-action-sheet .dateRangePickerContainer #rangeCalenderBtn").data("dateRangePicker").open(),_korePickers.find(".cancelBtn").hide(),_korePickers.find(".drp-selected").hide(),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartMonth").html(moment().format("ddd,MMM DD")),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html(moment().format("ddd,MMM DD")),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartYear").html((new Date).getFullYear()),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").html((new Date).getFullYear()),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").removeClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .date-picker-wrapper").css({border:"0px","background-color":"white"}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .month-wrapper").css({border:"0px"}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .headerCalendar .choose").html(a[1].daterangepicker.title),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .date-picker-wrapper .month-wrapper .real-today").addClass("first-date-selected"),b.bottomSlider("show",_korePickers.find(".dateRangePickerContainer")),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .confirmBTN").css({display:"block"})},b.prototype.getDateRangeIconTemplate=function(){return'<div class="sdkFooterIcon rangeCalender">                     <button name="dates" class="sdkRangeCalender calenderBtn" title="RangeCalender">                         <i class="Rangecalender"></i>                     </button>                 </div>'},b.prototype.addDateRangeIconTemplate=function(){return'<div id="rangeCalenderBtn">    </div>'},b.prototype.showDateRangeIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getDateRangeIconTemplate)},b.prototype.addDateRangeIconToFooter=function(){_korePickers.find(".kore-action-sheet .dateRangePickerContainer").append(this.addDateRangeIconTemplate)},b.prototype.getdateRangePickerContainer=function(){return'<div class="dateRangePickerContainer hide">                <div class="headerCalendar">                    <span class="choose"></span>                    <button class="close-button" title="Close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>                </div>                <div class="showDatevalues">                    <div class="showStartdate">                        <div class="showStartYear"></div>                        <div class="showStartMonth"></div>                    </div>                    <div class="showEnddate">                        <div class="showEndYear"></div>                        <div class="showEndMonth"></div>                   </div>                </div>               <div class="confirmBTN">Confirm</div>           </div>'},b.prototype.showDatePicker=function(b){_korePickers.find(".kore-action-sheet").length&&(_korePickers.find(".kore-action-sheet  .datePickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getdatePickerContainer),this.addDateIconToFooter();var c={alwaysOpen:!0,singleMonth:!0,showShortcuts:!1,singleDate:!0,showTopbar:!1,format:b[1].dateConfig.format,startDate:b[1].dateConfig.startDate,endDate:b[1].dateConfig.endDate,inline:!0,container:_korePickers.find(".kore-action-sheet .datePickerContainer")};a.extend(c,b[1].dateConfig),daterangeInput=_korePickers.find(".kore-action-sheet .datePickerContainer #calender").dateRangePicker(c),this.addDateListener(b)},b.prototype.addDateListener=function(b){var c=this;this.addClickEventCalender(b);var d;daterangeInput.bind("datepicker-first-date-selected",function(b,c){a(".day.toMonth.valid").removeClass("selectedDefault");var e=null;d=c.date1;var e=moment(d).format("YYYY"),f=moment(d).format("ddd,MMM DD");showStartYearValue=_korePickers.find(".kore-action-sheet .datePickerContainer .showStartdate .showStartYear").html(e),showStartDateValue=_korePickers.find(".kore-action-sheet .datePickerContainer .showStartdate .showStartMonth").html(f)}),_korePickers.find(".kore-action-sheet .datePickerContainer .confirmBTN").click(function(){var b=moment(d).format("MMMM Do, YYYY")||moment(),e=b;_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(e);var f=a.Event("keydown");f.keyCode=13,_korePickers.find(".footerContainer.pos-relative .chatInputBox").trigger(f),c.bottomSlider("hide"),daterangeInput.data("dateRangePicker").clear(),daterangeInput.data("dateRangePicker").resetMonthsView(),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".kore-action-sheet .datePickerContainer .close-button").click(function(){c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.dateHighlights=function(){return'<div class="datePickerHighlights">    <div class="paymentMain">         <span class="paymentIcon"></span>         <span class="paymentDue"></span>    </div>    </div>'},b.prototype.addClickEventCalender=function(b){var c=this;_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .clockPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .TaskPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find("#calender").data("dateRangePicker").open(),b[1].dateConfig.showdueDate&&(a(".kore-chat-window .kore-action-sheet").css({height:"485px"}),a(".datePickerContainer").append(this.dateHighlights)),a(".selectedMain").insertAfter(".date-picker-wrapper.single-date"),a(".datePickerHighlights").insertAfter(".date-picker-wrapper.single-date"),b[1].dateConfig.startDate&&(a(".day.toMonth.valid").first().addClass("selectedDefault"),a(".day.toMonth.invalid.real-today").css({"background-color":"#FFFFFF"})),d(b[1]),a(".month-wrapper .next").click(function(){d(b[1])});moment().format("MM-DD-YYYY");_korePickers.find(".cancelBtn").hide(),_korePickers.find(".drp-selected").hide(),_korePickers.find(".kore-action-sheet .datePickerContainer  .showStartdate .showStartMonth").html(moment().format("ddd,MMM DD")),_korePickers.find(".kore-action-sheet .datePickerContainer .showStartdate .showStartYear").html((new Date).getFullYear()),_korePickers.find(".kore-action-sheet  .datePickerContainer").removeClass("hide"),_korePickers.find(".kore-action-sheet  .datePickerContainer .date-picker-wrapper").css({border:"0px","background-color":"white"}),_korePickers.find(".kore-action-sheet  .datePickerContainer .month-wrapper").css({border:"0px"}),_korePickers.find(".kore-action-sheet .datePickerContainer  .headerCalendar .choose").html(b[1].datepicker.title),a(".datePickerContainer .selectedDate").html(b[1].dateConfig.selectedDate),a(".datePickerContainer .datePickerHighlights .paymentDue").html(b[1].dateConfig.paymentDue),_korePickers.find(".kore-action-sheet .datePickerContainer  .confirmBTN").css({display:"none"}),c.bottomSlider("show",_korePickers.find(".datePickerContainer")),setTimeout(function(){_korePickers.find(".kore-action-sheet .datePickerContainer  .confirmBTN").css({display:"block"})},300)},b.prototype.getDateIconTemplate=function(){return'<div class="sdkFooterIcon singleCalender">                     <button name="dates" class="sdkCalender calenderBtn" title="Calender">                         <i class="calender"></i>                     </button>                 </div>'},b.prototype.addDateIconTemplate=function(){return'<div id="calender">    </div>'},b.prototype.showDateIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getDateIconTemplate)},b.prototype.addDateIconToFooter=function(){_korePickers.find(".kore-action-sheet  .datePickerContainer").append(this.addDateIconTemplate)},b.prototype.getdatePickerContainer=function(){return'<div class="datePickerContainer hide">                <div class="headerCalendar">                    <span class="choose"></span>                    <button class="close-button" title="Close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>                </div>                <div class="showDatevalues">                    <div class="showStartdate">                        <div class="showStartYear"></div>                        <div class="showStartMonth"></div>                    </div>                    <div class="showEnddate">                        <div class="showEndYear"></div>                        <div class="showEndMonth"></div>                   </div>                </div>               <div class="confirmBTN">Confirm</div>               <div class="selectedMain">                    <span class="selectedIcon"></span>                    <span class="selectedDate"></span>                </div>           </div>'},b.prototype.showClockPicker=function(b,c){_korePickers.find(".clockPickerContainer").length&&(_korePickers.find(".clockPickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getclockPickerContainer),this.addClockIconToFooter();var d=a("#clockPickerInput");this.input=d,d.clockpicker({donetext:"Done",placement:"top",vibrate:!1,twelvehour:!0,parentEl:".clockPickerContainer",afterDone:function(b){var c=b.hours,d=b.minutes;d<10&&(d="0"+d);var e=b.amOrPm,f=c+":"+d+" "+e;_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(f);var g=a.Event("keydown");g.keyCode=13,_korePickers.find(".footerContainer.pos-relative .chatInputBox").trigger(g)}}),this.addClockListener(b)},b.prototype.addClickEventClock=function(a){var b=this.input,c=_korePickers.find("#clockPickerInput").data("clockpicker");c.amOrPm="AM",c.options.default="12:00",_korePickers.find(".form-control").hide(),_korePickers.find(".kore-action-sheet  .datePickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".TaskPickerContainer").addClass("hide"),_korePickers.find(".clockPickerContainer").removeClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),b.clockpicker("show").clockpicker("toggleView","hours"),a[1].clockPicker.title?_korePickers.find(".kore-action-sheet .clockPickerContainer .headerClock .choose").html(a[1].clockPicker.title):_korePickers.find(".kore-action-sheet .clockPickerContainer .headerClock .choose").html("Please Choose"),_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"none"}),setTimeout(function(){_korePickers.find(".kore-action-sheet").animate({height:"toggle"}),_korePickers.find(".kore-action-sheet").removeClass("hide"),setTimeout(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"block"})},300)},100),_korePickers.find(".btn.btn-sm.btn-default.btn-block.clockpicker-button").hide(),setTimeout(function(){_korePickers.find(".kore-action-sheet .clockPickerContainer .clockpicker-popover").css({display:"block",top:"75px ",left:"80.5px"}),_korePickers.find(".kore-action-sheet .clockPickerContainer .clockpicker-popover .clockpicker-plate").css({"margin-left":"25px"}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").css({opacity:"0.4"})},0)},b.prototype.addClockListener=function(a){this.addClickEventClock(a),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.am-button").click(function(){_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").css({opacity:"0.4"}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.am-button").css({opacity:"1"})}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").click(function(){_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.am-button").css({opacity:"0.4"}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").css({opacity:"1"})}),_korePickers.find(".clockPickerContainer .confirmBTN").click(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"block"}),_korePickers.find(".btn.btn-sm.btn-default.btn-block.clockpicker-button").trigger("click"),_korePickers.find(".kore-action-sheet").hide(),_korePickers.find(".kore-action-sheet").addClass("hide"),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".clockPickerContainer .closeButton").click(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"none"}),setTimeout(function(){_korePickers.find(".kore-action-sheet").animate({height:"toggle"}),_korePickers.find(".kore-action-sheet").addClass("hide"),setTimeout(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"block"})},100)},100),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.getClockIconTemplate=function(){return'<div class="sdkFooterIcon clock">                    <button type="button"  class="sdkClock clockBtn" title="Clock">                         <i class="clock"></i>                    </button>                </div>'},b.prototype.addClockIconToFooter=function(){_korePickers.find(".clockPickerContainer").append(this.getClockIconTemplate)},b.prototype.showClockIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getClockIconTemplate)},b.prototype.getclockPickerContainer=function(){return'<div class="clockPickerContainer hide">                <div class="headerClock">                    <span class="choose"></span>                    <button class="closeButton" title="Close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"></button>                </div>                <input class="form-control" id="clockPickerInput" value="">                <div class="confirmBTN">Confirm</div>            </div>'},window.KorePickers=b}($);]]></script>
        <script_name>kore-ai-sdk4.min.js</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-01-02 07:28:33</sys_created_on>
        <sys_id>acbc8ea4972b75109b137076f053af0c</sys_id>
        <sys_mod_count>18</sys_mod_count>
        <sys_name>x_831378_kore_ai_0.kore-ai-sdk4.min.js</sys_name>
        <sys_package display_value="IT Assist" source="x_831378_kore_ai_0">5db40dbc2f21111051c859a72799b60c</sys_package>
        <sys_policy/>
        <sys_scope display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</sys_scope>
        <sys_update_name>sys_ui_script_acbc8ea4972b75109b137076f053af0c</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-02-21 10:57:21</sys_updated_on>
        <ui_type>0</ui_type>
        <use_scoped_format>false</use_scoped_format>
    </sys_ui_script>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</application>
        <file_path/>
        <instance_id>a8ade591db83d5140288c597059619f8</instance_id>
        <instance_name>dev143442</instance_name>
        <name>sys_ui_script_acbc8ea4972b75109b137076f053af0c</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sys_ui_script"&gt;&lt;sys_ui_script action="INSERT_OR_UPDATE"&gt;&lt;active&gt;true&lt;/active&gt;&lt;description/&gt;&lt;global&gt;false&lt;/global&gt;&lt;ignore_in_now_experience&gt;false&lt;/ignore_in_now_experience&gt;&lt;name&gt;x_831378_kore_ai_0.kore-ai-sdk4.min.js&lt;/name&gt;&lt;script&gt;&lt;![CDATA[!function(a){window.koreBotChat=a()}(function(){return function(){var a;return a=window&amp;&amp;window.KoreSDK&amp;&amp;window.KoreSDK.dependencies&amp;&amp;window.KoreSDK.dependencies.jQuery?window.KoreSDK.dependencies.jQuery:window.jQuery,function(a){function b(a,b){for(var c=0,d=a.length;c&lt;d;){var e=c+d&gt;&gt;&gt;1;a[e]&lt;b?c=e+1:d=e}return c}function c(a){var b;return a&amp;&amp;(b=a.isNotAllowedHTMLTags()),b&amp;&amp;!b.isValid&amp;&amp;(a=a.escapeHTML()),a}function d(a){return 0===(a=Number(a))||!(!a||a%2)}function e(){for(var a=function(b){var c={};if("object"==typeof b){for(var d in b)b.hasOwnProperty(d)&amp;&amp;("object"==typeof b[d]?c[d]=a(b[d]):c[d]=b[d]);return c}return b},b=1;b&lt;arguments.length;b++)for(var c in arguments[b])arguments[b].hasOwnProperty(c)&amp;&amp;("object"==typeof arguments[b][c]?arguments[0][c]=a(arguments[b][c]):arguments[0][c]=arguments[b][c]);return arguments[0]}function f(a){Na=!1,a.botOptions.test=!1,this.config={chatTitle:"Kore.ai Bot Chat",container:"body",allowIframe:!1,botOptions:a.botOptions},qa=a.botOptions.koreAPIUrl,Ha=a.botOptions.bearer,Pa=a.botOptions.koreSpeechAPIUrl,db=a.botOptions.ttsSocketUrl,La=a.botOptions.userIdentity,a.botOptions.recorderWorkerPath&amp;&amp;a.botOptions.recorderWorkerPath.trim().length&gt;0&amp;&amp;(Ya=a.botOptions.recorderWorkerPath.trim()),a&amp;&amp;a.chatContainer&amp;&amp;delete a.chatContainer,this.config=e(this.config,a),window._chatHistoryLoaded=!1,this.init(),l(),k(),window.addEventListener("online",l),window.addEventListener("offline",l),g()}function g(){var a=window.addEventListener?"addEventListener":"attachEvent";(0,window[a])("attachEvent"==a?"onmessage":"message",function(a){if(a.data&amp;&amp;a.data.event)switch(a.data.event){case"formEvent":j(a.data)}},!1)}function h(a,b){a&amp;&amp;a.length&amp;&amp;a[0]&amp;&amp;a[0].contentWindow&amp;&amp;b&amp;&amp;a[0].contentWindow.postMessage(b,"*")}function i(b,c){var d=a("#chatBodyModal");document.getElementsByClassName("closeChatBodyModal")[0].onclick=function(){var a={payload:{},event:"formEvent",action:"formCancel",metaData:{}};h(d.find("iframe"),a),d.hide()},b?(d.find(".closeChatBodyModal").css("display","none"),d.find(".loading_form").css("z-index",999),d&amp;&amp;d.length&amp;&amp;(d.find("#chatBodyModalContent").empty(),d.find("#chatBodyModalContent").append(b),d.show()),setTimeout(function(){d.find(".loading_form").css("z-index",0),c?d.find(".closeChatBodyModal").css("display","block"):d.find(".closeChatBodyModal").css("display","none")},1500)):(d.find(".closeChatBodyModal").css("display","none"),setTimeout(function(){d.find("#chatBodyModalContent").empty()},1e3),d.hide())}function j(b){b&amp;&amp;"formSubmit"===b.action?(i(),a(".kore-chat-body .uiformComponent").length&amp;&amp;a(".kore-chat-body .uiformComponent").closest(".inlineIframeContainer").css("display","none")):"formCancel"===b.action?a(".kore-chat-body .uiformComponent").length&amp;&amp;a(".kore-chat-body .uiformComponent").closest(".inlineIframeContainer").css("display","none"):"formClose"===b.action&amp;&amp;(i(),a(".kore-chat-body .uiformComponent").length&amp;&amp;a(".kore-chat-body .uiformComponent").closest(".inlineIframeContainer").css("display","none"))}function k(){a(".kore-chat-window").remove(".kore-action-sheet"),a(".kore-chat-window").append('&lt;div class="kore-action-sheet hide"&gt;                &lt;div class="actionSheetContainer"&gt;&lt;/div&gt;                &lt;/div&gt;')}function l(){"boolean"==typeof Ua.onLine&amp;&amp;(Ua.onLine?(this.hideError(),Aa&amp;&amp;Aa.RtmClient&amp;&amp;Aa.getHistory({forHistorySync:!0,limit:30})):this.showError("You are currently offline"))}function m(){clearTimeout(ya),ya=setTimeout(function(){var a={};a.type="ping",Aa.sendMessage(a,function(){}),m()},$a)}function n(){var a=document.getElementById("myModal"),b=(document.getElementById("myImg"),document.getElementById("img01")),c=document.getElementById("caption");if(document.querySelectorAll(".messageBubble img").length&gt;0)for(var d=0;d&lt;document.querySelectorAll(".messageBubble img").length;d++){var e=document.querySelectorAll(".messageBubble img")[d];e.addEventListener("click",function(d){d.stopPropagation(),d.stopImmediatePropagation(),a.style.display="block",b.src=this.src,c.innerHTML=this.alt})}document.getElementsByClassName("closeImagePreview")[0].onclick=function(){a.style.display="none"}}function o(){try{return/iphone|ipod|android|blackberry|fennec/.test(Ua.userAgent.toLowerCase())||window.screen.width&lt;=480}catch(a){return!1}}function p(){}function q(a,b){var c=a;if(sel=window.getSelection(),sel.rangeCount&gt;0&amp;&amp;(range=sel.getRangeAt(0),range.deleteContents()),oa=oa||range){node=document.createElement("span"),oa.insertNode(node);var d=document.createElement("span");d.innerHTML=b,oa.insertNode(d),oa.setEndAfter(node),oa.setStartAfter(node),oa.collapse(!1),sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(oa);var e=document.activeElement;return e&amp;&amp;"chatInputBox"==!e.className&amp;&amp;c.focus(),c}c.appendChild(html)}function r(a){if(a&amp;&amp;a.item(0)&amp;&amp;a.item(0).innerText.length){var b=document.createRange();b.selectNodeContents(a[0]),b.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(b),oa=b}else oa=!1,a&amp;&amp;a[0]&amp;&amp;a[0].focus()}function s(a){return a.split(".")}function t(){var a=window.chrome,b=window.navigator,c=b.vendor,d=b.userAgent.indexOf("OPR")&gt;-1,e=b.userAgent.indexOf("Edge")&gt;-1;return!!b.userAgent.match("CriOS")||null!==a&amp;&amp;void 0!==a&amp;&amp;"Google Inc."===c&amp;&amp;!1===d&amp;&amp;!1===e}function u(){setTimeout(function(){Ta&amp;&amp;(a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1)},2e4)}function v(a){return a.replace(Ab,"&lt;p&gt;&lt;/p&gt;").replace(Bb,"&lt;br&gt;")}function w(a){return a.replace(a.substr(0,1),function(a){return a.toUpperCase()})}function x(){if(xb)return void yb.stop();wb="",yb.lang="en-US",yb.start()}function y(){ua&amp;&amp;(ua.record(),a(".recordingMicrophone").css("display","block"),a(".notRecordingMicrophone").css("display","none"),console.log("recording..."),wa=setInterval(function(){ua.export16kMono(function(a){console.log(new Date),ab?sendBlobToSpeech(a,"LINEAR16",16e3):E(a),ua.clear()},"audio/x-raw")},1e3))}function z(){if(ab)yb?x():A();else{if(!Pa)return console.warn("Please provide speech socket url"),!1;a.ajax({url:Pa+"asr/wss/start?email="+La,type:"post",headers:{Authorization:Ha||Ia},dataType:"json",success:function(a){Qa=a.link,A()},error:function(a){console.log(a)}})}}function A(){Na||(Ua.getUserMedia||(Ua.getUserMedia=Ua.getUserMedia||Ua.webkitGetUserMedia||Ua.mozGetUserMedia||Ua.msGetUserMedia),Ua.getUserMedia?(Na=!0,Ua.getUserMedia({audio:!0},C,function(a){Na=!1,alert("Please enable the microphone permission for this page")})):(Na=!1,alert("getUserMedia is not supported in this browser.")))}function B(){if(Ua.getUserMedia){if(!ua)return Na=!1,void console.error("Recorder undefined");va&amp;&amp;D();try{va=F()}catch(a){Na=!1,console.log(a),console.error("Web socket not supported in the browser")}}}function C(a){if(Ma=!0,sa=a,!xa){var b=window.AudioContext||window.webkitAudioContext;xa=new b}ta=xa.createMediaStreamSource(sa),window.userSpeechAnalyser=xa.createAnalyser(),ta.connect(window.userSpeechAnalyser),console.log("Mediastream created"),va&amp;&amp;(va.close(),va=null),ua&amp;&amp;(ua.stop(),ua.clear(),ua=null),ua=new Recorder(ta,{workerPath:Ya}),console.log("Recorder Initialized"),Va=!0,ab?y():B(),setTimeout(function(){r(document.getElementsByClassName("chatInputBox"))},600)}function D(){if(clearInterval(wa),Na=!1,a(".recordingMicrophone")&amp;&amp;a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone")&amp;&amp;a(".notRecordingMicrophone").css("display","block"),null!==sa&amp;&amp;sa&amp;&amp;sa.getTracks()[0].enabled){sa.getTracks()[0].stop()}va&amp;&amp;(va.close(),va=null),ua&amp;&amp;(ua.stop(),ua.clear()),Qa=""}function E(a){if(va){var b=va.readyState;1===b?a instanceof Blob?a.size&gt;0&amp;&amp;va.send(a):(console.log(a),va.send(a)):(Na=!1,console.error("Web Socket readyState != 1: ",b,"failed to send :"+a.type+", "+a.size),D())}else Na=!1,console.error("No web socket connection: failed to send: ",a)}function F(){window.ENABLE_MICROPHONE=!0,temp,window.SPEECH_SERVER_SOCKET_URL=Qa;var b=window.SPEECH_SERVER_SOCKET_URL,c=La;window.WebSocket=window.WebSocket||window.MozWebSocket;var d=b+"&amp;"+Xa+"&amp;email="+c,e=new WebSocket(d);return e.onopen=function(b){console.log("User connected"),Wa=!0,ua.record(),a(".recordingMicrophone").css("display","block"),a(".notRecordingMicrophone").css("display","none"),console.log("recording..."),zb="",wa=setInterval(function(){ua.export16kMono(function(a){E(a),ua.clear()},"audio/x-raw")},Za)},e.onmessage=function(b){var c=b.data,d="";if(c instanceof Object&amp;&amp;!(c instanceof Blob))console.log("Got object that is not a blob");else if(c instanceof Blob)console.log("Got Blob");else{var e=JSON.parse(c);Ma&amp;&amp;0===e.status?(d=e.result.hypotheses[0].transcript,e.result.final&amp;&amp;(zb+=e.result.hypotheses[0].transcript+" ",d=""),console.log("Interm: ",d),console.log("final: ",zb),a(".chatInputBox").html(zb+""+d),setTimeout(function(){r(document.getElementsByClassName("chatInputBox")),document.getElementsByClassName("chatInputBox")[0].scrollTop=document.getElementsByClassName("chatInputBox")[0].scrollHeight},350)):console.log("Server error : ",e.status)}},e.onclose=function(b){if(""!==a(".chatInputBox").text()&amp;&amp;ib){window.chatContainerConfig.sendMessage(a(".chatInputBox"))}Na=!1,console.log("Server is closed"),console.log(b),D()},e.onerror=function(a){console.log("Error : ",a)},e}function G(){if(""!==a(".chatInputBox").text()&amp;&amp;ib){window.chatContainerConfig.sendMessage(a(".chatInputBox"))}clearInterval(wa),a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone").css("display","block"),ua?(ua.stop(),Ma=!1,console.log("stopped recording.."),setTimeout(function(){va&amp;&amp;(va.close(),va=null)},1e3),ua.export16kMono(function(a){E(a),ua.clear(),va&amp;&amp;va.close(),sa.getTracks()[0].stop(),ua.destroy(),Na=!1},"audio/x-raw")):console.error("Recorder undefined"),xb&amp;&amp;(yb.stop(),xb=!1)}function H(a){if("speechSynthesis"in window){window.speechSynthesis.cancel();var b=new SpeechSynthesisUtterance;b.text=a,window.speechSynthesis.speak(b)}else console.warn("KORE:Your browser doesn't support TTS(Speech Synthesiser)")}function I(){if(!db)return console.warn("Please provide tts socket url"),!1;window.TTS_SOCKET_URL=db;var a=window.TTS_SOCKET_URL;window.WebSocket=window.WebSocket||window.MozWebSocket;var b=new WebSocket(a);return b.binaryType="arraybuffer",b.onopen=function(a){K(fb)},b.onmessage=function(a){if(fb="","string"==typeof a.data);else{var b=a.data;gb&amp;&amp;M(b)}},b.onclose=function(a){},b.onerror=function(a){console.log("Error : ",a)},b}function J(){cb&amp;&amp;(cb.close(),cb=null)}function K(a){if(cb){var b=cb.readyState;if(1===b){var c=Ha||Ia,d={message:a,user:Ca.name,authorization:c};cb.send(JSON.stringify(d))}else console.error("Web Socket readyState != 1: ",b),J()}else console.error("No web socket connection: failed to send")}function L(){if(!bb){if(!window.AudioContext){if(!window.webkitAudioContext)return void console.error("Your browser does not support any AudioContext and cannot play back this audio.");window.AudioContext=window.webkitAudioContext}bb=new AudioContext}}function M(b){bb.decodeAudioData(b,function(b){if(!b)return void console.error("failed to decode:","buffer null");try{eb&amp;&amp;eb.stop(),eb=bb.createBufferSource(),eb.buffer=b,eb.connect(bb.destination),eb.start(0),eb.addEventListener("ended",function(){setTimeout(function(){gb&amp;&amp;ib&amp;&amp;a(".notRecordingMicrophone").trigger("click")},350)})}catch(a){}},function(a){console.error("failed to decode:",a)})}function N(a,b){function c(a){var c;a.dataTransfer?c=a.dataTransfer.files:a.target&amp;&amp;(c=a.target.files),b.call(null,c)}var d=document.createElement("input");d.setAttribute("type","file"),d.setAttribute("multiple",!1),d.style.display="none",d.addEventListener("change",c),a.appendChild(d),a.addEventListener("dragover",function(b){b.preventDefault(),b.stopPropagation(),a.classList.add("dragover")}),a.addEventListener("dragleave",function(b){b.preventDefault(),b.stopPropagation(),a.classList.remove("dragover")}),a.addEventListener("drop",function(b){b.preventDefault(),b.stopPropagation(),a.classList.remove("dragover"),c(b)})}function O(a,b,c){var d={};if(b&amp;&amp;b.size&amp;&amp;b.size&gt;mb.file.limit.size)return void alert(mb.file.limit.msg);if(b&amp;&amp;c&amp;&amp;(b.name=c),b&amp;&amp;(b.name||c)){var e=c||b.name,f=e.split(".").pop().toLowerCase();d.name=e,d.mediaName=P(),d.fileType=e.split(".").pop().toLowerCase();if(mb.image.indexOf(d.fileType)&gt;-1?(d.type="image",d.uploadFn="acceptFileRecording"):mb.video.indexOf(d.fileType)&gt;-1?(d.type="video",d.uploadFn="acceptVideoRecording"):mb.audio.indexOf(d.fileType)&gt;-1?(d.type="audio",d.uploadFn="acceptFile"):(d.type="attachment",d.componentSize=b.size,d.uploadFn="acceptFile"),lb&amp;&amp;-1!==lb.indexOf(f))if("audio"===d.type||"video"===d.type){var g=new FileReader;g.onload=function(c){var e=new Blob([c.target.result],{type:b.type}),f=(URL||webkitURL).createObjectURL(e),g=document.createElement(d.type);g.preload="metadata",0===g.readyState?(g.addEventListener("loadedmetadata",function(c){Math.round(c.target.duration);"audio"===d.type&amp;&amp;((URL||webkitURL).revokeObjectURL(f),S(a,b,d))}),"video"===d.type&amp;&amp;g.addEventListener("loadeddata",function(c){d.resulttype=Q(g),(URL||webkitURL).revokeObjectURL(f),S(a,b,d)}),g.src=f):((URL||webkitURL).revokeObjectURL(f),S(a,b,d))},g.readAsArrayBuffer(b)}else if(-1!==b.type.indexOf("image")){var h=new FileReader;h.onload=function(c){var e=new Blob([c.target.result],{type:b.type}),f=(URL||webkitURL).createObjectURL(e),g=new Image;g.src=f,g.onload=function(){d.resulttype=Q(g),S(a,b,d)}},h.readAsArrayBuffer(b)}else S(a,b,d);else alert("SDK not supported this type of file")}}function P(a){var b=a||"xxxxyx";return b=b.replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&amp;b|8).toString(16)})}function Q(a){var b=document.createElement("canvas");return b.height=180,b.width=320,b.getContext("2d").drawImage(a,0,0,b.width,b.height),b.toDataURL()}function R(b,c,d){var e,f=b,g=T(d);if(g.chunkUpload=c.size&gt;jb.CHUNK_SIZE,g.chunkSize=jb.CHUNK_SIZE,g.file=c,g.chunkUpload)U(f,d),e=a(".chatInputBox"),V(d,e),e.uploader(g);else{var h=new FileReader;h.onloadend=function(a){if(a.target.readyState===FileReader.DONE){var b=h.result.replace(/^.*;base64,/,""),c=(h.result,b);d.resulttype=c,$(f,d,e)}},h.readAsDataURL(c)}}function S(b,c,d){var e="bearer "+window.jwtDetails.authorization.accessToken;a.ajax({type:"POST",url:qa+"1.1/attachment/file/token",dataType:"json",headers:{Authorization:e},success:function(a){ra=a.fileToken,R(b,c,d)},error:function(b){rb.config.botOptions._reconnecting=!0,showError("Failed to upload file.Please try again"),b.responseJSON&amp;&amp;b.responseJSON.errors&amp;&amp;b.responseJSON.errors.length&amp;&amp;"401"===b.responseJSON.errors[0].httpStatus&amp;&amp;(setTimeout(function(){hideError()},5e3),a(".kore-chat-window .reload-btn").trigger("click")),console.log("Oops, something went horribly wrong")}})}function T(a){return jb.UPLOAD={FILE_ENDPOINT:qa+"1.1/attachment/file",FILE_TOKEN_ENDPOINT:qa+"1.1/attachment/file/token",FILE_CHUNK_ENDPOINT:qa+"1.1/attachment/file/:fileID/chunk"},_accessToke="bearer "+pa,_uploadConfg={},_uploadConfg.url=jb.UPLOAD.FILE_ENDPOINT.replace(":fileID",ra),_uploadConfg.tokenUrl=jb.UPLOAD.FILE_TOKEN_ENDPOINT,_uploadConfg.chunkUrl=jb.UPLOAD.FILE_CHUNK_ENDPOINT.replace(":fileID",ra),_uploadConfg.fieldName="file",_uploadConfg.data={fileExtension:a.fileType,fileContext:"workflows",thumbnailUpload:!1,filename:a.name},_uploadConfg.headers={Authorization:_accessToke},_uploadConfg}function U(a,b,c){var a=a,d={};d.meta={thumbNail:b.resulttype?b.resulttype:void 0},d.values={componentId:b.mediaName,componentType:b.type,componentFileId:c,componentData:{filename:b.name}},b.componentSize&amp;&amp;(d.values.componentSize=b.componentSize),Z(a,d)}function V(a,b){var c=this;b=b||c.ele,b.on("success.ke.uploader",function(b){W(c,b,a)}),b.on("error.ke.uploader",X)}function W(a,b,c){var a=a,d=b.params;if(!d||!d.fileId)return void Y();if(c.mediaName){_(a,c,d.fileId)}}function X(a,b,c){var d=a;_recfileLisnr.onError({code:"UPLOAD_FAILED"}),d.removeCmpt(c)}function Y(){alert("Failed to upload content. Try again"),kb={},a(".attachment").html(""),a(".sendButton").addClass("disabled"),Ga=0}function Z(b,c){var d;if(!d){if(d=a("&lt;div/&gt;").attr({class:"msgCmpt "+c.values.componentType+" "+c.values.componentId}),d.data("value",c.values),c.values.componentFileId||"contact"===c.values.componentType||"location"===c.values.componentType||"filelink"===c.values.componentType||"alert"===c.values.componentType||"email"===c.values.componentType||d.append('&lt;div class="upldIndc"&gt;&lt;/div&gt;'),"attachment"===c.values.componentType){var e;e=c.values.componentDescription?c.values.componentDescription.split(".").pop().toLowerCase():c.values.componentData.filename.split(".").pop().toLowerCase(),"xls"===e||"xlsx"===e?(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_excel"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")):"docx"===e||"doc"===e?(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_word"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")):"pdf"===e?(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_pdf"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")):"ppsx"===e||"pptx"===e||"ppt"===e?(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_ppt"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")):"zip"===e||"rar"===e?(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_zip"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")):(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_other_doc"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;"))}"image"===c.values.componentType&amp;&amp;(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-photos_active"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")),"audio"===c.values.componentType&amp;&amp;(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-files_audio"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;")),"video"===c.values.componentType&amp;&amp;(d.append('&lt;div class="uploadedFileIcon"&gt;&lt;span class="icon cf-icon icon-video_active"&gt;&lt;/span&gt;&lt;/div&gt;'),d.append('&lt;div class="uploadedFileName"&gt;'+c.values.componentData.filename+"&lt;/div&gt;"))}d.append('&lt;div class="removeAttachment"&gt;&lt;span&gt;&amp;times;&lt;/span&gt;&lt;/div&gt;'),a(".footerContainer").find(".attachment").html(d),a(".chatInputBox").focus(),kb.fileName=c.values.componentData.filename,kb.fileType=c.values.componentType,a(".sendButton").removeClass("disabled")}function $(b,c,d){var e=b,f=T(c),g=c.resulttype;_(e,c),f.data[f.fieldName]={fileName:c.name,data:g,type:"image/png"},f.data.thumbnail={fileName:c.name+"_thumb",data:g,type:"image/png"},d=a(".chatInputBox"),V(c,d),d.uploader(f)}function _(a,b,c){var a=a,d={};d.meta={thumbNail:b.resulttype},d.values={componentId:b.mediaName,componentType:b.type,componentFileId:c,componentData:{filename:b.name}},Z(a,d)}function aa(){this.boundary="--------MultipartData"+Math.random(),this._fields=[]}function ba(a,b){this.options=b,this.$element=a,this.options.chunkUpload?ka(this):la(this)}function ca(a){return new qb.net.HttpRequest}function da(b,c){a(".upldIndc").is(":visible")&amp;&amp;(b.events.success.params=a.parseJSON(c.target.response),kb.fileId=b.events.success.params.fileId,a(".sendButton").removeClass("disabled"),a(".kore-chat-window").addClass("kore-chat-attachment"),a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),Ga=1,a(".upldIndc").remove(),b.$element.trigger(b.events.success))}function ea(a,b){a.events.error.params=b,a.$element.trigger(a.events.error)}function fa(a,b){}function ga(a,b){return a.options=b,a}function ha(a){var b=a,c=ca(a),d=new aa;if(c.addEventListener("load",function(a){200===a.target.status?b.$element.parent().length&amp;&amp;da(b,a):ea(b,a)},!1),c.addEventListener("error",function(a){ea(b,a)},!1),c.withCredentials=!1,c.open("PUT",a.options.chunkUrl.replace(/\/chunk/,"")),a.options.headers)for(var e in a.options.headers)c.setRequestHeader(e,a.options.headers[e]);if(d.append("totalChunks",b.totalChunks),d.append("messageToken",b.messageToken),a.options.data)for(var f in a.options.data)d.append(f,a.options.data[f]);c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d.boundary),c.send(d.toString())}function ia(a){var b=a,c=ca(a),d=new aa;if(c.addEventListener("load",function(a){if(200===a.target.status){if(b.currChunk++,!b.$element.parent().length)return;b.currChunk===b.totalChunks?ha(b):ja(b)}else ea(b,a)},!1),c.addEventListener("error",function(a){ea(b,a)},!1),c.withCredentials=!1,c.open("POST",a.options.chunkUrl),a.options.headers)for(var e in a.options.headers)c.setRequestHeader(e,a.options.headers[e]);d.append("chunkNo",b.currChunk),d.append("messageToken",b.messageToken),d.append("chunk",{data:b.chunk,fileName:b.options.file.name}),c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d.boundary),c.send(d.toString())}function ja(a){var b=a,c=b.options.file,d=b.options.chunkSize*b.currChunk,e=b.currChunk===b.totalChunks-1?c.size:(b.currChunk+1)*b.options.chunkSize,f=new FileReader,g=c.slice(d,e);f.onloadend=function(a){a.target.readyState===FileReader.DONE&amp;&amp;b.$element.parent().length?(b.chunk=a.target.result,b.chunk=b.chunk.replace(/data:;base64,/,""),b.currChunk&lt;b.totalChunks&amp;&amp;b.$element.parent().length&amp;&amp;ia(b)):ea(b,a)},f.readAsDataURL(g)}function ka(a){var b=a,c=ca(a);if(c.addEventListener("error",function(a){ea(b,a)},!1),c.addEventListener("load",function(a){200===a.target.status?(b.messageToken=JSON.parse(a.target.response).fileToken,b.totalChunks=Math.floor(b.options.file.size/b.options.chunkSize)+1,b.currChunk=0,b.options.chunkUrl=b.options.chunkUrl.replace(":token",b.messageToken),b.$element.parent().length&amp;&amp;ja(b)):ea(b,a)},!1),c.withCredentials=!1,c.open("POST",a.options.tokenUrl),a.options.headers)for(var d in a.options.headers)c.setRequestHeader(d,a.options.headers[d]);c.send()}function la(a){var b=a;if(_conc=ca(a),_mdat=new aa,_conc.upload&amp;&amp;_conc.upload.addEventListener&amp;&amp;_conc.upload.addEventListener("progress",function(a){fa(b,a)},!1),_conc.addEventListener("load",function(a){b.$element.parent().length&amp;&amp;da(b,a)},!1),_conc.addEventListener("error",function(a){ea(b,a)},!1),_conc.withCredentials=!1,_conc.open("POST",a.options.url),a.options.headers)for(var c in a.options.headers)_conc.setRequestHeader(c,a.options.headers[c]);if(a.options.data)for(var d in a.options.data)_mdat.append(d,a.options.data[d]);_conc.setRequestHeader("Content-Type","multipart/form-data; boundary="+_mdat.boundary),_conc.send(_mdat.toString())}function ma(){var b=document.getElementById("myPreviewModal");a(".largePreviewContent").empty(),a(".largePreviewContent").addClass("addheight"),a(".largePreviewContent").html("&lt;div class='chartContainerDiv'&gt;&lt;/div&gt;"),b.style.display="block",document.getElementsByClassName("closeElePreview")[0].onclick=function(){b.style.display="none",a(".largePreviewContent").removeClass("addheight")}}function na(){a(".piechartDiv,.barchartDiv, .linechartDiv").click(function(b){function c(){g=document.getElementsByClassName("chartContainerDiv"),e=new google.visualization.PieChart(g[0])}function c(){g=document.getElementsByClassName("chartContainerDiv"),e=new google.visualization.LineChart(g[0])}function c(){g=document.getElementsByClassName("chartContainerDiv"),e="vertical"===f.direction?new google.visualization.ColumnChart(g[0]):new google.visualization.BarChart(g[0])}for(var d=b.currentTarget.firstElementChild.getAttribute("id"),e=null,f=null,g=null,h=0;h&lt;sb.length;h++)if(sb[h].id==d){f=jQuery.extend({},sb[h]),ma();break}if("d3"===graphLibGlob){if(ma(),void 0===f.data.message[0].component.payload.pie_type&amp;&amp;(f.data.message[0].component.payload.pie_type="regular"),"linechart"!==f.data.message[0].component.payload.template_type&amp;&amp;"piechart"!==f.data.message[0].component.payload.template_type){var i={};i.outerWidth=650,i.outerHeight=460,i.innerWidth=450,i.innerHeight=350,i.legendRectSize=15,i.legendSpacing=4,a(".chartContainerDiv").html(""),"barchart"===f.data.message[0].component.payload.template_type&amp;&amp;"vertical"===f.data.message[0].component.payload.direction&amp;&amp;"barchart"===f.type?(i.innerWidth=500,KoreGraphAdapter.drawD3barChart(f.data,i,".chartContainerDiv",12)):"barchart"===f.data.message[0].component.payload.template_type&amp;&amp;"horizontal"===f.data.message[0].component.payload.direction&amp;&amp;"stackedBarchart"===f.type?KoreGraphAdapter.drawD3barStackedChart(f.data,i,".chartContainerDiv",12):"barchart"===f.data.message[0].component.payload.template_type&amp;&amp;"vertical"===f.data.message[0].component.payload.direction&amp;&amp;"stackedBarchart"===f.type?(i.innerWidth=550,KoreGraphAdapter.drawD3barVerticalStackedChart(f.data,i,".chartContainerDiv",12)):"barchart"===f.data.message[0].component.payload.template_type&amp;&amp;"horizontal"===f.data.message[0].component.payload.direction&amp;&amp;"barchart"===f.type&amp;&amp;(i.outerWidth=650,i.outerHeight=350,i.innerWidth=450,i.innerHeight=310,KoreGraphAdapter.drawD3barHorizontalbarChart(f.data,i,".chartContainerDiv",12))}else if("linechart"===f.data.message[0].component.payload.template_type){var i={};i.outerWidth=650,i.outerHeight=450,i.innerWidth=480,i.innerHeight=350,i.legendRectSize=15,i.legendSpacing=4,a(".chartContainerDiv").html(""),KoreGraphAdapter.drawD3lineChartV2(f.data,i,".chartContainerDiv",12)}else if(f.data.message[0].component.payload.pie_type){var i={};i.width=600,i.height=400,i.legendRectSize=15,i.legendSpacing=4,a("chartContainerDiv").html(""),"regular"===f.data.message[0].component.payload.pie_type?KoreGraphAdapter.drawD3Pie(f.data,i,".chartContainerDiv",16):"donut"===f.data.message[0].component.payload.pie_type?KoreGraphAdapter.drawD3PieDonut(f.data,i,".chartContainerDiv",16,"donut"):"donut_legend"===f.data.message[0].component.payload.pie_type&amp;&amp;(a("chartContainerDiv").html(""),KoreGraphAdapter.drawD3PieDonut(f.data,i,".chartContainerDiv",16,"donut_legend"))}}else"google"===graphLibGlob&amp;&amp;("piechart"===f.type?(google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(c)):"linechart"===f.type?(google.charts.load("current",{packages:["corechart","line"]}),google.charts.setOnLoadCallback(c)):"barchart"===f.type&amp;&amp;(google.charts.load("current",{packages:["corechart","bar"]}),google.charts.setOnLoadCallback(c)),setTimeout(function(){var b={height:"85%",width:"85%"};f.options.chartArea=b,google.visualization.events.addListener(e,"ready",function(){setTimeout(function(){a(".largePreviewContent .chartContainerDiv").css("height","91%")})}),e.draw(f.data,f.options)},200))})}var oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=requireKr("/KoreBot.js").instance(),Ba={message:"Message...",connecting:"Connecting...",reconnecting:"Reconnecting..."},Ca={},Da=/&lt;script\b[^&gt;]*&gt;([\s\S]*?)/gm,Ea={},Fa=[],Ga=0,Ha="",Ia="",Ja=[],Ka=!1,La="",Ma=!1,Na=!1,Oa=!1,Pa="",Qa="",Ra=0,Sa=!1,Ta=!1,Ua=window.navigator,Va=!1,Wa=!1,Xa="content-type=audio/x-raw,+layout=(string)interleaved,+rate=(int)16000,+format=(string)S16LE,+channels=(int)1",Ya="../libs/recorderWorker.js",Za=250,$a=3e4,_a=!1,ab=!1,bb=null,cb=null,db="",eb=null,fb="",gb=!1,hb=!1,ib=!1,jb={},kb={},lb=["m4a","amr","aac","wav","mp3","mp4","mov","3gp","flv","png","jpg","jpeg","gif","bmp","csv","txt","json","pdf","doc","dot","docx","docm","dotx","dotm","xls","xlt","xlm","xlsx","xlsm","xltx","xltm","xlsb","xla","xlam","xll","xlw","ppt","pot","pps","pptx","pptm","potx","potm","ppam","ppsx","ppsm","sldx","sldm","zip","rar","tar","wpd","wps","rtf","msg","dat","sdf","vcf","xml","3ds","3dm","max","obj","ai","eps","ps","svg","indd","pct","accdb","db","dbf","mdb","pdb","sql","apk","cgi","cfm","csr","css","htm","html","jsp","php","xhtml","rss","fnt","fon","otf","ttf","cab","cur","dll","dmp","drv","7z","cbr","deb","gz","pkg","rpm","zipx","bak","avi","m4v","mpg","rm","swf","vob","wmv","3gp2","3g2","asf","asx","srt","wma","mid","aif","iff","m3u","mpa","ra","aiff","tiff"];jb.CHUNK_SIZE=1048576;var mb={},nb=["m4a","amr","wav","aac","mp3"],ob=["mp4","mov","3gp","flv"],pb=["png","jpg","jpeg"];mb.audio=nb,mb.video=ob,mb.image=pb,mb.file={limit:{size:26214400,msg:"Please limit the individual file upload size to 25 MB or lower"}},mb.determineFileType=function(a){return a=a.toLowerCase(),mb.image.indexOf(a)&gt;-1?"image":mb.video.indexOf(a)&gt;-1?"video":mb.audio.indexOf(a)&gt;-1?"audio":"attachment"};var qb={};qb.net={},window.PieChartCount=0,window.barchartCount=0,window.linechartCount=0;var rb,sb=[],tb={};window.chartColors=["#75b0fe","#f78083","#99ed9e","#fde296","#26344a","#5f6bf7","#b3bac8","#99a1fd","#9cebf9","#f7c7f4"];var ub=0;String.prototype.isNotAllowedHTMLTags=function(){var b=document.createElement("div");b.innerHTML=this;var c={isValid:!0,key:""};try{return(a(b).find("script").length||a(b).find("video").length||a(b).find("audio").length)&amp;&amp;(c.isValid=!1),a(b).find("link").length&amp;&amp;-1!==a(b).find("link").attr("href").indexOf("script")&amp;&amp;(Da.test(a(b).find("link").attr("href"))?c.isValid=!1:c.isValid=!0),a(b).find("a").length&amp;&amp;-1!==a(b).find("a").attr("href").indexOf("script")&amp;&amp;(Da.test(a(b).find("a").attr("href"))?c.isValid=!1:c.isValid=!0),a(b).find("img").length&amp;&amp;-1!==a(b).find("img").attr("src").indexOf("script")&amp;&amp;(Da.test(a(b).find("img").attr("href"))?c.isValid=!1:c.isValid=!0),a(b).find("object").length&amp;&amp;(c.isValid=!1),c}catch(a){return c}},String.prototype.escapeHTML=function(){var a={"&lt;":"&amp;lt;","&gt;":"&amp;gt;",'"':"&amp;quot;","'":"&amp;#x27;"};return(""+this).replace(/[&lt;&gt;"']/g,function(b){return a[b]})},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)};var vb={nl2br:function(a,b){return b&amp;&amp;(a=window.emojione.shortnameToImage(a)),a=a.replace(/(?:\r\n|\r|\n)/g,"&lt;br /&gt;")},br2nl:function(a){return a=a.replace(/&lt;br \/&gt;/g,"\n")},formatAMPM:function(a){var b=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),e=b&gt;=12?"pm":"am";return b%=12,b=b||12,c=c&lt;10?"0"+c:c,b+":"+c+":"+d+" "+e},formatDate:function(a){var b=new Date(a);if(isNaN(b.getTime())){var c=(new Date).getTime();b=new Date(c)}return b.toDateString()+" at "+vb.formatAMPM(b)},convertMDtoHTML:function(b,d,e){function f(a,b){for(var c,d=[];null!==(c=a.exec(b));){var e={};if(e.index=c.index,e.matchexp=c[0],c.length&gt;1)for(var f=1;f&lt;c.length;f++){var g="matchval"+f.toString();e[g]=c[f]}d.push(e)}return d}function g(a){return a.toUpperCase()}function h(a){return["onclick","onmouse","onblur","onscroll","onStart"].forEach(function(b){var c=new RegExp(b,"ig");a=a.replace(c,"")}),a}function i(a,b,c,d){var e=d.replace(o,"[]");if(e=h(e),-1!==e.indexOf(a)){var f,g=b.indexOf("http")&lt;0?"http://"+a:a;if(target="target='underscoreblank'",j){var i="korerandom://"+Object.keys(j).length;j[i]=g,g=i}return"&lt;span class='isLink'&gt;&lt;a id='linkEvent'"+f+' href="'+g+'"&gt;'+a+"&lt;/a&gt;&lt;/span&gt;"}return a}if("object"==typeof b)try{b=JSON.stringify(b)}catch(a){b=""}var j={},k={};if(e&amp;&amp;e.cInfo&amp;&amp;e.cInfo.ignoreCheckMark)var l=e.cInfo.ignoreCheckMark;k.date=new RegExp(/\\d\(\s*(.{10})\s*(?:,\s*["'](.+?)["']\s*)?\)/g),k.time=new RegExp(/\\t\(\s*(.{8}\.\d{0,3})\s*\)/g),k.datetime=new RegExp(/\\(d|dt|t)\(\s*([-0-9]{10}[T][0-9:.]{12})([z]|[Z]|[+-]\d{4})[\s]*,[\s]*["']([a-zA-Z\W]+)["']\s*\)/g),k.num=new RegExp(/\\#\(\s*(\d*.\d*)\s*\)/g),k.curr=new RegExp(/\\\$\((\d*.\d*)[,](\s*[\"\']\s*\w{3}\s*[\"\']\s*)\)|\\\$\((\d*.\d*)[,](\s*\w{3}\s*)\)/g);var m={};m.SPECIAL_CHARS=/[\=\`\~\!@#\$\%\^&amp;\*\(\)_\-\+\{\}\:"\[\];\',\.\/&lt;&gt;\?\|\\]+/,m.EMAIL=/^[-a-z0-9~!$%^&amp;*_=+}{\']+(\.[-a-z0-9~!$%^&amp;*_=+}{\']+)*@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,255})+$/i,m.MENTION=/(^|\s|\\n|")@([^\s]*)(?:[\s]\[([^\]]*)\])?["]?/gi,m.HASHTAG=/(^|\s|\\n)#(\S+)/g,m.NEWLINE=/\n/g;var n=/((?:http\:\/\/|https\:\/\/|www\.)+\S*\.(?:(?:\.\S)*[^\,\s\.])*\/?)/gi,o=/\[([^\]]+)\](|\s)\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)?/g,p=b||"",q={};q.sd=new RegExp(/^(d{1})[^d]|[^d](d{1})[^d]/g),q.dd=new RegExp(/^(d{2})[^d]|[^d](d{2})[^d]/g),q.fy=new RegExp(/(y{4})|y{2}/g);for(var r=Object.keys(k),s=0;s&lt;r.length;s++){var t;switch(r[s]){case"date":var u=p,v=f(k.date,u);if(v.length)for(t=0;t&lt;v.length;t++){var w=new Date(v[t].matchval1).toLocaleDateString();w=" "+w.toString()+" ",p=p.replace(v[t].matchexp.toString(),w)}break;case"time":var x=p,y=f(k.time,x);if(y.length)for(t=0;t&lt;y.length;t++){var z=new Date(y[t].matchval1).toLocaleTimeString();z=" "+z.toString()+" ",p=p.replace(y[t].matchexp.toString(),z)}break;case"datetime":var A=p,B=f(k.datetime,A);if(B.length)for(t=0;t&lt;B.length;t++){for(var C="",D=Object.keys(B[t]).length-2,E=2;E&lt;D;E++){var F="matchval"+E.toString();C+=B[t][F]}var G="matchval"+D.toString(),H=B[t][G];H=H.replace(q.fy,g),H=H.replace(q.dd,g),H=H.replace(q.sd,g);var I=moment(C).format(H);I=" "+I.toString()+" ",p=p.replace(B[t].matchexp.toString(),I)}break;case"num":var J=p,K=f(k.num,J);if(K.length)for(t=0;t&lt;K.length;t++){var L=Number(K[t].matchval1).toLocaleString();L=" "+L.toString()+" ",p=p.replace(K[t].matchexp.toString(),L)}break;case"curr":var M=p,N=f(k.curr,M),O=window.navigator.language||window.navigator.browserLanguage,P=new RegExp(/\w{3}/);if(N.length)for(t=0;t&lt;N.length;t++){var Q,R={};R.style="currency",N[t].matchval2&amp;&amp;(Q=P.exec(N[t].matchval2)),R.currency=Q[0].toString();var S=Number(N[t].matchval1).toLocaleString(O,R);S=N[t].matchval1.toString()===S.toString()?" "+S.toString()+" "+R.currency:" "+S.toString()+" ",p=p.replace(N[t].matchexp.toString(),S)}}}m.NEWLINE;"number"==typeof p&amp;&amp;(p=p.toString()),p=p||"";var T,U="";if("user"===d)p=p.replace(/onerror=/gi,"abc-error="),T=document.createElement("div"),U=p.replace(/“/g,'"').replace(/”/g,'"'),U=U.replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;"),T.innerHTML=c(U),p=a(T).find("a").attr("href")?U:U.replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(n,i);else if(T=document.createElement("div"),T.innerHTML=c(p),a(T).find("a").attr("href"))for(var V=p.match(/&lt;a[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;/g),W=0;W&lt;V.length;W++){var X=document.createElement("div"),Y=V[W];X.innerHTML=V[W],(Y.indexOf("href='mailto:")&gt;-1||Y.indexOf('href="mailto:')&gt;-1)&amp;&amp;(Y=Y.split("\n").join("%0A"));var Z="korerandom://"+Object.keys(j).length;X.innerHTML=Y;var $=X.getElementsByTagName("a");$&amp;&amp;$[0]&amp;&amp;$[0].href&amp;&amp;(j[Z]=$[0].href,$[0].href=Z),a(X).find("a").attr("target","underscoreblank"),p=p.replace(V[W],X.innerHTML)}else p=T.innerHTML.replace(n,i);p=l?b:vb.checkMarkdowns(p,j);var _=Object.keys(j);return _&amp;&amp;_.length&amp;&amp;_.forEach(function(a){function b(){return j[a]}p=p.replace(a,b)}),p=p.replaceAll('target="underscoreblank"','target="_blank"'),p=p.replaceAll("target='underscoreblank'",'target="_blank"'),"user"===d&amp;&amp;(p=p.replace(/abc-error=/gi,"onerror=")),vb.nl2br(p,!0)},checkMarkdowns:function(a,b){if(""===a)return a;for(var c=a.split(/\r?\n/),e=0;e&lt;c.length;e++){var f=!1;0===c[e].indexOf("#h6")||0===c[e].indexOf("#H6")?(c[e]="&lt;h6&gt;"+c[e].substring(3)+"&lt;/h6&gt;",f=!0):0===c[e].indexOf("#h5")||0===c[e].indexOf("#H5")?(c[e]="&lt;h5&gt;"+c[e].substring(3)+"&lt;/h5&gt;",f=!0):0===c[e].indexOf("#h4")||0===c[e].indexOf("#H4")?(c[e]="&lt;h4&gt;"+c[e].substring(3)+"&lt;/h4&gt;",f=!0):0===c[e].indexOf("#h3")||0===c[e].indexOf("#H3")?(c[e]="&lt;h3&gt;"+c[e].substring(3)+"&lt;/h3&gt;",f=!0):0===c[e].indexOf("#h2")||0===c[e].indexOf("#H2")?(c[e]="&lt;h2&gt;"+c[e].substring(3)+"&lt;/h2&gt;",f=!0):0===c[e].indexOf("#h1")||0===c[e].indexOf("#H1")?(c[e]="&lt;h1&gt;"+c[e].substring(3)+"&lt;/h1&gt;",f=!0):0===c[e].length?(c[e]="\r\n",f=!0):0===c[e].indexOf("*")?d(c[e].split("*").length-1)||(c[e]="\r\n&amp;#9679; "+c[e].substring(1),f=!0):0===c[e].indexOf("&gt;&gt;")?(c[e]='&lt;p class="indent"&gt;'+c[e].substring(2)+"&lt;/p&gt;",f=!0):0===c[e].indexOf("&amp;gt;&amp;gt;")?(c[e]='&lt;p class="indent"&gt;'+c[e].substring(8)+"&lt;/p&gt;",f=!0):0!==c[e].indexOf("---")&amp;&amp;0!==c[e].indexOf("___")||(c[e]="&lt;hr/&gt;"+c[e].substring(3),f=!0);var g;-1===c[e].indexOf(" ![")&amp;&amp;(c[e]=c[e].replace("!["," !["));var h=c[e].match(/\!\[([^\]]+)\](|\s)+\(([^\)])+\)/g);if(h&amp;&amp;h.length&gt;0)for(g=0;g&lt;h.length;g++){var i=h[g].substring(2,h[g].indexOf("]")),j=h[g].substring(h[g].indexOf("]")+1).trim(),k=j.substring(1,j.indexOf(")"));if(b){var l="korerandom://"+Object.keys(b).length;b[l]=k,k=l}k='&lt;img src="'+k+'" alt="'+i+'"&gt;';for(var m=c[e].split(" "),n=0;n&lt;m.length;n++)m[n]===h[g]&amp;&amp;(m[n]=k);c[e]=m.join(" "),c[e]=c[e].replace(h[g],k)}var o=c[e].match(/\[([^\]]+)\](|\s)\((?:[^)(]+|\((?:[^)(]+|\([^)(]*\))*\))*\)/g);if(o&amp;&amp;o.length&gt;0)for(g=0;g&lt;o.length;g++){var p=o[g].substring(1,o[g].indexOf("]")),j=o[g].substring(o[g].indexOf("]")+1).trim(),q=j.substring(1,j.lastIndexOf(")"));if(q=q.replace(/\\n/g,"%0A"),b){var l="korerandom://"+Object.keys(b).length;b[l]=q,q=l}q='&lt;span class="isLink"&gt;&lt;a id="linkEvent" href="'+q+'" target="underscoreblank"&gt;'+vb.checkMarkdowns(p)+"&lt;/a&gt;&lt;/span&gt;",c[e]=c[e].replace(o[g],q)}var r=c[e].match(/\*\S([^*]*?)\*/g);if(r&amp;&amp;r.length&gt;0)for(g=0;g&lt;r.length;g++){var s=r[g],t=!0;if(s.includes("*")){var u=s.replace(/\*/g,""),v=/^[0-9a-zA-Z!@#$%^&amp;()_ +\-=\[\]{};':"\\|,.&lt;&gt;\/?]+$/;u.match(v)||(t=!1)}t&amp;&amp;(s=s.substring(1,s.length-1),s="&lt;b&gt;"+s.trim()+"&lt;/b&gt;",c[e]=c[e].replace(r[g],s))}var w=c[e].match(/\~\S([^*]*?)\S\~/g);if(w&amp;&amp;w.length&gt;0)for(g=0;g&lt;w.length;g++){var x=w[g];0!==c[e].indexOf(x)&amp;&amp;" "!==c[e][c[e].indexOf(x)-1]&amp;&amp;-1===c[e].indexOf(x)||(x=x.substring(1,x.length-1),x='&lt;i class="markdownItalic"&gt;'+x+"&lt;/i&gt;",c[e]=c[e].replace(w[g],x))}var w=c[e].match(/\_\S([^*]*?)\S\_/g);if(w&amp;&amp;w.length&gt;0)for(g=0;g&lt;w.length;g++){var x=w[g];0!==c[e].indexOf(x)&amp;&amp;" "!==c[e][c[e].indexOf(x)-1]&amp;&amp;-1===c[e].indexOf(x)||(x=x.substring(1,x.length-1),x='&lt;i class="markdownItalic"&gt;'+x+"&lt;/i&gt;",c[e]=c[e].replace(w[g],x))}var w=c[e].match(/\~\S([^*]*?)\S\~/g);if(w&amp;&amp;w.length&gt;0)for(g=0;g&lt;w.length;g++){var x=w[g];0!==c[e].indexOf(x)&amp;&amp;" "!==c[e][c[e].indexOf(x)-1]&amp;&amp;-1===c[e].indexOf(x)||(x=x.substring(1,x.length-1),x='&lt;i class="markdownItalic"&gt;'+x+"&lt;/i&gt;",c[e]=c[e].replace(w[g],x))}var y=c[e].match(/\`\`\`\S([^*]*?)\S\`\`\`/g),z=c[e].match(/\'\'\'\S([^*]*?)\S\'\'\'/g);if(y&amp;&amp;y.length&gt;0){for(g=0;g&lt;y.length;g++){var A=y[g];A=A.substring(3,A.length-3),A="&lt;pre&gt;"+A+"&lt;/pre&gt;",c[e]=c[e].replace(y[g],A)}f=!0}if(z&amp;&amp;z.length&gt;0){for(g=0;g&lt;z.length;g++){var A=z[g];A=A.substring(3,A.length-3),A="&lt;pre&gt;"+A+"&lt;/pre&gt;",c[e]=c[e].replace(z[g],A)}f=!0}!f&amp;&amp;e&gt;0&amp;&amp;(c[e]="\r\n"+c[e])}return a=c.join("")},getInnerText:function(b){return""===b?b:a("&lt;div&gt;"+this.convertMDtoHTML(b,"bot")+"&lt;/div&gt;").text()}};f.prototype.renderWebForm=function(b,c){if(b.message&amp;&amp;b.message[0].component&amp;&amp;b.message[0].component.payload&amp;&amp;b.message[0].component.payload.formData)if(b.renderType=b.message[0].component.payload.formData.renderType,b.message[0].component.payload.template_type="iframe",c||"inline"!==b.renderType){var d=a(this.getChatTemplate("iframe")).tmpl({msgData:b,helpers:vb,link_url:b.message[0].component.payload.formData.formLink});if(c)return d;i(d[0],!0)}else this.renderMessage(b)},window.onresize=function(b){if(b.target==window){a("#chatContainer").width()}if(a(".kore-chat-window").width()&gt;400||document.getElementsByClassName("kore-chat-window").length&amp;&amp;document.getElementsByClassName("kore-chat-window")[0].classList.contains("expanded")){var c=a(".kore-chat-window").width();a(".carousel").attr("style","width: "+(c-85)+"px !important")}else a(".carousel").attr("style","width: 300px !important");for(var d=0;d&lt;Fa.length;d++)Fa[d].computeResize();for(var e=document.querySelectorAll(".quickReplies"),d=0;d&lt;e.length;d++){var f=e[d].querySelectorAll(".quick_replies_btn_parent"),g=e[d].querySelectorAll(".quickreplyLeftIcon"),h=e[d].querySelectorAll(".quickreplyRightIcon");f[0].hasChildNodes()&amp;&amp;(f[0].scrollLeft&gt;0?g[0].classList.remove("hide"):g.length&amp;&amp;g[0].classList.add("hide"),f[0].offsetWidth&lt;f[0].scrollWidth?h[0].classList.remove("hide"):h&amp;&amp;h[0]&amp;&amp;h[0].classList.add("hide"))}a(".kore-chat-window").width()&gt;460?(a(".accordionTable").each(function(){a(this).hasClass("responsive")&amp;&amp;a(this).addClass("hide")}),a(".tablechartDiv").each(function(){a(this).hasClass("regular")||a(this).removeClass("hide")})):(a(".accordionTable").each(function(){a(this).hasClass("responsive")&amp;&amp;a(this).removeClass("hide")}),a(".tablechartDiv").each(function(){a(this).hasClass("regular")||a(this).addClass("hide")}))},f.prototype.init=function(){var b=this;window.chatContainerConfig=b,b.config.botOptions.botInfo.name=b.config.botOptions.botInfo.name.escapeHTML(),Ca=b.config.botOptions.botInfo,b.config.botOptions.botInfo={chatBot:Ca.name,taskBotId:Ca._id,customData:Ca.customData,tenanturl:Ca.tenanturl};var c=Ca.name;b.config.botMessages=Ba,b.config.chatTitle=b.config.botMessages.connecting,b.config.userAgentIE=-1!==Ua.userAgent.indexOf("Trident/"),o()&amp;&amp;(b.config.isSendButton=!0),_a=b.config.isSendButton,hb=b.config.isTTSEnabled||!1,za=b.config.ttsInterface||"webapi",ab=b.config.allowGoogleSpeech||!1,Oa=b.config.isSpeechEnabled||!1,Ta=b.config.loadHistory||!1,Ka=!!Ta,b.config.botOptions.loadHistory=b.config.loadHistory,b.config.botOptions.chatHistory=b.config.chatHistory,b.config.botOptions.handleError=b.config.handleError,b.config.botOptions.googleMapsAPIKey=b.config.googleMapsAPIKey,ib=b.config.autoEnableSpeechAndTTS||!1,hb&amp;&amp;(Oa||ab)&amp;&amp;ib&amp;&amp;(gb=!0,setTimeout(function(){a(".ttspeakerDiv").removeClass("ttsOff")},350));var d=a(b.getChatTemplate()).tmpl(b.config);a(d).off("click",".drpdown_theme").on("click",".drpdown_theme",function(a){b.showDropdown(this)}),a(d).off("click",".themeName").on("click",".themeName",function(b){"shopping_theme"==a(this).attr("id")?a(".kore-chat-window").removeClass("logo_theme").addClass("shopping_theme"):a(".kore-chat-window").removeClass("shopping_theme").addClass("logo_theme")}),b.config.chatContainer=d,b.config.chatTitle=c,b.config.minimizeMode?(d.addClass("minimize"),d.find(".minimized-title").html("Talk to "+b.config.chatTitle),b.skipedInit=!0):Aa.init(b.config.botOptions,b.config.messageHistoryLimit),b.config.allowLocation&amp;&amp;Aa.fetchUserLocation(),b.render(d),u()},f.prototype.destroy=function(){var b=this;a(".kore-chat-overlay").hide(),Aa.close(),b.config.minimizeMode||Aa.destroy(),Ja=[],b.config&amp;&amp;b.config.chatContainer&amp;&amp;(b.config.minimizeMode?(b.config.chatContainer.find(".kore-chat-header .header-title").html(b.config.botMessages.reconnecting),b.config.chatContainer.addClass("minimize"),b.skipedInit=!0):b.config.chatContainer.remove()),eb&amp;&amp;eb.stop(),gb=!1,bb&amp;&amp;(bb.close(),bb=null)},f.prototype.resetWindow=function(){var a=this;a.config.chatContainer.find(".kore-chat-header .header-title").html(a.config.botMessages.reconnecting),Aa.close(),Aa.init(a.config.botOptions)},f.prototype.bindEvents=function(){function b(a){if(1==Ga)return void alert("You can upload only one file");O(this,a[0]),a.length&gt;1&amp;&amp;alert("You can upload only one file")}var c=this,d=c.config.chatContainer;if(d.draggable({handle:d.find(".kore-chat-header .header-title"),containment:"document"}).resizable({handles:"n, e, w, s",containment:"document",minWidth:400}),d.off("keyup",".chatInputBox").on("keyup",".chatInputBox",function(b){var e=a(c.config.container).find(".kore-chat-footer");a(c.config.container).find(".kore-chat-body").css("bottom",e.outerHeight()),prevComposeSelection=window.getSelection(),oa=prevComposeSelection.rangeCount&gt;0&amp;&amp;prevComposeSelection.getRangeAt(0),this.innerText.length&gt;0?(d.find(".chatInputBoxPlaceholder").css("display","none"),d.find(".sendButton").removeClass("disabled")):(d.find(".chatInputBoxPlaceholder").css("display","block"),d.find(".sendButton").addClass("disabled"))}),d.on("click",".chatInputBoxPlaceholder",function(a){d.find(".chatInputBox").trigger("click"),d.find(".chatInputBox").trigger("focus")}),d.on("click",".chatInputBox",function(a){prevComposeSelection=window.getSelection(),oa=prevComposeSelection.rangeCount&gt;0&amp;&amp;prevComposeSelection.getRangeAt(0)}),d.on("blur",".chatInputBox",function(a){ub=0}),d.off("click",".botResponseAttachments").on("click",".botResponseAttachments",function(b){window.open(a(this).attr("fileid"),"_blank")}),d.off("keydown",".chatInputBox").on("keydown",".chatInputBox",function(b){var d=a(this),e=a(c.config.container).find(".kore-chat-footer");if(a(c.config.container).find(".kore-chat-body").css("bottom",e.outerHeight()),13===b.keyCode){if(b.shiftKey)return;return a(".upldIndc").is(":visible")?void alert("Wait until file upload is not completed"):(a(".recordingMicrophone").is(":visible")&amp;&amp;a(".recordingMicrophone").trigger("click"),b.preventDefault(),void c.sendMessage(d,kb))}27===b.keyCode&amp;&amp;++ub&gt;1&amp;&amp;(ub=0,G(),this.innerText="",a(".attachment").empty(),Ga=0,setTimeout(function(){r(document.getElementsByClassName("chatInputBox"))},100))}),d.off("click",".sendButton").on("click",".sendButton",function(b){var d=a(".chatInputBox");if(a(".upldIndc").is(":visible"))return void alert("Wait until file upload is not completed");a(".recordingMicrophone").is(":visible")&amp;&amp;a(".recordingMicrophone").trigger("click"),b.preventDefault(),c.sendMessage(d,kb)}),d.off("click",".notRecordingMicrophone").on("click",".notRecordingMicrophone",function(a){eb&amp;&amp;eb.stop(),Oa&amp;&amp;z()}),d.off("click",".recordingMicrophone").on("click",".recordingMicrophone",function(a){G(),setTimeout(function(){r(document.getElementsByClassName("chatInputBox"))},350)}),d.off("click",".attachmentBtn").on("click",".attachmentBtn",function(b){return 1==Ga?void alert("You can upload only one file"):a(".upldIndc").is(":visible")?void alert("Wait until file upload is not completed"):void a("#captureAttachmnts").trigger("click")}),d.off("click",".removeAttachment").on("click",".removeAttachment",function(b){a(this).parents(".msgCmpt").remove(),a(".kore-chat-window").removeClass("kore-chat-attachment"),Ga=0,kb={},a(".sendButton").addClass("disabled"),document.getElementById("captureAttachmnts").value=""}),d.off("change","#captureAttachmnts").on("change","#captureAttachmnts",function(b){var c=a("#captureAttachmnts").prop("files")[0];if(c&amp;&amp;c.size&amp;&amp;c.size&gt;mb.file.limit.size)return void alert(mb.file.limit.msg);O(this,c)}),d.off("paste",".chatInputBox").on("paste",".chatInputBox",function(a){a.preventDefault();var b=document.getElementsByClassName("chatInputBox"),c=a.clipboardData||a.originalEvent&amp;&amp;a.originalEvent.clipboardData||window.clipboardData,d="";c&amp;&amp;(d=vb.nl2br(c.getData("text").escapeHTML(),!1))&amp;&amp;q(b,d),setTimeout(function(){r(b)},100)}),d.off("click",".sendChat").on("click",".sendChat",function(b){var d=a(c.config.container).find(".kore-chat-footer");c.sendMessage(d.find(".chatInputBox"))}),d.off("click",".notificationTemplate .btn-notification .link").on("click",".notificationTemplate .btn-notification .link",function(b){var d=a(this).attr("data-value");a(".chatInputBox").text(d),c.sendMessage(a(".chatInputBox"),d)}),d.off("click","li a").on("click","li a",function(b){b.preventDefault();var d,e=a(this).attr("href"),f=a(this).attr("target"),g=a(event.currentTarget).closest("span.simpleMsg").attr("msgData")||"";if(g)try{d=JSON.parse(g)}catch(a){}if(d&amp;&amp;d.message&amp;&amp;d.message[0].component&amp;&amp;d.message[0].component.payload&amp;&amp;d.message[0].component.payload.formData)c.renderWebForm(d);else if("_self"===f)return void callListener("provideVal",{link:e});if(!0===c.config.allowIframe){var h=a(c.getChatTemplate("iframe")).tmpl({msgData:d,helpers:vb,link_url:url});h[0].onload=function(a){console.log(a)},i(h[0],!0)}else window.open(e,"_blank")}),d.off("click",".buttonTmplContentBox li,.listTmplContentChild .buyBtn,.viewMoreList .viewMore,.listItemPath,.quickReply,.carouselImageContent,.listRightContent,.checkboxBtn,.likeDislikeDiv,.buttonQuickReply").on("click",".buttonTmplContentBox li,.listTmplContentChild .buyBtn, .viewMoreList .viewMore,.listItemPath,.quickReply,.carouselImageContent,.listRightContent,.checkboxBtn,.likeDislikeDiv,.buttonQuickReply",function(b){b.preventDefault(),b.stopPropagation();var e=a(this).attr("type");if(e&amp;&amp;(e=e.toLowerCase()),"postback"==e||"text"==e){a(".chatInputBox").text(a(this).attr("value")||a(this).attr("actual-value"));var f=b.currentTarget.classList,g=!1;if(f&amp;&amp;f.length)for(var h=0;h&lt;f.length;h++)f[h]&amp;&amp;"quickReply"===f[h]&amp;&amp;(g=!0);if(g)var i=a(this).attr("actual-value");else var i=a(this)[0]&amp;&amp;a(this)[0].innerText?a(this)[0].innerText.trim():a(this)&amp;&amp;a(this).attr("data-value")?a(this).attr("data-value").trim():"";c.sendMessage(a(".chatInputBox"),i)}else if("url"==e||"web_url"==e){if(void 0!==a(this).attr("msgData")){var j;try{j=JSON.parse(a(this).attr("msgData"))}catch(a){}if(j&amp;&amp;j.message&amp;&amp;j.message[0].component&amp;&amp;(j.message[0].component.formData||j.message[0].component.payload&amp;&amp;j.message[0].component.payload.formData))return j.message[0].component.formData&amp;&amp;(j.message[0].component.payload.formData=j.message[0].component.formData),void c.renderWebForm(j)}var k=a(this).attr("url");k.indexOf("http:")&lt;0&amp;&amp;k.indexOf("https:")&lt;0&amp;&amp;(k="http:////"+k),c.openExternalLink(k)}if(b.currentTarget.classList&amp;&amp;b.currentTarget.classList.length&gt;0&amp;&amp;"likeDiv"===b.currentTarget.classList[1]&amp;&amp;(a(".likeImg").addClass("hide"),a(".likedImg").removeClass("hide"),a(".likeDislikeDiv").addClass("dummy")),b.currentTarget.classList&amp;&amp;b.currentTarget.classList.length&gt;0&amp;&amp;"disLikeDiv"===b.currentTarget.classList[1]&amp;&amp;(a(".disLikeImg").addClass("hide"),a(".disLikedImg").removeClass("hide"),a(".likeDislikeDiv").addClass("dummy")),b.currentTarget.classList&amp;&amp;b.currentTarget.classList.length&gt;0&amp;&amp;"checkboxBtn"===b.currentTarget.classList[0]){for(var l=a(b.currentTarget.parentElement.parentElement).find(".checkInput:checked"),m=[],n=[],o=0;o&lt;l.length;o++)m.push(a(l[o]).attr("value")),n.push(a(l[o]).attr("text"));a(".chatInputBox").text(a(this).attr("title")+": "+m.toString()),c.sendMessage(a(".chatInputBox"),n.toString())}if(b.currentTarget.classList&amp;&amp;b.currentTarget.classList.length&gt;0&amp;&amp;"quickReply"===b.currentTarget.classList[0]){var p=b.currentTarget.parentElement.parentElement,q=p.parentElement.parentElement.querySelectorAll(".quickreplyLeftIcon"),r=p.parentElement.parentElement.querySelectorAll(".quickreplyRightIcon");setTimeout(function(){p.parentElement.parentElement.getElementsByClassName("user-account")[0].classList.remove("marginT50"),(q&amp;&amp;q.length||r&amp;&amp;r.length)&amp;&amp;(p.parentElement.parentElement.removeChild(q[0]),p.parentElement.parentElement.removeChild(r[0])),p.parentElement.removeChild(p)},50)}setTimeout(function(){d.find(".kore-chat-footer .chatInputBox").focus()},600)}),d.off("click",".close-btn").on("click",".close-btn",function(b){a(".recordingMicrophone").trigger("click"),eb&amp;&amp;eb.stop(),gb=!1,c.destroy(),bb&amp;&amp;(bb.close(),bb=null)}),d.off("click",".minimize-btn").on("click",".minimize-btn",function(b){!0===c.minimized?(d.removeClass("minimize"),c.minimized=!1,c.expanded):(d.addClass("minimize"),!1===c.expanded&amp;&amp;d.hasClass("ui-draggable"),d.find(".minimized-title").html("Talk to "+c.config.chatTitle),c.minimized=!0,!0===c.expanded&amp;&amp;a(".kore-chat-overlay").hide()),a(".recordingMicrophone").trigger("click"),eb&amp;&amp;eb.stop()}),d.off("click",".expand-btn").on("click",".expand-btn",function(b){0===a(".kore-chat-overlay").length&amp;&amp;a(c.config.container).append('&lt;div class="kore-chat-overlay"&gt;&lt;/div&gt;'),!0===c.expanded?(p(),a(".kore-chat-overlay").hide(),a(this).attr("title","Expand"),d.removeClass("expanded"),a(".expand-btn-span").removeClass("fa-compress"),a(".expand-btn-span").addClass("fa-expand"),c.expanded=!1):(a(".kore-chat-overlay").show(),a(this).attr("title","Collapse"),d.addClass("expanded"),a(".expand-btn-span").addClass("fa-compress"),a(".expand-btn-span").removeClass("fa-expand"),c.expanded=!0);var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e);var f=d.position().left+d.width();f&gt;a(window).width()&amp;&amp;d.css("left",d.position().left-(f-a(window).width()+10)+"px")}),window.KorePickers){var e={chatWindowInstance:c,chatConfig:c.config},f=new KorePickers(e);f.init()}a(document).on("keyup",function(b){27==b.keyCode&amp;&amp;(a(".closeImagePreview").trigger("click"),a(".closeElePreview").trigger("click"))}),d.off("click",".quickreplyLeftIcon").on("click",".quickreplyLeftIcon",function(b){var c=b.currentTarget.parentElement.getElementsByClassName("buttonTmplContentChild");if(c.length)for(var d=b.target.parentElement.getElementsByClassName("quick_replies_btn_parent"),e=d[0].scrollLeft,f=0,g=0;g&lt;c.length;g++)if((f+=c[g].offsetWidth+10)&gt;e){a(d).animate({scrollLeft:e-c[g].offsetWidth-50},"slow",function(){(d[0].parentElement.querySelectorAll(".quickreplyRightIcon")[0].classList.remove("hide"),d[0].scrollLeft&lt;=0)&amp;&amp;d[0].parentElement.querySelectorAll(".quickreplyLeftIcon")[0].classList.add("hide")});break}}),d.off("click",".quickreplyRightIcon").on("click",".quickreplyRightIcon",function(b){var c=b.currentTarget.parentElement.getElementsByClassName("buttonTmplContentChild");if(c.length)for(var d=b.target.parentElement.getElementsByClassName("quick_replies_btn_parent"),e=b.target.parentElement.offsetWidth,f=0,g=0;g&lt;c.length;g++)if((f+=c[g].offsetWidth+10)&gt;e){a(d).animate({scrollLeft:d[0].scrollLeft+c[g].offsetWidth+20},"slow",function(){(d[0].parentElement.querySelectorAll(".quickreplyLeftIcon")[0].classList.remove("hide"),d[0].scrollLeft+e+10&gt;=d[0].scrollWidth)&amp;&amp;d[0].parentElement.querySelectorAll(".quickreplyRightIcon")[0].classList.add("hide")});break}}),d.off("click",".minimized").on("click",".minimized,.minimized-title",function(b){d.removeClass("minimize"),c.minimized=!1,c.skipedInit&amp;&amp;(Aa.init(c.config.botOptions,c.config.messageHistoryLimit),c.skipedInit=!1),!0===c.expanded&amp;&amp;a(".kore-chat-overlay").show(),document.createEvent("HTMLEvents").initEvent("resize",!0,!1),a(".chat-container").animate({scrollTop:a(".chat-container").prop("scrollHeight")},100)}),d.off("click",".reload-btn").on("click",".reload-btn",function(b){a(this).addClass("disabled").prop("disabled",!0),a(".close-btn").addClass("disabled").prop("disabled",!0),setTimeout(function(){customData&amp;&amp;customData.isReconnect?c.resetWindow(!0):c.resetWindow()}),a(".recordingMicrophone").trigger("click"),eb&amp;&amp;eb.stop()}),d.off("click",".ttspeaker").on("click",".ttspeaker",function(b){if(hb)if(gb){if(eb&amp;&amp;eb.stop(),J(),gb=!1,a("#ttspeaker")[0].pause(),za&amp;&amp;"webapi"===za){var c=window.speechSynthesis;c.pause()}else"awspolly"===za&amp;&amp;!1===gb&amp;&amp;(gainNode.gain.value=0,a(".ttspeakerDiv").addClass("ttsOff"));a(".ttspeakerDiv").addClass("ttsOff")}else za&amp;&amp;"webapi"===za?cb=H():za&amp;&amp;"awspolly"===za?gainNode.gain.value=1:cb=I(),gb=!0,a(".ttspeakerDiv").removeClass("ttsOff")}),Aa.on("open",function(b){pa=c.config.botOptions.accessToken;d.find(".kore-chat-footer .chatInputBox");d.find(".kore-chat-header .header-title").html(c.config.chatTitle).attr("title",c.config.chatTitle),d.find(".kore-chat-header .disabled").prop("disabled",!1).removeClass("disabled"),Ta||setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter")}),c.config.botOptions._reconnecting}),Aa.on("message",function(b){!0===c.popupOpened&amp;&amp;a(".kore-auth-popup .close-popup").trigger("click");var d=JSON.parse(b.data);if("bot"===d.from&amp;&amp;"bot_response"===d.type){if(d&amp;&amp;d.message&amp;&amp;d.message[0]){if(d.message[0].cInfo||(d.message[0].cInfo={}),d.message[0].component&amp;&amp;!d.message[0].component.payload.text)try{d.message[0].component=JSON.parse(d.message[0].component.payload)}catch(a){d.message[0].component=d.message[0].component.payload}d.message[0].component&amp;&amp;d.message[0].component.payload&amp;&amp;d.message[0].component.payload.text&amp;&amp;(d.message[0].cInfo.body=d.message[0].component.payload.text),d.message[0].component&amp;&amp;d.message[0].component.payload&amp;&amp;(d.message[0].component.payload.videoUrl||d.message[0].component.payload.audioUrl)&amp;&amp;(d.message[0].cInfo.body=d.message[0].component.payload.text||"")}if(d.message[0].component&amp;&amp;d.message[0].component.payload&amp;&amp;d.message[0].component.payload.text){if(d.message[0].cInfo.body=d.message[0].component.payload.text,d.message[0].cInfo.body.indexOf("###show_account_values###")&gt;-1){console.log("11111111111",d.message[0].component.payload.buttons);var e={radioOptions:d.message[0].component.payload.buttons};f.showradioOptionsPicker(e)}"daterange"==d.message[0].component.payload.template_type&amp;&amp;(d.message[0].cInfo.body=d.message[0].component.payload.text_message,f.pickerSubconfig.dateRangeConfig.format=d.message[0].component.payload.format,f.pickerSubconfig.dateRangeConfig.startDate=d.message[0].component.payload.startDate,f.pickerSubconfig.dateRangeConfig.endDate=d.message[0].component.payload.endDate,d.message[0].component.payload.title&amp;&amp;(f.pickerSubconfig.daterangepicker.title=d.message[0].component.payload.title),d.message[0].component.payload.dateSeperator&amp;&amp;(f.pickerSubconfig.dateRangeConfig.dateSeperator=d.message[0].component.payload.dateSeperator),d.message[0].component.payload.expectedFormat&amp;&amp;(f.pickerSubconfig.dateRangeConfig.expectedFormat=d.message[0].component.payload.expectedFormat),a(".typingIndicatorContent").css("display","block"),f.showDateRangePicker(f.mainConfig)),"dateTemplate"==d.message[0].component.payload.template_type&amp;&amp;(d.message[0].cInfo.body=d.message[0].component.payload.text_message,f.pickerSubconfig.dateConfig.format=d.message[0].component.payload.format,f.pickerSubconfig.dateConfig.startDate=d.message[0].component.payload.startDate,f.pickerSubconfig.dateConfig.showdueDate=d.message[0].component.payload.showdueDate,f.pickerSubconfig.dateConfig.endDate=d.message[0].component.payload.endDate,f.pickerSubconfig.dateConfig.selectedDate="Selected Date",d.message[0].component.payload.showdueDate&amp;&amp;(f.pickerSubconfig.dateConfig.paymentDue="Payment Due Date",f.pickerSubconfig.dateConfig.paymentDue=d.message[0].component.payload.paymentDue),d.message[0].component.payload.title&amp;&amp;(f.pickerSubconfig.datepicker.title=d.message[0].component.payload.title),a(".typingIndicatorContent").css("display","block"),f.showDatePicker(f.mainConfig)),d.message[0].cInfo.body.indexOf("clockPicker")&gt;-1&amp;&amp;f.showClockPicker(f.mainConfig)}Ta&amp;&amp;Ka?Ja.push(d):c.config.supportDelayedMessages?c.pushTorenderMessagesQueue(d):c.renderMessage(d)}else if("self"===d.from&amp;&amp;"user_message"===d.type){var g=d.message,h={};h=g&amp;&amp;g.attachments&amp;&amp;g.attachments[0]&amp;&amp;g.attachments[0].fileId?{type:"currentUser",message:[{type:"text",cInfo:{body:g.body,attachments:g.attachments},clientMessageId:d.id}],createdOn:d.id}:{type:"currentUser",message:[{type:"text",cInfo:{body:g.body},clientMessageId:d.id}],createdOn:d.id},c.renderMessage(h)}"appInvalidNotification"===d.type&amp;&amp;setTimeout(function(){a(".trainWarningDiv").addClass("showMsg")},2e3)}),N(document.querySelector(".droppable"),b)},f.prototype.bindIframeEvents=function(b){var c=this;b.on("click",".close-popup",function(){a(this).closest(".kore-auth-popup").remove(),a(".kore-auth-layover").remove(),c.popupOpened=!1}),b.find("iframe")[0].addEventListener("onload",function(){console.log(this)},!0)},f.prototype.openExternalLink=function(a){var b=document.createElement("a");b.href=a,b.target="_blank",b.rel="noopener noreferrer",b.click()},f.prototype.render=function(b){var c=this;a(c.config.container).append(b),"body"!==c.config.container&amp;&amp;(a(c.config.container).addClass("pos-relative"),a(c.config.chatContainer).addClass("pos-absolute")),p(),c.bindEvents()},f.prototype.defaultWelcomeMsg=function(b,c){var d=this;d.config.botOptions._reconnecting=!0;var e=(a(d.config.chatContainer).find(".kore-chat-body"),a(d.config.chatContainer).find(".kore-chat-footer"),(new Date).getTime());var f={};f.clientMessageId=e,Object.keys(kb).length&gt;0&amp;&amp;chatInput.text().trim().length?f.message={body:chatInput.text().trim(),attachments:[kb]}:Object.keys(kb).length&gt;0?f.message={attachments:[kb]}:f.message={body:"BotNotifications"},f.resourceid="/bot.message",b&amp;&amp;"string"==typeof b&amp;&amp;(f.message.renderMsg=b),c&amp;&amp;c.customdata&amp;&amp;(f.message.customdata=c.customdata),c&amp;&amp;c.nlmeta&amp;&amp;(f.message.nlmeta=c.nlmeta),a(".isDebugConsolePanelOpen").length&gt;0?f.isDebugging=!0:f.isDebugging=!1,kb={},Aa.sendMessage(f,function(b){b&amp;&amp;b.message&amp;&amp;setTimeout(function(){a("#msg_"+e).find(".messageBubble").append('&lt;div class="errorMsg"&gt;'+i18n.i18nString("sendFailed_please_resend")+"&lt;/div&gt;")},350)})},f.prototype.sendMessage=function(b,c,d){var e=this;if(""!==b.text().trim()||0!=a(".attachment").html().trim().length){if(d&amp;&amp;d.message&amp;&amp;d.message.length&amp;&amp;d.message[0]&amp;&amp;d.message[0].component&amp;&amp;d.message[0].component.payload&amp;&amp;d.message[0].component.payload.ignoreCheckMark)var f=d.message[0].component.payload.ignoreCheckMark;e.config.allowLocation&amp;&amp;Aa.fetchUserLocation();var g=a(e.config.chatContainer).find(".kore-chat-body"),h=a(e.config.chatContainer).find(".kore-chat-footer"),i=(new Date).getTime(),j={};Ga=0,b.html(b.html().replaceAll("&lt;br&gt;","\n")),kb&amp;&amp;Object.keys(kb).length?(j={type:"currentUser",message:[{type:"text",cInfo:{body:b.text(),attachments:[kb]},clientMessageId:i}],createdOn:i},a(".attachment").html(""),a(".kore-chat-window").removeClass("kore-chat-attachment"),document.getElementById("captureAttachmnts").value=""):(kb={},j={type:"currentUser",message:[{type:"text",cInfo:{body:b.text()},clientMessageId:i}],createdOn:i});var k={};k.clientMessageId=i,Object.keys(kb).length&gt;0&amp;&amp;b.text().trim().length?k.message={body:b.text().trim(),attachments:[kb]}:Object.keys(kb).length&gt;0?k.message={attachments:[kb]}:k.message={body:b.text().trim()},k.resourceid="/bot.message",c&amp;&amp;"string"==typeof c&amp;&amp;(k.message.renderMsg=c),d&amp;&amp;d.customdata&amp;&amp;(k.message.customdata=d.customdata),d&amp;&amp;d.nlmeta&amp;&amp;(k.message.nlmeta=d.nlmeta),kb={},Aa.sendMessage(k,function(b){b&amp;&amp;b.message&amp;&amp;setTimeout(function(){a('.kore-chat-window [data-time="'+i+'"]').find(".messageBubble").append('&lt;div class="errorMsg"&gt;Send Failed. Please resend.&lt;/div&gt;')},350)}),b.html(""),a(".sendButton").addClass("disabled"),g.css("bottom",h.outerHeight()),m(),a(".typingIndicatorContent").css("display","block"),setTimeout(function(){a(".typingIndicatorContent").css("display","none")},1e4),c&amp;&amp;"string"==typeof c&amp;&amp;(j.message[0].cInfo.body=c),j.message[0].cInfo.ignoreCheckMark=f,e.renderMessage(j)}},f.prototype.renderMessage=function(c){var d=this,e="",f="",g="";c.createdOnTimemillis=new Date(c.createdOn).valueOf(),tb.helpers=vb,tb.extension=f,graphLibGlob=d.config.graphLib||"d3","bot_response"===c.type?(Sa=!1,setTimeout(function(){a(".typingIndicator").css("background-image","url("+c.icon+")")},500),setTimeout(function(){Sa||a(".typingIndicatorContent").css("display","none")},500)):Sa=!1;var h=a(d.config.chatContainer).find(".chat-container");if(c.message&amp;&amp;c.message[0]&amp;&amp;c.message[0].cInfo&amp;&amp;c.message[0].cInfo.attachments&amp;&amp;(f=s(c.message[0].cInfo.attachments[0].fileName)),c.message&amp;&amp;c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;c.message[0].component.payload.url&amp;&amp;(f=s(c.message[0].component.payload.url),g=c.message[0].component.payload.url.replace(/^.*[\\\/]/,"")),console.log("msgData under renderMessage",c),""===(e=tb.renderMessage(c))&amp;&amp;c&amp;&amp;c.message&amp;&amp;c.message[0])if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"button"==c.message[0].component.payload.template_type){console.log("templatequickreply:::",d.getChatTemplate("templatequickreply"));try{e=a(d.getChatTemplate("templatequickreply")).tmpl({msgData:c,helpers:vb,extension:f})}catch(a){console.log(a)}setTimeout(console.log("messageHtml:::",e),1e3)}else{if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"wait_for_response"==c.message[0].component.payload.template_type)return Sa=!0,void a(".typingIndicatorContent").css("display","block");if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"list"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("templatelist")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"quick_replies"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("templatequickreply")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){var a=document.createEvent("HTMLEvents");a.initEvent("resize",!0,!1),window.dispatchEvent(a)},150);else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"carousel"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("carouselTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){if(a(".carousel:last").addClass("carousel"+Ra),a(".carousel"+Ra).children().length&gt;1){var b=new PureJSCarousel({carousel:".carousel"+Ra,slide:".slide",oneByOne:!0});a(".carousel"+Ra).parent().show(),a(".carousel"+Ra).attr("style","height: 100% !important"),Fa.push(b)}var c=document.createEvent("HTMLEvents");c.initEvent("resize",!0,!1),window.dispatchEvent(c),Ra+=1,h.animate({scrollTop:h.prop("scrollHeight")},0)});else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;("image"==c.message[0].component.type||"audio"==c.message[0].component.type||"video"==c.message[0].component.type||"link"==c.message[0].component.type))e=a(d.getChatTemplate("templateAttachment")).tmpl({msgData:c,helpers:vb,extension:f,extractedFileName:g});else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"Notification"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("NotificationTmpl")).tmpl({msgData:c,helpers:vb,extension:f}),a(e).data(c);else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"table"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("tableChartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){for(var b=document.getElementsByClassName("accordionRow"),c=0;c&lt;b.length;c++)b[c].onclick=function(){this.classList.toggle("open")};for(var d=document.getElementsByClassName("showMore"),c=0;c&lt;d.length;c++)d[c].onclick=function(){var b=this.parentNode.parentElement;a("#dialog").empty(),a("#dialog").html(a(b).find(".tablechartDiv").html()),a(".hello").clone().appendTo(".goodbye");var c=document.getElementById("myPreviewModal");a(".largePreviewContent").empty(),a(b).find(".tablechartDiv").clone().appendTo(".largePreviewContent"),c.style.display="block",document.getElementsByClassName("closeElePreview")[0].onclick=function(){c.style.display="none",a(".largePreviewContent").removeClass("addheight")}}},350);else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"mini_table"==c.message[0].component.payload.template_type)"horizontal"==c.message[0].component.payload.layout?(e=a(d.getChatTemplate("miniTableHorizontalTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),setTimeout(function(){if(a(".carousel:last").addClass("carousel"+Ra),a(".carousel"+Ra).children().length&gt;1){var b=new PureJSCarousel({carousel:".carousel"+Ra,slide:".slide",oneByOne:!0});a(".carousel"+Ra).parent().show(),a(".carousel"+Ra).attr("style","height: 100% !important"),Fa.push(b)}var c=document.createEvent("HTMLEvents");c.initEvent("resize",!0,!1),window.dispatchEvent(c),Ra+=1,h.animate({scrollTop:h.prop("scrollHeight")},0)})):e=a(d.getChatTemplate("miniTableChartTemplate")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"multi_select"==c.message[0].component.payload.template_type)e=a(this.getChatTemplate("checkBoxesTemplate")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"like_dislike"==c.message[0].component.payload.template_type)e=a(this.getChatTemplate("likeDislikeTemplate")).tmpl({msgData:c,helpers:vb,extension:f});else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"piechart"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("pieChartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),"google"===d.config.graphLib?setTimeout(function(){function a(){var a=new google.visualization.DataTable;a.addColumn("string","Task"),a.addColumn("number","Hours per Day"),c.message[0].component.payload.elements&amp;&amp;c.message[0].component.payload.elements[0].displayValue&amp;&amp;a.addColumn({type:"string",role:"tooltip"});for(var b=[],d=c.message[0].component.payload.elements,e=0;e&lt;d.length;e++){var f=[d[e].title+" \n"+d[e].value];f.push(parseFloat(d[e].value)),d[e].displayValue&amp;&amp;f.push(d[e].displayValue),b.push(f)}a.addRows(b);var g={chartArea:{left:"3%",top:"3%",height:"94%",width:"94%"},pieSliceTextStyle:{},colors:window.chartColors,legend:{textStyle:{color:"#b3bac8"}}};1===d.length&amp;&amp;(g.pieHole=.5,g.pieSliceTextStyle.color="black"),c.message[0].component.payload.pie_type&amp;&amp;("donut"===c.message[0].component.payload.pie_type?(g.pieHole=.6,g.pieSliceTextStyle.color="black",g.legend.position="none"):"donut_legend"===c.message[0].component.payload.pie_type&amp;&amp;(g.pieHole=.6,g.pieSliceTextStyle.color="black"));var h={id:"piechart"+c.messageId,data:a,options:g,type:"piechart"};sb.push(h);var i=document.getElementById("piechart"+c.messageId);new google.visualization.PieChart(i).draw(a,g)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a)},150):"d3"===graphLibGlob&amp;&amp;(void 0===c.message[0].component.payload.pie_type&amp;&amp;(c.message[0].component.payload.pie_type="regular"),c.message[0].component.payload.pie_type&amp;&amp;(j={},j.width=300,j.height=200,j.legendRectSize=10,j.legendSpacing=2.4,"regular"===c.message[0].component.payload.pie_type?setTimeout(function(){var a={id:"piechart"+c.messageId,data:c,type:"regular"};sb.push(a),KoreGraphAdapter.drawD3Pie(c,j,"#piechart"+c.messageId,12)},150):"donut"===c.message[0].component.payload.pie_type?setTimeout(function(){var a={id:"piechart"+c.messageId,data:c,type:"donut"};sb.push(a),KoreGraphAdapter.drawD3PieDonut(c,j,"#piechart"+c.messageId,12,"donut")},150):"donut_legend"===c.message[0].component.payload.pie_type&amp;&amp;setTimeout(function(){var a={id:"piechart"+c.messageId,data:c,type:"donut_legend"};sb.push(a),KoreGraphAdapter.drawD3PieDonut(c,j,"#piechart"+c.messageId,12,"donut_legend")},150))),setTimeout(function(){a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),na()},200);else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"barchart"==c.message[0].component.payload.template_type){if(e=a(d.getChatTemplate("barchartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),"google"===graphLibGlob)setTimeout(function(){function a(){var a=!1,b=new google.visualization.DataTable;b.addColumn("string","y");for(var d=0;d&lt;c.message[0].component.payload.elements.length;d++){var e=c.message[0].component.payload.elements[d];b.addColumn("number",e.title),e.displayValues&amp;&amp;e.displayValues.length&amp;&amp;(b.addColumn({type:"string",role:"tooltip"}),a=!0)}for(var f=c.message[0].component.payload.elements.length,d=0;d&lt;c.message[0].component.payload.X_axis.length;d++){var g=[];g.push(c.message[0].component.payload.X_axis[d]);for(var h=0;h&lt;f;h++)g.push(parseFloat(c.message[0].component.payload.elements[h].values[d])),a&amp;&amp;g.push(c.message[0].component.payload.elements[h].displayValues[d]);b.addRow(g)}var i={chartArea:{height:"70%",width:"80%"},legend:{position:"top",alignment:"end",maxLines:3,textStyle:{color:"#b3bac8"}},hAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"}},vAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"},baselineColor:"transparent"},animation:{duration:500,easing:"out",startup:!0},bar:{groupWidth:"25%"},colors:window.chartColors};"vertical"!==c.message[0].component.payload.direction&amp;&amp;(i.bar.groupWidth="45%",i.hAxis.baselineColor="#b3bac8"),c.message[0].component.payload.stacked&amp;&amp;(i.isStacked=!0,i.bar.groupWidth="25%");var j={id:"barchart"+c.messageId,direction:c.message[0].component.payload.direction,data:b,options:i,type:"barchart"};sb.push(j);var k=document.getElementById("barchart"+c.messageId),l=null;l="vertical"===c.message[0].component.payload.direction?new google.visualization.ColumnChart(k):new google.visualization.BarChart(k),l.draw(b,i)}google.charts.load("current",{packages:["corechart","bar"]}),google.charts.setOnLoadCallback(a)},150);else if("d3"===graphLibGlob){var j={};j.outerWidth=350,j.outerHeight=300,j.innerHeight=200,j.legendRectSize=15,j.legendSpacing=4,void 0===c.message[0].component.payload.direction&amp;&amp;(c.message[0].component.payload.direction="horizontal"),"horizontal"!==c.message[0].component.payload.direction||c.message[0].component.payload.stacked?"vertical"===c.message[0].component.payload.direction&amp;&amp;c.message[0].component.payload.stacked?setTimeout(function(){j.outerWidth=350,j.innerWidth=270;var a={id:"barchart"+c.messageId,data:c,type:"stackedBarchart"};sb.push(a),KoreGraphAdapter.drawD3barVerticalStackedChart(c,j,"#barchart"+c.messageId,12)},250):"horizontal"===c.message[0].component.payload.direction&amp;&amp;c.message[0].component.payload.stacked?setTimeout(function(){j.innerWidth=180;var a={id:"barchart"+c.messageId,data:c,type:"stackedBarchart"};sb.push(a),KoreGraphAdapter.drawD3barStackedChart(c,j,"#barchart"+c.messageId,12)},250):"vertical"!==c.message[0].component.payload.direction||c.message[0].component.payload.stacked||setTimeout(function(){j.innerWidth=240;var a={id:"barchart"+c.messageId,data:c,type:"barchart"};sb.push(a),KoreGraphAdapter.drawD3barChart(c,j,"#barchart"+c.messageId,12)},250):setTimeout(function(){j.innerWidth=180;var a={id:"Legend_barchart"+c.messageId,data:c,type:"barchart"};sb.push(a),KoreGraphAdapter.drawD3barHorizontalbarChart(c,j,"#barchart"+c.messageId,12)},250)}setTimeout(function(){a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),na()},300)}else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"linechart"==c.message[0].component.payload.template_type)e=a(d.getChatTemplate("linechartTemplate")).tmpl({msgData:c,helpers:vb,extension:f}),"google"===graphLibGlob?setTimeout(function(){function a(){var a=!1,b=new google.visualization.DataTable;b.addColumn("string","y");for(var d=0;d&lt;c.message[0].component.payload.elements.length;d++){var e=c.message[0].component.payload.elements[d];b.addColumn("number",e.title),e.displayValues&amp;&amp;e.displayValues.length&amp;&amp;(b.addColumn({type:"string",role:"tooltip"}),a=!0)}for(var f=c.message[0].component.payload.elements.length,d=0;d&lt;c.message[0].component.payload.X_axis.length;d++){var g=[];g.push(c.message[0].component.payload.X_axis[d]);for(var h=0;h&lt;f;h++)g.push(parseFloat(c.message[0].component.payload.elements[h].values[d])),a&amp;&amp;g.push(c.message[0].component.payload.elements[h].displayValues[d]);b.addRow(g)}var i={curveType:"function",chartArea:{height:"70%",width:"80%"},legend:{position:"top",alignment:"end",maxLines:3,textStyle:{color:"#b3bac8"}},hAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"}},vAxis:{gridlines:{color:"transparent"},textStyle:{color:"#b3bac8"},baselineColor:"transparent"},lineWidth:3,animation:{duration:500,easing:"out",startup:!0},colors:window.chartColors},j={id:"linechart"+c.messageId,data:b,options:i,type:"linechart"};sb.push(j);var k=document.getElementById("linechart"+c.messageId);new google.visualization.LineChart(k).draw(b,i)}google.charts.load("current",{packages:["corechart","line"]}),google.charts.setOnLoadCallback(a)},150):"d3"===graphLibGlob&amp;&amp;setTimeout(function(){var a={};a.outerWidth=380,a.outerHeight=350,a.innerWidth=230,a.innerHeight=250,a.legendRectSize=15,a.legendSpacing=4;var b={id:"linechart"+c.messageId,data:c,type:"linechart"};sb.push(b),KoreGraphAdapter.drawD3lineChartV2(c,a,"#linechart"+c.messageId,12)},250),setTimeout(function(){a(".chat-container").scrollTop(a(".chat-container").prop("scrollHeight")),na()},200);else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;c.message[0].component.payload.formData&amp;&amp;"inline"===c.message[0].component.payload.formData.renderType)c.renderType="inline",e=d.renderWebForm(c,!0);else if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;"iframe"==c.message[0].component.payload.template_type){var k=a(d.getChatTemplate("iframe")).tmpl({msgData:c,helpers:vb,link_url:c.message[0].component.link_url});k[0].onload=function(a){console.log(a)},i(k[0],!0),setTimeout(function(){document.getElementById("iframeModal").contentWindow.document.getElementsByClassName("x-unblu-launcher-button")[0].click()},7e3)}else e=a(d.getChatTemplate("message")).tmpl({msgData:c,helpers:vb,extension:f})}if(console.log("messageHtml is ",e),h.find("li").attr("aria-live","off"),h.find("li").attr("aria-hidden","true"),c&amp;&amp;c.message[0]&amp;&amp;c.message[0].component&amp;&amp;c.message[0].component.payload&amp;&amp;c.message[0].component.payload.sliderView&amp;&amp;!c.message[0].component.payload.fromHistory)bottomSliderAction("show",e);else if(a(".kore-chat-window .chat-container li#"+c.messageId).length&lt;1)if("bot_response"===c.type&amp;&amp;c.fromHistorySync){var l=[],m=a(".kore-chat-window .chat-container&gt;li");if(m.length){m.each(function(b,c){l.push(parseInt(a(c).attr("data-time")))});var o=b(l,c.createdOnTimemillis);if(o&gt;0){var p=m[o];p?a(e).insertBefore(p):h.append(e)}else h.prepend(e)}else h.append(e)}else h.append(e);if(n(),h.animate({scrollTop:h.prop("scrollHeight")},100),"bot_response"===c.type&amp;&amp;gb&amp;&amp;hb&amp;&amp;!d.minimized&amp;&amp;!Ka){if(c.message[0]&amp;&amp;c.message[0].component&amp;&amp;"template"===c.message[0].component.type)fb="";else try{fb=c.message[0].component.payload.text?c.message[0].component.payload.text.replace(/\r?\n/g,". ."):"",fb=vb.checkMarkdowns(fb),fb=fb.replace("___","&lt;hr/&gt;"),fb=fb.replace("---","&lt;hr/&gt;")}catch(a){fb=""}if(c.message[0].component&amp;&amp;c.message[0].component.payload.speech_hint&amp;&amp;(fb=c.message[0].component.payload.speech_hint),za&amp;&amp;"webapi"===za)cb=H(fb);else if(za&amp;&amp;"awspolly"===za)window.speakTextWithAWSPolly?speakTextWithAWSPolly(fb):console.warn("Please uncomment amazon polly files 'plugins/aws-sdk-2.668.0.min.js' and'plugins/kore-aws-polly.js' in index.html");else if(!cb||cb.readyState&amp;&amp;1!==cb.readyState)try{cb=I()}catch(a){console.log(a)}else K(fb)}},f.prototype.pushTorenderMessagesQueue=function(a){var b=this;b.renderMessagesQueue||(b.renderMessagesQueue=[]),b.renderMessagesQueue.push(a),b.renderEventLoop||b.startRenderEventLoop()},f.prototype.startRenderEventLoop=function(){var a=this;a.msgRenderingProgress=!1,a.renderEventLoop=setInterval(function(){console.log("Running Event loop"),a.checkForMsgQueue()},500)},f.prototype.checkForMsgQueue=function(){var a=this;if(a.renderMessagesQueue.length&amp;&amp;!a.msgRenderingProgress){var b=a.renderMessagesQueue.shift(),c=0;b.message&amp;&amp;b.message.length&amp;&amp;b.message[0]&amp;&amp;b.message[0].component&amp;&amp;b.message[0].component.payload&amp;&amp;b.message[0].component.payload.renderDelay&amp;&amp;(c=b.message[0].component.payload.renderDelay||0),a.msgRenderingProgress=!0,setTimeout(function(){a.renderMessage(b),a.msgRenderingProgress=!1},c)}a.renderMessagesQueue.length||a.msgRenderingProgress||!a.renderEventLoop||(clearTimeout(a.renderEventLoop),a.renderEventLoop=!1)},f.prototype.formatMessages=function(b){a(b).find("a").attr("target","_blank")},f.prototype.openPopup=function(b){var c=this,d=a(c.getChatTemplate("popup")).tmpl({link_url:b});a(c.config.container).append(d),c.popupOpened=!0,c.bindIframeEvents(a(d))},f.prototype.showDropdown=function(b){a(b).next().hasClass("dropdown-contentWidgt")&amp;&amp;a(b).next().toggleClass("show"),a(".dropdown-contentWidgt.show").not(a(b).next()).removeClass("show")},function(){window.onclick=function(a){if(!a.target.matches(".dropbtnWidgt")){var b,c=document.getElementsByClassName("dropdown-contentWidgt");for(b=0;b&lt;c.length;b++){var d=c[b];d.classList.contains("show")&amp;&amp;d.classList.remove("show")}}}}(),f.prototype.getChatTemplate=function(a){var b='&lt;div class="footerContainer pos-relative"&gt;                         {{if userAgentIE}}                         &lt;div role="textbox" class="chatInputBox inputCursor" aria-label="Message"aria-label="Message" contenteditable="true" placeholder="${botMessages.message}"&gt;&lt;/div&gt;                         {{else}}                         &lt;div role="textbox" class="chatInputBox" contenteditable="true" placeholder="${botMessages.message}"&gt;&lt;/div&gt;                         {{/if}}                     &lt;div class="footerIonsContainer"&gt;                    {{if isTTSEnabled}}                         &lt;div class="sdkFooterIcon ttspeakerDiv ttsOff"&gt;                             &lt;button class="ttspeaker" title="Text to Speech"&gt;                                 &lt;span class="ttsSpeakerEnable"&gt;&lt;/span&gt;                                 &lt;span class="ttsSpeakerDisable"&gt;&lt;/span&gt;                                 &lt;span style="display:none;"&gt;&lt;audio id="ttspeaker" controls="" autoplay="" name="media"&gt;&lt;source src="" type="audio/wav"&gt;&lt;/audio&gt;&lt;/span&gt;                            &lt;/button&gt;                         &lt;/div&gt;                     {{/if}}                     {{if isSpeechEnabled}}                    &lt;div class="sdkFooterIcon microphoneBtn"&gt;                         &lt;button class="notRecordingMicrophone" title="Microphone On"&gt;                             &lt;i class="microphone"&gt;&lt;/i&gt;                         &lt;/button&gt;                         &lt;button class="recordingMicrophone" title="Microphone Off" &gt;                             &lt;i class="microphone"&gt;&lt;/i&gt;                             &lt;span class="recordingGif"&gt;&lt;/span&gt;                         &lt;/button&gt;                         &lt;div id="textFromServer"&gt;&lt;/div&gt;                     &lt;/div&gt;                     {{/if}}                    &lt;div class="sdkFooterIcon"&gt;                         &lt;button class="sdkAttachment attachmentBtn" title="Attachment"&gt;                             &lt;div class="attachmentIcon"&gt;&lt;/div&gt;                         &lt;/button&gt;                         &lt;input type="file" name="Attachment" class="filety" id="captureAttachmnts" title="Upload attachment"&gt;                     &lt;/div&gt;                     {{if !(isSendButton)}}&lt;div class="chatSendMsg"&gt;Press enter to send&lt;/div&gt;{{/if}}                     &lt;/div&gt;                    &lt;div class="attachment"&gt;&lt;/div&gt;                 &lt;/div&gt;',c='&lt;script id="chat_window_tmpl" type="text/x-jqury-tmpl"&gt;                     &lt;div class="kore-chat-window droppable liteTheme-one"&gt;                     &lt;div class="kr-wiz-menu-chat defaultTheme-kore"&gt;                    &lt;/div&gt;\t                        &lt;div class="minimized-title"&gt;&lt;/div&gt;                         &lt;div class="minimized"&gt;&lt;span class="messages"&gt;&lt;/span&gt;&lt;/div&gt;                         &lt;div class="kore-chat-header"&gt;                         &lt;div class="header-profile-icon"&gt; &lt;div class="header-profile-avtar"&gt;&lt;/div&gt; &lt;/div&gt;                             &lt;div id="botHeaderTitle" aria-labelledby="botHeaderTitle" class="header-title" title="${chatTitle}"&gt;${chatTitle}&lt;/div&gt;                             &lt;div class="chat-box-controls"&gt;                                 &lt;button class="reload-btn" title="Reconnect"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTNweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTMgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5yZWxvYWQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zNTcuMDAwMDAwLCAtMjQxLjAwMDAwMCkiIGZpbGw9IiM4QTk1OUYiIHN0cm9rZT0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJyZWxvYWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM1OC4wMDAwMDAsIDI0Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMC44LDUuMjczNTc2NTggQzEwLjgsMi4zNjU3MTQyIDguMzc3NTg1NzEsMCA1LjQwMDAyMzg3LDAgQzIuNDIyNDYyMDMsMCAwLDIuMzY1NzE0MiAwLDUuMjczNTc2NTggQzAsNS40NDYzMTE0MiAwLjE0MzQwNjM1Myw1LjU4NjM1OTc2IDAuMzIwMjgyOTQyLDUuNTg2MzU5NzYgQzAuNDk3MTU5NTMsNS41ODYzNTk3NiAwLjY0MDU2NTg4Myw1LjQ0NjI4ODEgMC42NDA1NjU4ODMsNS4yNzM1NzY1OCBDMC42NDA1NjU4ODMsMi43MTA2NDc2NSAyLjc3NTY0MjI2LDAuNjI1NTg5NjY4IDUuNCwwLjYyNTU4OTY2OCBDOC4wMjQzNTc3NCwwLjYyNTU4OTY2OCAxMC4xNTk0MzQxLDIuNzEwNjcwOTYgMTAuMTU5NDM0MSw1LjI3MzU3NjU4IEMxMC4xNTk0MzQxLDcuODM2NDU4ODkgOC4wMjQzNTc3NCw5LjkyMTU0MDE4IDUuNCw5LjkyMTU0MDE4IEw0Ljg0NDMyNzI0LDkuOTIxNTQwMTggTDUuNjM4ODc1MzEsOS4wNTI5NzAwMyBDNS43NTY3MzczMyw4LjkyNDE1OTEyIDUuNzQ1MzAyMDYsOC43MjY0MDgxNiA1LjYxMzQwMjYsOC42MTEzMDYgQzUuNDgxNTAzMTMsOC40OTYyMDM4NSA1LjI3ODk4NjcyLDguNTA3Mzk0NjYgNS4xNjExNDg1Nyw4LjYzNjIwNTU2IEw0LjAyNTM1Njg4LDkuODc3ODAyNzYgQzMuODM5NDMyMzUsMTAuMDgxMDU1OSAzLjgzOTQzMjM1LDEwLjM4NzU5MDggNC4wMjUzNTY4OCwxMC41OTA4NDQgTDUuMTYxMTQ4NTcsMTEuODMyNDQxMiBDNS4yMjQ0MzY0NCwxMS45MDE2Mzc3IDUuMzEyMDc0OTgsMTEuOTM2ODQyMSA1LjQwMDExOTM3LDExLjkzNjg0MjEgQzUuNDc2MDYwMDQsMTEuOTM2ODQyMSA1LjU1MjMxMTA2LDExLjkxMDU5MDMgNS42MTM0MDI2LDExLjg1NzM0MDcgQzUuNzQ1MzI1OTQsMTEuNzQyMjM4NiA1Ljc1NjczNzMzLDExLjU0NDQ4NzYgNS42Mzg4NzUzMSwxMS40MTU2NzY3IEw0Ljg0NDMyNzI0LDEwLjU0NzEwNjUgTDUuNCwxMC41NDcxMDY1IEM4LjM3NzU4NTcxLDEwLjU0NzEwNjUgMTAuOCw4LjE4MTM5MjM0IDEwLjgsNS4yNzM1NzY1OCBaIiBpZD0iUGF0aCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="&gt;&lt;/button&gt;                                 &lt;button class="minimize-btn" title="Minimize"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIycHgiIHZpZXdCb3g9IjAgMCAxNCAyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi4zICg2NzI5NykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+bWluaW1pemU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMjYuMDAwMDAwLCAtMjMzLjAwMDAwMCkiIGZpbGw9IiM4QTk1OUYiPgogICAgICAgICAgICA8ZyBpZD0ibWluaW1pemUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyNi4wMDAwMDAsIDIzMy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJQYXRoIiBwb2ludHM9IjAgMCAxMy45Mzk5OTk2IDAgMTMuOTM5OTk5NiAxLjk5OTk5OTk0IDAgMS45OTk5OTk5NCI+PC9wb2x5Z29uPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="&gt;&lt;/button&gt;                                 &lt;button class="expand-btn" title="Expand"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5leHBhbmQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDUuMDAwMDAwLCAtMjUyLjAwMDAwMCkiIGZpbGw9IiM4QTk1OUYiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgIDxnIGlkPSJleHBhbmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwNS4wMDAwMDAsIDI1Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjg2NjY2NjY3LDkuMzMzMzMzMzMgTDAsOS4zMzMzMzMzMyBMMCwxNCBMNC42NjY2NjY2NywxNCBMNC42NjY2NjY2NywxMi4xMzMzMzMzIEwxLjg2NjY2NjY3LDEyLjEzMzMzMzMgTDEuODY2NjY2NjcsOS4zMzMzMzMzMyBaIE0wLDQuNjY2NjY2NjcgTDEuODY2NjY2NjcsNC42NjY2NjY2NyBMMS44NjY2NjY2NywxLjg2NjY2NjY3IEw0LjY2NjY2NjY3LDEuODY2NjY2NjcgTDQuNjY2NjY2NjcsMCBMMCwwIEwwLDQuNjY2NjY2NjcgWiBNMTIuMTMzMzMzMywxMi4xMzMzMzMzIEw5LjMzMzMzMzMzLDEyLjEzMzMzMzMgTDkuMzMzMzMzMzMsMTQgTDE0LDE0IEwxNCw5LjMzMzMzMzMzIEwxMi4xMzMzMzMzLDkuMzMzMzMzMzMgTDEyLjEzMzMzMzMsMTIuMTMzMzMzMyBaIE05LjMzMzMzMzMzLDAgTDkuMzMzMzMzMzMsMS44NjY2NjY2NyBMMTIuMTMzMzMzMywxLjg2NjY2NjY3IEwxMi4xMzMzMzMzLDQuNjY2NjY2NjcgTDE0LDQuNjY2NjY2NjcgTDE0LDAgTDkuMzMzMzMzMzMsMCBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;                                &lt;button class="close-btn" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;                             &lt;/div&gt;                             &lt;div class="logo-icon"&gt;&lt;/div&gt;                            &lt;div class="sdkThemeContainer" title="Themes"&gt;                                &lt;i class="icon-More dropbtnWidgt sdkThemeIcon drpdown_theme"&gt;&lt;/i&gt;                                &lt;ul class="dropdown-contentWidgt rmpmW themeContent" style="list-style:none;"&gt;                                    &lt;li class="themeName" id="logo_theme"&gt;Logo theme&lt;span class="checkMarkIcon checkMarkIcon-1"&gt;&lt;/span&gt;&lt;/li&gt;                                    &lt;li class="action themeName" id="shopping_theme"&gt;Shopping theme&lt;span class="checkMarkIcon checkMarkIcon-2"&gt;&lt;/span&gt;&lt;/li&gt;                                &lt;/ul&gt;                            &lt;/div&gt;                        &lt;/div&gt;                         &lt;div class="kore-chat-header historyLoadingDiv"&gt;                             &lt;div class="historyWarningTextDiv displayTable"&gt;                                 &lt;span&gt;&lt;img class = "loadingHistory" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAYZJREFUOBGtVLFKA0EQfbMiiERQEgjpRQt/wULB/opIFCuJvb1iKdprbbASDaa4L9DCX7BQ7CVwQcEggph13t7t3RlivMKBsDsz701mZ9+eYNjaNyX0e9saDmCxZJv1mrQ6zxDcayxEqXyOxmo/TzN5B2fXDbxFT7D2VH9rgK3FeV3pM848cTnLirQ6e0q60lw1lx+11bziHD5Oi1tcZVfAkyIYOYRM3GF69gHvr4uwX8sY2AMFVDwIkA3srLcFnAFb9B2I3GJqchNbQTcDJ7uLsIqPz0s91koS6WKmMm+SIfojRL8WIIuF+QdAlBSpks+ZBEkA7gijOkgBumGeR80sMLzG1OcMilgep3wDseWUxyEWsTnzmMKUr51ILw3wForYy2AhhSlfO3FKjGO8xiKWxymfgw1THnXAaxxnzMd68ajQuLcAeE1UnA5+K+R1kgmuS/4/KdY3xbdgB0fe/XMVs49m/Zi4uBPPiN/Qibrj5qJHl12+GU/7WYTRoe+J0xFlMOZ78g1n4achujvX7QAAAABJRU5ErkJggg=="&gt;&lt;/span&gt;                                 &lt;p class="headerTip warningTip"&gt;Loading chat history..&lt;/p&gt;                             &lt;/div&gt;                         &lt;/div&gt;                         &lt;div class="kore-chat-header trainWarningDiv"&gt;                             &lt;div class="trainWarningTextDiv displayTable"&gt;                                 &lt;span class="exclamation-circle"&gt;&lt;i class="fa fa-exclamation-circle" aria-hidden="true"&gt;&lt;/i&gt;&lt;/span&gt;                                 &lt;p class="headerTip warningTip"&gt;Something went wrong.Please try again later.&lt;/p&gt;                             &lt;/div&gt;                         &lt;/div&gt;                         &lt;div role="log" aria-live="polite" aria-atomic="true" class="kore-chat-body"&gt;                             &lt;div class="errorMsgBlock"&gt;                             &lt;/div&gt;                             &lt;ul class="chat-container"&gt;&lt;/ul&gt;                         &lt;/div&gt;                         &lt;div class="typingIndicatorContent"&gt;&lt;div class="typingIndicator"&gt;&lt;/div&gt;&lt;div class="movingDots"&gt;&lt;/div&gt;&lt;/div&gt;                         &lt;div class="kore-chat-footer disableFooter"&gt;'+b+'{{if isSendButton}}&lt;div class="sendBtnCnt"&gt;&lt;button class="sendButton disabled" type="button"&gt;Send&lt;/button&gt;&lt;/div&gt;{{/if}}&lt;/div&gt;                          &lt;div id="myModal" class="modalImagePreview"&gt;                              &lt;span class="closeImagePreview"&gt;&amp;times;&lt;/span&gt;                              &lt;img class="modal-content-imagePreview" id="img01"&gt;                              &lt;div id="caption"&gt;&lt;/div&gt;                        &lt;/div&gt;                        &lt;div id="chatBodyModal" class="chatBodyModal animate-bottom"&gt;                        &lt;span class="closeChatBodyModal "&gt;&lt;/span&gt;                        &lt;div id="closeInlineModel" class="loading_form iframeLoader"&gt;&lt;/div&gt;                        &lt;div id="chatBodyModalContent"&gt;&lt;/div&gt;                        &lt;/div&gt;                        &lt;div id="myPreviewModal" class="modalImagePreview"&gt;                              &lt;span class="closeElePreview"&gt;&amp;times;&lt;/span&gt;                              &lt;div class="largePreviewContent"&gt;&lt;/div&gt;                        &lt;/div&gt;                        &lt;div class="kr-wiz-content-chat defaultTheme-kore"&gt;                        &lt;/div&gt;                    &lt;/div&gt;                 &lt;\/script&gt;';return console.log("tempType is ",a),"message"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         {{each(key, msgItem) msgData.message}}                             {{if msgItem.cInfo &amp;&amp; msgItem.type === "text"}}                                 &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                                     class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} {{if msgData.icon}}with-icon{{/if}}"&gt;                                     {{if msgData.createdOn}}&lt;div aria-hidden="true" aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                                     {{if msgData.icon}}&lt;div aria-hidden="true"  aria-live="off" class="profile-photo"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})" title="User Avatar"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                                     &lt;div class="messageBubble"&gt;                                        &lt;div&gt;                                             {{if msgData.type === "bot_response"}}                                                 {{if msgItem.component  &amp;&amp; msgItem.component.type =="error"}}                                                     &lt;span style="color:${msgItem.component.payload.color}"&gt;{{html helpers.convertMDtoHTML(msgItem.component.payload.text, "bot",msgItem)}} &lt;/span&gt;                                                 {{else}}                                                     &lt;span class="simpleMsg" {{if msgData}}msgData="${JSON.stringify(msgData)}" {{/if}}&gt;{{html helpers.convertMDtoHTML(msgItem.cInfo.body, "bot",msgItem)}}&lt;/span&gt;                                                     {{if msgItem.component &amp;&amp; msgItem.component.payload &amp;&amp; msgItem.component.payload.videoUrl}}                                                        &lt;div class="videoEle"&gt;&lt;video width="300" controls&gt;&lt;source src="${msgItem.component.payload.videoUrl}" type="video/mp4"&gt;&lt;/video&gt;&lt;/div&gt;                                                    {{/if}}                                                    {{if msgItem.component &amp;&amp; msgItem.component.payload &amp;&amp; msgItem.component.payload.audioUrl}}                                                        &lt;div class="audioEle"&gt;&lt;audio width="180" controls&gt;&lt;source src="${msgItem.component.payload.audioUrl}"&gt;&lt;/audio&gt;&lt;/div&gt;                                                    {{/if}}                                                {{/if}}                                             {{else}}                                                 {{if msgItem.cInfo.renderMsg &amp;&amp; msgItem.cInfo.renderMsg !== ""}}                                                    {{html helpers.convertMDtoHTML(msgItem.cInfo.renderMsg, "user",msgItem)}}                                                 {{else}}                                                    {{html helpers.convertMDtoHTML(msgItem.cInfo.body, "user",msgItem)}}                                                 {{/if}}                                            {{/if}}                                         &lt;/div&gt;                                        {{if msgItem.cInfo &amp;&amp; msgItem.cInfo.emoji}}                                             &lt;span class="emojione emojione-${msgItem.cInfo.emoji[0].code}"&gt;${msgItem.cInfo.emoji[0].title}&lt;/span&gt;                                         {{/if}}                                         {{if msgItem.cInfo.attachments}}                                             &lt;div class="msgCmpt attachments" fileid="${msgItem.cInfo.attachments[0].fileId}"&gt;                                                 &lt;div class="uploadedFileIcon"&gt;                                                     {{if msgItem.cInfo.attachments[0].fileType == "image"}}                                                         &lt;span class="icon cf-icon icon-photos_active"&gt;&lt;/span&gt;                                                     {{else msgItem.cInfo.attachments[0].fileType == "audio"}}                                                        &lt;span class="icon cf-icon icon-files_audio"&gt;&lt;/span&gt;                                                     {{else msgItem.cInfo.attachments[0].fileType == "video"}}                                                         &lt;span class="icon cf-icon icon-video_active"&gt;&lt;/span&gt;                                                     {{else}}                                                         {{if extension[1]=="xlsx" || extension[1]=="xls" || extension[1]=="docx" || extension[1]=="doc" || extension[1]=="pdf" || extension[1]=="ppsx" || extension[1]=="pptx" || extension[1]=="ppt" || extension[1]=="zip" || extension[1]=="rar"}}                                                            &lt;span class="icon cf-icon icon-files_${extension[1]}"&gt;&lt;/span&gt;                                                         {{else extension[1]}}                                                            &lt;span class="icon cf-icon icon-files_other_doc"&gt;&lt;/span&gt;                                                         {{/if}}                                                    {{/if}}                                                &lt;/div&gt;                                                 &lt;div class="curUseruploadedFileName"&gt;${msgItem.cInfo.attachments[0].fileName}&lt;/div&gt;                                             &lt;/div&gt;                                         {{/if}}                                         {{if msgData.isError}}                                             &lt;div class="errorMsg"&gt;Send Failed. Please resend.&lt;/div&gt;                                         {{/if}}                                     &lt;/div&gt;                                 &lt;/li&gt;                             {{/if}}                         {{/each}}                     {{/if}}                 &lt;/scipt&gt;':"popup"===a?'&lt;script id="kore_popup_tmpl" type="text/x-jquery-tmpl"&gt;                     &lt;div class="kore-auth-layover"&gt;                        &lt;div class="kore-auth-popup"&gt;                             &lt;div class="popup_controls"&gt;&lt;span class="close-popup" title="Close"&gt;&amp;times;&lt;/span&gt;&lt;/div&gt;                             &lt;iframe id="authIframe" src="${link_url}"&gt;&lt;/iframe&gt;                         &lt;/div&gt;                     &lt;/div&gt;                &lt;\/script&gt;':"templatebutton"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon"&gt;                             &lt;div class="buttonTmplContent"&gt;                                 {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                                 {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                                 &lt;ul class="buttonTmplContentBox"&gt;                                    &lt;li class="buttonTmplContentHeading"&gt;                                         {{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "user")}} {{/if}}                                         {{if msgData.message[0].cInfo &amp;&amp; msgData.message[0].cInfo.emoji}}                                             &lt;span class="emojione emojione-${msgData.message[0].cInfo.emoji[0].code}"&gt;${msgData.message[0].cInfo.emoji[0].title}&lt;/span&gt;                                         {{/if}}                                     &lt;/li&gt;                                    {{each(key, msgItem) msgData.message[0].component.payload.buttons}}                                         &lt;a href=""#&gt;                                            &lt;li {{if msgData}}msgData="${JSON.stringify(msgData)}"{{/if}} {{if msgItem.payload}}value="${msgItem.payload}"{{/if}} {{if msgItem.payload}}actual-value="${msgItem.payload}"{{/if}} {{if msgItem.url}}url="${msgItem.url}"{{/if}} class="buttonTmplContentChild" data-value="${msgItem.value}" type="${msgItem.type}"&gt;                                                ${msgItem.title}                                            &lt;/li&gt;                                         &lt;/a&gt;                                     {{/each}}                                 &lt;/ul&gt;                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"templatelist"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon"&gt;                             &lt;div class="listTmplContent"&gt;                                 {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                                 {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                                 &lt;ul class="listTmplContentBox"&gt;                                     {{if msgData.message[0].component.payload.text || msgData.message[0].component.payload.heading}}                                         &lt;li class="listTmplContentHeading"&gt;                                             {{if msgData.type === "bot_response" &amp;&amp; msgData.message[0].component.payload.heading}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.heading, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "user")}} {{/if}}                                             {{if msgData.message[0].cInfo &amp;&amp; msgData.message[0].cInfo.emoji}}                                                 &lt;span class="emojione emojione-${msgData.message[0].cInfo.emoji[0].code}"&gt;${msgData.message[0].cInfo.emoji[0].title}&lt;/span&gt;                                             {{/if}}                                         &lt;/li&gt;                                     {{/if}}                                     {{each(key, msgItem) msgData.message[0].component.payload.elements}}                                         {{if msgData.message[0].component.payload.buttons}}                                             {{if key&lt;= 2 }}                                                &lt;li class="listTmplContentChild"&gt;                                                     {{if msgItem.image_url}}                                                         &lt;div class="listRightContent" {{if msgItem.default_action &amp;&amp; msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}&gt;                                                             &lt;img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';"/&gt;                                                         &lt;/div&gt;                                                     {{/if}}                                                     &lt;div class="listLeftContent"&gt;                                                         &lt;div class="listItemTitle"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}&lt;/div&gt;                                                         {{if msgItem.subtitle}}&lt;div class="listItemSubtitle"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}&lt;/div&gt;{{/if}}                                                         {{if msgItem.default_action &amp;&amp; msgItem.default_action.url}}&lt;div class="listItemPath" type="url" url="${msgItem.default_action.url}"&gt;${msgItem.default_action.url}&lt;/div&gt;{{/if}}                                                         {{if msgItem.buttons}}                                                        &lt;div&gt;                                                             &lt;span class="buyBtn" {{if msgItem.buttons[0].type}}type="${msgItem.buttons[0].type}"{{/if}} {{if msgItem.buttons[0].url}}url="${msgItem.buttons[0].url}"{{/if}} {{if msgItem.buttons[0].payload}}value="${msgItem.buttons[0].payload}"{{/if}}&gt;{{if msgItem.buttons[0].title}}${msgItem.buttons[0].title}{{else}}Buy{{/if}}&lt;/span&gt;                                                         &lt;/div&gt;                                                         {{/if}}                                                    &lt;/div&gt;                                                &lt;/li&gt;                                             {{/if}}                                        {{else}}                                             &lt;li class="listTmplContentChild"&gt;                                                 {{if msgItem.image_url}}                                                     &lt;div class="listRightContent" {{if msgItem.default_action &amp;&amp; msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}&gt;                                                         &lt;img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';" /&gt;                                                     &lt;/div&gt;                                                 {{/if}}                                                 &lt;div class="listLeftContent"&gt;                                                     &lt;div class="listItemTitle"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}&lt;/div&gt;                                                     {{if msgItem.subtitle}}&lt;div class="listItemSubtitle"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}&lt;/div&gt;{{/if}}                                                     {{if msgItem.default_action &amp;&amp; msgItem.default_action.url}}&lt;div class="listItemPath" type="url" url="${msgItem.default_action.url}"&gt;${msgItem.default_action.url}&lt;/div&gt;{{/if}}                                                     {{if msgItem.buttons}}                                                    &lt;div&gt;                                                         &lt;span class="buyBtn" {{if msgItem.buttons[0].type}}type="${msgItem.buttons[0].type}"{{/if}} {{if msgItem.buttons[0].url}}url="${msgItem.buttons[0].url}"{{/if}} {{if msgItem.buttons[0].payload}}value="${msgItem.buttons[0].payload}"{{/if}}&gt;{{if msgItem.buttons[0].title}}${msgItem.buttons[0].title}{{else}}Buy{{/if}}&lt;/span&gt;                                                     &lt;/div&gt;                                                     {{/if}}                                                &lt;/div&gt;                                            &lt;/li&gt;                                         {{/if}}                                     {{/each}}                                     &lt;/li&gt;                                     {{if msgData.message[0].component.AlwaysShowGlobalButtons || (msgData.message[0].component.payload.elements.length &gt; 3 &amp;&amp; msgData.message[0].component.payload.buttons)}}                                    &lt;li class="viewMoreList"&gt;                                         &lt;span class="viewMore" url="{{if msgData.message[0].component.payload.buttons[0].url}}${msgData.message[0].component.payload.buttons[0].url}{{/if}}" type="${msgData.message[0].component.payload.buttons[0].type}" value="{{if msgData.message[0].component.payload.buttons[0].payload}}${msgData.message[0].component.payload.buttons[0].payload}{{else}}${msgData.message[0].component.payload.buttons[0].title}{{/if}}"&gt;${msgData.message[0].component.payload.buttons[0].title}&lt;/span&gt;                                     &lt;/li&gt;                                     {{/if}}                                &lt;/ul&gt;                             &lt;/div&gt;                         &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"templatequickreply"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li {{if msgData.type !== "bot_response"}}id="msg_${msgItem.clientMessageId}"{{/if}} class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon quickReplies"&gt;                             &lt;div class="buttonTmplContent"&gt;                                 {{if msgData.createdOn}}&lt;div class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                                 {{if msgData.icon}}&lt;div class="profile-photo"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                                 {{if msgData.message[0].component.payload.text}}                                     &lt;div class="buttonTmplContentHeading quickReply"&gt;                                         {{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "user")}} {{/if}}                                         {{if msgData.message[0].cInfo &amp;&amp; msgData.message[0].cInfo.emoji}}                                             &lt;span class="emojione emojione-${msgData.message[0].cInfo.emoji[0].code}"&gt;${msgData.message[0].cInfo.emoji[0].title}&lt;/span&gt;                                         {{/if}}                                     &lt;/div&gt;                                {{/if}}                                 &lt;div class="fa fa-chevron-left quickreplyLeftIcon hide"&gt;&lt;/div&gt;&lt;div class="fa fa-chevron-right quickreplyRightIcon hide"&gt;&lt;/div&gt;                                    &lt;div class="quick_replies_btn_parent"&gt;&lt;div class="autoWidth"&gt;                                        {{if msgData.message[0].component.payload.quick_replies &amp;&amp; msgData.message[0].component.payload.quick_replies.length}}                                             {{each(key, msgItem) msgData.message[0].component.payload.quick_replies}}                                         &lt;div class="buttonTmplContentChild quickReplyDiv displayInline"&gt; &lt;span  actual-value="${msgItem.title}" {{if msgItem.payload}}value="${msgItem.payload}"{{/if}} class="quickReply {{if msgItem.image_url}}with-img{{/if}}" type="${msgItem.content_type}"&gt;                                            {{if msgItem.image_url}}&lt;img src="${msgItem.image_url}"&gt;{{/if}} &lt;span class="quickreplyText {{if msgItem.image_url}}with-img{{/if}}"&gt;${msgItem.title}&lt;/span&gt;&lt;/span&gt;                                        &lt;/div&gt;                                     {{/each}}                                         {{/if}}                                         {{if msgData.message[0].component.payload.buttons &amp;&amp; msgData.message[0].component.payload.buttons.length}}                                         message data:${JSON.stringify(msgData)}                                        {{each(key, msgItem) msgData.message[0].component.payload.buttons}}                                         button ${JSON.stringify(msgItem)}                                                &lt;div class="buttonTmplContentChild quickReplyDiv displayInline"&gt; &lt;span actual-value="${msgItem.title}" {{if msgData}}msgData="${JSON.stringify(msgData)}"{{/if}} {{if msgItem.payload}}value="${msgItem.payload}"{{/if}} class="buttonQuickReply {{if msgItem.image_url}}with-img{{/if}}" type="${msgItem.type}" {{if msgItem.url}}url="${msgItem.url}"{{/if}}&gt;                                                    {{if msgItem.image_url}}&lt;img src="${msgItem.image_url}"&gt;{{/if}} &lt;span class="quickreplyText {{if msgItem.image_url}}with-img{{/if}}"&gt;${msgItem.title}&lt;/span&gt;&lt;/span&gt;                                                &lt;/div&gt;                                             {{/each}}                                         {{/if}}                                     &lt;/div&gt;                                &lt;/div&gt;                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"templateAttachment"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         {{each(key, msgItem) msgData.message}}                             {{if msgItem.component &amp;&amp; msgItem.component.payload.url}}                                 &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                                    class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} {{if msgData.icon}}with-icon{{/if}}"&gt;                                     {{if msgData.createdOn}}&lt;div class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                                     {{if msgData.icon}}&lt;div class="profile-photo"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                                     &lt;div class="messageBubble"&gt;                                        {{if msgItem.component.payload.url}}                                             &lt;div class="msgCmpt botResponseAttachments" fileid="${msgItem.component.payload.url}"&gt;                                                 &lt;div class="uploadedFileIcon"&gt;                                                     {{if msgItem.component.type == "image"}}                                                         &lt;span class="icon cf-icon icon-photos_active"&gt;&lt;/span&gt;                                                     {{else msgItem.component.type == "audio"}}                                                        &lt;span class="icon cf-icon icon-files_audio"&gt;&lt;/span&gt;                                                     {{else msgItem.component.type == "video"}}                                                         &lt;span class="icon cf-icon icon-video_active"&gt;&lt;/span&gt;                                                     {{else}}                                                         {{if extension[1]=="xlsx" || extension[1]=="xls" || extension[1]=="docx" || extension[1]=="doc" || extension[1]=="pdf" || extension[1]=="ppsx" || extension[1]=="pptx" || extension[1]=="ppt" || extension[1]=="zip" || extension[1]=="rar"}}                                                            &lt;span class="icon cf-icon icon-files_${extension[1]}"&gt;&lt;/span&gt;                                                         {{else extension[1]}}                                                            &lt;span class="icon cf-icon icon-files_other_doc"&gt;&lt;/span&gt;                                                         {{/if}}                                                    {{/if}}                                                &lt;/div&gt;                                                 &lt;div class="botuploadedFileName"&gt;${extractedFileName}&lt;/div&gt;                                             &lt;/div&gt;                                         {{/if}}                                     &lt;/div&gt;                                 &lt;/li&gt;                             {{/if}}                         {{/each}}                     {{/if}}                 &lt;/scipt&gt;':"carouselTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon"&gt;                             {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble tableChart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            &lt;div class="carousel" id="carousel-one-by-one" style="height: 0px;"&gt;                                {{each(key, msgItem) msgData.message[0].component.payload.elements}}                                     &lt;div class="slide"&gt;                                        {{if msgItem.image_url}}                                             &lt;div class="carouselImageContent" {{if msgItem.default_action &amp;&amp; msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}&gt;                                                 &lt;img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';"/&gt;                                             &lt;/div&gt;                                         {{/if}}                                         &lt;div class="carouselTitleBox"&gt;                                             &lt;p class="carouselTitle"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}&lt;/p&gt;                                             {{if msgItem.subtitle}}&lt;p class="carouselDescription"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}&lt;/p&gt;{{/if}}                                             {{if msgItem.default_action &amp;&amp; msgItem.default_action.type === "web_url"}}&lt;div class="listItemPath carouselDefaultAction" type="url" url="${msgItem.default_action.url}"&gt;${msgItem.default_action.url}&lt;/div&gt;{{/if}}                                             {{if msgItem.buttons}}                                                 {{each(key, msgBtn) msgItem.buttons}}                                                 &lt;div {{if msgBtn.payload}} value="${msgBtn.payload}"{{/if}} {{if msgBtn.url}} url="${msgBtn.url}"{{/if}} class="listItemPath carouselButton" actual-value="${msgBtn.payload}" type="${msgBtn.type}"&gt;                                                        ${msgBtn.title}                                                    &lt;/div&gt;                                                 {{/each}}                                             {{/if}}                                         &lt;/div&gt;                                    &lt;/div&gt;                                {{/each}}                             &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                &lt;/scipt&gt;':"pieChartTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon piechart"&gt;                             {{if msgData.createdOn}}&lt;div class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble pieChart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            &lt;div id="d3Pie"&gt;                            &lt;/div&gt;                            &lt;div class="piechartDiv"&gt;                                &lt;div class="lineChartChildDiv" id="piechart${msgData.messageId}"&gt;&lt;/div&gt;                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"tableChartTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon tablechart"&gt;                             {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble tableChart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            &lt;div class="tablechartDiv {{if msgData.message[0].component.payload.table_design &amp;&amp; msgData.message[0].component.payload.table_design == "regular"}}regular{{else}}hide{{/if}}"&gt;                                &lt;div style="overflow-x:auto; padding: 0 8px;"&gt;                                    &lt;table cellspacing="0" cellpadding="0"&gt;                                        &lt;tr class="headerTitle"&gt;                                            {{each(key, tableHeader) msgData.message[0].component.payload.columns}}                                                 &lt;th {{if tableHeader[1]}}style="text-align:${tableHeader[1]};"{{/if}}&gt;{{html helpers.convertMDtoHTML(tableHeader[0], "bot")}}&lt;/th&gt;                                            {{/each}}                                         &lt;/tr&gt;                                        {{each(key, tableRow) msgData.message[0].component.payload.elements}}                                             {{if tableRow.Values.length&gt;1}}                                                &lt;tr {{if key &gt; 4}}class="hide"{{/if}}&gt;                                                    {{each(cellkey, cellValue) tableRow.Values}}                                                         &lt;td  {{if cellkey === tableRow.Values.length-1}}colspan="2"{{/if}} class=" {{if key == 0}} addTopBorder {{/if}}" {{if msgData.message[0].component.payload.columns[cellkey][1]}}style="text-align:${msgData.message[0].component.payload.columns[cellkey][1]};" {{/if}} title="{{html helpers.getInnerText(cellValue, "bot")}}"&gt;{{html helpers.convertMDtoHTML(cellValue, "bot")}}&lt;/td&gt;                                                    {{/each}}                                                 &lt;/tr&gt;                                            {{/if}}                                        {{/each}}                                     &lt;/table&gt;                                &lt;/div&gt;                                {{if msgData.message[0].component.payload.elements.length &gt; 5 &amp;&amp; msgData.message[0].component.payload.table_design &amp;&amp; msgData.message[0].component.payload.table_design == "regular"}}&lt;div class="showMore"&gt;Show more&lt;/div&gt;{{/if}}                            &lt;/div&gt;                             &lt;div class="accordionTable {{if msgData.message[0].component.payload.table_design &amp;&amp; msgData.message[0].component.payload.table_design == "regular"}}hide{{else}}responsive{{/if}}"&gt;                                {{each(key, tableRow) msgData.message[0].component.payload.elements}}                                     {{if key &lt; 4}}                                        &lt;div class="accordionRow"&gt;                                            {{each(cellkey, cellValue) tableRow.Values}}                                                 {{if cellkey &lt; 2}}                                                    &lt;div class="accordionCol"&gt;                                                        &lt;div class="colTitle hideSdkEle"&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.columns[cellkey][0], "bot")}}&lt;/div&gt;                                                        &lt;div class="colVal"&gt;{{html helpers.convertMDtoHTML(cellValue, "bot")}}&lt;/div&gt;                                                    &lt;/div&gt;                                                {{else}}                                                    &lt;div class="accordionCol hideSdkEle"&gt;                                                        &lt;div class="colTitle"&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.columns[cellkey][0], "bot")}}&lt;/div&gt;                                                        &lt;div class="colVal"&gt;{{html helpers.convertMDtoHTML(cellValue, "bot")}}&lt;/div&gt;                                                    &lt;/div&gt;                                                {{/if}}                                            {{/each}}                                             &lt;span class="fa fa-caret-right tableBtn"&gt;&lt;/span&gt;                                        &lt;/div&gt;                                    {{/if}}                                {{/each}}                                 &lt;div class="showMore"&gt;Show more&lt;/div&gt;                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"miniTableChartTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon tablechart"&gt;                             {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble tableChart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            {{each(key, table) msgData.message[0].component.payload.elements}}                                &lt;div class="minitableDiv"&gt;                                    &lt;div style="overflow-x:auto; padding: 0 8px;"&gt;                                        &lt;table cellspacing="0" cellpadding="0"&gt;                                            &lt;tr class="headerTitle"&gt;                                                {{each(key, tableHeader) table.primary}}                                                     &lt;th {{if tableHeader[1]}}style="text-align:${tableHeader[1]};" {{/if}}&gt;${tableHeader[0]}&lt;/th&gt;                                                {{/each}}                                             &lt;/tr&gt;                                            {{each(key, additional) table.additional}}                                                 &lt;tr&gt;                                                    {{each(cellkey, cellValue) additional}}                                                         &lt;td  {{if cellkey === additional.length-1}}colspan="2"{{/if}}  {{if table.primary[cellkey][1]}}style="text-align:${table.primary[cellkey][1]};" {{/if}} title="${cellValue}"&gt;${cellValue}&lt;/td&gt;                                                    {{/each}}                                                 &lt;/tr&gt;                                            {{/each}}                                         &lt;/table&gt;                                    &lt;/div&gt;                                &lt;/div&gt;                            {{/each}}                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"miniTableHorizontalTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon tablechart"&gt;                             {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble tableChart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            &lt;div class="carousel" id="carousel-one-by-one" style="height: 0px;"&gt;                                {{each(key, table) msgData.message[0].component.payload.elements}}                                    &lt;div class="slide"&gt;                                        &lt;div class="minitableDiv"&gt;                                            &lt;div style="overflow-x:auto; padding: 0 8px;"&gt;                                                &lt;table cellspacing="0" cellpadding="0"&gt;                                                    &lt;tr class="headerTitle"&gt;                                                        {{each(key, tableHeader) table.primary}}                                                             &lt;th {{if tableHeader[1]}}style="text-align:${tableHeader[1]};" {{/if}}&gt;${tableHeader[0]}&lt;/th&gt;                                                        {{/each}}                                                     &lt;/tr&gt;                                                    {{each(key, additional) table.additional}}                                                         &lt;tr&gt;                                                            {{each(cellkey, cellValue) additional}}                                                                 &lt;td  {{if cellkey === additional.length-1}}colspan="2"{{/if}}  {{if table.primary[cellkey][1]}}style="text-align:${table.primary[cellkey][1]};" {{/if}} title="${cellValue}"&gt;${cellValue}&lt;/td&gt;                                                            {{/each}}                                                         &lt;/tr&gt;                                                    {{/each}}                                                 &lt;/table&gt;                                            &lt;/div&gt;                                        &lt;/div&gt;                                    &lt;/div&gt;                                {{/each}}                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"barchartTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon barchart"&gt;                             {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble barchart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            &lt;div class="barchartDiv"&gt;                                &lt;div class="lineChartChildDiv" id="barchart${msgData.messageId}"&gt;&lt;/div&gt;                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"linechartTemplate"===a?'&lt;script id="chat_message_tmpl" type="text/x-jqury-tmpl"&gt;                     {{if msgData.message}}                         &lt;li data-time="${msgData.createdOnTimemillis}" id="${msgData.messageId || msgItem.clientMessageId}"                            class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon linechart"&gt;                             {{if msgData.createdOn}}&lt;div aria-live="off" class="extra-info"&gt;${helpers.formatDate(msgData.createdOn)}&lt;/div&gt;{{/if}}                             {{if msgData.icon}}&lt;div aria-live="off" class="profile-photo extraBottom"&gt; &lt;div class="user-account avtar" style="background-image:url(${msgData.icon})"&gt;&lt;/div&gt; &lt;/div&gt; {{/if}}                             {{if msgData.message[0].component.payload.text}}&lt;div class="messageBubble linechart"&gt;                                &lt;span&gt;{{html helpers.convertMDtoHTML(msgData.message[0].component.payload.text, "bot")}}&lt;/span&gt;                            &lt;/div&gt;{{/if}}                            &lt;div class="linechartDiv"&gt;                                &lt;div class="lineChartChildDiv" id="linechart${msgData.messageId}"&gt;&lt;/div&gt;                            &lt;/div&gt;                        &lt;/li&gt;                     {{/if}}                 &lt;/scipt&gt;':"actionSheetTemplate"===a?'&lt;script id="chat-window-listTemplate" type="text/x-jqury-tmpl"&gt;                    &lt;div class="list-template-sheet hide"&gt;                        {{if msgData.message}}                             &lt;div class="sheetHeader"&gt;                                &lt;span class="choose"&gt;${msgData.message[0].component.payload.heading}&lt;/span&gt;                                &lt;button class="close-button" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,           PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;                            &lt;/div&gt;                            &lt;div class="listTemplateContainer" &gt;                                &lt;div class="displayMonth"&gt;                                    {{each(key, tab) tabs}}                                         &lt;span class="tabs" data-tabid="${tab}"&gt;&lt;span class="btnBG"&gt;${tab}&lt;/span&gt;&lt;/span&gt;                                    {{/each}}                                &lt;/div&gt;                                &lt;ul class="displayListValues"&gt;                                    {{each(key, msgItem) dataItems}}                                         &lt;li class="listViewTmplContentChild"&gt;                                                 {{if msgItem.image_url}}                                                     &lt;div class="listViewRightContent" {{if msgItem.default_action &amp;&amp; msgItem.default_action.url}}url="${msgItem.default_action.url}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.title}}data-value="${msgItem.default_action.title}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.type}}type="${msgItem.default_action.type}"{{/if}} {{if msgItem.default_action &amp;&amp; msgItem.default_action.payload}} value="${msgItem.default_action.payload}"{{/if}}&gt;                                                         &lt;img alt="image" src="${msgItem.image_url}" onerror="this.onerror=null;this.src=\'../libs/img/no_image.png\';"/&gt;                                                     &lt;/div&gt;                                                 {{/if}}                                                     &lt;div {{if msgItem.image_url}}class="listViewLeftContent pl-60"{{else}}class="listViewLeftContent"{{/if}} data-url="${msgItem.default_action.url}" data-title="${msgItem.default_action.title}" data-value="${msgItem.default_action.title}"&gt;                                                     &lt;span class="titleDesc"&gt;                                                        &lt;div class="listViewItemTitle" title="${msgItem.title}"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.title, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.title, "user")}} {{/if}}&lt;/div&gt;                                                             {{if msgItem.subtitle}}&lt;div class="listViewItemSubtitle" title="${msgItem.subtitle}"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.subtitle, "user")}} {{/if}}&lt;/div&gt;{{/if}}                                                         &lt;/span&gt;                                                            {{if msgItem.value}}&lt;div class="listViewItemValue" title="${msgItem.value}"&gt;{{if msgData.type === "bot_response"}} {{html helpers.convertMDtoHTML(msgItem.value, "bot")}} {{else}} {{html helpers.convertMDtoHTML(msgItem.value, "user")}} {{/if}}&lt;/div&gt;{{/if}}                                                     &lt;/div&gt;                                            &lt;/li&gt;                                     {{/each}}                                 &lt;/ul&gt;                             &lt;/div&gt;                        {{/if}}                    &lt;/div&gt;                &lt;\/script&gt;':"iframe"===a?'&lt;script id="chat_message_tmpl" type="text/x-jquery-tmpl"&gt;                     {{if link_url}}                        {{if (msgData &amp;&amp; msgData.renderType ==="inline")}}                            &lt;li class="inlineIframeContainer"&gt;                                 &lt;div class="iframeBubble"&gt;                                         &lt;div class="uiformComponent"&gt;                                        &lt;div id="closeInlineModel" class="loading_form iframeLoader"&gt;&lt;/div&gt;                                        &lt;iframe id="inlineIframeModal" src="${link_url}"&gt;&lt;/iframe&gt;                                         &lt;/div&gt;                                &lt;/div&gt;                            &lt;/li&gt;                         {{else}}                            &lt;iframe id="iframeModal" src="${link_url}"&gt;&lt;/iframe&gt;                         {{/if}}                    {{else}}                        &lt;div class="failedIframe"&gt;Failed to load iFrame&lt;/div&gt;                    {{/if}}                &lt;\/script&gt;':"NotificationTmpl"===a?'&lt;script id="notification_tmpl" type="tet/x-jqury-tmpl"&gt;                    {{if msgData.message}}                        &lt;li {{if msgData.type !== "bot_response"}}id="msg_${msgItem.clientMessageId}"{{/if}} class="{{if msgData.type === "bot_response"}}fromOtherUsers{{else}}fromCurrentUser{{/if}} with-icon notification"&gt;                             &lt;div class="notificationTemplate"&gt;                                &lt;div class="setLeftHeight"&gt;&lt;/div&gt;                                &lt;div class="setRightHeight"&gt;&lt;/div&gt;                                &lt;div title="${msgData.message[0].component.payload.text}" class="notificationHeader"&gt;${msgData.message[0].component.payload.text}                                &lt;/div&gt;                                &lt;div class="notificationDescp"&gt;                                    &lt;div class="notificationImg"&gt;                                    {{if msgData.message[0].component.payload.image_url}} &lt;div class="notificationImg"&gt;                                    &lt;img alt="image" src="${msgData.message[0].component.payload.image_url}"&gt;                                    &lt;/div&gt;{{/if}}                           &lt;/div&gt;                                    &lt;div class="titleDescp"&gt;                                        &lt;div class="notificationTitle"&gt;${msgData.message[0].component.payload.title}                                        &lt;/div&gt;                                        &lt;div class="notificationSubtitle"&gt;${msgData.message[0].component.payload.subtitle}                                        &lt;/div&gt;                                    &lt;/div&gt;                                    &lt;div class="btn-notification"&gt;                                    {{each(key, msgItem) msgData.message[0].component.payload.buttons}}                                    &lt;div class="link" data-value="${msgItem.postback.value}"&gt;${msgItem.name}&lt;/div&gt;                                    {{/each}}                                    &lt;/div&gt;                                &lt;/div&gt;                            &lt;/div&gt;                        &lt;/li&gt;                    {{/if}}                &lt;\/script&gt;':c},window.onbeforeunload=function(){rb&amp;&amp;a(rb.config.chatContainer).length&gt;0&amp;&amp;rb.destroy()},this.addListener=function(a,b){Ea||(Ea={}),a&amp;&amp;a.trim().length&gt;0&amp;&amp;(Ea[a]||(Ea[a]=[]),"function"==typeof b&amp;&amp;Ea[a].push(b))},this.removeListener=function(a){Ea&amp;&amp;Ea[a]&amp;&amp;delete Ea[a]},this.callListener=function(a,b){if(Ea&amp;&amp;Ea[a])for(var c=0;c&lt;Ea[a].length;c++)"function"==typeof Ea[a][c]&amp;&amp;Ea[a][c].call(this,b)},this.show=function(a){return console.log("Show function executed."),console.log("Show function configurations.",a),a.chatHistory=this.chatHistory,a.handleError=this.showError,a.widgetSDKInstace&amp;&amp;this.addWidgetEvents(a),rb=new f(a),tb=new customTemplate(a,rb),this},this.addWidgetEvents=function(b){if(b){b.widgetSDKInstace.events.onPostback=function(b){a(".chatInputBox").text(b.payload),rb.sendMessage(a(".chatInputBox"),b.utterance,b)}}},this.setWidgetInstance=function(a){a&amp;&amp;(rb.config.widgetSDKInstace=a,this.addWidgetEvents(rb.config))},this.destroy=function(){rb&amp;&amp;rb.destroy&amp;&amp;(Ea={},rb.destroy()),bb&amp;&amp;(bb.close(),bb=null),window.removeEventListener("online",l),window.removeEventListener("offline",l)},this.initToken=function(a){Ia="bearer "+a.accessToken},this.hideError=function(){a(".errorMsgBlock").removeClass("showError")},this.showError=function(b){try{b=JSON.parse(b),b.errors&amp;&amp;b.errors[0]&amp;&amp;(a(".errorMsgBlock").text(b.errors[0].msg),a(".errorMsgBlock").addClass("showError"))}catch(c){a(".errorMsgBlock").text(b),a(".errorMsgBlock").addClass("showError")}},this.botDetails=function(b,c){if(b){""!==b.botName?(chatContainerConfig.config.chatTitle=b.botName,a(".kore-chat-header .header-title").html(chatContainerConfig.config.chatTitle).attr("title",chatContainerConfig.config.chatTitle)):(chatContainerConfig.config.chatTitle=chatContainerConfig.config.botOptions.botInfo.chatBot,a(".kore-chat-header .header-title").html(chatContainerConfig.config.chatTitle).attr("title",chatContainerConfig.config.chatTitle));var d={botchatBgColor:"bot-chat-bubble-background-color",botchatTextColor:"bot-chat-bubble-text-color",buttonActiveBgColor:"button-active-background-color",buttonActiveTextColor:"button-active-text-color",buttonInactiveBgColor:"button-inactive-background-color",buttonInactiveTextColor:"button-inactive-text-color",userchatBgColor:"user-chat-bubble-background-color",userchatTextColor:"user-chat-bubble-text-color",widgetBodyColor:"widget-body-color",widgetFooterColor:"widget-footer-color",widgetHeaderColor:"widget-header-color",widgetTextColor:"widget-text-color",widgetBorderColor:"widget-border-color",widgetDividerColor:"widget-divider-color"},e="";for(var f in b)"bankLogo"==f&amp;&amp;""!==b[f]||("theme"!==f&amp;&amp;"widgetBgImage"!==f&amp;&amp;"assistantLogo"!==f?(e="--custom-"+d[f],document.documentElement.style.setProperty(e,b[f])):"widgetBgImage"==f&amp;&amp;""!==b[f]?(a(".kore-chat-body").css("background-image","url("+b.widgetBgImage+")"),a(".kore-chat-body").css("background-repeat","no-repeat"),a(".kore-chat-body").css("background-position","center")):"widgetBgImage"==f&amp;&amp;""==b[f]?(a(".kore-chat-body").css("background-image","url("+b.widgetBgImage+")"),a(".kore-chat-body").css("background-repeat","no-repeat"),a(".kore-chat-body").css("background-position","center")):"assistantLogo"==f&amp;&amp;""!==b[f]&amp;&amp;setTimeout(function(){a(".kore-chat-window .kore-chat-header .header-profile-avtar").css("background-image","url("+b.assistantLogo+")"),a(".kore-chat-window .kore-chat-header .header-profile-avtar").css("background-repeat","no-repeat"),a(".kore-chat-window .kore-chat-header .header-profile-avtar").css("background-position","center")},1e3));a(".kore-chat-window").addClass("customBranding-theme")}},this.chatHistory=function(b){var c=window.chatContainerConfig;"historysync"===b[2]?b&amp;&amp;b[1]&amp;&amp;b[1].messages.length&gt;0&amp;&amp;b[1].messages.forEach(function(a,d){setTimeout(function(){if("outgoing"===a.type||"bot_response"===a.type){a.fromHistorySync=!0;try{a.message[0].cInfo.body=JSON.parse(a.message[0].cInfo.body),a.message[0].cInfo.body&amp;&amp;a.message[0].cInfo.body.text&amp;&amp;(a.message[0].cInfo.body=a.message[0].cInfo.body.text),a.message[0].component=a.message[0].cInfo.body,"dropdown_template"===a.message[0].component.payload.template_type&amp;&amp;(a.message[0].component.selectedValue=b[1].messages[d+1].message[0].cInfo.body),"feedbackTemplate"===a.message[0].component.payload.template_type&amp;&amp;(a.message[0].cInfo.body="Rate this chat session"),a.message[0].component&amp;&amp;a.message[0].component.payload&amp;&amp;(a.message[0].component.payload.videoUrl||a.message[0].component.payload.audioUrl)&amp;&amp;(a.message[0].cInfo.body=""),c.renderMessage(a)}catch(b){c.renderMessage(a)}}},100*d)}):Ta&amp;&amp;(Ka=!0,b&amp;&amp;b[1]&amp;&amp;b[1].messages.length&gt;0?(a(".chat-container").hide(),a(".historyLoadingDiv").addClass("showMsg"),b[1].messages.forEach(function(d,e){setTimeout(function(f){if(!f.filter(function(a){return a.messageId===d.messageId}).length)try{d.message[0].cInfo.body=JSON.parse(d.message[0].cInfo.body),d.message[0].cInfo.body&amp;&amp;d.message[0].cInfo.body.text&amp;&amp;(d.message[0].cInfo.body=d.message[0].cInfo.body.text),d.message[0].component=d.message[0].cInfo.body,"dropdown_template"===d.message[0].component.payload.template_type&amp;&amp;(d.message[0].component.payload.fromHistory=!0,d.message[0].component.selectedValue=b[1].messages[e+1].message[0].cInfo.body),"multi_select"!==d.message[0].component.payload.template_type&amp;&amp;"advanced_multi_select"!==d.message[0].component.payload.template_type||(d.message[0].component.payload.fromHistory=!0),"form_template"===d.message[0].component.payload.template_type&amp;&amp;(d.message[0].component.payload.fromHistory=!0),"tableList"===d.message[0].component.payload.template_type&amp;&amp;(d.message[0].component.payload.fromHistory=!0),"listView"===d.message[0].component.payload.template_type&amp;&amp;(d.message[0].component.payload.fromHistory=!0),"feedbackTemplate"===d.message[0].component.payload.template_type&amp;&amp;(d.message[0].component.payload.fromHistory=!0,d.message[0].cInfo.body="Rate this chat session"),d.message[0].component&amp;&amp;d.message[0].component.payload&amp;&amp;(d.message[0].component.payload.videoUrl||d.message[0].component.payload.audioUrl)&amp;&amp;(d.message[0].cInfo.body=""),c.renderMessage(d)}catch(a){c.renderMessage(d)}e===b[1].messages.length-1&amp;&amp;setTimeout(function(b){a(".chat-container").show(),a(".chat-container").animate({scrollTop:a(".chat-container").prop("scrollHeight")},2500),a(".historyLoadingDiv").removeClass("showMsg"),a(".chat-container").append("&lt;div class='endChatContainer' aria-live='off' aria-hidden='true' &gt;&lt;span class='endChatContainerText'&gt;End of chat history&lt;/span&gt;&lt;/div&gt;"),b.length?b.forEach(function(d,e){c.renderMessage(d),b.length-1===e&amp;&amp;(b=[],setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1}))}):setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1})},500,f)},100*e,Ja)})):setTimeout(function(){a(".chatInputBox").focus(),a(".disableFooter").removeClass("disableFooter"),Ka=!1}))};var wb="",xb=!1,yb=null,zb="";setTimeout(function(){ab&amp;&amp;(window.initGapi?initGapi():console.warn("Please uncomment Google Speech files('speech/app.js','speech/key.js' and 'client_api.js' in index.html"))},2e3),"webkitSpeechRecognition"in window&amp;&amp;t()&amp;&amp;(yb=new window.webkitSpeechRecognition,wb="",yb.continuous=!0,yb.interimResults=!0,yb.onstart=function(){zb="",xb=!0,a(".recordingMicrophone").css("display","block"),a(".notRecordingMicrophone").css("display","none")},yb.onerror=function(b){console.log(b.error),a(".recordingMicrophone").trigger("click"),a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone").css("display","block")},yb.onend=function(){xb=!1,a(".recordingMicrophone").trigger("click"),a(".recordingMicrophone").css("display","none"),a(".notRecordingMicrophone").css("display","block")},yb.onresult=function(b){wb="";for(var c="",d=b.resultIndex;d&lt;b.results.length;++d)b.results[d].isFinal?wb+=b.results[d][0].transcript:c+=b.results[d][0].transcript;wb=w(wb),wb=v(wb),c=v(c),""!==wb&amp;&amp;(zb+=wb),xb&amp;&amp;(a(".chatInputBox").html(zb+""+c),a(".sendButton").removeClass("disabled")),setTimeout(function(){r(document.getElementsByClassName("chatInputBox")),document.getElementsByClassName("chatInputBox")[0].scrollTop=document.getElementsByClassName("chatInputBox")[0].scrollHeight},350)});var Ab=/\n\n/g,Bb=/\n/g;a(window).on("beforeunload",function(){D()}),L(),aa.prototype.append=function(a,b){this._fields.push([a,b])},aa.prototype.toString=function(){var a=this.boundary,b="";return this._fields.forEach(function(c){if(b+="--"+a+"\r\n",c[1].data){var d=c[1];d.fileName?b+='Content-Disposition: form-data; name="'+c[0]+'"; filename="'+d.fileName+'"':b+='Content-Disposition: form-data; name="'+c[0]+'"',b+="\r\n",d.type&amp;&amp;(b+="Content-Type: UTF-8; charset=ISO-8859-1\r\n"),b+="Content-Transfer-Encoding: base64\r\n",b+="\r\n"+d.data+"\r\n"}else b+='Content-Disposition: form-data; name="'+c[0]+'";\r\n\r\n',b+=c[1]+"\r\n"}),b+="--"+a+"--"},ba.prototype.events={error:a.Event("error.ke.uploader"),progressChange:a.Event("progress.ke.uploader"),success:a.Event("success.ke.uploader")};var Cb=a.fn.uploader;return a.fn.uploader=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e="";return options="object"==typeof b&amp;&amp;b,e?b&amp;&amp;("string"==typeof b&amp;&amp;e[b]?e[b].apply(e,c):options&amp;&amp;la(ga(e,options))):d.data("ke.uploader",e=new ba(d,options)),b&amp;&amp;e[b]&amp;&amp;e[b].apply(e,c)})},a.fn.uploader.Constructor=ba,a.fn.uploader.noConflict=function(){return a.fn.uploader=Cb,this},function(){function a(){var a=!1;return(a=new XMLHttpRequest)||("undefined"!=typeof XDomainRequest?new XDomainRequest:a)}function b(){var b=a();if(!b)throw"Unsupported HTTP Connection";try{b.withCredentials=!0}catch(a){}return b.onreadystatechange=function(){return b.onReadyStateChange&amp;&amp;b.onReadyStateChange.call(b)},b}qb.net.HttpRequest=b}(),{initToken:initToken,addListener:addListener,removeListener:removeListener,show:show,destroy:destroy,showError:showError,botDetails:botDetails,chatHistory:chatHistory,addWidgetEvents:addWidgetEvents,setWidgetInstance:setWidgetInstance}}(a)}}),function(a){"function"==typeof define&amp;&amp;define.amd?define(["jquery","moment"],a):"object"==typeof exports&amp;&amp;"undefined"!=typeof module?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){"use strict";a.dateRangePickerLanguages={default:{selected:"Selected:",day:"Day",days:"Days",apply:"Close","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W","month-name":["january","february","march","april","may","june","july","august","september","october","november","december"],shortcuts:"Shortcuts","custom-values":"Custom Values",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range",time:"Time",hour:"Hour",minute:"Minute"},id:{selected:"Terpilih:",day:"Hari",days:"Hari",apply:"Tutup","week-1":"sen","week-2":"sel","week-3":"rab","week-4":"kam","week-5":"jum","week-6":"sab","week-7":"min","week-number":"W","month-name":["januari","februari","maret","april","mei","juni","juli","agustus","september","oktober","november","desember"],shortcuts:"Pintas","custom-values":"Nilai yang ditentukan",past:"Yang Lalu",following:"Mengikuti",previous:"Sebelumnya","prev-week":"Minggu","prev-month":"Bulan","prev-year":"Tahun",next:"Selanjutnya","next-week":"Minggu","next-month":"Bulan","next-year":"Tahun","less-than":"Tanggal harus lebih dari %d hari","more-than":"Tanggal harus kurang dari %d hari","default-more":"Jarak tanggal harus lebih lama dari %d hari","default-single":"Silakan pilih tanggal","default-less":"Jarak rentang tanggal tidak boleh lebih lama dari %d hari","default-range":"Rentang tanggal harus antara %d dan %d hari","default-default":"Silakan pilih rentang tanggal",time:"Waktu",hour:"Jam",minute:"Menit"},az:{selected:"Seçildi:",day:" gün",days:" gün",apply:"tətbiq","week-1":"1","week-2":"2","week-3":"3","week-4":"4","week-5":"5","week-6":"6","week-7":"7","month-name":["yanvar","fevral","mart","aprel","may","iyun","iyul","avqust","sentyabr","oktyabr","noyabr","dekabr"],shortcuts:"Qısayollar",past:"Keçmiş",following:"Növbəti",previous:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","prev-week":"Öncəki həftə","prev-month":"Öncəki ay","prev-year":"Öncəki il",next:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","next-week":"Növbəti həftə","next-month":"Növbəti ay","next-year":"Növbəti il","less-than":"Tarix aralığı %d gündən çox olmamalıdır","more-than":"Tarix aralığı %d gündən az olmamalıdır","default-more":"%d gündən çox bir tarix seçin","default-single":"Tarix seçin","default-less":"%d gündən az bir tarix seçin","default-range":"%d və %d gün aralığında tarixlər seçin","default-default":"Tarix aralığı seçin"},bg:{selected:"Избрано:",day:"Ден",days:"Дни",apply:"Затвори","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"нд","week-number":"С","month-name":["януари","февруари","март","април","май","юни","юли","август","септември","октомври","ноември","декември"],shortcuts:"Преки пътища","custom-values":"Персонализирани стойности",past:"Минал",following:"Следващ",previous:"Предишен","prev-week":"Седмица","prev-month":"Месец","prev-year":"Година",next:"Следващ","next-week":"Седмица","next-month":"Месец","next-year":"Година","less-than":"Периодът от време не трябва да е повече от %d дни","more-than":"Периодът от време не трябва да е по-малко от %d дни","default-more":"Моля изберете период по-дълъг от %d дни","default-single":"Моля изберете дата","default-less":"Моля изберете период по-къс от %d дни","default-range":"Моля изберете период между %d и %d дни","default-default":"Моля изберете период",time:"Време",hour:"Час",minute:"Минута"},cn:{selected:"已选择:",day:"天",days:"天",apply:"确定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","week-number":"周","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortcuts:"快捷选择",past:"过去",following:"将来",previous:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","prev-week":"上周","prev-month":"上个月","prev-year":"去年",next:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","next-week":"下周","next-month":"下个月","next-year":"明年","less-than":"所选日期范围不能大于%d天","more-than":"所选日期范围不能小于%d天","default-more":"请选择大于%d天的日期范围","default-less":"请选择小于%d天的日期范围","default-range":"请选择%d天到%d天的日期范围","default-single":"请选择一个日期","default-default":"请选择一个日期范围",time:"时间",hour:"小时",minute:"分钟"},cz:{selected:"Vybráno:",day:"Den",days:"Dny",apply:"Zavřít","week-1":"po","week-2":"út","week-3":"st","week-4":"čt","week-5":"pá","week-6":"so","week-7":"ne","month-name":["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],shortcuts:"Zkratky",past:"po",following:"následující",previous:"předchozí","prev-week":"týden","prev-month":"měsíc","prev-year":"rok",next:"další","next-week":"týden","next-month":"měsíc","next-year":"rok","less-than":"Rozsah data by neměl být větší než %d dnů","more-than":"Rozsah data by neměl být menší než %d dnů","default-more":"Prosím zvolte rozsah data větší než %d dnů","default-single":"Prosím zvolte datum","default-less":"Prosím zvolte rozsah data menší než %d dnů","default-range":"Prosím zvolte rozsah data mezi %d a %d dny","default-default":"Prosím zvolte rozsah data"},de:{selected:"Auswahl:",day:"Tag",days:"Tage",apply:"Schließen","week-1":"mo","week-2":"di","week-3":"mi","week-4":"do","week-5":"fr","week-6":"sa","week-7":"so","month-name":["januar","februar","märz","april","mai","juni","juli","august","september","oktober","november","dezember"],shortcuts:"Schnellwahl",past:"Vorherige",following:"Folgende",previous:"Vorherige","prev-week":"Woche","prev-month":"Monat","prev-year":"Jahr",next:"Nächste","next-week":"Woche","next-month":"Monat","next-year":"Jahr","less-than":"Datumsbereich darf nicht größer sein als %d Tage","more-than":"Datumsbereich darf nicht kleiner sein als %d Tage","default-more":"Bitte mindestens %d Tage auswählen","default-single":"Bitte ein Datum auswählen","default-less":"Bitte weniger als %d Tage auswählen","default-range":"Bitte einen Datumsbereich zwischen %d und %d Tagen auswählen","default-default":"Bitte ein Start- und Enddatum auswählen",Time:"Zeit",hour:"Stunde",minute:"Minute"},es:{selected:"Seleccionado:",day:"Día",days:"Días",apply:"Cerrar","week-1":"lu","week-2":"ma","week-3":"mi","week-4":"ju","week-5":"vi","week-6":"sa","week-7":"do","month-name":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortcuts:"Accesos directos",past:"Pasado",following:"Siguiente",previous:"Anterior","prev-week":"Semana","prev-month":"Mes","prev-year":"Año",next:"Siguiente","next-week":"Semana","next-month":"Mes","next-year":"Año","less-than":"El rango no debería ser mayor de %d días","more-than":"El rango no debería ser menor de %d días","default-more":"Por favor selecciona un rango mayor a %d días","default-single":"Por favor selecciona un día","default-less":"Por favor selecciona un rango menor a %d días","default-range":"Por favor selecciona un rango entre %d y %d días","default-default":"Por favor selecciona un rango de fechas."},fr:{selected:"Sélection:",day:"Jour",days:"Jours",apply:"Fermer","week-1":"lu","week-2":"ma","week-3":"me","week-4":"je","week-5":"ve","week-6":"sa","week-7":"di","month-name":["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortcuts:"Raccourcis",past:"Passé",following:"Suivant",previous:"Précédent","prev-week":"Semaine","prev-month":"Mois","prev-year":"Année",next:"Suivant","next-week":"Semaine","next-month":"Mois","next-year":"Année","less-than":"L'intervalle ne doit pas être supérieure à %d jours","more-than":"L'intervalle ne doit pas être inférieure à %d jours","default-more":"Merci de choisir une intervalle supérieure à %d jours","default-single":"Merci de choisir une date","default-less":"Merci de choisir une intervalle inférieure %d jours","default-range":"Merci de choisir une intervalle comprise entre %d et %d jours","default-default":"Merci de choisir une date"},hu:{selected:"Kiválasztva:",day:"Nap",days:"Nap",apply:"Ok","week-1":"h","week-2":"k","week-3":"sz","week-4":"cs","week-5":"p","week-6":"sz","week-7":"v","month-name":["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortcuts:"Gyorsválasztó",past:"Múlt",following:"Következő",previous:"Előző","prev-week":"Hét","prev-month":"Hónap","prev-year":"Év",next:"Következő","next-week":"Hét","next-month":"Hónap","next-year":"Év","less-than":"A kiválasztás nem lehet több %d napnál","more-than":"A kiválasztás nem lehet több %d napnál","default-more":"Válassz ki egy időszakot ami hosszabb mint %d nap","default-single":"Válassz egy napot","default-less":"Válassz ki egy időszakot ami rövidebb mint %d nap","default-range":"Válassz ki egy %d - %d nap hosszú időszakot","default-default":"Válassz ki egy időszakot"},it:{selected:"Selezionati:",day:"Giorno",days:"Giorni",apply:"Chiudi","week-1":"lu","week-2":"ma","week-3":"me","week-4":"gi","week-5":"ve","week-6":"sa","week-7":"do","month-name":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortcuts:"Scorciatoie",past:"Scorso",following:"Successivo",previous:"Precedente","prev-week":"Settimana","prev-month":"Mese","prev-year":"Anno",next:"Prossimo","next-week":"Settimana","next-month":"Mese","next-year":"Anno","less-than":"L'intervallo non dev'essere maggiore di %d giorni","more-than":"L'intervallo non dev'essere minore di %d giorni","default-more":"Seleziona un intervallo maggiore di %d giorni","default-single":"Seleziona una data","default-less":"Seleziona un intervallo minore di %d giorni","default-range":"Seleziona un intervallo compreso tra i %d e i %d giorni","default-default":"Seleziona un intervallo di date"},ko:{selected:"기간:",day:"일",days:"일간",apply:"닫기","week-1":"월","week-2":"화","week-3":"수","week-4":"목","week-5":"금","week-6":"토","week-7":"일","week-number":"주","month-name":["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortcuts:"단축키들",past:"지난(오늘기준)",following:"이후(오늘기준)",previous:"이전","prev-week":"1주","prev-month":"1달","prev-year":"1년",next:"다음","next-week":"1주","next-month":"1달","next-year":"1년","less-than":"날짜 범위는 %d 일보다 많을 수 없습니다","more-than":"날짜 범위는 %d 일보다 작을 수 없습니다","default-more":"날짜 범위를 %d 일보다 길게 선택해 주세요","default-single":"날짜를 선택해 주세요","default-less":"%d 일보다 작은 날짜를 선택해 주세요","default-range":"%d와 %d 일 사이의 날짜 범위를 선택해 주세요","default-default":"날짜 범위를 선택해 주세요",time:"시각",hour:"시",minute:"분"},no:{selected:"Valgt:",day:"Dag",days:"Dager",apply:"Lukk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lø","week-7":"sø","month-name":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],shortcuts:"Snarveier","custom-values":"Egendefinerte Verdier",past:"Over",following:"Følger",previous:"Forrige","prev-week":"Uke","prev-month":"Måned","prev-year":"År",next:"Neste","next-week":"Uke","next-month":"Måned","next-year":"År","less-than":"Datoperioden skal ikkje være lengre enn %d dager","more-than":"Datoperioden skal ikkje være kortere enn %d dager","default-more":"Vennligst velg ein datoperiode lengre enn %d dager","default-single":"Vennligst velg ein dato","default-less":"Vennligst velg ein datoperiode mindre enn %d dager","default-range":"Vennligst velg ein datoperiode mellom %d og %d dager","default-default":"Vennligst velg ein datoperiode",time:"Tid",hour:"Time",minute:"Minutter"},nl:{selected:"Geselecteerd:",day:"Dag",days:"Dagen",apply:"Ok","week-1":"ma","week-2":"di","week-3":"wo","week-4":"do","week-5":"vr","week-6":"za","week-7":"zo","month-name":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortcuts:"Snelkoppelingen","custom-values":"Aangepaste waarden",past:"Verleden",following:"Komend",previous:"Vorige","prev-week":"Week","prev-month":"Maand","prev-year":"Jaar",next:"Volgende","next-week":"Week","next-month":"Maand","next-year":"Jaar","less-than":"Interval moet langer dan %d dagen zijn","more-than":"Interval mag niet minder dan %d dagen zijn","default-more":"Selecteer een interval langer dan %dagen","default-single":"Selecteer een datum","default-less":"Selecteer een interval minder dan %d dagen","default-range":"Selecteer een interval tussen %d en %d dagen","default-default":"Selecteer een interval",time:"Tijd",hour:"Uur",minute:"Minuut"},ru:{selected:"Выбрано:",day:"День",days:"Дней",apply:"Применить","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"вс","month-name":["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],shortcuts:"Быстрый выбор","custom-values":"Пользовательские значения",past:"Прошедшие",following:"Следующие",previous:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","prev-week":"Неделя","prev-month":"Месяц","prev-year":"Год",next:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","next-week":"Неделя","next-month":"Месяц","next-year":"Год","less-than":"Диапазон не может быть больше %d дней","more-than":"Диапазон не может быть меньше %d дней","default-more":"Пожалуйста выберите диапазон больше %d дней","default-single":"Пожалуйста выберите дату","default-less":"Пожалуйста выберите диапазон меньше %d дней","default-range":"Пожалуйста выберите диапазон между %d и %d днями","default-default":"Пожалуйста выберите диапазон",time:"Время",hour:"Часы",minute:"Минуты"},uk:{selected:"Вибрано:",day:"День",days:"Днів",apply:"Застосувати","week-1":"пн","week-2":"вт","week-3":"ср","week-4":"чт","week-5":"пт","week-6":"сб","week-7":"нд","month-name":["січень","лютий","березень","квітень","травень","червень","липень","серпень","вересень","жовтень","листопад","грудень"],shortcuts:"Швидкий вибір","custom-values":"Значення користувача",past:"Минулі",following:"Наступні",previous:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","prev-week":"Тиждень","prev-month":"Місяць","prev-year":"Рік",next:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","next-week":"Тиждень","next-month":"Місяць","next-year":"Рік","less-than":"Діапазон не може бути більш ніж %d днів","more-than":"Діапазон не може бути меньш ніж %d днів","default-more":"Будь ласка виберіть діапазон більше %d днів","default-single":"Будь ласка виберіть дату","default-less":"Будь ласка виберіть діапазон менше %d днів","default-range":"Будь ласка виберіть діапазон між %d та %d днями","default-default":"Будь ласка виберіть діапазон",time:"Час",hour:"Години",minute:"Хвилини"},pl:{selected:"Wybrany:",day:"Dzień",days:"Dni",apply:"Zamknij","week-1":"pon","week-2":"wt","week-3":"śr","week-4":"czw","week-5":"pt","week-6":"so","week-7":"nd","month-name":["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],shortcuts:"Skróty","custom-values":"Niestandardowe wartości",past:"Przeszłe",following:"Następne",previous:"Poprzednie","prev-week":"tydzień","prev-month":"miesiąc","prev-year":"rok",next:"Następny","next-week":"tydzień","next-month":"miesiąc","next-year":"rok","less-than":"Okres nie powinien być dłuższy niż %d dni","more-than":"Okres nie powinien być krótszy niż  %d ni","default-more":"Wybierz okres dłuższy niż %d dni","default-single":"Wybierz datę","default-less":"Wybierz okres krótszy niż %d dni","default-range":"Wybierz okres trwający od %d do %d dni","default-default":"Wybierz okres",time:"Czas",hour:"Godzina",minute:"Minuta"},se:{selected:"Vald:",day:"dag",days:"dagar",apply:"godkänn","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lö","week-7":"sö","month-name":["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],shortcuts:"genvägar","custom-values":"Anpassade värden",past:"över",following:"följande",previous:"förra","prev-week":"vecka","prev-month":"månad","prev-year":"år",next:"nästa","next-week":"vecka","next-month":"måned","next-year":"år","less-than":"Datumintervall bör inte vara mindre än %d dagar","more-than":"Datumintervall bör inte vara mer än %d dagar","default-more":"Välj ett datumintervall längre än %d dagar","default-single":"Välj ett datum","default-less":"Välj ett datumintervall mindre än %d dagar","default-range":"Välj ett datumintervall mellan %d och %d dagar","default-default":"Välj ett datumintervall",time:"tid",hour:"timme",minute:"minut"},pt:{selected:"Selecionado:",day:"Dia",days:"Dias",apply:"Fechar","week-1":"seg","week-2":"ter","week-3":"qua","week-4":"qui","week-5":"sex","week-6":"sab","week-7":"dom","week-number":"N","month-name":["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortcuts:"Atalhos","custom-values":"Valores Personalizados",past:"Passado",following:"Seguinte",previous:"Anterior","prev-week":"Semana","prev-month":"Mês","prev-year":"Ano",next:"Próximo","next-week":"Próxima Semana","next-month":"Próximo Mês","next-year":"Próximo Ano","less-than":"O período selecionado não deve ser maior que %d dias","more-than":"O período selecionado não deve ser menor que %d dias","default-more":"Selecione um período superior a %d dias","default-single":"Selecione uma data","default-less":"Selecione um período inferior a %d dias","default-range":"Selecione um período de %d a %d dias","default-default":"Selecione um período",time:"Tempo",hour:"Hora",minute:"Minuto"},tc:{selected:"已選擇:",day:"天",days:"天",apply:"確定","week-1":"一","week-2":"二","week-3":"三","week-4":"四","week-5":"五","week-6":"六","week-7":"日","week-number":"周","month-name":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortcuts:"快速選擇",past:"過去",following:"將來",previous:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","prev-week":"上週","prev-month":"上個月","prev-year":"去年",next:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","next-week":"下周","next-month":"下個月","next-year":"明年","less-than":"所選日期範圍不能大於%d天","more-than":"所選日期範圍不能小於%d天","default-more":"請選擇大於%d天的日期範圍","default-less":"請選擇小於%d天的日期範圍","default-range":"請選擇%d天到%d天的日期範圍","default-single":"請選擇一個日期","default-default":"請選擇一個日期範圍",time:"日期",hour:"小時",minute:"分鐘"},ja:{selected:"選択しました:",day:"日",days:"日々",apply:"閉じる","week-1":"月","week-2":"火","week-3":"水","week-4":"木","week-5":"金","week-6":"土","week-7":"日","month-name":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],shortcuts:"クイック選択",past:"過去",following:"将来",previous:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","prev-week":"先週、","prev-month":"先月","prev-year":"昨年",next:"&amp;nbsp;&amp;nbsp;&amp;nbsp;","next-week":"来週","next-month":"来月","next-year":"来年","less-than":"日付の範囲は ％d 日以上にすべきではありません","more-than":"日付の範囲は ％d 日を下回ってはいけません","default-more":"％d 日よりも長い期間を選択してください","default-less":"％d 日未満の期間を選択してください","default-range":"％d と％ d日の間の日付範囲を選択してください","default-single":"日付を選択してください","default-default":"日付範囲を選択してください",time:"時間",hour:"時間",minute:"分"},da:{selected:"Valgt:",day:"Dag",days:"Dage",apply:"Luk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lö","week-7":"sö","month-name":["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],shortcuts:"genveje","custom-values":"Brugerdefinerede værdier",past:"Forbi",following:"Følgende",previous:"Forrige","prev-week":"uge","prev-month":"månad","prev-year":"år",next:"Næste","next-week":"Næste uge","next-month":"Næste måned","next-year":"Næste år","less-than":"Dato interval bør ikke være med end %d dage","more-than":"Dato interval bør ikke være mindre end %d dage","default-more":"Vælg datointerval længere end %d dage","default-single":"Vælg dato","default-less":"Vælg datointerval mindre end %d dage","default-range":"Vælg datointerval mellem %d og %d dage","default-default":"Vælg datointerval",time:"tid",hour:"time",minute:"minut"},fi:{selected:"Valittu:",day:"Päivä",days:"Päivää",apply:"Sulje","week-1":"ma","week-2":"ti","week-3":"ke","week-4":"to","week-5":"pe","week-6":"la","week-7":"su","week-number":"V","month-name":["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortcuts:"Pikavalinnat","custom-values":"Mukautetut Arvot",past:"Menneet",following:"Tulevat",previous:"Edellinen","prev-week":"Viikko","prev-month":"Kuukausi","prev-year":"Vuosi",next:"Seuraava","next-week":"Viikko","next-month":"Kuukausi","next-year":"Vuosi","less-than":"Aikajakson tulisi olla vähemmän kuin %d päivää","more-than":"Aikajakson ei tulisi olla vähempää kuin %d päivää","default-more":"Valitse pidempi aikajakso kuin %d päivää","default-single":"Valitse päivä","default-less":"Valitse lyhyempi aikajakso kuin %d päivää","default-range":"Valitse aikajakso %d ja %d päivän väliltä","default-default":"Valitse aikajakso",time:"Aika",hour:"Tunti",minute:"Minuutti"},cat:{selected:"Seleccionats:",day:"Dia",days:"Dies",apply:"Tanca","week-1":"Dl","week-2":"Dm","week-3":"Dc","week-4":"Dj","week-5":"Dv","week-6":"Ds","week-7":"Dg","week-number":"S","month-name":["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortcuts:"Dreçeres","custom-values":"Valors personalitzats",past:"Passat",following:"Futur",previous:"Anterior","prev-week":"Setmana","prev-month":"Mes","prev-year":"Any",next:"Següent","next-week":"Setmana","next-month":"Mes","next-year":"Any","less-than":"El període no hauria de ser de més de %d dies","more-than":"El període no hauria de ser de menys de %d dies","default-more":"Perfavor selecciona un període més gran de %d dies","default-single":"Perfavor selecciona una data","default-less":"Perfavor selecciona un període de menys de %d dies","default-range":"Perfavor selecciona un període d'entre %d i %d dies","default-default":"Perfavor selecciona un període",time:"Temps",hour:"Hora",minute:"Minut"}},a.fn.dateRangePicker=function(c){function d(b,c){return c.contains(b.target)||b.target==c||void 0!=c.childNodes&amp;&amp;a.inArray(b.target,c.childNodes)&gt;=0}function e(){function d(b){var d=a(b).parents("table").hasClass("month2"),e=d?c.month2:c.month1;e=U(e),!c.singleMonth&amp;&amp;!c.singleDate&amp;&amp;!d&amp;&amp;S(e,c.month2)&gt;=0||$(e)||(G(e,d?"month2":"month1"),P())}function e(a){var b=U(c.month1),d=U(c.month2);$(d)||!c.singleDate&amp;&amp;S(b,d)&gt;=0||(G(b,"month1"),G(d,"month2"),F())}function g(b){var d=a(b).parents("table").hasClass("month2"),e=d?c.month2:c.month1;e=V(e),d&amp;&amp;S(e,c.month1)&lt;=0||$(e)||(G(e,d?"month2":"month1"),P())}function h(a){var b=V(c.month1),d=V(c.month2);$(b)||!c.singleDate&amp;&amp;S(d,b)&lt;=0||(G(d,"month2"),G(b,"month1"),F())}var i=this;if(a(this).data("date-picker-opened"))return void Q();a(this).data("date-picker-opened",!0),ja=X().hide(),ja.append('&lt;div class="date-range-length-tip"&gt;&lt;/div&gt;'),a(c.container).append(ja),c.inline?ja.addClass("inline-wrapper"):f(),c.alwaysOpen&amp;&amp;ja.find(".apply-btn").hide();var j=ga();if(ha(j),c.time.enabled)if(c.startDate&amp;&amp;c.endDate||c.start&amp;&amp;c.end)M(b(c.start||c.startDate).toDate(),"time1"),M(b(c.end||c.endDate).toDate(),"time2");else{var l=c.defaultEndTime?c.defaultEndTime:j;M(j,"time1"),M(l,"time2")}var m="";m=fa(c.singleDate?"default-single":c.minDays&amp;&amp;c.maxDays?"default-range":c.minDays?"default-more":c.maxDays?"default-less":"default-default"),ja.find(".default-top").html(m.replace(/\%d/,c.minDays).replace(/\%d/,c.maxDays)),c.singleMonth?ja.addClass("single-month"):ja.addClass("two-months"),setTimeout(function(){k(),ma=!0},0),ja.click(function(a){a.stopPropagation()}),a(document).on("click.datepicker",ia),ja.find(".next").click(function(){c.stickyMonths?e(this):d(this)}),ja.find(".prev").click(function(){c.stickyMonths?h(this):g(this)}),ja.attr("unselectable","on").css("user-select","none").on("selectstart",function(a){return a.preventDefault(),!1}),ja.find(".apply-btn").click(function(){Q();var b=O(new Date(c.start))+c.separator+O(new Date(c.end));a(i).trigger("datepicker-apply",{value:b,date1:new Date(c.start),date2:new Date(c.end)})}),ja.find("[custom]").click(function(){var b=a(this).attr("custom");c.start=!1,c.end=!1,ja.find(".day.checked").removeClass("checked"),c.setValue.call(oa,b),A(),B(!0),F(),c.autoClose&amp;&amp;Q()}),ja.find("[shortcut]").click(function(){var b,d=a(this).attr("shortcut"),e=new Date,f=!1;if(-1!=d.indexOf("day")){var g=parseInt(d.split(",",2)[1],10);f=new Date((new Date).getTime()+864e5*g),e=new Date(e.getTime()+864e5*(g&gt;0?1:-1))}else if(-1!=d.indexOf("week")){b=-1!=d.indexOf("prev,")?-1:1;var h;for(h=1==b?"monday"==c.startOfWeek?1:0:"monday"==c.startOfWeek?0:6,e=new Date(e.getTime()-864e5);e.getDay()!=h;)e=new Date(e.getTime()+864e5*b);f=new Date(e.getTime()+864e5*b*6)}else if(-1!=d.indexOf("month"))b=-1!=d.indexOf("prev,")?-1:1,f=1==b?U(e):V(e),f.setDate(1),e=U(f),e.setDate(1),e=new Date(e.getTime()-864e5);else if(-1!=d.indexOf("year"))b=-1!=d.indexOf("prev,")?-1:1,f=new Date,f.setFullYear(e.getFullYear()+b),f.setMonth(0),f.setDate(1),e.setFullYear(e.getFullYear()+b),e.setMonth(11),e.setDate(31);else if("custom"==d){var i=a(this).html();if(c.customShortcuts&amp;&amp;c.customShortcuts.length&gt;0)for(var j=0;j&lt;c.customShortcuts.length;j++){var k=c.customShortcuts[j];if(k.name==i){var l=[];if(l=k.dates.call(),l&amp;&amp;2==l.length&amp;&amp;(f=l[0],e=l[1]),l&amp;&amp;1==l.length){var m=l[0];G(m,"month1"),G(U(m),"month2"),P()}break}}}f&amp;&amp;e&amp;&amp;(D(f,e),A())}),ja.find(".time1 input[type=range]").on("change touchmove",function(b){var c=b.target;o("time1","hour"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0,"minute"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0)}),ja.find(".time2 input[type=range]").on("change touchmove",function(b){var c=b.target;o("time2","hour"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0,"minute"==c.name?a(c).val().replace(/^(\d{1})$/,"0$1"):void 0)})}function f(){if(!c.inline){var b=a(na).offset();if("relative"==a(c.container).css("position")){var d=a(c.container).offset(),e=Math.max(0,b.left+ja.outerWidth()-a("body").width()+16);ja.css({top:b.top-d.top+a(na).outerHeight()+4,left:b.left-d.left-e})}else b.left&lt;460?ja.css({top:b.top+a(na).outerHeight()+parseInt(a("body").css("border-top")||0,10),left:b.left}):ja.css({top:b.top+a(na).outerHeight()+parseInt(a("body").css("border-top")||0,10),left:b.left+a(na).width()-ja.width()-16})}}function g(){return ja}function h(b){R(),i(),c.customOpenAnimation?c.customOpenAnimation.call(ja.get(0),function(){a(na).trigger("datepicker-opened",{relatedTarget:ja})}):ja.slideDown(b,function(){a(na).trigger("datepicker-opened",{relatedTarget:ja})}),a(na).trigger("datepicker-open",{relatedTarget:ja}),P(),k(),f()}function i(){var a=c.getValue.call(oa),d=a?a.split(c.separator):"";if(d&amp;&amp;(1==d.length&amp;&amp;c.singleDate||d.length&gt;=2)){var e=c.format;e.match(/Do/)&amp;&amp;(e=e.replace(/Do/,"D"),d[0]=d[0].replace(/(\d+)(th|nd|st)/,"$1"),d.length&gt;=2&amp;&amp;(d[1]=d[1].replace(/(\d+)(th|nd|st)/,"$1"))),ma=!1,d.length&gt;=2?D(j(d[0],e,b.locale(c.language)),j(d[1],e,b.locale(c.language))):1==d.length&amp;&amp;c.singleDate&amp;&amp;E(j(d[0],e,b.locale(c.language))),ma=!0}}function j(a,c,d){return b(a,c,d).isValid()?b(a,c,d).toDate():b().toDate()}function k(){var a=ja.find(".gap").css("margin-left");a&amp;&amp;(a=parseInt(a));var b=ja.find(".month1").width(),c=ja.find(".gap").width()+(a?2*a:0),d=ja.find(".month2").width();ja.find(".month-wrapper").width(b+c+d)}function l(a,c){ja.find("."+a+" input[type=range].hour-range").val(b(c).hours()),ja.find("."+a+" input[type=range].minute-range").val(b(c).minutes()),o(a,b(c).format("HH"),b(c).format("mm"))}function m(a,d){c[a]=parseInt(b(parseInt(d)).startOf("day").add(b(c[a+"Time"]).format("HH"),"h").add(b(c[a+"Time"]).format("mm"),"m").valueOf())}function n(){l("time1",c.start),l("time2",c.end)}function o(a,d,e){function f(a,b){var f=b.format("HH"),g=b.format("mm");c[a]=b.startOf("day").add(d||f,"h").add(e||g,"m").valueOf()}switch(d&amp;&amp;ja.find("."+a+" .hour-val").text(d),e&amp;&amp;ja.find("."+a+" .minute-val").text(e),a){case"time1":c.start&amp;&amp;f("start",b(c.start)),f("startTime",b(c.startTime||b().valueOf()));break;case"time2":c.end&amp;&amp;f("end",b(c.end)),f("endTime",b(c.endTime||b().valueOf()))}A(),B(),F()}function p(){c.start=!1,c.end=!1,ja.find(".day.checked").removeClass("checked"),ja.find(".day.last-date-selected").removeClass("last-date-selected"),ja.find(".day.first-date-selected").removeClass("first-date-selected"),c.setValue.call(oa,""),A(),B(),F()}function q(a){var d=a;return"week-range"===c.batchMode?d="monday"===c.startOfWeek?b(parseInt(a)).startOf("isoweek").valueOf():b(parseInt(a)).startOf("week").valueOf():"month-range"===c.batchMode&amp;&amp;(d=b(parseInt(a)).startOf("month").valueOf()),d}function r(a){var d=a;return"week-range"===c.batchMode?d="monday"===c.startOfWeek?b(parseInt(a)).endOf("isoweek").valueOf():b(parseInt(a)).endOf("week").valueOf():"month-range"===c.batchMode&amp;&amp;(d=b(parseInt(a)).endOf("month").valueOf()),d}function s(d){if(!d.hasClass("invalid")){var e=d.attr("time");if(d.addClass("checked"),c.singleDate?(c.start=e,c.end=!1):"week"===c.batchMode?"monday"===c.startOfWeek?(c.start=b(parseInt(e)).startOf("isoweek").valueOf(),c.end=b(parseInt(e)).endOf("isoweek").valueOf()):(c.end=b(parseInt(e)).endOf("week").valueOf(),c.start=b(parseInt(e)).startOf("week").valueOf()):"workweek"===c.batchMode?(c.start=b(parseInt(e)).day(1).valueOf(),c.end=b(parseInt(e)).day(5).valueOf()):"weekend"===c.batchMode?(c.start=b(parseInt(e)).day(6).valueOf(),c.end=b(parseInt(e)).day(7).valueOf()):"month"===c.batchMode?(c.start=b(parseInt(e)).startOf("month").valueOf(),c.end=b(parseInt(e)).endOf("month").valueOf()):c.start&amp;&amp;c.end||!c.start&amp;&amp;!c.end?(c.start=q(e),c.end=!1):c.start&amp;&amp;(c.end=r(e),c.time.enabled&amp;&amp;m("end",c.end)),c.time.enabled&amp;&amp;(c.start&amp;&amp;m("start",c.start),c.end&amp;&amp;m("end",c.end)),!c.singleDate&amp;&amp;c.start&amp;&amp;c.end&amp;&amp;c.start&gt;c.end){var f=c.end;c.end=r(c.start),c.start=q(f),c.time.enabled&amp;&amp;c.swapTime&amp;&amp;n()}c.start=parseInt(c.start),c.end=parseInt(c.end),x(),c.start&amp;&amp;!c.end&amp;&amp;(a(na).trigger("datepicker-first-date-selected",{date1:new Date(c.start)}),w(d)),v(e),A(),B(),F(),z()}}function t(a){var d,e,f=parseInt(a.attr("data-start-time"),10);c.startWeek?(ja.find(".week-number-selected").removeClass("week-number-selected"),d=new Date(f&lt;c.startWeek?f:c.startWeek),e=new Date(f&lt;c.startWeek?c.startWeek:f),c.startWeek=!1,c.start=b(d).day("monday"==c.startOfWeek?1:0).valueOf(),c.end=b(e).day("monday"==c.startOfWeek?7:6).valueOf()):(c.startWeek=f,a.addClass("week-number-selected"),d=new Date(f),c.start=b(d).day("monday"==c.startOfWeek?1:0).valueOf(),c.end=b(d).day("monday"==c.startOfWeek?7:6).valueOf()),v(),A(),B(),F(),z()}function u(a){if(a=parseInt(a,10),c.startDate&amp;&amp;T(a,c.startDate)&lt;0)return!1;if(c.endDate&amp;&amp;T(a,c.endDate)&gt;0)return!1;if(c.start&amp;&amp;!c.end&amp;&amp;!c.singleDate){if(c.maxDays&gt;0&amp;&amp;C(a,c.start)&gt;c.maxDays)return!1;if(c.minDays&gt;0&amp;&amp;C(a,c.start)&lt;c.minDays)return!1;if(c.selectForward&amp;&amp;a&lt;c.start)return!1;if(c.selectBackward&amp;&amp;a&gt;c.start)return!1;if(c.beforeShowDay&amp;&amp;"function"==typeof c.beforeShowDay){for(var b=!0,d=a;C(d,c.start)&gt;1;){if(!c.beforeShowDay(new Date(d))[0]){b=!1;break}if(Math.abs(d-c.start)&lt;864e5)break;d&gt;c.start&amp;&amp;(d-=864e5),d&lt;c.start&amp;&amp;(d+=864e5)}if(!b)return!1}}return!0}function v(){return ja.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),c.start&amp;&amp;!c.end&amp;&amp;ja.find(".day.toMonth.valid").each(function(){u(parseInt(a(this).attr("time"),10))?a(this).addClass("valid tmp").removeClass("invalid"):a(this).addClass("invalid tmp").removeClass("valid")}),!0}function w(b){var d=parseInt(b.attr("time")),e="";if(b.hasClass("has-tooltip")&amp;&amp;b.attr("data-tooltip"))e='&lt;span class="tooltip-content"&gt;'+b.attr("data-tooltip")+"&lt;/span&gt;";else if(!b.hasClass("invalid"))if(c.singleDate)ja.find(".day.hovering").removeClass("hovering"),b.addClass("hovering");else if(ja.find(".day").each(function(){var b=parseInt(a(this).attr("time"));c.start,c.end;b==d?a(this).addClass("hovering"):a(this).removeClass("hovering"),c.start&amp;&amp;!c.end&amp;&amp;(c.start&lt;b&amp;&amp;d&gt;=b||c.start&gt;b&amp;&amp;d&lt;=b)?a(this).addClass("hovering"):a(this).removeClass("hovering")}),c.start&amp;&amp;!c.end){var f=C(d,c.start);c.hoveringTooltip&amp;&amp;("function"==typeof c.hoveringTooltip?e=c.hoveringTooltip(f,c.start,d):!0===c.hoveringTooltip&amp;&amp;f&gt;1&amp;&amp;(e=f+" "+fa("days")))}if(e){var g=b.offset(),h=ja.offset(),i=g.left-h.left,j=g.top-h.top;i+=b.width()/2;var k=ja.find(".date-range-length-tip"),l=k.css({visibility:"hidden",display:"none"}).html(e).width(),m=k.height();i-=l/2,j-=m,setTimeout(function(){k.css({left:i,top:j,display:"block",visibility:"visible"})},10)}else ja.find(".date-range-length-tip").hide()}function x(){ja.find(".day.hovering").removeClass("hovering"),ja.find(".date-range-length-tip").hide()}function y(a){var d=a.val(),e=a.attr("name"),f=a.parents("table").hasClass("month1")?"month1":"month2",g="month1"===f?"month2":"month1",h=!!c.startDate&amp;&amp;b(c.startDate),i=!!c.endDate&amp;&amp;b(c.endDate),j=b(c[f])[e](d);h&amp;&amp;j.isSameOrBefore(h)&amp;&amp;(j=h.add("month2"===f?1:0,"month")),i&amp;&amp;j.isSameOrAfter(i)&amp;&amp;(j=i.add(c.singleMonth||"month1"!==f?0:-1,"month")),G(j,f),"month1"===f?(c.stickyMonths||b(j).isSameOrAfter(c[g],"month"))&amp;&amp;G(b(j).add(1,"month"),g):(c.stickyMonths||b(j).isSameOrBefore(c[g],"month"))&amp;&amp;G(b(j).add(-1,"month"),g),P()}function z(){!0===c.singleDate?ma&amp;&amp;c.start&amp;&amp;c.autoClose&amp;&amp;Q():ma&amp;&amp;c.start&amp;&amp;c.end&amp;&amp;c.autoClose&amp;&amp;Q()}function A(){var a=Math.ceil((c.end-c.start)/864e5)+1;c.singleDate?c.start&amp;&amp;!c.end?ja.find(".drp_top-bar").removeClass("error").addClass("normal"):ja.find(".drp_top-bar").removeClass("error").removeClass("normal"):c.maxDays&amp;&amp;a&gt;c.maxDays?(c.start=!1,c.end=!1,ja.find(".day").removeClass("checked"),ja.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(fa("less-than").replace("%d",c.maxDays))):c.minDays&amp;&amp;a&lt;c.minDays?(c.start=!1,c.end=!1,ja.find(".day").removeClass("checked"),ja.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(fa("more-than").replace("%d",c.minDays))):c.start||c.end?ja.find(".drp_top-bar").removeClass("error").addClass("normal"):ja.find(".drp_top-bar").removeClass("error").removeClass("normal"),c.singleDate&amp;&amp;c.start&amp;&amp;!c.end||!c.singleDate&amp;&amp;c.start&amp;&amp;c.end?ja.find(".apply-btn").removeClass("disabled"):ja.find(".apply-btn").addClass("disabled"),c.batchMode&amp;&amp;(c.start&amp;&amp;c.startDate&amp;&amp;T(c.start,c.startDate)&lt;0||c.end&amp;&amp;c.endDate&amp;&amp;T(c.end,c.endDate)&gt;0)&amp;&amp;(c.start=!1,c.end=!1,ja.find(".day").removeClass("checked"))}function B(b,d){ja.find(".start-day").html("..."),ja.find(".end-day").html("..."),ja.find(".selected-days").hide(),c.start&amp;&amp;ja.find(".start-day").html(O(new Date(parseInt(c.start)))),c.end&amp;&amp;ja.find(".end-day").html(O(new Date(parseInt(c.end))));var e;c.start&amp;&amp;c.singleDate?(ja.find(".apply-btn").removeClass("disabled"),e=O(new Date(c.start)),c.setValue.call(oa,e,O(new Date(c.start)),O(new Date(c.end))),ma&amp;&amp;!d&amp;&amp;a(na).trigger("datepicker-change",{value:e,date1:new Date(c.start)})):c.start&amp;&amp;c.end?(ja.find(".selected-days").show().find(".selected-days-num").html(C(c.end,c.start)),ja.find(".apply-btn").removeClass("disabled"),e=O(new Date(c.start))+c.separator+O(new Date(c.end)),c.setValue.call(oa,e,O(new Date(c.start)),O(new Date(c.end))),ma&amp;&amp;!d&amp;&amp;a(na).trigger("datepicker-change",{value:e,date1:new Date(c.start),date2:new Date(c.end)})):b?ja.find(".apply-btn").removeClass("disabled"):ja.find(".apply-btn").addClass("disabled")}function C(a,c){return Math.abs(b(a).diff(b(c),"d"))+1}function D(a,b,d){if(a.getTime()&gt;b.getTime()){var e=b;b=a,a=e,e=null}var f=!0;if(c.startDate&amp;&amp;T(a,c.startDate)&lt;0&amp;&amp;(f=!1),c.endDate&amp;&amp;T(b,c.endDate)&gt;0&amp;&amp;(f=!1),!f)return G(c.startDate,"month1"),G(U(c.startDate),"month2"),void P();c.start=a.getTime(),c.end=b.getTime(),c.time.enabled&amp;&amp;(l("time1",a),l("time2",b)),(c.stickyMonths||T(a,b)&gt;0&amp;&amp;0===S(a,b))&amp;&amp;(c.lookBehind?a=V(b):b=U(a)),c.stickyMonths&amp;&amp;!1!==c.endDate&amp;&amp;S(b,c.endDate)&gt;0&amp;&amp;(a=V(a),b=V(b)),c.stickyMonths||0===S(a,b)&amp;&amp;(c.lookBehind?a=V(b):b=U(a)),G(a,"month1"),G(b,"month2"),P(),A(),B(!1,d),z()}function E(a){var b=!0;if(c.startDate&amp;&amp;T(a,c.startDate)&lt;0&amp;&amp;(b=!1),c.endDate&amp;&amp;T(a,c.endDate)&gt;0&amp;&amp;(b=!1),!b)return void G(c.startDate,"month1");if(c.start=a.getTime(),c.time.enabled&amp;&amp;l("time1",a),G(a,"month1"),!0!==c.singleMonth){G(U(a),"month2")}P(),B(),z()}function F(){(c.start||c.end)&amp;&amp;(ja.find(".day").each(function(){var d=parseInt(a(this).attr("time")),e=c.start,f=c.end;c.time.enabled&amp;&amp;(d=b(d).startOf("day").valueOf(),e=b(e||b().valueOf()).startOf("day").valueOf(),f=b(f||b().valueOf()).startOf("day").valueOf()),c.start&amp;&amp;c.end&amp;&amp;f&gt;=d&amp;&amp;e&lt;=d||c.start&amp;&amp;!c.end&amp;&amp;b(e).format("YYYY-MM-DD")==b(d).format("YYYY-MM-DD")?a(this).addClass("checked"):a(this).removeClass("checked"),c.start&amp;&amp;b(e).format("YYYY-MM-DD")==b(d).format("YYYY-MM-DD")?a(this).addClass("first-date-selected"):a(this).removeClass("first-date-selected"),c.end&amp;&amp;b(f).format("YYYY-MM-DD")==b(d).format("YYYY-MM-DD")?a(this).addClass("last-date-selected"):a(this).removeClass("last-date-selected")}),ja.find(".week-number").each(function(){a(this).attr("data-start-time")==c.startWeek&amp;&amp;a(this).addClass("week-number-selected")}))}function G(a,d){a=b(a).toDate();var e=H(a,d),f=I(a,d);ja.find("."+d+" .month-name").html(e+" "+f),ja.find("."+d+" tbody").html(ca(a)),c[d]=a,v(),L()}function H(a,d){a=b(a);var e=a.get("month"),f=N(e),g='&lt;div class="month-element"&gt;'+f+"&lt;/div&gt;";if(!c.monthSelect)return g;var h=!!c.startDate&amp;&amp;b(c.startDate).add(c.singleMonth||"month2"!==d?0:1,"month"),i=!!c.endDate&amp;&amp;b(c.endDate).add(c.singleMonth||"month1"!==d?0:-1,"month"),j=h&amp;&amp;a.isSame(h,"year")?h.get("month"):0,k=i&amp;&amp;a.isSame(i,"year")?i.get("month"):11,l=Math.min(j,e),m=Math.max(k,e);return l===m?g:K("month",J({minSelectable:j,maxSelectable:k,minVisible:l,maxVisible:m},e,function(a){return N(a)}))}function I(a,d){a=b(a);var e=a.get("year"),f='&lt;div class="month-element"&gt;'+e+"&lt;/div&gt;";if(!c.yearSelect)return f;var g=c.yearSelect&amp;&amp;"function"==typeof c.yearSelect,h=!!c.startDate&amp;&amp;b(c.startDate).add(c.singleMonth||"month2"!==d?0:1,"month"),i=!!c.endDate&amp;&amp;b(c.endDate).add(c.singleMonth||"month1"!==d?0:-1,"month"),j=g?c.yearSelect(e):c.yearSelect.slice(),k=h?Math.max(j[0],h.get("year")):Math.min(j[0],e),l=i?Math.min(j[1],i.get("year")):Math.max(j[1],e),m=Math.min(k,e),n=Math.max(l,e);return m===n?f:K("year",J({minSelectable:k,maxSelectable:l,minVisible:m,maxVisible:n},e))}function J(a,b,c){var d=[];c=c||function(a){return a};for(var e=a.minVisible;e&lt;=a.maxVisible;e++)d.push({value:e,text:c(e),selected:e===b,disabled:e&lt;a.minSelectable||e&gt;a.maxSelectable});return d}function K(a,b){for(var c,d='&lt;div class="select-wrapper"&gt;&lt;select class="'+a+'" name="'+a+'"&gt;',e=0,f=b.length;e&lt;f;e++){var g=b[e];d+='&lt;option value="'+g.value+'"'+(g.selected?" selected":"")+(g.disabled?" disabled":"")+"&gt;"+g.text+"&lt;/option&gt;",g.selected&amp;&amp;(c=g.text)}return d+="&lt;/select&gt;"+c+"&lt;/div&gt;"}function L(){ja.find(".day").off("click").click(function(b){s(a(this))}),ja.find(".day").off("mouseenter").mouseenter(function(b){w(a(this))}),ja.find(".day").off("mouseleave").mouseleave(function(a){ja.find(".date-range-length-tip").hide(),c.singleDate&amp;&amp;x()}),ja.find(".week-number").off("click").click(function(b){t(a(this))}),ja.find(".month").off("change").change(function(b){y(a(this))}),ja.find(".year").off("change").change(function(b){y(a(this))})}function M(a,b){ja.find("."+b).append(W()),l(b,a)}function N(a){return fa("month-name")[a]}function O(a){return b(a).format(c.format)}function P(){F();var a=parseInt(b(c.month1).format("YYYYMM")),d=parseInt(b(c.month2).format("YYYYMM")),e=Math.abs(a-d);e&gt;1&amp;&amp;89!=e?ja.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):ja.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var f=ja.find("table.month1").height(),g=ja.find("table.month2").height();ja.find(".gap").height(Math.max(f,g)+10)}function Q(){if(!c.alwaysOpen){var b=function(){a(na).data("date-picker-opened",!1),a(na).trigger("datepicker-closed",{relatedTarget:ja})};c.customCloseAnimation?c.customCloseAnimation.call(ja.get(0),b):a(ja).slideUp(c.duration,b),a(na).trigger("datepicker-close",{relatedTarget:ja})}}function R(){G(c.month1,"month1"),G(c.month2,"month2")}function S(a,c){var d=parseInt(b(a).format("YYYYMM"))-parseInt(b(c).format("YYYYMM"));return d&gt;0?1:0===d?0:-1}function T(a,c){var d=parseInt(b(a).format("YYYYMMDD"))-parseInt(b(c).format("YYYYMMDD"));return d&gt;0?1:0===d?0:-1}function U(a){return b(a).add(1,"months").toDate()}function V(a){return b(a).add(-1,"months").toDate()}function W(){return"&lt;div&gt;&lt;span&gt;"+fa("Time")+': &lt;span class="hour-val"&gt;00&lt;/span&gt;:&lt;span class="minute-val"&gt;00&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="hour"&gt;&lt;label&gt;'+fa("Hour")+': &lt;input type="range" class="hour-range" name="hour" min="0" max="23"&gt;&lt;/label&gt;&lt;/div&gt;&lt;div class="minute"&gt;&lt;label&gt;'+fa("Minute")+': &lt;input type="range" class="minute-range" name="minute" min="0" max="59"&gt;&lt;/label&gt;&lt;/div&gt;'}function X(){var b='&lt;div class="date-picker-wrapper';c.extraClass&amp;&amp;(b+=" "+c.extraClass+" "),c.singleDate&amp;&amp;(b+=" single-date "),c.showShortcuts||(b+=" no-shortcuts "),c.showTopbar||(b+=" no-topbar "),c.customTopBar&amp;&amp;(b+=" custom-topbar "),b+='"&gt;',c.showTopbar&amp;&amp;(b+='&lt;div class="drp_top-bar"&gt;',c.customTopBar?("function"==typeof c.customTopBar&amp;&amp;(c.customTopBar=c.customTopBar()),b+='&lt;div class="custom-top"&gt;'+c.customTopBar+"&lt;/div&gt;"):(b+='&lt;div class="normal-top"&gt;&lt;span class="selection-top"&gt;'+fa("selected")+' &lt;/span&gt; &lt;b class="start-day"&gt;...&lt;/b&gt;',c.singleDate||(b+=' &lt;span class="separator-day"&gt;'+c.separator+'&lt;/span&gt; &lt;b class="end-day"&gt;...&lt;/b&gt; &lt;i class="selected-days"&gt;(&lt;span class="selected-days-num"&gt;3&lt;/span&gt; '+fa("days")+")&lt;/i&gt;"),b+="&lt;/div&gt;",b+='&lt;div class="error-top"&gt;error&lt;/div&gt;&lt;div class="default-top"&gt;default&lt;/div&gt;'),b+='&lt;input type="button" class="apply-btn disabled'+Y()+'" value="'+fa("apply")+'" /&gt;',b+="&lt;/div&gt;");var d=c.showWeekNumbers?6:5,e="&amp;lt;";c.customArrowPrevSymbol&amp;&amp;(e=c.customArrowPrevSymbol);var f="&amp;gt;";if(c.customArrowNextSymbol&amp;&amp;(f=c.customArrowNextSymbol),b+='&lt;div class="month-wrapper"&gt;   &lt;table class="month1" cellspacing="0" border="0" cellpadding="0"&gt;       &lt;thead&gt;           &lt;tr class="caption"&gt;               &lt;th&gt;                   &lt;span class="prev"&gt;'+e+'                   &lt;/span&gt;               &lt;/th&gt;               &lt;th colspan="'+d+'" class="month-name"&gt;               &lt;/th&gt;               &lt;th&gt;'+(c.singleDate||!c.stickyMonths?'&lt;span class="next"&gt;'+f+"&lt;/span&gt;":"")+'               &lt;/th&gt;           &lt;/tr&gt;           &lt;tr class="week-name"&gt;'+Z()+"       &lt;/thead&gt;       &lt;tbody&gt;&lt;/tbody&gt;   &lt;/table&gt;",aa()&amp;&amp;(b+='&lt;div class="gap"&gt;'+_()+'&lt;/div&gt;&lt;table class="month2" cellspacing="0" border="0" cellpadding="0"&gt;   &lt;thead&gt;   &lt;tr class="caption"&gt;       &lt;th&gt;'+(c.stickyMonths?"":'&lt;span class="prev"&gt;'+e+"&lt;/span&gt;")+'       &lt;/th&gt;       &lt;th colspan="'+d+'" class="month-name"&gt;       &lt;/th&gt;       &lt;th&gt;           &lt;span class="next"&gt;'+f+'&lt;/span&gt;       &lt;/th&gt;   &lt;/tr&gt;   &lt;tr class="week-name"&gt;'+Z()+"   &lt;/thead&gt;   &lt;tbody&gt;&lt;/tbody&gt;&lt;/table&gt;"),b+='&lt;div class="dp-clearfix"&gt;&lt;/div&gt;&lt;div class="time"&gt;&lt;div class="time1"&gt;&lt;/div&gt;',c.singleDate||(b+='&lt;div class="time2"&gt;&lt;/div&gt;'),b+='&lt;/div&gt;&lt;div class="dp-clearfix"&gt;&lt;/div&gt;&lt;/div&gt;',b+='&lt;div class="footer"&gt;',c.showShortcuts){b+='&lt;div class="shortcuts"&gt;&lt;b&gt;'+fa("shortcuts")+"&lt;/b&gt;";var g=c.shortcuts;if(g){var h;if(g["prev-days"]&amp;&amp;g["prev-days"].length&gt;0){b+='&amp;nbsp;&lt;span class="prev-days"&gt;'+fa("past");for(var i=0;i&lt;g["prev-days"].length;i++)h=g["prev-days"][i],h+=fa(g["prev-days"][i]&gt;1?"days":"day"),b+=' &lt;a href="javascript:;" shortcut="day,-'+g["prev-days"][i]+'"&gt;'+h+"&lt;/a&gt;";b+="&lt;/span&gt;"}if(g["next-days"]&amp;&amp;g["next-days"].length&gt;0){b+='&amp;nbsp;&lt;span class="next-days"&gt;'+fa("following");for(var i=0;i&lt;g["next-days"].length;i++)h=g["next-days"][i],h+=fa(g["next-days"][i]&gt;1?"days":"day"),b+=' &lt;a href="javascript:;" shortcut="day,'+g["next-days"][i]+'"&gt;'+h+"&lt;/a&gt;";b+="&lt;/span&gt;"}if(g.prev&amp;&amp;g.prev.length&gt;0){b+='&amp;nbsp;&lt;span class="prev-buttons"&gt;'+fa("previous");for(var i=0;i&lt;g.prev.length;i++)h=fa("prev-"+g.prev[i]),b+=' &lt;a href="javascript:;" shortcut="prev,'+g.prev[i]+'"&gt;'+h+"&lt;/a&gt;";b+="&lt;/span&gt;"}if(g.next&amp;&amp;g.next.length&gt;0){b+='&amp;nbsp;&lt;span class="next-buttons"&gt;'+fa("next");for(var i=0;i&lt;g.next.length;i++)h=fa("next-"+g.next[i]),b+=' &lt;a href="javascript:;" shortcut="next,'+g.next[i]+'"&gt;'+h+"&lt;/a&gt;";b+="&lt;/span&gt;"}}if(c.customShortcuts)for(var i=0;i&lt;c.customShortcuts.length;i++){var j=c.customShortcuts[i];b+='&amp;nbsp;&lt;span class="custom-shortcut"&gt;&lt;a href="javascript:;" shortcut="custom"&gt;'+j.name+"&lt;/a&gt;&lt;/span&gt;"}b+="&lt;/div&gt;"}if(c.showCustomValues&amp;&amp;(b+='&lt;div class="customValues"&gt;&lt;b&gt;'+(c.customValueLabel||fa("custom-values"))+"&lt;/b&gt;",c.customValues))for(var i=0;i&lt;c.customValues.length;i++){var k=c.customValues[i];b+='&amp;nbsp;&lt;span class="custom-value"&gt;&lt;a href="javascript:;" custom="'+k.value+'"&gt;'+k.name+"&lt;/a&gt;&lt;/span&gt;"}return b+="&lt;/div&gt;&lt;/div&gt;",a(b)}function Y(){var a="";return!0===c.autoClose&amp;&amp;(a+=" hide"),""!==c.applyBtnClass&amp;&amp;(a+=" "+c.applyBtnClass),a}function Z(){var a=c.showWeekNumbers?"&lt;th&gt;"+fa("week-number")+"&lt;/th&gt;":"";return"monday"==c.startOfWeek?a+"&lt;th&gt;"+fa("week-1")+"&lt;/th&gt;&lt;th&gt;"+fa("week-2")+"&lt;/th&gt;&lt;th&gt;"+fa("week-3")+"&lt;/th&gt;&lt;th&gt;"+fa("week-4")+"&lt;/th&gt;&lt;th&gt;"+fa("week-5")+"&lt;/th&gt;&lt;th&gt;"+fa("week-6")+"&lt;/th&gt;&lt;th&gt;"+fa("week-7")+"&lt;/th&gt;":a+"&lt;th&gt;"+fa("week-7")+"&lt;/th&gt;&lt;th&gt;"+fa("week-1")+"&lt;/th&gt;&lt;th&gt;"+fa("week-2")+"&lt;/th&gt;&lt;th&gt;"+fa("week-3")+"&lt;/th&gt;&lt;th&gt;"+fa("week-4")+"&lt;/th&gt;&lt;th&gt;"+fa("week-5")+"&lt;/th&gt;&lt;th&gt;"+fa("week-6")+"&lt;/th&gt;"}function $(a){return a=b(a),!(!c.startDate||!a.endOf("month").isBefore(c.startDate))||!(!c.endDate||!a.startOf("month").isAfter(c.endDate))}function _(){for(var a=['&lt;div class="gap-top-mask"&gt;&lt;/div&gt;&lt;div class="gap-bottom-mask"&gt;&lt;/div&gt;&lt;div class="gap-lines"&gt;'],b=0;b&lt;20;b++)a.push('&lt;div class="gap-line"&gt;&lt;div class="gap-1"&gt;&lt;/div&gt;&lt;div class="gap-2"&gt;&lt;/div&gt;&lt;div class="gap-3"&gt;&lt;/div&gt;&lt;/div&gt;');return a.push("&lt;/div&gt;"),a.join("")}function aa(){return!c.singleMonth}function ba(b,c,d){var e=a.extend(!0,{},b);a.each(c,function(a,b){var c=b(d);for(var f in c)e.hasOwnProperty(f)?e[f]+=c[f]:e[f]=c[f]});var f="";for(var g in e)e.hasOwnProperty(g)&amp;&amp;(f+=g+'="'+e[g]+'" ');return f}function ca(a){var d=[];a.setDate(1);var e=(new Date(a.getTime()-864e5),new Date),f=a.getDay();0===f&amp;&amp;"monday"===c.startOfWeek&amp;&amp;(f=7);var g,h;if(f&gt;0)for(var i=f;i&gt;0;i--){var j=new Date(a.getTime()-864e5*i);h=u(j.getTime()),c.startDate&amp;&amp;T(j,c.startDate)&lt;0&amp;&amp;(h=!1),c.endDate&amp;&amp;T(j,c.endDate)&gt;0&amp;&amp;(h=!1),d.push({date:j,type:"lastMonth",day:j.getDate(),time:j.getTime(),valid:h})}for(var k=a.getMonth(),i=0;i&lt;40;i++)g=b(a).add(i,"days").toDate(),h=u(g.getTime()),c.startDate&amp;&amp;T(g,c.startDate)&lt;0&amp;&amp;(h=!1),c.endDate&amp;&amp;T(g,c.endDate)&gt;0&amp;&amp;(h=!1),d.push({date:g,type:g.getMonth()==k?"toMonth":"nextMonth",day:g.getDate(),time:g.getTime(),valid:h});for(var l=[],m=0;m&lt;6&amp;&amp;"nextMonth"!=d[7*m].type;m++){l.push("&lt;tr&gt;");for(var j=0;j&lt;7;j++){g=d[7*m+("monday"==c.startOfWeek?j+1:j)];var n=b(g.time).format("L")==b(e).format("L");if(g.extraClass="",g.tooltip="",g.valid&amp;&amp;c.beforeShowDay&amp;&amp;"function"==typeof c.beforeShowDay){var o=c.beforeShowDay(b(g.time).toDate());g.valid=o[0],g.extraClass=o[1]||"",g.tooltip=o[2]||"",""!==g.tooltip&amp;&amp;(g.extraClass+=" has-tooltip ")}var p={time:g.time,"data-tooltip":g.tooltip,class:"day "+g.type+" "+g.extraClass+" "+(g.valid?"valid":"invalid")+" "+(n?"real-today":"")};0===j&amp;&amp;c.showWeekNumbers&amp;&amp;l.push('&lt;td&gt;&lt;div class="week-number" data-start-time="'+g.time+'"&gt;'+c.getWeekNumber(g.date)+"&lt;/div&gt;&lt;/td&gt;"),l.push("&lt;td "+ba({},c.dayTdAttrs,g)+"&gt;&lt;div "+ba(p,c.dayDivAttrs,g)+"&gt;"+da(g.time,g.day)+"&lt;/div&gt;&lt;/td&gt;")}l.push("&lt;/tr&gt;")}return l.join("")}function da(a,b){return c.showDateFilter&amp;&amp;"function"==typeof c.showDateFilter?c.showDateFilter(a,b):b}function ea(){if("auto"==c.language){var b=navigator.language?navigator.language:navigator.browserLanguage;return b?(b=b.toLowerCase(),b in a.dateRangePickerLanguages?a.dateRangePickerLanguages[b]:a.dateRangePickerLanguages.default):a.dateRangePickerLanguages.default}return c.language&amp;&amp;c.language in a.dateRangePickerLanguages?a.dateRangePickerLanguages[c.language]:a.dateRangePickerLanguages.default}function fa(b){var c=b.toLowerCase(),d=b in la?la[b]:c in la?la[c]:null,e=a.dateRangePickerLanguages.default;return null==d&amp;&amp;(d=b in e?e[b]:c in e?e[c]:""),d}function ga(){var a=c.defaultTime?c.defaultTime:new Date;return c.lookBehind?(c.startDate&amp;&amp;S(a,c.startDate)&lt;0&amp;&amp;(a=U(b(c.startDate).toDate())),c.endDate&amp;&amp;S(a,c.endDate)&gt;0&amp;&amp;(a=b(c.endDate).toDate())):(c.startDate&amp;&amp;S(a,c.startDate)&lt;0&amp;&amp;(a=b(c.startDate).toDate()),c.endDate&amp;&amp;S(U(a),c.endDate)&gt;0&amp;&amp;(a=V(b(c.endDate).toDate()))),c.singleDate&amp;&amp;(c.startDate&amp;&amp;S(a,c.startDate)&lt;0&amp;&amp;(a=b(c.startDate).toDate()),c.endDate&amp;&amp;S(a,c.endDate)&gt;0&amp;&amp;(a=b(c.endDate).toDate())),a}function ha(a){a||(a=ga()),c.lookBehind?(G(V(a),"month1"),G(a,"month2")):(G(a,"month1"),G(U(a),"month2")),c.singleDate&amp;&amp;G(a,"month1"),F(),P()}function ia(a){d(a,na[0])||ja.is(":visible")&amp;&amp;Q()}c||(c={}),c=a.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:"auto",startOfWeek:"sunday",getValue:function(){return a(this).val()},setValue:function(b){a(this).attr("readonly")||a(this).is(":disabled")||b==a(this).val()||a(this).val(b)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,showShortcuts:!1,shortcuts:{},customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:"auto",hoveringTooltip:function(a,b,c){return a&gt;1?a+" "+fa("days"):""},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function(a){return b(a).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null,monthSelect:!1,yearSelect:!1},c),c.start=!1,c.end=!1,c.startWeek=!1,c.isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints,c.isTouchDevice&amp;&amp;(c.hoveringTooltip=!1),"auto"==c.singleMonth&amp;&amp;(c.singleMonth=a(window).width()&lt;480),c.singleMonth&amp;&amp;(c.stickyMonths=!1),c.showTopbar||(c.autoClose=!0),c.startDate&amp;&amp;"string"==typeof c.startDate&amp;&amp;(c.startDate=b(c.startDate,c.format).toDate()),c.endDate&amp;&amp;"string"==typeof c.endDate&amp;&amp;(c.endDate=b(c.endDate,c.format).toDate()),c.yearSelect&amp;&amp;"boolean"==typeof c.yearSelect&amp;&amp;(c.yearSelect=function(a){return[a-5,a+5]});var ja,ka,la=ea(),ma=!1,na=this,oa=a(na).get(0);return a(this).off(".datepicker").on("click.datepicker",function(a){ja.is(":visible")||h(c.duration)}).on("change.datepicker",function(a){i()}).on("keyup.datepicker",function(){try{clearTimeout(ka)}catch(a){}ka=setTimeout(function(){i()},2e3)}),e.call(this),c.alwaysOpen&amp;&amp;h(0),a(this).data("dateRangePicker",{setStart:function(a){return"string"==typeof a&amp;&amp;(a=b(a,c.format).toDate()),c.end=!1,E(a),this},setEnd:function(a,d){var e=new Date;return e.setTime(c.start),"string"==typeof a&amp;&amp;(a=b(a,c.format).toDate()),D(e,a,d),this},setDateRange:function(a,d,e){"string"==typeof a&amp;&amp;"string"==typeof d&amp;&amp;(a=b(a,c.format).toDate(),d=b(d,c.format).toDate()),D(a,d,e)},clear:p,close:Q,open:h,redraw:R,getDatePicker:g,resetMonthsView:ha,destroy:function(){a(na).off(".datepicker"),a(na).data("dateRangePicker",""),a(na).data("date-picker-opened",null),ja.remove(),a(window).off("resize.datepicker",f),a(document).off("click.datepicker",ia)}}),a(window).on("resize.datepicker",f),this}}),function(){function a(a){return document.createElementNS(j,a)}function b(a){return(a&lt;10?"0":"")+a}function c(a){var b=++r+"";return a?a+b:b}function d(d,h){function j(a,b){var c=m.offset(),d=/^touch/.test(a.type),e=c.left+s,g=c.top+s,j=(d?a.originalEvent.touches[0]:a).pageX-e,l=(d?a.originalEvent.touches[0]:a).pageY-g,n=Math.sqrt(j*j+l*l),q=!1;if(!b||!(n&lt;t-v||n&gt;t+v)){a.preventDefault();var r=setTimeout(function(){f.addClass("clockpicker-moving")},200);k&amp;&amp;m.append(D.canvas),D.setHand(j,l,!b,!0),i.off(o).on(o,function(a){a.preventDefault();var b=/^touch/.test(a.type),c=(b?a.originalEvent.touches[0]:a).pageX-e,d=(b?a.originalEvent.touches[0]:a).pageY-g;(q||c!==j||d!==l)&amp;&amp;(q=!0,D.setHand(c,d,!1,!0))}),i.off(p).on(p,function(a){i.off(p),a.preventDefault();var c=/^touch/.test(a.type),d=(c?a.originalEvent.changedTouches[0]:a).pageX-e,k=(c?a.originalEvent.changedTouches[0]:a).pageY-g;(b||q)&amp;&amp;d===j&amp;&amp;k===l&amp;&amp;D.setHand(d,k),"hours"===D.currentView?D.toggleView("minutes",x/2):h.autoclose&amp;&amp;(D.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){D.done()},x/2)),m.prepend(L),clearTimeout(r),f.removeClass("clockpicker-moving"),i.off(o)})}}var l=g(y),m=l.find(".clockpicker-plate"),q=l.find(".clockpicker-hours"),r=l.find(".clockpicker-minutes"),z=l.find(".clockpicker-am-pm-block"),A="INPUT"===d.prop("tagName"),B=A?d:d.find("input"),C=d.find(".input-group-addon"),D=this;if(this.id=c("cp"),this.element=d,this.options=h,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=A,this.input=B,this.addon=C,this.popover=l,this.plate=m,this.hoursView=q,this.minutesView=r,this.amPmBlock=z,this.spanHours=l.find(".clockpicker-span-hours"),this.spanMinutes=l.find(".clockpicker-span-minutes"),this.spanAmPm=l.find(".clockpicker-span-am-pm"),this.amOrPm="PM",h.twelvehour){var E=['&lt;div class="clockpicker-am-pm-block"&gt;','&lt;button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button"&gt;',"AM&lt;/button&gt;",'&lt;button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button"&gt;',"PM&lt;/button&gt;","&lt;/div&gt;"].join("");g(E);g('&lt;button type="button" class="btn btn-sm btn-default clockpicker-button am-button"&gt;AM&lt;/button&gt;').on("click",function(){D.amOrPm="AM",g(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),g('&lt;button type="button" class="btn btn-sm btn-default clockpicker-button pm-button"&gt;PM&lt;/button&gt;').on("click",function(){D.amOrPm="PM",g(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)}h.autoclose||g('&lt;button type="button" class="btn btn-sm btn-default btn-block clockpicker-button"&gt;'+h.donetext+"&lt;/button&gt;").click(g.proxy(this.done,this)).appendTo(l),"top"!==h.placement&amp;&amp;"bottom"!==h.placement||"top"!==h.align&amp;&amp;"bottom"!==h.align||(h.align="left"),"left"!==h.placement&amp;&amp;"right"!==h.placement||"left"!==h.align&amp;&amp;"right"!==h.align||(h.align="top"),l.addClass(h.placement),l.addClass("clockpicker-align-"+h.align),this.spanHours.click(g.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(g.proxy(this.toggleView,this,"minutes")),B.on("focus.clockpicker click.clockpicker",g.proxy(this.show,this)),C.on("click.clockpicker",g.proxy(this.toggle,this));var F,G,H,I,J=g('&lt;div class="clockpicker-tick"&gt;&lt;/div&gt;');if(h.twelvehour)for(F=1;F&lt;13;F+=1)G=J.clone(),H=F/6*Math.PI,I=t,G.css("font-size","120%"),G.css({left:s+Math.sin(H)*I-v,top:s-Math.cos(H)*I-v}),G.html(0===F?"00":F),q.append(G),G.on(n,j);else for(F=0;F&lt;24;F+=1){G=J.clone(),H=F/6*Math.PI;var K=F&gt;0&amp;&amp;F&lt;13;I=K?u:t,G.css({left:s+Math.sin(H)*I-v,top:s-Math.cos(H)*I-v}),K&amp;&amp;G.css("font-size","120%"),G.html(0===F?"00":F),q.append(G),G.on(n,j)}for(F=0;F&lt;60;F+=5)G=J.clone(),H=F/30*Math.PI,G.css({left:s+Math.sin(H)*t-v,top:s-Math.cos(H)*t-v}),G.css("font-size","120%"),G.html(b(F)),r.append(G),G.on(n,j);if(m.on(n,function(a){0===g(a.target).closest(".clockpicker-tick").length&amp;&amp;j(a,!0)}),k){var L=l.find(".clockpicker-canvas"),M=a("svg");M.setAttribute("class","clockpicker-svg"),M.setAttribute("width",w),M.setAttribute("height",w);var N=a("g");N.setAttribute("transform","translate("+s+","+s+")");var O=a("circle");O.setAttribute("class","clockpicker-canvas-bearing"),O.setAttribute("cx",0),O.setAttribute("cy",0),O.setAttribute("r",2);var P=a("line");P.setAttribute("x1",0),P.setAttribute("y1",0);var Q=a("circle");Q.setAttribute("class","clockpicker-canvas-bg"),Q.setAttribute("r",v);var R=a("circle");R.setAttribute("class","clockpicker-canvas-fg"),R.setAttribute("r",3.5),N.appendChild(P),N.appendChild(Q),N.appendChild(R),N.appendChild(O),M.appendChild(N),L.append(M),this.hand=P,this.bg=Q,this.fg=R,this.bearing=O,this.g=N,this.canvas=L}e(this.options.init,this)}function e(a,b){a&amp;&amp;"function"==typeof a&amp;&amp;a(b)}var f,g=window.jQuery,h=g(window),i=g(document),j="http://www.w3.org/2000/svg",k="SVGAngle"in window&amp;&amp;function(){var a,b=document.createElement("div");return b.innerHTML="&lt;svg/&gt;",a=(b.firstChild&amp;&amp;b.firstChild.namespaceURI)==j,b.innerHTML="",a}(),l=function(){var a=document.createElement("div").style;return"transition"in a||"WebkitTransition"in a||"MozTransition"in a||"msTransition"in a||"OTransition"in a}(),m="ontouchstart"in window,n="mousedown"+(m?" touchstart":""),o="mousemove.clockpicker"+(m?" touchmove.clockpicker":""),p="mouseup.clockpicker"+(m?" touchend.clockpicker":""),q=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,r=0,s=100,t=80,u=54,v=13,w=2*s,x=l?350:1,y=['&lt;div class="popover clockpicker-popover"&gt;','&lt;div class="arrow"&gt;&lt;/div&gt;','&lt;div class="popover-title"&gt;','&lt;span class="clockpicker-span-hours text-primary"&gt;&lt;/span&gt;'," : ",'&lt;span class="clockpicker-span-minutes"&gt;&lt;/span&gt;','&lt;span class="clockpicker-span-am-pm"&gt;&lt;/span&gt;',"&lt;/div&gt;",'&lt;div class="popover-content"&gt;','&lt;div class="clockpicker-plate"&gt;','&lt;div class="clockpicker-canvas"&gt;&lt;/div&gt;','&lt;div class="clockpicker-dial clockpicker-hours"&gt;&lt;/div&gt;','&lt;div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"&gt;&lt;/div&gt;',"&lt;/div&gt;",'&lt;span class="clockpicker-am-pm-block"&gt;',"&lt;/span&gt;","&lt;/div&gt;","&lt;/div&gt;"].join("");d.DEFAULTS={default:"",fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:!1,twelvehour:!1,vibrate:!0},d.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},d.prototype.locate=function(){var a=this.element,b=this.popover,c=a.offset(),d=a.outerWidth(),e=a.outerHeight(),f=this.options.placement,g=this.options.align,h={};switch(b.show(),f){case"bottom":h.top=c.top+e;break;case"right":h.left=c.left+d;break;case"top":h.top=c.top-b.outerHeight();break;case"left":h.left=c.left-b.outerWidth()}switch(g){case"left":h.left=c.left;break;case"right":h.left=c.left+d-b.outerWidth();break;case"top":h.top=c.top;break;case"bottom":h.top=c.top+e-b.outerHeight()}b.css(h)},d.prototype.show=function(a){if(!this.isShown){e(this.options.beforeShow);var c=this;this.isAppended||(f=this.options.parentEl?g(this.options.parentEl).append(this.popover):g(document.body).append(this.popover),h.on("resize.clockpicker"+this.id,function(){c.isShown&amp;&amp;c.locate()}),this.isAppended=!0);var d=((this.input.prop("value")||this.options.default||"")+"").split(":");if("now"===d[0]){var j=new Date(+new Date+this.options.fromnow);d=[j.getHours(),j.getMinutes()]}this.hours=+d[0]||0,this.minutes=+d[1]||0,this.spanHours.html(b(this.hours)),this.spanMinutes.html(b(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,i.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(a){var b=g(a.target);(b.hasClass("closeButton")||b.hasClass("confirmBTN"))&amp;&amp;0===b.closest(c.popover).length&amp;&amp;0===b.closest(c.addon).length&amp;&amp;0===b.closest(c.input).length&amp;&amp;(g(".kore-action-sheet").animate({height:"toggle"}),g(".kore-action-sheet").addClass("hide"),c.hide())}),i.on("keyup.clockpicker."+this.id,function(a){27===a.keyCode&amp;&amp;c.hide()}),e(this.options.afterShow)}},d.prototype.hide=function(){e(this.options.beforeHide),this.isShown=!1,i.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),i.off("keyup.clockpicker."+this.id),this.popover.hide(),e(this.options.afterHide)},d.prototype.toggleView=function(a,b){var c=!1;"minutes"===a&amp;&amp;"visible"===g(this.hoursView).css("visibility")&amp;&amp;(e(this.options.beforeHourSelect),c=!0);var d="hours"===a,f=d?this.hoursView:this.minutesView,h=d?this.minutesView:this.hoursView;this.currentView=a,this.spanHours.toggleClass("text-primary",d),this.spanMinutes.toggleClass("text-primary",!d),h.addClass("clockpicker-dial-out"),f.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(b),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){h.css("visibility","hidden")},x),c&amp;&amp;e(this.options.afterHourSelect)},d.prototype.resetClock=function(a){var b=this.currentView,c=this[b],d="hours"===b,e=Math.PI/(d?6:30),f=c*e,g=d&amp;&amp;c&gt;0&amp;&amp;c&lt;13?u:t,h=Math.sin(f)*g,i=-Math.cos(f)*g,j=this;k&amp;&amp;a?(j.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){j.canvas.removeClass("clockpicker-canvas-out"),j.setHand(h,i)},a)):this.setHand(h,i)},d.prototype.setHand=function(a,c,d,e){var f,h=Math.atan2(a,-c),i="hours"===this.currentView,j=Math.PI/(i||d?6:30),l=Math.sqrt(a*a+c*c),m=this.options,n=i&amp;&amp;l&lt;(t+u)/2,o=n?u:t;if(m.twelvehour&amp;&amp;(o=t),h&lt;0&amp;&amp;(h=2*Math.PI+h),f=Math.round(h/j),h=f*j,m.twelvehour?i?0===f&amp;&amp;(f=12):(d&amp;&amp;(f*=5),60===f&amp;&amp;(f=0)):i?(12===f&amp;&amp;(f=0),f=n?0===f?12:f:0===f?0:f+12):(d&amp;&amp;(f*=5),60===f&amp;&amp;(f=0)),this[this.currentView]!==f&amp;&amp;q&amp;&amp;this.options.vibrate&amp;&amp;(this.vibrateTimer||(navigator[q](10),this.vibrateTimer=setTimeout(g.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=f,this[i?"spanHours":"spanMinutes"].html(b(f)),!k)return void this[i?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var a=g(this);a.toggleClass("active",f===+a.html())});e||!i&amp;&amp;f%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));var p=Math.sin(h)*o,r=-Math.cos(h)*o;this.hand.setAttribute("x2",p),this.hand.setAttribute("y2",r),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",r),this.fg.setAttribute("cx",p),this.fg.setAttribute("cy",r)},d.prototype.done=function(){e(this.options.beforeDone,this),this.hide();var a=this.input.prop("value"),c=b(this.hours)+":"+b(this.minutes);this.options.twelvehour&amp;&amp;(c+=this.amOrPm),this.input.prop("value",c),c!==a&amp;&amp;(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&amp;&amp;this.input.trigger("blur"),e(this.options.afterDone,this)},d.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&amp;&amp;this.hide(),this.isAppended&amp;&amp;(h.off("resize.clockpicker"+this.id),this.popover.remove())},g.fn.clockpicker=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=g(this),e=c.data("clockpicker");if(e)"function"==typeof e[a]&amp;&amp;e[a].apply(e,b);else{var f=g.extend({},d.DEFAULTS,c.data(),"object"==typeof a&amp;&amp;a);c.data("clockpicker",new d(c,f))}})}}(),function(a){function b(a){var b={dateRangeConfig:{alwaysOpen:!0,singleMonth:!0,showShortcuts:!1,showTopbar:!1,format:"DD-MM-YYYY",startDate:"",endDate:"",inline:!0,selectForward:!0},daterangepicker:{title:"Please Choose"},dateConfig:{alwaysOpen:!0,singleMonth:!0,singleDate:!0,showShortcuts:!1,showTopbar:!1,format:"MM-DD-YYYY",startDate:"",endDate:"",inline:!0},datepicker:{title:"Please Choose"},clockPicker:{title:""}},c=[];c.push(a),c.push(b),this.mainConfig=c,this.pickerSubconfig=b,this.chatWindowInstance=c[0].chatWindowInstance,this.chatConfig=c[1];var d=c[0].chatConfig.chatContainer;this._korePickers=d}function c(a){return new Date(a).getMonth()}function d(b){var d=["January","February","March","April","May","June","July","August","September","October","November","December"],e=a(".date-picker-wrapper .month-wrapper .month1 .month-name .month-element")[0].innerText,f=c(b.dateConfig.endDate);b.dateConfig.showdueDate&amp;&amp;d[f].toLowerCase()===e.toLowerCase()&amp;&amp;(a(".month-wrapper .day.toMonth.valid").last().css({"background-color":"#e94848"}),a(".month-wrapper .day.toMonth.valid.tmp").last().css({"background-color":"#e94848"}))}b.prototype.showTaskMenuItems=function(a){return a},b.prototype.showRadioOptionMenuItems=function(a){return{radioOptions:[{title:"Shanmuga",value:"1234 4567 5678 6789",postback:{title:"Transaction Successful",value:"Payment Successful"}},{title:"Madhu",value:"1234 4567 5678 9876",postback:{title:"radioOptionDetails",value:"AccountData"}},{title:"Santhosh",value:"4678 1234 5678 9876",postback:{title:"Get my leave balance",value:"leaveintent"}},{title:"Manjula",value:"9876 1234 4567 5678",postback:{title:"Transaction Successful",value:"leaveintent"}},{title:"Ravi Kiran",value:"8976 5677 7946 2345",postback:{title:"radioOptionDetails",value:"leaveintent"}}]}},b.prototype.init=function(a){a=this.mainConfig,chatWindowInstance=this.chatWindowInstance,chatWindowInstance.config.pickersConfig.showDateRangePickerIcon&amp;&amp;(this.showDateRangeIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkRangeCalender.calenderBtn",function(c){b.prototype.showDateRangePicker(a)})),chatWindowInstance.config.pickersConfig.showDatePickerIcon&amp;&amp;(this.showDateIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkCalender.calenderBtn",function(c){b.prototype.showDatePicker(a)})),chatWindowInstance.config.pickersConfig.showClockPickerIcon&amp;&amp;(this.showClockIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkClock.clockBtn",function(c){b.prototype.showClockPicker(a)})),chatWindowInstance.config.pickersConfig.showradioOptionMenuPickerIcon&amp;&amp;(this.showAccountIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkAccount.accountBtn",function(c){b.prototype.showradioOptionsPicker(a)})),chatWindowInstance.config.pickersConfig.showTaskMenuPickerIcon&amp;&amp;(this.addTaskIconToFooter(),chatWindowInstance.config.chatContainer.on("click",".sdkMenu.menuBtn",function(c){b.prototype.showTaskPicker(a)}))},b.prototype.addSlider=function(){a(".kore-chat-window").remove(".kore-action-sheet"),a(".kore-chat-window").append('&lt;div class="kore-action-sheet hide"&gt;    &lt;div class="actionSheetContainer"&gt;&lt;/div&gt;    &lt;/div&gt;')},b.prototype.bottomSlider=function(b,c){a(".kore-action-sheet").animate({height:"toggle"}),"hide"==b?(a(".kore-action-sheet").innerHTML="",a(".kore-action-sheet").addClass("hide")):(a(".kore-action-sheet").removeClass("hide"),a(".kore-action-sheet .actionSheetContainer").empty(),setTimeout(function(){a(".kore-action-sheet .actionSheetContainer").append(c)},200))},b.prototype.showradioOptionsPicker=function(a){_korePickers.find(".kore-action-sheet").length&amp;&amp;(_korePickers.find(".radioOptionsPickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),accountData=this.showRadioOptionMenuItems(),_korePickers.find(".kore-action-sheet").append(this.getradioOptionsPickerContainer()),this.addAccountIconToFooter(),_korePickers.find(".radioOptionsPickerContainer").append(this.getradioOptionsPickerTemplate(accountData)),this.addradioOptionsMenuListener(a)},b.prototype.getradioOptionsPickerTemplate=function(b){var c=a('&lt;div class="radioOptionMenuPicker"&gt;&lt;/div&gt;');return b.radioOptions.forEach(function(b){var d=a('&lt;label class="radioButton"&gt;&lt;div class="btnAccount"&gt;      &lt;div class="radioValue"&gt;         &lt;input type="radio" id="selectedValue" name="radio"&gt;         &lt;span class="checkmark"&gt;&lt;/span&gt;         &lt;/div&gt;         &lt;span class="radioOptionDetails"&gt;            &lt;span class="radioOptionName" title="'+b.title+'" data-value="'+b.postback.value+'" data-title="'+b.postback.title+'"&gt;'+b.title+'&lt;/span&gt;            &lt;div class="radioOptionValue" title="'+b.value+'"&gt;'+b.value+"&lt;/div&gt;         &lt;/span&gt;    &lt;/div&gt; &lt;/label&gt;");c.append(d)}),c},b.prototype.addradioOptionsMenuListener=function(b){var c,d=this;_korePickers.find(".radioOptionsPickerContainer").removeClass("hide"),_korePickers.find(".TaskPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".clockPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find(".kore-action-sheet  .datePickerContainer").addClass("hide"),_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"none"}),d.bottomSlider("show",_korePickers.find(".radioOptionsPickerContainer")),setTimeout(function(){_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"block"})},300),_korePickers.find(".btnAccount").click(function(b){c=a(b.currentTarget),c.find(".checkmark").addClass("selected")}),_korePickers.find(".radioOptionsPickerContainer .confirmBTN").click(function(e){var f=c.find(".radioOptionName").attr("data-value"),g=c.find(".radioOptionName").attr("data-title");b[0].chatWindowInstance.sendMessage(a(".chatInputBox").text(f),g),_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"block"}),d.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".radioOptionsPickerContainer .closePicker").click(function(){_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"none"}),d.bottomSlider("hide"),setTimeout(function(){_korePickers.find(".radioOptionsPickerContainer .confirmBTN").css({display:"block"})},100),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.getAccountIconTemplate=function(){return'&lt;div class="sdkFooterIcon account"&gt;     &lt;button type="button"  class="sdkAccount accountBtn" title="AccountMenu"&gt;          &lt;i class="accountIcon"&gt;&lt;/i&gt;     &lt;/button&gt;     &lt;/div&gt;'},b.prototype.addAccountIconToFooter=function(){_korePickers.find(".radioOptionsPickerContainer").append(this.getAccountIconTemplate)},b.prototype.getradioOptionsPickerContainer=function(){return'&lt;div class="radioOptionsPickerContainer hide"&gt;    &lt;div class="radioOptionMenuHeader"&gt;       &lt;button class="closePicker" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;       &lt;label class="radioOptionHeading"&gt;Select an Account&lt;/label&gt;    &lt;/div&gt;    &lt;div class="confirmBTN"&gt;Confirm&lt;/div&gt;    &lt;/div&gt;'},b.prototype.showAccountIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getAccountIconTemplate)},b.prototype.showTaskPicker=function(a){actionsData=this.showTaskMenuItems(window.KoreSDK.chatConfig.botOptions.hamburgermenuData),_korePickers.find(".kore-action-sheet").length&amp;&amp;(_korePickers.find(".TaskPickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getTaskPickerContainer(actionsData)),_korePickers.find(".TaskPickerContainer").append(this.getTaskPickerTemplate(actionsData)),this.addTaskMenuListener(a)},b.prototype.getTaskPickerTemplate=function(b){var c=a('&lt;div class="taskMenuPicker"&gt;&lt;/div&gt;');if(b&amp;&amp;b.tasks){b.tasks.forEach(function(b){var d=a('&lt;div class="btnTask"&gt;            &lt;span class="taskName" data-title-response="'+b.postback.buttonResponse+'" data-value="'+b.postback.value+'" data-title="'+b.postback.title+'" title="'+b.title+'"&gt;'+b.title+'&lt;/span&gt;            &lt;div class="imageIcon"&gt; &lt;img src="'+b.icon+'" class="displayIcon"&gt;&lt;/div&gt;            &lt;/div&gt;');c.append(d)})}return c},b.prototype.addTaskMenuListener=function(b){var c=this;_korePickers.find(".TaskPickerContainer .searchInput").hide(),_korePickers.find(".TaskPickerContainer").removeClass("hide"),_korePickers.find(".radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".clockPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find(".kore-action-sheet  .datePickerContainer").addClass("hide"),c.bottomSlider("show",_korePickers.find(".TaskPickerContainer")),_korePickers.find(".TaskPickerContainer .btnTask").click(function(d){var e=a(d.currentTarget).find(".taskName").text();_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(e);var f=a(d.currentTarget).find(".taskName").attr("data-value"),g=(a(d.currentTarget).find(".taskName").attr("data-title"),a(d.currentTarget).find(".taskName").attr("data-title-response"));b[0].chatWindowInstance.sendMessage(a(".chatInputBox").text(f),g),c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".TaskPickerContainer .closeSheet").click(function(){c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.getTaskIconTemplate=function(){return'&lt;div class="sdkFooterIcon menu"&gt;     &lt;button type="button"  class="sdkMenu menuBtn" title="TaskMenu"&gt;          &lt;i class="menuIcon"&gt;&lt;/i&gt;     &lt;/button&gt;     &lt;/div&gt;'},b.prototype.addTaskIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getTaskIconTemplate)},b.prototype.getTaskPickerContainer=function(a){return'&lt;div class="TaskPickerContainer hide"&gt;    &lt;div class="taskMenuHeader"&gt;         &lt;button class="closeSheet" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;          &lt;input class="searchInput" placeholder="Write a reply"&gt;       &lt;label class="taskHeading"&gt; '+a.heading+" &lt;/label&gt;    &lt;/div&gt;"},b.prototype.showDateRangePicker=function(b){_korePickers.find(".kore-action-sheet").length&amp;&amp;(_korePickers.find(".kore-action-sheet .dateRangePickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getdateRangePickerContainer),this.addDateRangeIconToFooter();var c={alwaysOpen:!0,singleMonth:!0,showShortcuts:!1,showTopbar:!1,format:b[1].dateRangeConfig.format,startDate:b[1].dateRangeConfig.startDate,endDate:b[1].dateRangeConfig.endDate,inline:!0,container:_korePickers.find(".kore-action-sheet .dateRangePickerContainer")};a.extend(b[1].dateRangeConfig,c),daterangeInput=_korePickers.find(".kore-action-sheet .dateRangePickerContainer #rangeCalenderBtn").dateRangePicker(c),this.addDateRangeListener(b)},b.prototype.addDateRangeListener=function(b){var c=this;this.addClickEventRangeCalender(b);var d,e,f=null,g=null,h=null,i=null;daterangeInput.bind("datepicker-first-date-selected",function(b,c){a(".day.toMonth.valid").removeClass("selectedDefault");var e=null;d=c.date1;var e=moment(d).format("YYYY"),g=moment(d).format("ddd,MMM DD");h=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartYear").html(e),f=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartMonth").html(g),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html("Select"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").css({opacity:"0"})}),daterangeInput.bind("datepicker-change",function(a,b){var c=null;_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").css({opacity:"1"}),e=b.date2;var c=moment(e).format("YYYY");i=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").html(c);var d=moment(e).format("ddd,MMM DD");g=_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html(d)}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .confirmBTN").click(function(){if(null!==f&amp;&amp;null==g)_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html("Select");else if(null!==f&amp;&amp;null!==g){if(b[1].dateRangeConfig.expectedFormat)var h=b[1].dateRangeConfig.expectedFormat;else var h="MM-DD-YYYY";if(b[1].dateRangeConfig.dateSeperator)var i=b[1].dateRangeConfig.dateSeperator;else var i="to";var j=moment(d).format(h)||moment(),k=moment(e).format(h)||moment(),l=j+" "+i+" "+k;_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(l);var m=a.Event("keydown");m.keyCode=13,_korePickers.find(".footerContainer.pos-relative .chatInputBox").trigger(m),c.bottomSlider("hide"),daterangeInput.data("dateRangePicker").clear(),daterangeInput.data("dateRangePicker").resetMonthsView(),_korePickers.find(".kore-action-sheet").remove()}}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .close-button").click(function(){c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.addClickEventRangeCalender=function(a){var b=this;_korePickers.find(".kore-action-sheet .datePickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .clockPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .TaskPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find(".kore-action-sheet .dateRangePickerContainer #rangeCalenderBtn").data("dateRangePicker").open(),_korePickers.find(".cancelBtn").hide(),_korePickers.find(".drp-selected").hide(),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartMonth").html(moment().format("ddd,MMM DD")),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndMonth").html(moment().format("ddd,MMM DD")),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showStartdate .showStartYear").html((new Date).getFullYear()),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .showEnddate .showEndYear").html((new Date).getFullYear()),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").removeClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .date-picker-wrapper").css({border:"0px","background-color":"white"}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .month-wrapper").css({border:"0px"}),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .headerCalendar .choose").html(a[1].daterangepicker.title),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .date-picker-wrapper .month-wrapper .real-today").addClass("first-date-selected"),b.bottomSlider("show",_korePickers.find(".dateRangePickerContainer")),_korePickers.find(".kore-action-sheet .dateRangePickerContainer .confirmBTN").css({display:"block"})},b.prototype.getDateRangeIconTemplate=function(){return'&lt;div class="sdkFooterIcon rangeCalender"&gt;                     &lt;button name="dates" class="sdkRangeCalender calenderBtn" title="RangeCalender"&gt;                         &lt;i class="Rangecalender"&gt;&lt;/i&gt;                     &lt;/button&gt;                 &lt;/div&gt;'},b.prototype.addDateRangeIconTemplate=function(){return'&lt;div id="rangeCalenderBtn"&gt;    &lt;/div&gt;'},b.prototype.showDateRangeIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getDateRangeIconTemplate)},b.prototype.addDateRangeIconToFooter=function(){_korePickers.find(".kore-action-sheet .dateRangePickerContainer").append(this.addDateRangeIconTemplate)},b.prototype.getdateRangePickerContainer=function(){return'&lt;div class="dateRangePickerContainer hide"&gt;                &lt;div class="headerCalendar"&gt;                    &lt;span class="choose"&gt;&lt;/span&gt;                    &lt;button class="close-button" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;                &lt;/div&gt;                &lt;div class="showDatevalues"&gt;                    &lt;div class="showStartdate"&gt;                        &lt;div class="showStartYear"&gt;&lt;/div&gt;                        &lt;div class="showStartMonth"&gt;&lt;/div&gt;                    &lt;/div&gt;                    &lt;div class="showEnddate"&gt;                        &lt;div class="showEndYear"&gt;&lt;/div&gt;                        &lt;div class="showEndMonth"&gt;&lt;/div&gt;                   &lt;/div&gt;                &lt;/div&gt;               &lt;div class="confirmBTN"&gt;Confirm&lt;/div&gt;           &lt;/div&gt;'},b.prototype.showDatePicker=function(b){_korePickers.find(".kore-action-sheet").length&amp;&amp;(_korePickers.find(".kore-action-sheet  .datePickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getdatePickerContainer),this.addDateIconToFooter();var c={alwaysOpen:!0,singleMonth:!0,showShortcuts:!1,singleDate:!0,showTopbar:!1,format:b[1].dateConfig.format,startDate:b[1].dateConfig.startDate,endDate:b[1].dateConfig.endDate,inline:!0,container:_korePickers.find(".kore-action-sheet .datePickerContainer")};a.extend(c,b[1].dateConfig),daterangeInput=_korePickers.find(".kore-action-sheet .datePickerContainer #calender").dateRangePicker(c),this.addDateListener(b)},b.prototype.addDateListener=function(b){var c=this;this.addClickEventCalender(b);var d;daterangeInput.bind("datepicker-first-date-selected",function(b,c){a(".day.toMonth.valid").removeClass("selectedDefault");var e=null;d=c.date1;var e=moment(d).format("YYYY"),f=moment(d).format("ddd,MMM DD");showStartYearValue=_korePickers.find(".kore-action-sheet .datePickerContainer .showStartdate .showStartYear").html(e),showStartDateValue=_korePickers.find(".kore-action-sheet .datePickerContainer .showStartdate .showStartMonth").html(f)}),_korePickers.find(".kore-action-sheet .datePickerContainer .confirmBTN").click(function(){var b=moment(d).format("MMMM Do, YYYY")||moment(),e=b;_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(e);var f=a.Event("keydown");f.keyCode=13,_korePickers.find(".footerContainer.pos-relative .chatInputBox").trigger(f),c.bottomSlider("hide"),daterangeInput.data("dateRangePicker").clear(),daterangeInput.data("dateRangePicker").resetMonthsView(),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".kore-action-sheet .datePickerContainer .close-button").click(function(){c.bottomSlider("hide"),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.dateHighlights=function(){return'&lt;div class="datePickerHighlights"&gt;    &lt;div class="paymentMain"&gt;         &lt;span class="paymentIcon"&gt;&lt;/span&gt;         &lt;span class="paymentDue"&gt;&lt;/span&gt;    &lt;/div&gt;    &lt;/div&gt;'},b.prototype.addClickEventCalender=function(b){var c=this;_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .clockPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .TaskPickerContainer").addClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),_korePickers.find("#calender").data("dateRangePicker").open(),b[1].dateConfig.showdueDate&amp;&amp;(a(".kore-chat-window .kore-action-sheet").css({height:"485px"}),a(".datePickerContainer").append(this.dateHighlights)),a(".selectedMain").insertAfter(".date-picker-wrapper.single-date"),a(".datePickerHighlights").insertAfter(".date-picker-wrapper.single-date"),b[1].dateConfig.startDate&amp;&amp;(a(".day.toMonth.valid").first().addClass("selectedDefault"),a(".day.toMonth.invalid.real-today").css({"background-color":"#FFFFFF"})),d(b[1]),a(".month-wrapper .next").click(function(){d(b[1])});moment().format("MM-DD-YYYY");_korePickers.find(".cancelBtn").hide(),_korePickers.find(".drp-selected").hide(),_korePickers.find(".kore-action-sheet .datePickerContainer  .showStartdate .showStartMonth").html(moment().format("ddd,MMM DD")),_korePickers.find(".kore-action-sheet .datePickerContainer .showStartdate .showStartYear").html((new Date).getFullYear()),_korePickers.find(".kore-action-sheet  .datePickerContainer").removeClass("hide"),_korePickers.find(".kore-action-sheet  .datePickerContainer .date-picker-wrapper").css({border:"0px","background-color":"white"}),_korePickers.find(".kore-action-sheet  .datePickerContainer .month-wrapper").css({border:"0px"}),_korePickers.find(".kore-action-sheet .datePickerContainer  .headerCalendar .choose").html(b[1].datepicker.title),a(".datePickerContainer .selectedDate").html(b[1].dateConfig.selectedDate),a(".datePickerContainer .datePickerHighlights .paymentDue").html(b[1].dateConfig.paymentDue),_korePickers.find(".kore-action-sheet .datePickerContainer  .confirmBTN").css({display:"none"}),c.bottomSlider("show",_korePickers.find(".datePickerContainer")),setTimeout(function(){_korePickers.find(".kore-action-sheet .datePickerContainer  .confirmBTN").css({display:"block"})},300)},b.prototype.getDateIconTemplate=function(){return'&lt;div class="sdkFooterIcon singleCalender"&gt;                     &lt;button name="dates" class="sdkCalender calenderBtn" title="Calender"&gt;                         &lt;i class="calender"&gt;&lt;/i&gt;                     &lt;/button&gt;                 &lt;/div&gt;'},b.prototype.addDateIconTemplate=function(){return'&lt;div id="calender"&gt;    &lt;/div&gt;'},b.prototype.showDateIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getDateIconTemplate)},b.prototype.addDateIconToFooter=function(){_korePickers.find(".kore-action-sheet  .datePickerContainer").append(this.addDateIconTemplate)},b.prototype.getdatePickerContainer=function(){return'&lt;div class="datePickerContainer hide"&gt;                &lt;div class="headerCalendar"&gt;                    &lt;span class="choose"&gt;&lt;/span&gt;                    &lt;button class="close-button" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;                &lt;/div&gt;                &lt;div class="showDatevalues"&gt;                    &lt;div class="showStartdate"&gt;                        &lt;div class="showStartYear"&gt;&lt;/div&gt;                        &lt;div class="showStartMonth"&gt;&lt;/div&gt;                    &lt;/div&gt;                    &lt;div class="showEnddate"&gt;                        &lt;div class="showEndYear"&gt;&lt;/div&gt;                        &lt;div class="showEndMonth"&gt;&lt;/div&gt;                   &lt;/div&gt;                &lt;/div&gt;               &lt;div class="confirmBTN"&gt;Confirm&lt;/div&gt;               &lt;div class="selectedMain"&gt;                    &lt;span class="selectedIcon"&gt;&lt;/span&gt;                    &lt;span class="selectedDate"&gt;&lt;/span&gt;                &lt;/div&gt;           &lt;/div&gt;'},b.prototype.showClockPicker=function(b,c){_korePickers.find(".clockPickerContainer").length&amp;&amp;(_korePickers.find(".clockPickerContainer").remove(),_korePickers.find(".kore-action-sheet").remove()),this.addSlider(),_korePickers.find(".kore-action-sheet").append(this.getclockPickerContainer),this.addClockIconToFooter();var d=a("#clockPickerInput");this.input=d,d.clockpicker({donetext:"Done",placement:"top",vibrate:!1,twelvehour:!0,parentEl:".clockPickerContainer",afterDone:function(b){var c=b.hours,d=b.minutes;d&lt;10&amp;&amp;(d="0"+d);var e=b.amOrPm,f=c+":"+d+" "+e;_korePickers.find(".footerContainer.pos-relative .chatInputBox").text(f);var g=a.Event("keydown");g.keyCode=13,_korePickers.find(".footerContainer.pos-relative .chatInputBox").trigger(g)}}),this.addClockListener(b)},b.prototype.addClickEventClock=function(a){var b=this.input,c=_korePickers.find("#clockPickerInput").data("clockpicker");c.amOrPm="AM",c.options.default="12:00",_korePickers.find(".form-control").hide(),_korePickers.find(".kore-action-sheet  .datePickerContainer").addClass("hide"),_korePickers.find(".kore-action-sheet .dateRangePickerContainer").addClass("hide"),_korePickers.find(".radioOptionsPickerContainer").addClass("hide"),_korePickers.find(".TaskPickerContainer").addClass("hide"),_korePickers.find(".clockPickerContainer").removeClass("hide"),_korePickers.find(".list-template-sheet").hide(),_korePickers.find(".listTmplContent.advancedMultiSelect").hide(),b.clockpicker("show").clockpicker("toggleView","hours"),a[1].clockPicker.title?_korePickers.find(".kore-action-sheet .clockPickerContainer .headerClock .choose").html(a[1].clockPicker.title):_korePickers.find(".kore-action-sheet .clockPickerContainer .headerClock .choose").html("Please Choose"),_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"none"}),setTimeout(function(){_korePickers.find(".kore-action-sheet").animate({height:"toggle"}),_korePickers.find(".kore-action-sheet").removeClass("hide"),setTimeout(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"block"})},300)},100),_korePickers.find(".btn.btn-sm.btn-default.btn-block.clockpicker-button").hide(),setTimeout(function(){_korePickers.find(".kore-action-sheet .clockPickerContainer .clockpicker-popover").css({display:"block",top:"75px ",left:"80.5px"}),_korePickers.find(".kore-action-sheet .clockPickerContainer .clockpicker-popover .clockpicker-plate").css({"margin-left":"25px"}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").css({opacity:"0.4"})},0)},b.prototype.addClockListener=function(a){this.addClickEventClock(a),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.am-button").click(function(){_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").css({opacity:"0.4"}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.am-button").css({opacity:"1"})}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").click(function(){_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.am-button").css({opacity:"0.4"}),_korePickers.find(".btn.btn-sm.btn-default.clockpicker-button.pm-button").css({opacity:"1"})}),_korePickers.find(".clockPickerContainer .confirmBTN").click(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"block"}),_korePickers.find(".btn.btn-sm.btn-default.btn-block.clockpicker-button").trigger("click"),_korePickers.find(".kore-action-sheet").hide(),_korePickers.find(".kore-action-sheet").addClass("hide"),_korePickers.find(".kore-action-sheet").remove()}),_korePickers.find(".clockPickerContainer .closeButton").click(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"none"}),setTimeout(function(){_korePickers.find(".kore-action-sheet").animate({height:"toggle"}),_korePickers.find(".kore-action-sheet").addClass("hide"),setTimeout(function(){_korePickers.find(".clockPickerContainer .confirmBTN").css({display:"block"})},100)},100),_korePickers.find(".kore-action-sheet").remove()})},b.prototype.getClockIconTemplate=function(){return'&lt;div class="sdkFooterIcon clock"&gt;                    &lt;button type="button"  class="sdkClock clockBtn" title="Clock"&gt;                         &lt;i class="clock"&gt;&lt;/i&gt;                    &lt;/button&gt;                &lt;/div&gt;'},b.prototype.addClockIconToFooter=function(){_korePickers.find(".clockPickerContainer").append(this.getClockIconTemplate)},b.prototype.showClockIconToFooter=function(){_korePickers=this._korePickers,_korePickers.find(".footerContainer").append(this.getClockIconTemplate)},b.prototype.getclockPickerContainer=function(){return'&lt;div class="clockPickerContainer hide"&gt;                &lt;div class="headerClock"&gt;                    &lt;span class="choose"&gt;&lt;/span&gt;                    &lt;button class="closeButton" title="Close"&gt;&lt;img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjMgKDY3Mjk3KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5jbG9zZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM0NC4wMDAwMDAsIC0yMjkuMDAwMDAwKSIgZmlsbD0iIzhBOTU5RiI+CiAgICAgICAgICAgIDxnIGlkPSJjbG9zZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgMjI5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlNoYXBlIiBwb2ludHM9IjE0IDEuNCAxMi42IDAgNyA1LjYgMS40IDAgMCAxLjQgNS42IDcgMCAxMi42IDEuNCAxNCA3IDguNCAxMi42IDE0IDE0IDEyLjYgOC40IDciPjwvcG9seWdvbj4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"&gt;&lt;/button&gt;                &lt;/div&gt;                &lt;input class="form-control" id="clockPickerInput" value=""&gt;                &lt;div class="confirmBTN"&gt;Confirm&lt;/div&gt;            &lt;/div&gt;'},window.KorePickers=b}($);]]&gt;&lt;/script&gt;&lt;script_name&gt;kore-ai-sdk4.min.js&lt;/script_name&gt;&lt;sys_class_name&gt;sys_ui_script&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2024-01-02 07:28:33&lt;/sys_created_on&gt;&lt;sys_id&gt;acbc8ea4972b75109b137076f053af0c&lt;/sys_id&gt;&lt;sys_mod_count&gt;18&lt;/sys_mod_count&gt;&lt;sys_name&gt;x_831378_kore_ai_0.kore-ai-sdk4.min.js&lt;/sys_name&gt;&lt;sys_package display_value="IT Assist" source="x_831378_kore_ai_0"&gt;5db40dbc2f21111051c859a72799b60c&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="IT Assist"&gt;5db40dbc2f21111051c859a72799b60c&lt;/sys_scope&gt;&lt;sys_update_name&gt;sys_ui_script_acbc8ea4972b75109b137076f053af0c&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2024-02-21 10:57:21&lt;/sys_updated_on&gt;&lt;ui_type&gt;0&lt;/ui_type&gt;&lt;use_scoped_format&gt;false&lt;/use_scoped_format&gt;&lt;/sys_ui_script&gt;&lt;/record_update&gt;</payload>
        <payload_hash>288076593</payload_hash>
        <record_name>x_831378_kore_ai_0.kore-ai-sdk4.min.js</record_name>
        <reverted_from/>
        <source>79b20a47970231109b137076f053af13</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-02-21 10:57:22</sys_created_on>
        <sys_id>e71c90b49720c2109b137076f053af3a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>18dcb501ec80000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-02-21 10:57:22</sys_updated_on>
        <type>UI Script</type>
        <update_guid>ef1c90b4b820c210e46645aca2716e39</update_guid>
        <update_guid_history>ef1c90b4b820c210e46645aca2716e39:288076593,71d910b47f20c210b0cce29b76f61b8d:1355931822,0e08dcf07820c210b6182d5b161d6e46:-835437537,0a66c070a8ec821083aa31e53ddd896a:2037834263,6cf6620443e4021005298243064d3d34:38917591,83b95ca22150c21041c562c63822ae73:206479658,13b577da109c82103a54c05e74a92ae8:38917591,8add1d4899800210f9b7c5c6b1adf16b:-1662571732,db4c19442e800210dd2c82968a76b09f:206479658,aa9d576e93eb311010fc09b8dd01c2c1:1241951231,14fc172e73eb31104930d2d5eb6a01b5:-575344296,82489fe2faab311042913a2dfa6b3b1e:1115865968,43fc966188273110fbbd7a6bcf37f685:1038271404,923eaffc61efb5107f6e273a37b96089:1520701797,9f07a3b464efb5100830da0f56d5083e:-1959910458,6193f7e4b2ef75106584e7c027ed39b4:1520701797,5c3ee7ec46af7510109d0a3f9cd2dcc0:1322036235,e2b263a06eaf751000f3915430a68f99:1520701797,51dccaa4392b7510c60148160d0497d6:1821666405</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-03-05 08:15:37</sys_created_on>
        <sys_db_object display_value="" name="sys_ui_script">sys_ui_script</sys_db_object>
        <sys_id>13cca0d5d79b4525a8247f7a0b2e2769</sys_id>
        <sys_metadata>acbc8ea4972b75109b137076f053af0c</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>x_831378_kore_ai_0.kore-ai-sdk4.min.js</sys_name>
        <sys_package display_value="IT Assist" source="x_831378_kore_ai_0">5db40dbc2f21111051c859a72799b60c</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="IT Assist">5db40dbc2f21111051c859a72799b60c</sys_scope>
        <sys_scope_delete/>
        <sys_update_name>sys_ui_script_acbc8ea4972b75109b137076f053af0c</sys_update_name>
        <sys_update_version display_value="sys_ui_script_acbc8ea4972b75109b137076f053af0c">e71c90b49720c2109b137076f053af3a</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-03-05 08:15:37</sys_updated_on>
    </sys_metadata_delete>
</record_update>
